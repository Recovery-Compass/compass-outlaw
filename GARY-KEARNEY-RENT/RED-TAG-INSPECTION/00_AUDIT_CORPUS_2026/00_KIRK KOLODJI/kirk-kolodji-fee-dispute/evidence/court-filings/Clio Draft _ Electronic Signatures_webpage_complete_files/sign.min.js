/*! latest 2025-11-27-40 */
!function(root,factory){"function"==typeof define&&define.amd?define(factory):"object"==typeof exports?module.exports=factory(require,exports,module):root.Tether=factory()}(this,function(require,exports,module){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function getScrollParents(el){var computedStyle=getComputedStyle(el)||{},position=computedStyle.position,parents=[];if("fixed"===position)return[el];for(var parent=el;(parent=parent.parentNode)&&parent&&1===parent.nodeType;){var style=void 0;try{style=getComputedStyle(parent)}catch(err){}if("undefined"==typeof style||null===style)return parents.push(parent),parents;var _style=style,overflow=_style.overflow,overflowX=_style.overflowX,overflowY=_style.overflowY;/(auto|scroll)/.test(overflow+overflowY+overflowX)&&("absolute"!==position||["relative","absolute","fixed"].indexOf(style.position)>=0)&&parents.push(parent)}return parents.push(document.body),parents}function removeUtilElements(){zeroElement&&document.body.removeChild(zeroElement),zeroElement=null}function getBounds(el){var doc=void 0;el===document?(doc=document,el=document.documentElement):doc=el.ownerDocument;var docEl=doc.documentElement,box={},rect=el.getBoundingClientRect();for(var k in rect)box[k]=rect[k];var origin=getOrigin();return box.top-=origin.top,box.left-=origin.left,"undefined"==typeof box.width&&(box.width=document.body.scrollWidth-box.left-box.right),"undefined"==typeof box.height&&(box.height=document.body.scrollHeight-box.top-box.bottom),box.top=box.top-docEl.clientTop,box.left=box.left-docEl.clientLeft,box.right=doc.body.clientWidth-box.width-box.left,box.bottom=doc.body.clientHeight-box.height-box.top,box}function getOffsetParent(el){return el.offsetParent||document.documentElement}function getScrollBarSize(){var inner=document.createElement("div");inner.style.width="100%",inner.style.height="200px";var outer=document.createElement("div");extend(outer.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),outer.appendChild(inner),document.body.appendChild(outer);var widthContained=inner.offsetWidth;outer.style.overflow="scroll";var widthScroll=inner.offsetWidth;widthContained===widthScroll&&(widthScroll=outer.clientWidth),document.body.removeChild(outer);var width=widthContained-widthScroll;return{width:width,height:width}}function extend(){var out=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],args=[];return Array.prototype.push.apply(args,arguments),args.slice(1).forEach(function(obj){if(obj)for(var key in obj)({}).hasOwnProperty.call(obj,key)&&(out[key]=obj[key])}),out}function removeClass(el,name){if("undefined"!=typeof el.classList)name.split(" ").forEach(function(cls){cls.trim()&&el.classList.remove(cls)});else{var regex=new RegExp("(^| )"+name.split(" ").join("|")+"( |$)","gi"),className=getClassName(el).replace(regex," ");setClassName(el,className)}}function addClass(el,name){if("undefined"!=typeof el.classList)name.split(" ").forEach(function(cls){cls.trim()&&el.classList.add(cls)});else{removeClass(el,name);var cls=getClassName(el)+(" "+name);setClassName(el,cls)}}function hasClass(el,name){if("undefined"!=typeof el.classList)return el.classList.contains(name);var className=getClassName(el);return new RegExp("(^| )"+name+"( |$)","gi").test(className)}function getClassName(el){return el.className instanceof SVGAnimatedString?el.className.baseVal:el.className}function setClassName(el,className){el.setAttribute("class",className)}function updateClasses(el,add,all){all.forEach(function(cls){add.indexOf(cls)===-1&&hasClass(el,cls)&&removeClass(el,cls)}),add.forEach(function(cls){hasClass(el,cls)||addClass(el,cls)})}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function within(a,b){var diff=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return a+diff>=b&&b>=a-diff}function now(){return"undefined"!=typeof performance&&"undefined"!=typeof performance.now?performance.now():+new Date}function addOffset(){for(var out={top:0,left:0},_len=arguments.length,offsets=Array(_len),_key=0;_key<_len;_key++)offsets[_key]=arguments[_key];return offsets.forEach(function(_ref){var top=_ref.top,left=_ref.left;"string"==typeof top&&(top=parseFloat(top,10)),"string"==typeof left&&(left=parseFloat(left,10)),out.top+=top,out.left+=left}),out}function offsetToPx(offset,size){return"string"==typeof offset.left&&offset.left.indexOf("%")!==-1&&(offset.left=parseFloat(offset.left,10)/100*size.width),"string"==typeof offset.top&&offset.top.indexOf("%")!==-1&&(offset.top=parseFloat(offset.top,10)/100*size.height),offset}function getBoundingRect(tether,to){return"scrollParent"===to?to=tether.scrollParents[0]:"window"===to&&(to=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),to===document&&(to=to.documentElement),"undefined"!=typeof to.nodeType&&!function(){var size=getBounds(to),pos=size,style=getComputedStyle(to);to=[pos.left,pos.top,size.width+pos.left,size.height+pos.top],BOUNDS_FORMAT.forEach(function(side,i){side=side[0].toUpperCase()+side.substr(1),"Top"===side||"Left"===side?to[i]+=parseFloat(style["border"+side+"Width"]):to[i]-=parseFloat(style["border"+side+"Width"])})}(),to}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),TetherBase=void 0;"undefined"==typeof TetherBase&&(TetherBase={modules:[]});var zeroElement=null,uniqueId=function(){var id=0;return function(){return++id}}(),zeroPosCache={},getOrigin=function(){var node=zeroElement;node||(node=document.createElement("div"),node.setAttribute("data-tether-id",uniqueId()),extend(node.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(node),zeroElement=node);var id=node.getAttribute("data-tether-id");if("undefined"==typeof zeroPosCache[id]){zeroPosCache[id]={};var rect=node.getBoundingClientRect();for(var k in rect)zeroPosCache[id][k]=rect[k];defer(function(){delete zeroPosCache[id]})}return zeroPosCache[id]},deferred=[],defer=function(fn){deferred.push(fn)},flush=function(){for(var fn=void 0;fn=deferred.pop();)fn()},Evented=function(){function Evented(){_classCallCheck(this,Evented)}return _createClass(Evented,[{key:"on",value:function(event,handler,ctx){var once=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];"undefined"==typeof this.bindings&&(this.bindings={}),"undefined"==typeof this.bindings[event]&&(this.bindings[event]=[]),this.bindings[event].push({handler:handler,ctx:ctx,once:once})}},{key:"once",value:function(event,handler,ctx){this.on(event,handler,ctx,!0)}},{key:"off",value:function(event,handler){if("undefined"==typeof this.bindings||"undefined"==typeof this.bindings[event])if("undefined"==typeof handler)delete this.bindings[event];else for(var i=0;i<this.bindings[event].length;)this.bindings[event][i].handler===handler?this.bindings[event].splice(i,1):++i}},{key:"trigger",value:function(event){if("undefined"!=typeof this.bindings&&this.bindings[event]){for(var i=0,_len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];for(;i<this.bindings[event].length;){var _bindings$event$i=this.bindings[event][i],handler=_bindings$event$i.handler,ctx=_bindings$event$i.ctx,once=_bindings$event$i.once,context=ctx;"undefined"==typeof context&&(context=this),handler.apply(context,args),once?this.bindings[event].splice(i,1):++i}}}}]),Evented}();TetherBase.Utils={getScrollParents:getScrollParents,getBounds:getBounds,getOffsetParent:getOffsetParent,extend:extend,addClass:addClass,removeClass:removeClass,hasClass:hasClass,updateClasses:updateClasses,defer:defer,flush:flush,uniqueId:uniqueId,Evented:Evented,getScrollBarSize:getScrollBarSize,removeUtilElements:removeUtilElements};var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x6,_x7,_x8){for(var _again=!0;_again;){var object=_x6,property=_x7,receiver=_x8;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0!==desc){if("value"in desc)return desc.value;var getter=desc.get;if(void 0===getter)return;return getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return;_x6=parent,_x7=property,_x8=receiver,_again=!0,desc=parent=void 0}};if("undefined"==typeof TetherBase)throw new Error("You must include the utils.js file before tether.js");var _TetherBase$Utils=TetherBase.Utils,getScrollParents=_TetherBase$Utils.getScrollParents,getBounds=_TetherBase$Utils.getBounds,getOffsetParent=_TetherBase$Utils.getOffsetParent,extend=_TetherBase$Utils.extend,addClass=_TetherBase$Utils.addClass,removeClass=_TetherBase$Utils.removeClass,updateClasses=_TetherBase$Utils.updateClasses,defer=_TetherBase$Utils.defer,flush=_TetherBase$Utils.flush,getScrollBarSize=_TetherBase$Utils.getScrollBarSize,removeUtilElements=_TetherBase$Utils.removeUtilElements,transformKey=function(){if("undefined"==typeof document)return"";for(var el=document.createElement("div"),transforms=["transform","webkitTransform","OTransform","MozTransform","msTransform"],i=0;i<transforms.length;++i){var key=transforms[i];if(void 0!==el.style[key])return key}}(),tethers=[],position=function(){tethers.forEach(function(tether){tether.position(!1)}),flush()};!function(){var lastCall=null,lastDuration=null,pendingTimeout=null,tick=function tick(){return"undefined"!=typeof lastDuration&&lastDuration>16?(lastDuration=Math.min(lastDuration-16,250),void(pendingTimeout=setTimeout(tick,250))):void("undefined"!=typeof lastCall&&now()-lastCall<10||(null!=pendingTimeout&&(clearTimeout(pendingTimeout),pendingTimeout=null),lastCall=now(),position(),lastDuration=now()-lastCall))};"undefined"!=typeof window&&"undefined"!=typeof window.addEventListener&&["resize","scroll","touchmove"].forEach(function(event){window.addEventListener(event,tick)})}();var MIRROR_LR={center:"center",left:"right",right:"left"},MIRROR_TB={middle:"middle",top:"bottom",bottom:"top"},OFFSET_MAP={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},autoToFixedAttachment=function(attachment,relativeToAttachment){var left=attachment.left,top=attachment.top;return"auto"===left&&(left=MIRROR_LR[relativeToAttachment.left]),"auto"===top&&(top=MIRROR_TB[relativeToAttachment.top]),{left:left,top:top}},attachmentToOffset=function(attachment){var left=attachment.left,top=attachment.top;return"undefined"!=typeof OFFSET_MAP[attachment.left]&&(left=OFFSET_MAP[attachment.left]),"undefined"!=typeof OFFSET_MAP[attachment.top]&&(top=OFFSET_MAP[attachment.top]),{left:left,top:top}},parseOffset=function(value){var _value$split=value.split(" "),_value$split2=_slicedToArray(_value$split,2),top=_value$split2[0],left=_value$split2[1];return{top:top,left:left}},parseAttachment=parseOffset,TetherClass=function(_Evented){function TetherClass(options){var _this=this;_classCallCheck(this,TetherClass),_get(Object.getPrototypeOf(TetherClass.prototype),"constructor",this).call(this),this.position=this.position.bind(this),tethers.push(this),this.history=[],this.setOptions(options,!1),TetherBase.modules.forEach(function(module){"undefined"!=typeof module.initialize&&module.initialize.call(_this)}),this.position()}return _inherits(TetherClass,_Evented),_createClass(TetherClass,[{key:"getClass",value:function(){var key=arguments.length<=0||void 0===arguments[0]?"":arguments[0],classes=this.options.classes;return"undefined"!=typeof classes&&classes[key]?this.options.classes[key]:this.options.classPrefix?this.options.classPrefix+"-"+key:key}},{key:"setOptions",value:function(options){var _this2=this,pos=arguments.length<=1||void 0===arguments[1]||arguments[1],defaults={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"};this.options=extend(defaults,options);var _options=this.options,element=_options.element,target=_options.target,targetModifier=_options.targetModifier;if(this.element=element,this.target=target,this.targetModifier=targetModifier,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(key){if("undefined"==typeof _this2[key])throw new Error("Tether Error: Both element and target must be defined");"undefined"!=typeof _this2[key].jquery?_this2[key]=_this2[key][0]:"string"==typeof _this2[key]&&(_this2[key]=document.querySelector(_this2[key]))}),addClass(this.element,this.getClass("element")),this.options.addTargetClasses!==!1&&addClass(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=parseAttachment(this.options.targetAttachment),this.attachment=parseAttachment(this.options.attachment),this.offset=parseOffset(this.options.offset),this.targetOffset=parseOffset(this.options.targetOffset),"undefined"!=typeof this.scrollParents&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=getScrollParents(this.target),this.options.enabled!==!1&&this.enable(pos)}},{key:"getTargetBounds",value:function(){if("undefined"==typeof this.targetModifier)return getBounds(this.target);if("visible"===this.targetModifier){if(this.target===document.body)return{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth};var bounds=getBounds(this.target),out={height:bounds.height,width:bounds.width,top:bounds.top,left:bounds.left};return out.height=Math.min(out.height,bounds.height-(pageYOffset-bounds.top)),out.height=Math.min(out.height,bounds.height-(bounds.top+bounds.height-(pageYOffset+innerHeight))),out.height=Math.min(innerHeight,out.height),out.height-=2,out.width=Math.min(out.width,bounds.width-(pageXOffset-bounds.left)),out.width=Math.min(out.width,bounds.width-(bounds.left+bounds.width-(pageXOffset+innerWidth))),out.width=Math.min(innerWidth,out.width),out.width-=2,out.top<pageYOffset&&(out.top=pageYOffset),out.left<pageXOffset&&(out.left=pageXOffset),out}if("scroll-handle"===this.targetModifier){var bounds=void 0,target=this.target;target===document.body?(target=document.documentElement,bounds={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):bounds=getBounds(target);var style=getComputedStyle(target),hasBottomScroll=target.scrollWidth>target.clientWidth||[style.overflow,style.overflowX].indexOf("scroll")>=0||this.target!==document.body,scrollBottom=0;hasBottomScroll&&(scrollBottom=15);var height=bounds.height-parseFloat(style.borderTopWidth)-parseFloat(style.borderBottomWidth)-scrollBottom,out={width:15,height:.975*height*(height/target.scrollHeight),left:bounds.left+bounds.width-parseFloat(style.borderLeftWidth)-15},fitAdj=0;height<408&&this.target===document.body&&(fitAdj=-11e-5*Math.pow(height,2)-.00727*height+22.58),this.target!==document.body&&(out.height=Math.max(out.height,24));var scrollPercentage=this.target.scrollTop/(target.scrollHeight-height);return out.top=scrollPercentage*(height-out.height-fitAdj)+bounds.top+parseFloat(style.borderTopWidth),this.target===document.body&&(out.height=Math.max(out.height,24)),out}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(k,getter){return"undefined"==typeof this._cache&&(this._cache={}),"undefined"==typeof this._cache[k]&&(this._cache[k]=getter.call(this)),this._cache[k]}},{key:"enable",value:function(){var _this3=this,pos=arguments.length<=0||void 0===arguments[0]||arguments[0];this.options.addTargetClasses!==!1&&addClass(this.target,this.getClass("enabled")),addClass(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach(function(parent){parent!==document&&parent.addEventListener("scroll",_this3.position)}),pos&&this.position()}},{key:"disable",value:function(){var _this4=this;removeClass(this.target,this.getClass("enabled")),removeClass(this.element,this.getClass("enabled")),this.enabled=!1,"undefined"!=typeof this.scrollParents&&this.scrollParents.forEach(function(parent){parent.removeEventListener("scroll",_this4.position)})}},{key:"destroy",value:function(){var _this5=this;this.disable(),tethers.forEach(function(tether,i){tether===_this5&&tethers.splice(i,1)}),0===tethers.length&&removeUtilElements()}},{key:"updateAttachClasses",value:function(elementAttach,targetAttach){var _this6=this;elementAttach=elementAttach||this.attachment,targetAttach=targetAttach||this.targetAttachment;var sides=["left","top","bottom","right","middle","center"];"undefined"!=typeof this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),"undefined"==typeof this._addAttachClasses&&(this._addAttachClasses=[]);var add=this._addAttachClasses;elementAttach.top&&add.push(this.getClass("element-attached")+"-"+elementAttach.top),elementAttach.left&&add.push(this.getClass("element-attached")+"-"+elementAttach.left),targetAttach.top&&add.push(this.getClass("target-attached")+"-"+targetAttach.top),targetAttach.left&&add.push(this.getClass("target-attached")+"-"+targetAttach.left);var all=[];sides.forEach(function(side){all.push(_this6.getClass("element-attached")+"-"+side),all.push(_this6.getClass("target-attached")+"-"+side)}),defer(function(){"undefined"!=typeof _this6._addAttachClasses&&(updateClasses(_this6.element,_this6._addAttachClasses,all),_this6.options.addTargetClasses!==!1&&updateClasses(_this6.target,_this6._addAttachClasses,all),delete _this6._addAttachClasses)})}},{key:"position",value:function(){var _this7=this,flushChanges=arguments.length<=0||void 0===arguments[0]||arguments[0];if(this.enabled){this.clearCache();var targetAttachment=autoToFixedAttachment(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,targetAttachment);var elementPos=this.cache("element-bounds",function(){return getBounds(_this7.element)}),width=elementPos.width,height=elementPos.height;if(0===width&&0===height&&"undefined"!=typeof this.lastSize){var _lastSize=this.lastSize;width=_lastSize.width,height=_lastSize.height}else this.lastSize={width:width,height:height};var targetPos=this.cache("target-bounds",function(){return _this7.getTargetBounds()}),targetSize=targetPos,offset=offsetToPx(attachmentToOffset(this.attachment),{width:width,height:height}),targetOffset=offsetToPx(attachmentToOffset(targetAttachment),targetSize),manualOffset=offsetToPx(this.offset,{width:width,height:height}),manualTargetOffset=offsetToPx(this.targetOffset,targetSize);offset=addOffset(offset,manualOffset),targetOffset=addOffset(targetOffset,manualTargetOffset);for(var left=targetPos.left+targetOffset.left-offset.left,top=targetPos.top+targetOffset.top-offset.top,i=0;i<TetherBase.modules.length;++i){var _module2=TetherBase.modules[i],ret=_module2.position.call(this,{left:left,top:top,targetAttachment:targetAttachment,targetPos:targetPos,elementPos:elementPos,offset:offset,targetOffset:targetOffset,manualOffset:manualOffset,manualTargetOffset:manualTargetOffset,scrollbarSize:scrollbarSize,attachment:this.attachment});if(ret===!1)return!1;"undefined"!=typeof ret&&"object"==typeof ret&&(top=ret.top,left=ret.left)}var next={page:{top:top,left:left},viewport:{top:top-pageYOffset,bottom:pageYOffset-top-height+innerHeight,left:left-pageXOffset,right:pageXOffset-left-width+innerWidth}},scrollbarSize=void 0;return document.body.scrollWidth>window.innerWidth&&(scrollbarSize=this.cache("scrollbar-size",getScrollBarSize),next.viewport.bottom-=scrollbarSize.height),document.body.scrollHeight>window.innerHeight&&(scrollbarSize=this.cache("scrollbar-size",getScrollBarSize),next.viewport.right-=scrollbarSize.width),["","static"].indexOf(document.body.style.position)!==-1&&["","static"].indexOf(document.body.parentElement.style.position)!==-1||(next.page.bottom=document.body.scrollHeight-top-height,next.page.right=document.body.scrollWidth-left-width),"undefined"!=typeof this.options.optimizations&&this.options.optimizations.moveElement!==!1&&"undefined"==typeof this.targetModifier&&!function(){var offsetParent=_this7.cache("target-offsetparent",function(){return getOffsetParent(_this7.target)}),offsetPosition=_this7.cache("target-offsetparent-bounds",function(){return getBounds(offsetParent)}),offsetParentStyle=getComputedStyle(offsetParent),offsetParentSize=offsetPosition,offsetBorder={};if(["Top","Left","Bottom","Right"].forEach(function(side){offsetBorder[side.toLowerCase()]=parseFloat(offsetParentStyle["border"+side+"Width"])}),offsetPosition.right=document.body.scrollWidth-offsetPosition.left-offsetParentSize.width+offsetBorder.right,offsetPosition.bottom=document.body.scrollHeight-offsetPosition.top-offsetParentSize.height+offsetBorder.bottom,next.page.top>=offsetPosition.top+offsetBorder.top&&next.page.bottom>=offsetPosition.bottom&&next.page.left>=offsetPosition.left+offsetBorder.left&&next.page.right>=offsetPosition.right){var scrollTop=offsetParent.scrollTop,scrollLeft=offsetParent.scrollLeft;next.offset={top:next.page.top-offsetPosition.top+scrollTop-offsetBorder.top,left:next.page.left-offsetPosition.left+scrollLeft-offsetBorder.left}}}(),this.move(next),this.history.unshift(next),this.history.length>3&&this.history.pop(),flushChanges&&flush(),!0}}},{key:"move",value:function(pos){var _this8=this;if("undefined"!=typeof this.element.parentNode){var same={};for(var type in pos){same[type]={};for(var key in pos[type]){for(var found=!1,i=0;i<this.history.length;++i){var point=this.history[i];if("undefined"!=typeof point[type]&&!within(point[type][key],pos[type][key])){found=!0;break}}found||(same[type][key]=!0)}}var css={top:"",left:"",right:"",bottom:""},transcribe=function(_same,_pos){var hasOptimizations="undefined"!=typeof _this8.options.optimizations,gpu=hasOptimizations?_this8.options.optimizations.gpu:null;if(gpu!==!1){var yPos=void 0,xPos=void 0;_same.top?(css.top=0,yPos=_pos.top):(css.bottom=0,yPos=-_pos.bottom),_same.left?(css.left=0,xPos=_pos.left):(css.right=0,xPos=-_pos.right),css[transformKey]="translateX("+Math.round(xPos)+"px) translateY("+Math.round(yPos)+"px)","msTransform"!==transformKey&&(css[transformKey]+=" translateZ(0)")}else _same.top?css.top=_pos.top+"px":css.bottom=_pos.bottom+"px",_same.left?css.left=_pos.left+"px":css.right=_pos.right+"px"},moved=!1;if((same.page.top||same.page.bottom)&&(same.page.left||same.page.right)?(css.position="absolute",transcribe(same.page,pos.page)):(same.viewport.top||same.viewport.bottom)&&(same.viewport.left||same.viewport.right)?(css.position="fixed",transcribe(same.viewport,pos.viewport)):"undefined"!=typeof same.offset&&same.offset.top&&same.offset.left?!function(){css.position="absolute";var offsetParent=_this8.cache("target-offsetparent",function(){return getOffsetParent(_this8.target)});getOffsetParent(_this8.element)!==offsetParent&&defer(function(){_this8.element.parentNode.removeChild(_this8.element),offsetParent.appendChild(_this8.element)}),transcribe(same.offset,pos.offset),moved=!0}():(css.position="absolute",transcribe({top:!0,left:!0},pos.page)),!moved){for(var offsetParentIsBody=!0,currentNode=this.element.parentNode;currentNode&&1===currentNode.nodeType&&"BODY"!==currentNode.tagName;){if("static"!==getComputedStyle(currentNode).position){offsetParentIsBody=!1;break}currentNode=currentNode.parentNode}offsetParentIsBody||(this.element.parentNode.removeChild(this.element),document.body.appendChild(this.element))}var writeCSS={},write=!1;for(var key in css){var val=css[key],elVal=this.element.style[key];elVal!==val&&(write=!0,writeCSS[key]=val)}write&&defer(function(){extend(_this8.element.style,writeCSS)})}}}]),TetherClass}(Evented);TetherClass.modules=[],TetherBase.position=position;var Tether=extend(TetherClass,TetherBase),_slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_TetherBase$Utils=TetherBase.Utils,getBounds=_TetherBase$Utils.getBounds,extend=_TetherBase$Utils.extend,updateClasses=_TetherBase$Utils.updateClasses,defer=_TetherBase$Utils.defer,BOUNDS_FORMAT=["left","top","right","bottom"];TetherBase.modules.push({position:function(_ref){var _this=this,top=_ref.top,left=_ref.left,targetAttachment=_ref.targetAttachment;if(!this.options.constraints)return!0;var _cache=this.cache("element-bounds",function(){return getBounds(_this.element)}),height=_cache.height,width=_cache.width;if(0===width&&0===height&&"undefined"!=typeof this.lastSize){var _lastSize=this.lastSize;width=_lastSize.width,height=_lastSize.height}var targetSize=this.cache("target-bounds",function(){return _this.getTargetBounds()}),targetHeight=targetSize.height,targetWidth=targetSize.width,allClasses=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(constraint){var outOfBoundsClass=constraint.outOfBoundsClass,pinnedClass=constraint.pinnedClass;outOfBoundsClass&&allClasses.push(outOfBoundsClass),pinnedClass&&allClasses.push(pinnedClass)}),allClasses.forEach(function(cls){["left","top","right","bottom"].forEach(function(side){allClasses.push(cls+"-"+side)})});var addClasses=[],tAttachment=extend({},targetAttachment),eAttachment=extend({},this.attachment);return this.options.constraints.forEach(function(constraint){var to=constraint.to,attachment=constraint.attachment,pin=constraint.pin;"undefined"==typeof attachment&&(attachment="");var changeAttachX=void 0,changeAttachY=void 0;if(attachment.indexOf(" ")>=0){var _attachment$split=attachment.split(" "),_attachment$split2=_slicedToArray(_attachment$split,2);changeAttachY=_attachment$split2[0],changeAttachX=_attachment$split2[1]}else changeAttachX=changeAttachY=attachment;var bounds=getBoundingRect(_this,to);"target"!==changeAttachY&&"both"!==changeAttachY||(top<bounds[1]&&"top"===tAttachment.top&&(top+=targetHeight,tAttachment.top="bottom"),top+height>bounds[3]&&"bottom"===tAttachment.top&&(top-=targetHeight,tAttachment.top="top")),"together"===changeAttachY&&("top"===tAttachment.top&&("bottom"===eAttachment.top&&top<bounds[1]?(top+=targetHeight,tAttachment.top="bottom",top+=height,eAttachment.top="top"):"top"===eAttachment.top&&top+height>bounds[3]&&top-(height-targetHeight)>=bounds[1]&&(top-=height-targetHeight,tAttachment.top="bottom",eAttachment.top="bottom")),"bottom"===tAttachment.top&&("top"===eAttachment.top&&top+height>bounds[3]?(top-=targetHeight,tAttachment.top="top",top-=height,eAttachment.top="bottom"):"bottom"===eAttachment.top&&top<bounds[1]&&top+(2*height-targetHeight)<=bounds[3]&&(top+=height-targetHeight,tAttachment.top="top",eAttachment.top="top")),"middle"===tAttachment.top&&(top+height>bounds[3]&&"top"===eAttachment.top?(top-=height,eAttachment.top="bottom"):top<bounds[1]&&"bottom"===eAttachment.top&&(top+=height,eAttachment.top="top"))),"target"!==changeAttachX&&"both"!==changeAttachX||(left<bounds[0]&&"left"===tAttachment.left&&(left+=targetWidth,tAttachment.left="right"),left+width>bounds[2]&&"right"===tAttachment.left&&(left-=targetWidth,tAttachment.left="left")),"together"===changeAttachX&&(left<bounds[0]&&"left"===tAttachment.left?"right"===eAttachment.left?(left+=targetWidth,tAttachment.left="right",left+=width,eAttachment.left="left"):"left"===eAttachment.left&&(left+=targetWidth,tAttachment.left="right",left-=width,eAttachment.left="right"):left+width>bounds[2]&&"right"===tAttachment.left?"left"===eAttachment.left?(left-=targetWidth,tAttachment.left="left",left-=width,eAttachment.left="right"):"right"===eAttachment.left&&(left-=targetWidth,tAttachment.left="left",left+=width,eAttachment.left="left"):"center"===tAttachment.left&&(left+width>bounds[2]&&"left"===eAttachment.left?(left-=width,eAttachment.left="right"):left<bounds[0]&&"right"===eAttachment.left&&(left+=width,eAttachment.left="left"))),"element"!==changeAttachY&&"both"!==changeAttachY||(top<bounds[1]&&"bottom"===eAttachment.top&&(top+=height,eAttachment.top="top"),top+height>bounds[3]&&"top"===eAttachment.top&&(top-=height,eAttachment.top="bottom")),"element"!==changeAttachX&&"both"!==changeAttachX||(left<bounds[0]&&("right"===eAttachment.left?(left+=width,eAttachment.left="left"):"center"===eAttachment.left&&(left+=width/2,eAttachment.left="left")),left+width>bounds[2]&&("left"===eAttachment.left?(left-=width,eAttachment.left="right"):"center"===eAttachment.left&&(left-=width/2,eAttachment.left="right"))),"string"==typeof pin?pin=pin.split(",").map(function(p){return p.trim()}):pin===!0&&(pin=["top","left","right","bottom"]),pin=pin||[];var pinned=[],oob=[];top<bounds[1]&&(pin.indexOf("top")>=0?(top=bounds[1],pinned.push("top")):oob.push("top")),top+height>bounds[3]&&(pin.indexOf("bottom")>=0?(top=bounds[3]-height,pinned.push("bottom")):oob.push("bottom")),left<bounds[0]&&(pin.indexOf("left")>=0?(left=bounds[0],pinned.push("left")):oob.push("left")),left+width>bounds[2]&&(pin.indexOf("right")>=0?(left=bounds[2]-width,pinned.push("right")):oob.push("right")),pinned.length&&!function(){var pinnedClass=void 0;pinnedClass="undefined"!=typeof _this.options.pinnedClass?_this.options.pinnedClass:_this.getClass("pinned"),addClasses.push(pinnedClass),pinned.forEach(function(side){addClasses.push(pinnedClass+"-"+side)})}(),oob.length&&!function(){var oobClass=void 0;oobClass="undefined"!=typeof _this.options.outOfBoundsClass?_this.options.outOfBoundsClass:_this.getClass("out-of-bounds"),addClasses.push(oobClass),oob.forEach(function(side){addClasses.push(oobClass+"-"+side)})}(),(pinned.indexOf("left")>=0||pinned.indexOf("right")>=0)&&(eAttachment.left=tAttachment.left=!1),(pinned.indexOf("top")>=0||pinned.indexOf("bottom")>=0)&&(eAttachment.top=tAttachment.top=!1),tAttachment.top===targetAttachment.top&&tAttachment.left===targetAttachment.left&&eAttachment.top===_this.attachment.top&&eAttachment.left===_this.attachment.left||(_this.updateAttachClasses(eAttachment,tAttachment),
_this.trigger("update",{attachment:eAttachment,targetAttachment:tAttachment}))}),defer(function(){_this.options.addTargetClasses!==!1&&updateClasses(_this.target,addClasses,allClasses),updateClasses(_this.element,addClasses,allClasses)}),{top:top,left:left}}});var _TetherBase$Utils=TetherBase.Utils,getBounds=_TetherBase$Utils.getBounds,updateClasses=_TetherBase$Utils.updateClasses,defer=_TetherBase$Utils.defer;TetherBase.modules.push({position:function(_ref){var _this=this,top=_ref.top,left=_ref.left,_cache=this.cache("element-bounds",function(){return getBounds(_this.element)}),height=_cache.height,width=_cache.width,targetPos=this.getTargetBounds(),bottom=top+height,right=left+width,abutted=[];top<=targetPos.bottom&&bottom>=targetPos.top&&["left","right"].forEach(function(side){var targetPosSide=targetPos[side];targetPosSide!==left&&targetPosSide!==right||abutted.push(side)}),left<=targetPos.right&&right>=targetPos.left&&["top","bottom"].forEach(function(side){var targetPosSide=targetPos[side];targetPosSide!==top&&targetPosSide!==bottom||abutted.push(side)});var allClasses=[],addClasses=[],sides=["left","top","right","bottom"];return allClasses.push(this.getClass("abutted")),sides.forEach(function(side){allClasses.push(_this.getClass("abutted")+"-"+side)}),abutted.length&&addClasses.push(this.getClass("abutted")),abutted.forEach(function(side){addClasses.push(_this.getClass("abutted")+"-"+side)}),defer(function(){_this.options.addTargetClasses!==!1&&updateClasses(_this.target,addClasses,allClasses),updateClasses(_this.element,addClasses,allClasses)}),!0}});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i["return"]&&_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return TetherBase.modules.push({position:function(_ref){var top=_ref.top,left=_ref.left;if(this.options.shift){var shift=this.options.shift;"function"==typeof this.options.shift&&(shift=this.options.shift.call(this,{top:top,left:left}));var shiftTop=void 0,shiftLeft=void 0;if("string"==typeof shift){shift=shift.split(" "),shift[1]=shift[1]||shift[0];var _shift=shift,_shift2=_slicedToArray(_shift,2);shiftTop=_shift2[0],shiftLeft=_shift2[1],shiftTop=parseFloat(shiftTop,10),shiftLeft=parseFloat(shiftLeft,10)}else shiftTop=shift.top,shiftLeft=shift.left;return top+=shiftTop,left+=shiftLeft,{top:top,left:left}}}}),Tether}),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.tabindex","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.datepicker","ui.bootstrap.position","ui.bootstrap.datepickerPopup","ui.bootstrap.debounce","ui.bootstrap.multiMap","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.paging","ui.bootstrap.pager","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["uib/template/accordion/accordion-group.html","uib/template/accordion/accordion.html","uib/template/alert/alert.html","uib/template/carousel/carousel.html","uib/template/carousel/slide.html","uib/template/datepicker/datepicker.html","uib/template/datepicker/day.html","uib/template/datepicker/month.html","uib/template/datepicker/year.html","uib/template/datepickerPopup/popup.html","uib/template/modal/window.html","uib/template/pager/pager.html","uib/template/pagination/pagination.html","uib/template/tooltip/tooltip-html-popup.html","uib/template/tooltip/tooltip-popup.html","uib/template/tooltip/tooltip-template-popup.html","uib/template/popover/popover-html.html","uib/template/popover/popover-template.html","uib/template/popover/popover.html","uib/template/progressbar/bar.html","uib/template/progressbar/progress.html","uib/template/progressbar/progressbar.html","uib/template/rating/rating.html","uib/template/tabs/tab.html","uib/template/tabs/tabset.html","uib/template/timepicker/timepicker.html","uib/template/typeahead/typeahead-match.html","uib/template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$q","$parse","$injector",function($animate,$q,$parse,$injector){var $animateCss=$injector.has("$animateCss")?$injector.get("$animateCss"):null;return{link:function(scope,element,attrs){function init(){horizontal=!!("horizontal"in attrs),horizontal?(css={width:""},cssTo={width:"0"}):(css={height:""},cssTo={height:"0"}),scope.$eval(attrs.uibCollapse)||element.addClass("in").addClass("collapse").attr("aria-expanded",!0).attr("aria-hidden",!1).css(css)}function getScrollFromElement(element){return horizontal?{width:element.scrollWidth+"px"}:{height:element.scrollHeight+"px"}}function expand(){element.hasClass("collapse")&&element.hasClass("in")||$q.resolve(expandingExpr(scope)).then(function(){element.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),$animateCss?$animateCss(element,{addClass:"in",easing:"ease",css:{overflow:"hidden"},to:getScrollFromElement(element[0])}).start()["finally"](expandDone):$animate.addClass(element,"in",{css:{overflow:"hidden"},to:getScrollFromElement(element[0])}).then(expandDone)},angular.noop)}function expandDone(){element.removeClass("collapsing").addClass("collapse").css(css),expandedExpr(scope)}function collapse(){return element.hasClass("collapse")||element.hasClass("in")?void $q.resolve(collapsingExpr(scope)).then(function(){element.css(getScrollFromElement(element[0])).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),$animateCss?$animateCss(element,{removeClass:"in",to:cssTo}).start()["finally"](collapseDone):$animate.removeClass(element,"in",{to:cssTo}).then(collapseDone)},angular.noop):collapseDone()}function collapseDone(){element.css(cssTo),element.removeClass("collapsing").addClass("collapse"),collapsedExpr(scope)}var expandingExpr=$parse(attrs.expanding),expandedExpr=$parse(attrs.expanded),collapsingExpr=$parse(attrs.collapsing),collapsedExpr=$parse(attrs.collapsed),horizontal=!1,css={},cssTo={};init(),scope.$watch(attrs.uibCollapse,function(shouldCollapse){shouldCollapse?collapse():expand()})}}}]),angular.module("ui.bootstrap.tabindex",[]).directive("uibTabindexToggle",function(){return{restrict:"A",link:function(scope,elem,attrs){attrs.$observe("disabled",function(disabled){attrs.$set("tabindex",disabled?-1:null)})}}}),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse","ui.bootstrap.tabindex"]).constant("uibAccordionConfig",{closeOthers:!0}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function($scope,$attrs,accordionConfig){this.groups=[],this.closeOthers=function(openGroup){var closeOthers=angular.isDefined($attrs.closeOthers)?$scope.$eval($attrs.closeOthers):accordionConfig.closeOthers;closeOthers&&angular.forEach(this.groups,function(group){group!==openGroup&&(group.isOpen=!1)})},this.addGroup=function(groupScope){var that=this;this.groups.push(groupScope),groupScope.$on("$destroy",function(event){that.removeGroup(groupScope)})},this.removeGroup=function(group){var index=this.groups.indexOf(group);index!==-1&&this.groups.splice(index,1)}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:!0,restrict:"A",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/accordion/accordion-group.html"},scope:{heading:"@",panelClass:"@?",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(element){this.heading=element}},link:function(scope,element,attrs,accordionCtrl){element.addClass("panel"),accordionCtrl.addGroup(scope),scope.openClass=attrs.openClass||"panel-open",scope.panelClass=attrs.panelClass||"panel-default",scope.$watch("isOpen",function(value){element.toggleClass(scope.openClass,!!value),value&&accordionCtrl.closeOthers(scope)}),scope.toggleOpen=function($event){scope.isDisabled||$event&&32!==$event.which||(scope.isOpen=!scope.isOpen)};var id="accordiongroup-"+scope.$id+"-"+Math.floor(1e4*Math.random());scope.headingId=id+"-tab",scope.panelId=id+"-panel"}}}).directive("uibAccordionHeading",function(){return{transclude:!0,template:"",replace:!0,require:"^uibAccordionGroup",link:function(scope,element,attrs,accordionGroupCtrl,transclude){accordionGroupCtrl.setHeading(transclude(scope,angular.noop))}}}).directive("uibAccordionTransclude",function(){function getHeaderSelectors(){return"uib-accordion-header,data-uib-accordion-header,x-uib-accordion-header,uib\\:accordion-header,[uib-accordion-header],[data-uib-accordion-header],[x-uib-accordion-header]"}return{require:"^uibAccordionGroup",link:function(scope,element,attrs,controller){scope.$watch(function(){return controller[attrs.uibAccordionTransclude]},function(heading){if(heading){var elem=angular.element(element[0].querySelector(getHeaderSelectors()));elem.html(""),elem.append(heading)}})}}}),angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$element","$attrs","$interpolate","$timeout",function($scope,$element,$attrs,$interpolate,$timeout){$scope.closeable=!!$attrs.close,$element.addClass("alert"),$attrs.$set("role","alert"),$scope.closeable&&$element.addClass("alert-dismissible");var dismissOnTimeout=angular.isDefined($attrs.dismissOnTimeout)?$interpolate($attrs.dismissOnTimeout)($scope.$parent):null;dismissOnTimeout&&$timeout(function(){$scope.close()},parseInt(dismissOnTimeout,10))}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",restrict:"A",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/alert/alert.html"},transclude:!0,scope:{close:"&"}}}),angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(buttonConfig){this.activeClass=buttonConfig.activeClass||"active",this.toggleEvent=buttonConfig.toggleEvent||"click"}]).directive("uibBtnRadio",["$parse",function($parse){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(scope,element,attrs,ctrls){var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1],uncheckableExpr=$parse(attrs.uibUncheckable);element.find("input").css({display:"none"}),ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,scope.$eval(attrs.uibBtnRadio)))},element.on(buttonsCtrl.toggleEvent,function(){if(!attrs.disabled){var isActive=element.hasClass(buttonsCtrl.activeClass);isActive&&!angular.isDefined(attrs.uncheckable)||scope.$apply(function(){ngModelCtrl.$setViewValue(isActive?null:scope.$eval(attrs.uibBtnRadio)),ngModelCtrl.$render()})}}),attrs.uibUncheckable&&scope.$watch(uncheckableExpr,function(uncheckable){attrs.$set("uncheckable",uncheckable?"":void 0)})}}}]).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(scope,element,attrs,ctrls){function getTrueValue(){return getCheckboxValue(attrs.btnCheckboxTrue,!0)}function getFalseValue(){return getCheckboxValue(attrs.btnCheckboxFalse,!1)}function getCheckboxValue(attribute,defaultValue){return angular.isDefined(attribute)?scope.$eval(attribute):defaultValue}var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1];element.find("input").css({display:"none"}),ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,getTrueValue()))},element.on(buttonsCtrl.toggleEvent,function(){attrs.disabled||scope.$apply(function(){ngModelCtrl.$setViewValue(element.hasClass(buttonsCtrl.activeClass)?getFalseValue():getTrueValue()),ngModelCtrl.$render()})})}}}),angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$timeout","$animate",function($scope,$element,$interval,$timeout,$animate){function setActive(index){for(var i=0;i<slides.length;i++)slides[i].slide.active=i===index}function goNext(slide,index,direction){if(!destroyed){if(angular.extend(slide,{direction:direction}),angular.extend(slides[currentIndex].slide||{},{direction:direction}),$animate.enabled($element)&&!$scope.$currentTransition&&slides[index].element&&self.slides.length>1){slides[index].element.data(SLIDE_DIRECTION,slide.direction);var currentIdx=self.getCurrentIndex();angular.isNumber(currentIdx)&&slides[currentIdx].element&&slides[currentIdx].element.data(SLIDE_DIRECTION,slide.direction),$scope.$currentTransition=!0,$animate.on("addClass",slides[index].element,function(element,phase){"close"===phase&&($scope.$currentTransition=null,$animate.off("addClass",element))})}$scope.active=slide.index,currentIndex=slide.index,setActive(index),restartTimer()}}function findSlideIndex(slide){for(var i=0;i<slides.length;i++)if(slides[i].slide===slide)return i}function resetTimer(){currentInterval&&($interval.cancel(currentInterval),currentInterval=null)}function resetTransition(slides){slides.length||($scope.$currentTransition=null)}function restartTimer(){resetTimer();var interval=+$scope.interval;!isNaN(interval)&&interval>0&&(currentInterval=$interval(timerFn,interval))}function timerFn(){var interval=+$scope.interval;isPlaying&&!isNaN(interval)&&interval>0&&slides.length?$scope.next():$scope.pause()}var currentInterval,isPlaying,self=this,slides=self.slides=$scope.slides=[],SLIDE_DIRECTION="uib-slideDirection",currentIndex=$scope.active,destroyed=!1;$element.addClass("carousel"),self.addSlide=function(slide,element){slides.push({slide:slide,element:element}),slides.sort(function(a,b){return+a.slide.index-+b.slide.index}),(slide.index===$scope.active||1===slides.length&&!angular.isNumber($scope.active))&&($scope.$currentTransition&&($scope.$currentTransition=null),currentIndex=slide.index,$scope.active=slide.index,setActive(currentIndex),self.select(slides[findSlideIndex(slide)]),1===slides.length&&$scope.play())},self.getCurrentIndex=function(){for(var i=0;i<slides.length;i++)if(slides[i].slide.index===currentIndex)return i},self.next=$scope.next=function(){var newIndex=(self.getCurrentIndex()+1)%slides.length;return 0===newIndex&&$scope.noWrap()?void $scope.pause():self.select(slides[newIndex],"next")},self.prev=$scope.prev=function(){var newIndex=self.getCurrentIndex()-1<0?slides.length-1:self.getCurrentIndex()-1;return $scope.noWrap()&&newIndex===slides.length-1?void $scope.pause():self.select(slides[newIndex],"prev")},self.removeSlide=function(slide){var index=findSlideIndex(slide);slides.splice(index,1),slides.length>0&&currentIndex===index?index>=slides.length?(currentIndex=slides.length-1,$scope.active=currentIndex,setActive(currentIndex),self.select(slides[slides.length-1])):(currentIndex=index,$scope.active=currentIndex,setActive(currentIndex),self.select(slides[index])):currentIndex>index&&(currentIndex--,$scope.active=currentIndex),0===slides.length&&(currentIndex=null,$scope.active=null)},self.select=$scope.select=function(nextSlide,direction){var nextIndex=findSlideIndex(nextSlide.slide);void 0===direction&&(direction=nextIndex>self.getCurrentIndex()?"next":"prev"),nextSlide.slide.index===currentIndex||$scope.$currentTransition||goNext(nextSlide.slide,nextIndex,direction)},$scope.indexOfSlide=function(slide){return+slide.slide.index},$scope.isActive=function(slide){return $scope.active===slide.slide.index},$scope.isPrevDisabled=function(){return 0===$scope.active&&$scope.noWrap()},$scope.isNextDisabled=function(){return $scope.active===slides.length-1&&$scope.noWrap()},$scope.pause=function(){$scope.noPause||(isPlaying=!1,resetTimer())},$scope.play=function(){isPlaying||(isPlaying=!0,restartTimer())},$element.on("mouseenter",$scope.pause),$element.on("mouseleave",$scope.play),$scope.$on("$destroy",function(){destroyed=!0,resetTimer()}),$scope.$watch("noTransition",function(noTransition){$animate.enabled($element,!noTransition)}),$scope.$watch("interval",restartTimer),$scope.$watchCollection("slides",resetTransition),$scope.$watch("active",function(index){if(angular.isNumber(index)&&currentIndex!==index){for(var i=0;i<slides.length;i++)if(slides[i].slide.index===index){index=i;break}var slide=slides[index];slide&&(setActive(index),self.select(slides[index]),currentIndex=index)}})}]).directive("uibCarousel",function(){return{transclude:!0,controller:"UibCarouselController",controllerAs:"carousel",restrict:"A",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/carousel/carousel.html"},scope:{active:"=",interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}).directive("uibSlide",["$animate",function($animate){return{require:"^uibCarousel",restrict:"A",transclude:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/carousel/slide.html"},scope:{actual:"=?",index:"=?"},link:function(scope,element,attrs,carouselCtrl){element.addClass("item"),carouselCtrl.addSlide(scope,element),scope.$on("$destroy",function(){carouselCtrl.removeSlide(scope)}),scope.$watch("active",function(active){$animate[active?"addClass":"removeClass"](element,"active")})}}}]).animation(".item",["$animateCss",function($animateCss){function removeClass(element,className,callback){element.removeClass(className),callback&&callback()}var SLIDE_DIRECTION="uib-slideDirection";return{beforeAddClass:function(element,className,done){if("active"===className){var stopped=!1,direction=element.data(SLIDE_DIRECTION),directionClass="next"===direction?"left":"right",removeClassFn=removeClass.bind(this,element,directionClass+" "+direction,done);return element.addClass(direction),$animateCss(element,{addClass:directionClass}).start().done(removeClassFn),function(){stopped=!0}}done()},beforeRemoveClass:function(element,className,done){if("active"===className){var stopped=!1,direction=element.data(SLIDE_DIRECTION),directionClass="next"===direction?"left":"right",removeClassFn=removeClass.bind(this,element,directionClass,done);return $animateCss(element,{addClass:directionClass}).start().done(removeClassFn),function(){stopped=!0}}done()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","dateFilter","orderByFilter","filterFilter",function($log,$locale,dateFilter,orderByFilter,filterFilter){function getFormatCodeToRegex(key){return filterFilter(formatCodeToRegex,{key:key},!0)[0]}function createParser(format){var map=[],regex=format.split(""),quoteIndex=format.indexOf("'");if(quoteIndex>-1){var inLiteral=!1;format=format.split("");for(var i=quoteIndex;i<format.length;i++)inLiteral?("'"===format[i]&&(i+1<format.length&&"'"===format[i+1]?(format[i+1]="$",regex[i+1]=""):(regex[i]="",inLiteral=!1)),format[i]="$"):"'"===format[i]&&(format[i]="$",regex[i]="",inLiteral=!0);format=format.join("")}return angular.forEach(formatCodeToRegex,function(data){var index=format.indexOf(data.key);if(index>-1){format=format.split(""),regex[index]="("+data.regex+")",format[index]="$";for(var i=index+1,n=index+data.key.length;i<n;i++)regex[i]="",format[i]="$";format=format.join(""),map.push({index:index,key:data.key,apply:data.apply,matcher:data.regex})}}),{regex:new RegExp("^"+regex.join("")+"$"),map:orderByFilter(map,"index")}}function createFormatter(format){for(var formatter,literalIdx,formatters=[],i=0;i<format.length;)if(angular.isNumber(literalIdx)){if("'"===format.charAt(i))(i+1>=format.length||"'"!==format.charAt(i+1))&&(formatters.push(constructLiteralFormatter(format,literalIdx,i)),literalIdx=null);else if(i===format.length)for(;literalIdx<format.length;)formatter=constructFormatterFromIdx(format,literalIdx),formatters.push(formatter),literalIdx=formatter.endIdx;i++}else"'"!==format.charAt(i)?(formatter=constructFormatterFromIdx(format,i),formatters.push(formatter.parser),i=formatter.endIdx):(literalIdx=i,i++);return formatters}function constructLiteralFormatter(format,literalIdx,endIdx){return function(){return format.substr(literalIdx+1,endIdx-literalIdx-1)}}function constructFormatterFromIdx(format,i){for(var currentPosStr=format.substr(i),j=0;j<formatCodeToRegex.length;j++)if(new RegExp("^"+formatCodeToRegex[j].key).test(currentPosStr)){var data=formatCodeToRegex[j];return{endIdx:i+data.key.length,parser:data.formatter}}return{endIdx:i+1,parser:function(){return currentPosStr.charAt(0)}}}function isValid(year,month,date){return!(date<1)&&(1===month&&date>28?29===date&&(year%4===0&&year%100!==0||year%400===0):3!==month&&5!==month&&8!==month&&10!==month||date<31)}function toInt(str){return parseInt(str,10)}function toTimezone(date,timezone){return date&&timezone?convertTimezoneToLocal(date,timezone):date}function fromTimezone(date,timezone){return date&&timezone?convertTimezoneToLocal(date,timezone,!0):date}function timezoneToOffset(timezone,fallback){timezone=timezone.replace(/:/g,"");var requestedTimezoneOffset=Date.parse("Jan 01, 1970 00:00:00 "+timezone)/6e4;return isNaN(requestedTimezoneOffset)?fallback:requestedTimezoneOffset}function addDateMinutes(date,minutes){return date=new Date(date.getTime()),date.setMinutes(date.getMinutes()+minutes),date}function convertTimezoneToLocal(date,timezone,reverse){reverse=reverse?-1:1;var dateTimezoneOffset=date.getTimezoneOffset(),timezoneOffset=timezoneToOffset(timezone,dateTimezoneOffset);return addDateMinutes(date,reverse*(timezoneOffset-dateTimezoneOffset))}var localeId,formatCodeToRegex,SPECIAL_CHARACTERS_REGEXP=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.init=function(){localeId=$locale.id,this.parsers={},this.formatters={},formatCodeToRegex=[{key:"yyyy",regex:"\\d{4}",apply:function(value){this.year=+value},formatter:function(date){var _date=new Date;return _date.setFullYear(Math.abs(date.getFullYear())),dateFilter(_date,"yyyy")}},{key:"yy",regex:"\\d{2}",apply:function(value){value=+value,this.year=value<69?value+2e3:value+1900},formatter:function(date){var _date=new Date;return _date.setFullYear(Math.abs(date.getFullYear())),dateFilter(_date,"yy")}},{key:"y",regex:"\\d{1,4}",apply:function(value){this.year=+value},formatter:function(date){var _date=new Date;return _date.setFullYear(Math.abs(date.getFullYear())),dateFilter(_date,"y")}},{key:"M!",regex:"0?[1-9]|1[0-2]",apply:function(value){this.month=value-1},formatter:function(date){var value=date.getMonth();return/^[0-9]$/.test(value)?dateFilter(date,"MM"):dateFilter(date,"M")}},{key:"MMMM",regex:$locale.DATETIME_FORMATS.MONTH.join("|"),apply:function(value){this.month=$locale.DATETIME_FORMATS.MONTH.indexOf(value)},formatter:function(date){return dateFilter(date,"MMMM")}},{key:"MMM",regex:$locale.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(value){this.month=$locale.DATETIME_FORMATS.SHORTMONTH.indexOf(value)},formatter:function(date){return dateFilter(date,"MMM")}},{key:"MM",regex:"0[1-9]|1[0-2]",apply:function(value){this.month=value-1},formatter:function(date){return dateFilter(date,"MM")}},{key:"M",regex:"[1-9]|1[0-2]",apply:function(value){this.month=value-1},formatter:function(date){return dateFilter(date,"M")}},{key:"d!",regex:"[0-2]?[0-9]{1}|3[0-1]{1}",apply:function(value){this.date=+value},formatter:function(date){var value=date.getDate();return/^[1-9]$/.test(value)?dateFilter(date,"dd"):dateFilter(date,"d")}},{key:"dd",regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(value){this.date=+value},formatter:function(date){return dateFilter(date,"dd")}},{key:"d",regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(value){this.date=+value},formatter:function(date){return dateFilter(date,"d")}},{key:"EEEE",regex:$locale.DATETIME_FORMATS.DAY.join("|"),formatter:function(date){return dateFilter(date,"EEEE")}},{key:"EEE",regex:$locale.DATETIME_FORMATS.SHORTDAY.join("|"),formatter:function(date){return dateFilter(date,"EEE")}},{key:"HH",regex:"(?:0|1)[0-9]|2[0-3]",apply:function(value){this.hours=+value},formatter:function(date){return dateFilter(date,"HH")}},{key:"hh",regex:"0[0-9]|1[0-2]",apply:function(value){this.hours=+value},formatter:function(date){return dateFilter(date,"hh")}},{key:"H",regex:"1?[0-9]|2[0-3]",apply:function(value){this.hours=+value},formatter:function(date){return dateFilter(date,"H")}},{key:"h",regex:"[0-9]|1[0-2]",apply:function(value){this.hours=+value},formatter:function(date){return dateFilter(date,"h")}},{key:"mm",regex:"[0-5][0-9]",apply:function(value){this.minutes=+value},formatter:function(date){return dateFilter(date,"mm")}},{key:"m",regex:"[0-9]|[1-5][0-9]",apply:function(value){this.minutes=+value},formatter:function(date){return dateFilter(date,"m")}},{key:"sss",regex:"[0-9][0-9][0-9]",apply:function(value){this.milliseconds=+value},formatter:function(date){return dateFilter(date,"sss")}},{key:"ss",regex:"[0-5][0-9]",apply:function(value){this.seconds=+value},formatter:function(date){return dateFilter(date,"ss")}},{key:"s",regex:"[0-9]|[1-5][0-9]",apply:function(value){this.seconds=+value},formatter:function(date){return dateFilter(date,"s")}},{key:"a",regex:$locale.DATETIME_FORMATS.AMPMS.join("|"),apply:function(value){12===this.hours&&(this.hours=0),"PM"===value&&(this.hours+=12)},formatter:function(date){return dateFilter(date,"a")}},{key:"Z",regex:"[+-]\\d{4}",apply:function(value){var matches=value.match(/([+-])(\d{2})(\d{2})/),sign=matches[1],hours=matches[2],minutes=matches[3];this.hours+=toInt(sign+hours),this.minutes+=toInt(sign+minutes)},formatter:function(date){return dateFilter(date,"Z")}},{key:"ww",regex:"[0-4][0-9]|5[0-3]",formatter:function(date){return dateFilter(date,"ww")}},{key:"w",regex:"[0-9]|[1-4][0-9]|5[0-3]",formatter:function(date){return dateFilter(date,"w")}},{key:"GGGG",regex:$locale.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g,"\\s"),formatter:function(date){return dateFilter(date,"GGGG")}},{key:"GGG",regex:$locale.DATETIME_FORMATS.ERAS.join("|"),formatter:function(date){return dateFilter(date,"GGG")}},{key:"GG",regex:$locale.DATETIME_FORMATS.ERAS.join("|"),formatter:function(date){return dateFilter(date,"GG")}},{key:"G",regex:$locale.DATETIME_FORMATS.ERAS.join("|"),formatter:function(date){return dateFilter(date,"G")}}],angular.version.major>=1&&angular.version.minor>4&&formatCodeToRegex.push({key:"LLLL",regex:$locale.DATETIME_FORMATS.STANDALONEMONTH.join("|"),apply:function(value){this.month=$locale.DATETIME_FORMATS.STANDALONEMONTH.indexOf(value)},formatter:function(date){return dateFilter(date,"LLLL")}})},this.init(),this.getParser=function(key){var f=getFormatCodeToRegex(key);return f&&f.apply||null},this.overrideParser=function(key,parser){var f=getFormatCodeToRegex(key);f&&angular.isFunction(parser)&&(this.parsers={},f.apply=parser)}.bind(this),this.filter=function(date,format){if(!angular.isDate(date)||isNaN(date)||!format)return"";format=$locale.DATETIME_FORMATS[format]||format,$locale.id!==localeId&&this.init(),this.formatters[format]||(this.formatters[format]=createFormatter(format));var formatters=this.formatters[format];return formatters.reduce(function(str,formatter){return str+formatter(date)},"")},this.parse=function(input,format,baseDate){if(!angular.isString(input)||!format)return input;format=$locale.DATETIME_FORMATS[format]||format,format=format.replace(SPECIAL_CHARACTERS_REGEXP,"\\$&"),$locale.id!==localeId&&this.init(),this.parsers[format]||(this.parsers[format]=createParser(format,"apply"));var parser=this.parsers[format],regex=parser.regex,map=parser.map,results=input.match(regex),tzOffset=!1;if(results&&results.length){var fields,dt;angular.isDate(baseDate)&&!isNaN(baseDate.getTime())?fields={year:baseDate.getFullYear(),month:baseDate.getMonth(),date:baseDate.getDate(),hours:baseDate.getHours(),minutes:baseDate.getMinutes(),seconds:baseDate.getSeconds(),milliseconds:baseDate.getMilliseconds()}:(baseDate&&$log.warn("dateparser:","baseDate is not a valid date"),fields={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var i=1,n=results.length;i<n;i++){var mapper=map[i-1];"Z"===mapper.matcher&&(tzOffset=!0),mapper.apply&&mapper.apply.call(fields,results[i])}var datesetter=tzOffset?Date.prototype.setUTCFullYear:Date.prototype.setFullYear,timesetter=tzOffset?Date.prototype.setUTCHours:Date.prototype.setHours;return isValid(fields.year,fields.month,fields.date)&&(!angular.isDate(baseDate)||isNaN(baseDate.getTime())||tzOffset?(dt=new Date(0),datesetter.call(dt,fields.year,fields.month,fields.date),timesetter.call(dt,fields.hours||0,fields.minutes||0,fields.seconds||0,fields.milliseconds||0)):(dt=new Date(baseDate),datesetter.call(dt,fields.year,fields.month,fields.date),timesetter.call(dt,fields.hours,fields.minutes,fields.seconds,fields.milliseconds))),dt}},this.toTimezone=toTimezone,this.fromTimezone=fromTimezone,this.timezoneToOffset=timezoneToOffset,this.addDateMinutes=addDateMinutes,this.convertTimezoneToLocal=convertTimezoneToLocal}]),angular.module("ui.bootstrap.isClass",[]).directive("uibIsClass",["$animate",function($animate){var ON_REGEXP=/^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/,IS_REGEXP=/^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;return{restrict:"A",compile:function(tElement,tAttrs){function linkFn(scope,element,attrs){linkedScopes.push(scope),instances.push({scope:scope,element:element}),exps.forEach(function(exp,k){addForExp(exp,scope)}),scope.$on("$destroy",removeScope)}function addForExp(exp,scope){var matches=exp.match(IS_REGEXP),clazz=scope.$eval(matches[1]),compareWithExp=matches[2],data=expToData[exp];if(!data){var watchFn=function(compareWithVal){var newActivated=null;instances.some(function(instance){var thisVal=instance.scope.$eval(onExp);if(thisVal===compareWithVal)return newActivated=instance,!0}),data.lastActivated!==newActivated&&(data.lastActivated&&$animate.removeClass(data.lastActivated.element,clazz),newActivated&&$animate.addClass(newActivated.element,clazz),data.lastActivated=newActivated)};expToData[exp]=data={lastActivated:null,scope:scope,watchFn:watchFn,compareWithExp:compareWithExp,watcher:scope.$watch(compareWithExp,watchFn)}}data.watchFn(scope.$eval(compareWithExp))}function removeScope(e){var removedScope=e.targetScope,index=linkedScopes.indexOf(removedScope);if(linkedScopes.splice(index,1),instances.splice(index,1),linkedScopes.length){var newWatchScope=linkedScopes[0];angular.forEach(expToData,function(data){data.scope===removedScope&&(data.watcher=newWatchScope.$watch(data.compareWithExp,data.watchFn),data.scope=newWatchScope)})}else expToData={}}var linkedScopes=[],instances=[],expToData={},onExpMatches=tAttrs.uibIsClass.match(ON_REGEXP),onExp=onExpMatches[2],expsStr=onExpMatches[1],exps=expsStr.split(",");return linkFn}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.isClass"]).value("$datepickerSuppressError",!1).value("$datepickerLiteralWarning",!0).constant("uibDatepickerConfig",{datepickerMode:"day",formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",maxDate:null,maxMode:"year",minDate:null,minMode:"day",monthColumns:3,ngModelOptions:{},shortcutPropagation:!1,showWeeks:!0,yearColumns:5,yearRows:4}).controller("UibDatepickerController",["$scope","$element","$attrs","$parse","$interpolate","$locale","$log","dateFilter","uibDatepickerConfig","$datepickerLiteralWarning","$datepickerSuppressError","uibDateParser",function($scope,$element,$attrs,$parse,$interpolate,$locale,$log,dateFilter,datepickerConfig,$datepickerLiteralWarning,$datepickerSuppressError,dateParser){
function setMode(mode){$scope.datepickerMode=mode,$scope.datepickerOptions.datepickerMode=mode}function extractOptions(ngModelCtrl){var ngModelOptions;if(angular.version.minor<6)ngModelOptions=ngModelCtrl.$options||$scope.datepickerOptions.ngModelOptions||datepickerConfig.ngModelOptions||{},ngModelOptions.getOption=function(key){return ngModelOptions[key]};else{var timezone=ngModelCtrl.$options.getOption("timezone")||($scope.datepickerOptions.ngModelOptions?$scope.datepickerOptions.ngModelOptions.timezone:null)||(datepickerConfig.ngModelOptions?datepickerConfig.ngModelOptions.timezone:null);ngModelOptions=ngModelCtrl.$options.createChild(datepickerConfig.ngModelOptions).createChild($scope.datepickerOptions.ngModelOptions).createChild(ngModelCtrl.$options).createChild({timezone:timezone})}return ngModelOptions}var self=this,ngModelCtrl={$setViewValue:angular.noop},ngModelOptions={},watchListeners=[];$element.addClass("uib-datepicker"),$attrs.$set("role","application"),$scope.datepickerOptions||($scope.datepickerOptions={}),this.modes=["day","month","year"],["customClass","dateDisabled","datepickerMode","formatDay","formatDayHeader","formatDayTitle","formatMonth","formatMonthTitle","formatYear","maxDate","maxMode","minDate","minMode","monthColumns","showWeeks","shortcutPropagation","startingDay","yearColumns","yearRows"].forEach(function(key){switch(key){case"customClass":case"dateDisabled":$scope[key]=$scope.datepickerOptions[key]||angular.noop;break;case"datepickerMode":$scope.datepickerMode=angular.isDefined($scope.datepickerOptions.datepickerMode)?$scope.datepickerOptions.datepickerMode:datepickerConfig.datepickerMode;break;case"formatDay":case"formatDayHeader":case"formatDayTitle":case"formatMonth":case"formatMonthTitle":case"formatYear":self[key]=angular.isDefined($scope.datepickerOptions[key])?$interpolate($scope.datepickerOptions[key])($scope.$parent):datepickerConfig[key];break;case"monthColumns":case"showWeeks":case"shortcutPropagation":case"yearColumns":case"yearRows":self[key]=angular.isDefined($scope.datepickerOptions[key])?$scope.datepickerOptions[key]:datepickerConfig[key];break;case"startingDay":angular.isDefined($scope.datepickerOptions.startingDay)?self.startingDay=$scope.datepickerOptions.startingDay:angular.isNumber(datepickerConfig.startingDay)?self.startingDay=datepickerConfig.startingDay:self.startingDay=($locale.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7;break;case"maxDate":case"minDate":$scope.$watch("datepickerOptions."+key,function(value){value?angular.isDate(value)?self[key]=dateParser.fromTimezone(new Date(value),ngModelOptions.getOption("timezone")):($datepickerLiteralWarning&&$log.warn("Literal date support has been deprecated, please switch to date object usage"),self[key]=new Date(dateFilter(value,"medium"))):self[key]=datepickerConfig[key]?dateParser.fromTimezone(new Date(datepickerConfig[key]),ngModelOptions.getOption("timezone")):null,self.refreshView()});break;case"maxMode":case"minMode":$scope.datepickerOptions[key]?$scope.$watch(function(){return $scope.datepickerOptions[key]},function(value){self[key]=$scope[key]=angular.isDefined(value)?value:$scope.datepickerOptions[key],("minMode"===key&&self.modes.indexOf($scope.datepickerOptions.datepickerMode)<self.modes.indexOf(self[key])||"maxMode"===key&&self.modes.indexOf($scope.datepickerOptions.datepickerMode)>self.modes.indexOf(self[key]))&&($scope.datepickerMode=self[key],$scope.datepickerOptions.datepickerMode=self[key])}):self[key]=$scope[key]=datepickerConfig[key]||null}}),$scope.uniqueId="datepicker-"+$scope.$id+"-"+Math.floor(1e4*Math.random()),$scope.disabled=angular.isDefined($attrs.disabled)||!1,angular.isDefined($attrs.ngDisabled)&&watchListeners.push($scope.$parent.$watch($attrs.ngDisabled,function(disabled){$scope.disabled=disabled,self.refreshView()})),$scope.isActive=function(dateObject){return 0===self.compare(dateObject.date,self.activeDate)&&($scope.activeDateId=dateObject.uid,!0)},this.init=function(ngModelCtrl_){ngModelCtrl=ngModelCtrl_,ngModelOptions=extractOptions(ngModelCtrl),$scope.datepickerOptions.initDate?(self.activeDate=dateParser.fromTimezone($scope.datepickerOptions.initDate,ngModelOptions.getOption("timezone"))||new Date,$scope.$watch("datepickerOptions.initDate",function(initDate){initDate&&(ngModelCtrl.$isEmpty(ngModelCtrl.$modelValue)||ngModelCtrl.$invalid)&&(self.activeDate=dateParser.fromTimezone(initDate,ngModelOptions.getOption("timezone")),self.refreshView())})):self.activeDate=new Date;var date=ngModelCtrl.$modelValue?new Date(ngModelCtrl.$modelValue):new Date;this.activeDate=isNaN(date)?dateParser.fromTimezone(new Date,ngModelOptions.getOption("timezone")):dateParser.fromTimezone(date,ngModelOptions.getOption("timezone")),ngModelCtrl.$render=function(){self.render()}},this.render=function(){if(ngModelCtrl.$viewValue){var date=new Date(ngModelCtrl.$viewValue),isValid=!isNaN(date);isValid?this.activeDate=dateParser.fromTimezone(date,ngModelOptions.getOption("timezone")):$datepickerSuppressError||$log.error('Datepicker directive: "ng-model" value must be a Date object')}this.refreshView()},this.refreshView=function(){if(this.element){$scope.selectedDt=null,this._refreshView(),$scope.activeDt&&($scope.activeDateId=$scope.activeDt.uid);var date=ngModelCtrl.$viewValue?new Date(ngModelCtrl.$viewValue):null;date=dateParser.fromTimezone(date,ngModelOptions.getOption("timezone")),ngModelCtrl.$setValidity("dateDisabled",!date||this.element&&!this.isDisabled(date))}},this.createDateObject=function(date,format){var model=ngModelCtrl.$viewValue?new Date(ngModelCtrl.$viewValue):null;model=dateParser.fromTimezone(model,ngModelOptions.getOption("timezone"));var today=new Date;today=dateParser.fromTimezone(today,ngModelOptions.getOption("timezone"));var time=this.compare(date,today),dt={date:date,label:dateParser.filter(date,format),selected:model&&0===this.compare(date,model),disabled:this.isDisabled(date),past:time<0,current:0===time,future:time>0,customClass:this.customClass(date)||null};return model&&0===this.compare(date,model)&&($scope.selectedDt=dt),self.activeDate&&0===this.compare(dt.date,self.activeDate)&&($scope.activeDt=dt),dt},this.isDisabled=function(date){return $scope.disabled||this.minDate&&this.compare(date,this.minDate)<0||this.maxDate&&this.compare(date,this.maxDate)>0||$scope.dateDisabled&&$scope.dateDisabled({date:date,mode:$scope.datepickerMode})},this.customClass=function(date){return $scope.customClass({date:date,mode:$scope.datepickerMode})},this.split=function(arr,size){for(var arrays=[];arr.length>0;)arrays.push(arr.splice(0,size));return arrays},$scope.select=function(date){if($scope.datepickerMode===self.minMode){var dt=ngModelCtrl.$viewValue?dateParser.fromTimezone(new Date(ngModelCtrl.$viewValue),ngModelOptions.getOption("timezone")):new Date(0,0,0,0,0,0,0);dt.setFullYear(date.getFullYear(),date.getMonth(),date.getDate()),dt=dateParser.toTimezone(dt,ngModelOptions.getOption("timezone")),ngModelCtrl.$setViewValue(dt),ngModelCtrl.$render()}else self.activeDate=date,setMode(self.modes[self.modes.indexOf($scope.datepickerMode)-1]),$scope.$emit("uib:datepicker.mode");$scope.$broadcast("uib:datepicker.focus")},$scope.move=function(direction){var year=self.activeDate.getFullYear()+direction*(self.step.years||0),month=self.activeDate.getMonth()+direction*(self.step.months||0);self.activeDate.setFullYear(year,month,1),self.refreshView()},$scope.toggleMode=function(direction){direction=direction||1,$scope.datepickerMode===self.maxMode&&1===direction||$scope.datepickerMode===self.minMode&&direction===-1||(setMode(self.modes[self.modes.indexOf($scope.datepickerMode)+direction]),$scope.$emit("uib:datepicker.mode"))},$scope.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var focusElement=function(){self.element[0].focus()};$scope.$on("uib:datepicker.focus",focusElement),$scope.keydown=function(evt){var key=$scope.keys[evt.which];if(key&&!evt.shiftKey&&!evt.altKey&&!$scope.disabled)if(evt.preventDefault(),self.shortcutPropagation||evt.stopPropagation(),"enter"===key||"space"===key){if(self.isDisabled(self.activeDate))return;$scope.select(self.activeDate)}else!evt.ctrlKey||"up"!==key&&"down"!==key?(self.handleKeyDown(key,evt),self.refreshView()):$scope.toggleMode("up"===key?1:-1)},$element.on("keydown",function(evt){$scope.$apply(function(){$scope.keydown(evt)})}),$scope.$on("$destroy",function(){for(;watchListeners.length;)watchListeners.shift()()})}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(scope,$element,dateFilter){function getDaysInMonth(year,month){return 1!==month||year%4!==0||year%100===0&&year%400!==0?DAYS_IN_MONTH[month]:29}function getISO8601WeekNumber(date){var checkDate=new Date(date);checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();return checkDate.setMonth(0),checkDate.setDate(1),Math.floor(Math.round((time-checkDate)/864e5)/7)+1}var DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1},this.element=$element,this.init=function(ctrl){angular.extend(ctrl,this),scope.showWeeks=ctrl.showWeeks,ctrl.refreshView()},this.getDates=function(startDate,n){for(var date,dates=new Array(n),current=new Date(startDate),i=0;i<n;)date=new Date(current),dates[i++]=date,current.setDate(current.getDate()+1);return dates},this._refreshView=function(){var year=this.activeDate.getFullYear(),month=this.activeDate.getMonth(),firstDayOfMonth=new Date(this.activeDate);firstDayOfMonth.setFullYear(year,month,1);var difference=this.startingDay-firstDayOfMonth.getDay(),numDisplayedFromPreviousMonth=difference>0?7-difference:-difference,firstDate=new Date(firstDayOfMonth);numDisplayedFromPreviousMonth>0&&firstDate.setDate(-numDisplayedFromPreviousMonth+1);for(var days=this.getDates(firstDate,42),i=0;i<42;i++)days[i]=angular.extend(this.createDateObject(days[i],this.formatDay),{secondary:days[i].getMonth()!==month,uid:scope.uniqueId+"-"+i});scope.labels=new Array(7);for(var j=0;j<7;j++)scope.labels[j]={abbr:dateFilter(days[j].date,this.formatDayHeader),full:dateFilter(days[j].date,"EEEE")};if(scope.title=dateFilter(this.activeDate,this.formatDayTitle),scope.rows=this.split(days,7),scope.showWeeks){scope.weekNumbers=[];for(var thursdayIndex=(11-this.startingDay)%7,numWeeks=scope.rows.length,curWeek=0;curWeek<numWeeks;curWeek++)scope.weekNumbers.push(getISO8601WeekNumber(scope.rows[curWeek][thursdayIndex].date))}},this.compare=function(date1,date2){var _date1=new Date(date1.getFullYear(),date1.getMonth(),date1.getDate()),_date2=new Date(date2.getFullYear(),date2.getMonth(),date2.getDate());return _date1.setFullYear(date1.getFullYear()),_date2.setFullYear(date2.getFullYear()),_date1-_date2},this.handleKeyDown=function(key,evt){var date=this.activeDate.getDate();if("left"===key)date-=1;else if("up"===key)date-=7;else if("right"===key)date+=1;else if("down"===key)date+=7;else if("pageup"===key||"pagedown"===key){var month=this.activeDate.getMonth()+("pageup"===key?-1:1);this.activeDate.setMonth(month,1),date=Math.min(getDaysInMonth(this.activeDate.getFullYear(),this.activeDate.getMonth()),date)}else"home"===key?date=1:"end"===key&&(date=getDaysInMonth(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(date)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(scope,$element,dateFilter){this.step={years:1},this.element=$element,this.init=function(ctrl){angular.extend(ctrl,this),ctrl.refreshView()},this._refreshView=function(){for(var date,months=new Array(12),year=this.activeDate.getFullYear(),i=0;i<12;i++)date=new Date(this.activeDate),date.setFullYear(year,i,1),months[i]=angular.extend(this.createDateObject(date,this.formatMonth),{uid:scope.uniqueId+"-"+i});scope.title=dateFilter(this.activeDate,this.formatMonthTitle),scope.rows=this.split(months,this.monthColumns),scope.yearHeaderColspan=this.monthColumns>3?this.monthColumns-2:1},this.compare=function(date1,date2){var _date1=new Date(date1.getFullYear(),date1.getMonth()),_date2=new Date(date2.getFullYear(),date2.getMonth());return _date1.setFullYear(date1.getFullYear()),_date2.setFullYear(date2.getFullYear()),_date1-_date2},this.handleKeyDown=function(key,evt){var date=this.activeDate.getMonth();if("left"===key)date-=1;else if("up"===key)date-=this.monthColumns;else if("right"===key)date+=1;else if("down"===key)date+=this.monthColumns;else if("pageup"===key||"pagedown"===key){var year=this.activeDate.getFullYear()+("pageup"===key?-1:1);this.activeDate.setFullYear(year)}else"home"===key?date=0:"end"===key&&(date=11);this.activeDate.setMonth(date)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(scope,$element,dateFilter){function getStartingYear(year){return parseInt((year-1)/range,10)*range+1}var columns,range;this.element=$element,this.yearpickerInit=function(){columns=this.yearColumns,range=this.yearRows*columns,this.step={years:range}},this._refreshView=function(){for(var date,years=new Array(range),i=0,start=getStartingYear(this.activeDate.getFullYear());i<range;i++)date=new Date(this.activeDate),date.setFullYear(start+i,0,1),years[i]=angular.extend(this.createDateObject(date,this.formatYear),{uid:scope.uniqueId+"-"+i});scope.title=[years[0].label,years[range-1].label].join(" - "),scope.rows=this.split(years,columns),scope.columns=columns},this.compare=function(date1,date2){return date1.getFullYear()-date2.getFullYear()},this.handleKeyDown=function(key,evt){var date=this.activeDate.getFullYear();"left"===key?date-=1:"up"===key?date-=columns:"right"===key?date+=1:"down"===key?date+=columns:"pageup"===key||"pagedown"===key?date+=("pageup"===key?-1:1)*range:"home"===key?date=getStartingYear(this.activeDate.getFullYear()):"end"===key&&(date=getStartingYear(this.activeDate.getFullYear())+range-1),this.activeDate.setFullYear(date)}}]).directive("uibDatepicker",function(){return{templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/datepicker/datepicker.html"},scope:{datepickerOptions:"=?"},require:["uibDatepicker","^ngModel"],restrict:"A",controller:"UibDatepickerController",controllerAs:"datepicker",link:function(scope,element,attrs,ctrls){var datepickerCtrl=ctrls[0],ngModelCtrl=ctrls[1];datepickerCtrl.init(ngModelCtrl)}}}).directive("uibDaypicker",function(){return{templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/datepicker/day.html"},require:["^uibDatepicker","uibDaypicker"],restrict:"A",controller:"UibDaypickerController",link:function(scope,element,attrs,ctrls){var datepickerCtrl=ctrls[0],daypickerCtrl=ctrls[1];daypickerCtrl.init(datepickerCtrl)}}}).directive("uibMonthpicker",function(){return{templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/datepicker/month.html"},require:["^uibDatepicker","uibMonthpicker"],restrict:"A",controller:"UibMonthpickerController",link:function(scope,element,attrs,ctrls){var datepickerCtrl=ctrls[0],monthpickerCtrl=ctrls[1];monthpickerCtrl.init(datepickerCtrl)}}}).directive("uibYearpicker",function(){return{templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/datepicker/year.html"},require:["^uibDatepicker","uibYearpicker"],restrict:"A",controller:"UibYearpickerController",link:function(scope,element,attrs,ctrls){var ctrl=ctrls[0];angular.extend(ctrl,ctrls[1]),ctrl.yearpickerInit(),ctrl.refreshView()}}}),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function($document,$window){var SCROLLBAR_WIDTH,BODY_SCROLLBAR_WIDTH,OVERFLOW_REGEX={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},PLACEMENT_REGEX={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/},BODY_REGEX=/(HTML|BODY)/;return{getRawNode:function(elem){return elem.nodeName?elem:elem[0]||elem},parseStyle:function(value){return value=parseFloat(value),isFinite(value)?value:0},offsetParent:function(elem){function isStaticPositioned(el){return"static"===($window.getComputedStyle(el).position||"static")}elem=this.getRawNode(elem);for(var offsetParent=elem.offsetParent||$document[0].documentElement;offsetParent&&offsetParent!==$document[0].documentElement&&isStaticPositioned(offsetParent);)offsetParent=offsetParent.offsetParent;return offsetParent||$document[0].documentElement},scrollbarWidth:function(isBody){if(isBody){if(angular.isUndefined(BODY_SCROLLBAR_WIDTH)){var bodyElem=$document.find("body");bodyElem.addClass("uib-position-body-scrollbar-measure"),BODY_SCROLLBAR_WIDTH=$window.innerWidth-bodyElem[0].clientWidth,BODY_SCROLLBAR_WIDTH=isFinite(BODY_SCROLLBAR_WIDTH)?BODY_SCROLLBAR_WIDTH:0,bodyElem.removeClass("uib-position-body-scrollbar-measure")}return BODY_SCROLLBAR_WIDTH}if(angular.isUndefined(SCROLLBAR_WIDTH)){var scrollElem=angular.element('<div class="uib-position-scrollbar-measure"></div>');$document.find("body").append(scrollElem),SCROLLBAR_WIDTH=scrollElem[0].offsetWidth-scrollElem[0].clientWidth,SCROLLBAR_WIDTH=isFinite(SCROLLBAR_WIDTH)?SCROLLBAR_WIDTH:0,scrollElem.remove()}return SCROLLBAR_WIDTH},scrollbarPadding:function(elem){elem=this.getRawNode(elem);var elemStyle=$window.getComputedStyle(elem),paddingRight=this.parseStyle(elemStyle.paddingRight),paddingBottom=this.parseStyle(elemStyle.paddingBottom),scrollParent=this.scrollParent(elem,!1,!0),scrollbarWidth=this.scrollbarWidth(BODY_REGEX.test(scrollParent.tagName));return{scrollbarWidth:scrollbarWidth,widthOverflow:scrollParent.scrollWidth>scrollParent.clientWidth,right:paddingRight+scrollbarWidth,originalRight:paddingRight,heightOverflow:scrollParent.scrollHeight>scrollParent.clientHeight,bottom:paddingBottom+scrollbarWidth,originalBottom:paddingBottom}},isScrollable:function(elem,includeHidden){elem=this.getRawNode(elem);var overflowRegex=includeHidden?OVERFLOW_REGEX.hidden:OVERFLOW_REGEX.normal,elemStyle=$window.getComputedStyle(elem);return overflowRegex.test(elemStyle.overflow+elemStyle.overflowY+elemStyle.overflowX)},scrollParent:function(elem,includeHidden,includeSelf){elem=this.getRawNode(elem);var overflowRegex=includeHidden?OVERFLOW_REGEX.hidden:OVERFLOW_REGEX.normal,documentEl=$document[0].documentElement,elemStyle=$window.getComputedStyle(elem);if(includeSelf&&overflowRegex.test(elemStyle.overflow+elemStyle.overflowY+elemStyle.overflowX))return elem;var excludeStatic="absolute"===elemStyle.position,scrollParent=elem.parentElement||documentEl;if(scrollParent===documentEl||"fixed"===elemStyle.position)return documentEl;for(;scrollParent.parentElement&&scrollParent!==documentEl;){var spStyle=$window.getComputedStyle(scrollParent);if(excludeStatic&&"static"!==spStyle.position&&(excludeStatic=!1),!excludeStatic&&overflowRegex.test(spStyle.overflow+spStyle.overflowY+spStyle.overflowX))break;scrollParent=scrollParent.parentElement}return scrollParent},position:function(elem,includeMagins){elem=this.getRawNode(elem);var elemOffset=this.offset(elem);if(includeMagins){var elemStyle=$window.getComputedStyle(elem);elemOffset.top-=this.parseStyle(elemStyle.marginTop),elemOffset.left-=this.parseStyle(elemStyle.marginLeft)}var parent=this.offsetParent(elem),parentOffset={top:0,left:0};return parent!==$document[0].documentElement&&(parentOffset=this.offset(parent),parentOffset.top+=parent.clientTop-parent.scrollTop,parentOffset.left+=parent.clientLeft-parent.scrollLeft),{width:Math.round(angular.isNumber(elemOffset.width)?elemOffset.width:elem.offsetWidth),height:Math.round(angular.isNumber(elemOffset.height)?elemOffset.height:elem.offsetHeight),top:Math.round(elemOffset.top-parentOffset.top),left:Math.round(elemOffset.left-parentOffset.left)}},offset:function(elem){elem=this.getRawNode(elem);var elemBCR=elem.getBoundingClientRect();return{width:Math.round(angular.isNumber(elemBCR.width)?elemBCR.width:elem.offsetWidth),height:Math.round(angular.isNumber(elemBCR.height)?elemBCR.height:elem.offsetHeight),top:Math.round(elemBCR.top+($window.pageYOffset||$document[0].documentElement.scrollTop)),left:Math.round(elemBCR.left+($window.pageXOffset||$document[0].documentElement.scrollLeft))}},viewportOffset:function(elem,useDocument,includePadding){elem=this.getRawNode(elem),includePadding=includePadding!==!1;var elemBCR=elem.getBoundingClientRect(),offsetBCR={top:0,left:0,bottom:0,right:0},offsetParent=useDocument?$document[0].documentElement:this.scrollParent(elem),offsetParentBCR=offsetParent.getBoundingClientRect();if(offsetBCR.top=offsetParentBCR.top+offsetParent.clientTop,offsetBCR.left=offsetParentBCR.left+offsetParent.clientLeft,offsetParent===$document[0].documentElement&&(offsetBCR.top+=$window.pageYOffset,offsetBCR.left+=$window.pageXOffset),offsetBCR.bottom=offsetBCR.top+offsetParent.clientHeight,offsetBCR.right=offsetBCR.left+offsetParent.clientWidth,includePadding){var offsetParentStyle=$window.getComputedStyle(offsetParent);offsetBCR.top+=this.parseStyle(offsetParentStyle.paddingTop),offsetBCR.bottom-=this.parseStyle(offsetParentStyle.paddingBottom),offsetBCR.left+=this.parseStyle(offsetParentStyle.paddingLeft),offsetBCR.right-=this.parseStyle(offsetParentStyle.paddingRight)}return{top:Math.round(elemBCR.top-offsetBCR.top),bottom:Math.round(offsetBCR.bottom-elemBCR.bottom),left:Math.round(elemBCR.left-offsetBCR.left),right:Math.round(offsetBCR.right-elemBCR.right)}},parsePlacement:function(placement){var autoPlace=PLACEMENT_REGEX.auto.test(placement);return autoPlace&&(placement=placement.replace(PLACEMENT_REGEX.auto,"")),placement=placement.split("-"),placement[0]=placement[0]||"top",PLACEMENT_REGEX.primary.test(placement[0])||(placement[0]="top"),placement[1]=placement[1]||"center",PLACEMENT_REGEX.secondary.test(placement[1])||(placement[1]="center"),autoPlace?placement[2]=!0:placement[2]=!1,placement},positionElements:function(hostElem,targetElem,placement,appendToBody){hostElem=this.getRawNode(hostElem),targetElem=this.getRawNode(targetElem);var targetWidth=angular.isDefined(targetElem.offsetWidth)?targetElem.offsetWidth:targetElem.prop("offsetWidth"),targetHeight=angular.isDefined(targetElem.offsetHeight)?targetElem.offsetHeight:targetElem.prop("offsetHeight");placement=this.parsePlacement(placement);var hostElemPos=appendToBody?this.offset(hostElem):this.position(hostElem),targetElemPos={top:0,left:0,placement:""};if(placement[2]){var viewportOffset=this.viewportOffset(hostElem,appendToBody),targetElemStyle=$window.getComputedStyle(targetElem),adjustedSize={width:targetWidth+Math.round(Math.abs(this.parseStyle(targetElemStyle.marginLeft)+this.parseStyle(targetElemStyle.marginRight))),height:targetHeight+Math.round(Math.abs(this.parseStyle(targetElemStyle.marginTop)+this.parseStyle(targetElemStyle.marginBottom)))};if(placement[0]="top"===placement[0]&&adjustedSize.height>viewportOffset.top&&adjustedSize.height<=viewportOffset.bottom?"bottom":"bottom"===placement[0]&&adjustedSize.height>viewportOffset.bottom&&adjustedSize.height<=viewportOffset.top?"top":"left"===placement[0]&&adjustedSize.width>viewportOffset.left&&adjustedSize.width<=viewportOffset.right?"right":"right"===placement[0]&&adjustedSize.width>viewportOffset.right&&adjustedSize.width<=viewportOffset.left?"left":placement[0],placement[1]="top"===placement[1]&&adjustedSize.height-hostElemPos.height>viewportOffset.bottom&&adjustedSize.height-hostElemPos.height<=viewportOffset.top?"bottom":"bottom"===placement[1]&&adjustedSize.height-hostElemPos.height>viewportOffset.top&&adjustedSize.height-hostElemPos.height<=viewportOffset.bottom?"top":"left"===placement[1]&&adjustedSize.width-hostElemPos.width>viewportOffset.right&&adjustedSize.width-hostElemPos.width<=viewportOffset.left?"right":"right"===placement[1]&&adjustedSize.width-hostElemPos.width>viewportOffset.left&&adjustedSize.width-hostElemPos.width<=viewportOffset.right?"left":placement[1],"center"===placement[1])if(PLACEMENT_REGEX.vertical.test(placement[0])){var xOverflow=hostElemPos.width/2-targetWidth/2;viewportOffset.left+xOverflow<0&&adjustedSize.width-hostElemPos.width<=viewportOffset.right?placement[1]="left":viewportOffset.right+xOverflow<0&&adjustedSize.width-hostElemPos.width<=viewportOffset.left&&(placement[1]="right")}else{var yOverflow=hostElemPos.height/2-adjustedSize.height/2;viewportOffset.top+yOverflow<0&&adjustedSize.height-hostElemPos.height<=viewportOffset.bottom?placement[1]="top":viewportOffset.bottom+yOverflow<0&&adjustedSize.height-hostElemPos.height<=viewportOffset.top&&(placement[1]="bottom")}}switch(placement[0]){case"top":targetElemPos.top=hostElemPos.top-targetHeight;break;case"bottom":targetElemPos.top=hostElemPos.top+hostElemPos.height;break;case"left":targetElemPos.left=hostElemPos.left-targetWidth;break;case"right":targetElemPos.left=hostElemPos.left+hostElemPos.width}switch(placement[1]){case"top":targetElemPos.top=hostElemPos.top;break;case"bottom":targetElemPos.top=hostElemPos.top+hostElemPos.height-targetHeight;break;case"left":targetElemPos.left=hostElemPos.left;break;case"right":targetElemPos.left=hostElemPos.left+hostElemPos.width-targetWidth;break;case"center":PLACEMENT_REGEX.vertical.test(placement[0])?targetElemPos.left=hostElemPos.left+hostElemPos.width/2-targetWidth/2:targetElemPos.top=hostElemPos.top+hostElemPos.height/2-targetHeight/2}return targetElemPos.top=Math.round(targetElemPos.top),targetElemPos.left=Math.round(targetElemPos.left),targetElemPos.placement="center"===placement[1]?placement[0]:placement[0]+"-"+placement[1],targetElemPos},adjustTop:function(placementClasses,containerPosition,initialHeight,currentHeight){if(placementClasses.indexOf("top")!==-1&&initialHeight!==currentHeight)return{top:containerPosition.top-currentHeight+"px"}},positionArrow:function(elem,placement){elem=this.getRawNode(elem);var innerElem=elem.querySelector(".tooltip-inner, .popover-inner");if(innerElem){var isTooltip=angular.element(innerElem).hasClass("tooltip-inner"),arrowElem=isTooltip?elem.querySelector(".tooltip-arrow"):elem.querySelector(".arrow");if(arrowElem){var arrowCss={top:"",bottom:"",left:"",right:""};if(placement=this.parsePlacement(placement),"center"===placement[1])return void angular.element(arrowElem).css(arrowCss);var borderProp="border-"+placement[0]+"-width",borderWidth=$window.getComputedStyle(arrowElem)[borderProp],borderRadiusProp="border-";borderRadiusProp+=PLACEMENT_REGEX.vertical.test(placement[0])?placement[0]+"-"+placement[1]:placement[1]+"-"+placement[0],borderRadiusProp+="-radius";var borderRadius=$window.getComputedStyle(isTooltip?innerElem:elem)[borderRadiusProp];switch(placement[0]){case"top":arrowCss.bottom=isTooltip?"0":"-"+borderWidth;break;case"bottom":arrowCss.top=isTooltip?"0":"-"+borderWidth;break;case"left":arrowCss.right=isTooltip?"0":"-"+borderWidth;break;case"right":arrowCss.left=isTooltip?"0":"-"+borderWidth}arrowCss[placement[1]]=borderRadius,angular.element(arrowElem).css(arrowCss)}}}}}]),angular.module("ui.bootstrap.datepickerPopup",["ui.bootstrap.datepicker","ui.bootstrap.position"]).value("$datepickerPopupLiteralWarning",!0).constant("uibDatepickerPopupConfig",{altInputFormats:[],appendToBody:!1,clearText:"Clear",closeOnDateSelection:!0,closeText:"Done",currentText:"Today",datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"uib/template/datepickerPopup/popup.html",datepickerTemplateUrl:"uib/template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},onOpenFocus:!0,showButtonBar:!0,placement:"auto bottom-left"}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$log","$parse","$window","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout","uibDatepickerConfig","$datepickerPopupLiteralWarning",function($scope,$element,$attrs,$compile,$log,$parse,$window,$document,$rootScope,$position,dateFilter,dateParser,datepickerPopupConfig,$timeout,datepickerConfig,$datepickerPopupLiteralWarning){function parseDateString(viewValue){var date=dateParser.parse(viewValue,dateFormat,$scope.date);if(isNaN(date))for(var i=0;i<altInputFormats.length;i++)if(date=dateParser.parse(viewValue,altInputFormats[i],$scope.date),!isNaN(date))return date;return date}function parseDate(viewValue){if(angular.isNumber(viewValue)&&(viewValue=new Date(viewValue)),!viewValue)return null;if(angular.isDate(viewValue)&&!isNaN(viewValue))return viewValue;if(angular.isString(viewValue)){var date=parseDateString(viewValue);if(!isNaN(date))return dateParser.toTimezone(date,ngModelOptions.getOption("timezone"))}return ngModelOptions.getOption("allowInvalid")?viewValue:void 0}function validator(modelValue,viewValue){var value=modelValue||viewValue;return!$attrs.ngRequired&&!value||(angular.isNumber(value)&&(value=new Date(value)),!value||(!(!angular.isDate(value)||isNaN(value))||!!angular.isString(value)&&!isNaN(parseDateString(value))))}function documentClickBind(event){if($scope.isOpen||!$scope.disabled){var popup=$popup[0],dpContainsTarget=$element[0].contains(event.target),popupContainsTarget=void 0!==popup.contains&&popup.contains(event.target);!$scope.isOpen||dpContainsTarget||popupContainsTarget||$scope.$apply(function(){$scope.isOpen=!1})}}function inputKeydownBind(evt){27===evt.which&&$scope.isOpen?(evt.preventDefault(),evt.stopPropagation(),$scope.$apply(function(){$scope.isOpen=!1}),$element[0].focus()):40!==evt.which||$scope.isOpen||(evt.preventDefault(),evt.stopPropagation(),$scope.$apply(function(){$scope.isOpen=!0}))}function positionPopup(){if($scope.isOpen){var dpElement=angular.element($popup[0].querySelector(".uib-datepicker-popup")),placement=$attrs.popupPlacement?$attrs.popupPlacement:datepickerPopupConfig.placement,position=$position.positionElements($element,dpElement,placement,appendToBody);dpElement.css({top:position.top+"px",left:position.left+"px"}),dpElement.hasClass("uib-position-measure")&&dpElement.removeClass("uib-position-measure")}}function extractOptions(ngModelCtrl){var ngModelOptions;return angular.version.minor<6?(ngModelOptions=angular.isObject(ngModelCtrl.$options)?ngModelCtrl.$options:{timezone:null},ngModelOptions.getOption=function(key){return ngModelOptions[key]}):ngModelOptions=ngModelCtrl.$options,ngModelOptions}var dateFormat,closeOnDateSelection,appendToBody,onOpenFocus,datepickerPopupTemplateUrl,datepickerTemplateUrl,popupEl,datepickerEl,scrollParentEl,ngModel,ngModelOptions,$popup,altInputFormats,isHtml5DateInput=!1,watchListeners=[];this.init=function(_ngModel_){if(ngModel=_ngModel_,ngModelOptions=extractOptions(ngModel),closeOnDateSelection=angular.isDefined($attrs.closeOnDateSelection)?$scope.$parent.$eval($attrs.closeOnDateSelection):datepickerPopupConfig.closeOnDateSelection,appendToBody=angular.isDefined($attrs.datepickerAppendToBody)?$scope.$parent.$eval($attrs.datepickerAppendToBody):datepickerPopupConfig.appendToBody,onOpenFocus=angular.isDefined($attrs.onOpenFocus)?$scope.$parent.$eval($attrs.onOpenFocus):datepickerPopupConfig.onOpenFocus,datepickerPopupTemplateUrl=angular.isDefined($attrs.datepickerPopupTemplateUrl)?$attrs.datepickerPopupTemplateUrl:datepickerPopupConfig.datepickerPopupTemplateUrl,datepickerTemplateUrl=angular.isDefined($attrs.datepickerTemplateUrl)?$attrs.datepickerTemplateUrl:datepickerPopupConfig.datepickerTemplateUrl,altInputFormats=angular.isDefined($attrs.altInputFormats)?$scope.$parent.$eval($attrs.altInputFormats):datepickerPopupConfig.altInputFormats,$scope.showButtonBar=angular.isDefined($attrs.showButtonBar)?$scope.$parent.$eval($attrs.showButtonBar):datepickerPopupConfig.showButtonBar,datepickerPopupConfig.html5Types[$attrs.type]?(dateFormat=datepickerPopupConfig.html5Types[$attrs.type],isHtml5DateInput=!0):(dateFormat=$attrs.uibDatepickerPopup||datepickerPopupConfig.datepickerPopup,$attrs.$observe("uibDatepickerPopup",function(value,oldValue){var newDateFormat=value||datepickerPopupConfig.datepickerPopup;if(newDateFormat!==dateFormat&&(dateFormat=newDateFormat,ngModel.$modelValue=null,!dateFormat))throw new Error("uibDatepickerPopup must have a date format specified.");
})),!dateFormat)throw new Error("uibDatepickerPopup must have a date format specified.");if(isHtml5DateInput&&$attrs.uibDatepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");popupEl=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>"),popupEl.attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":datepickerPopupTemplateUrl}),datepickerEl=angular.element(popupEl.children()[0]),datepickerEl.attr("template-url",datepickerTemplateUrl),$scope.datepickerOptions||($scope.datepickerOptions={}),isHtml5DateInput&&"month"===$attrs.type&&($scope.datepickerOptions.datepickerMode="month",$scope.datepickerOptions.minMode="month"),datepickerEl.attr("datepicker-options","datepickerOptions"),isHtml5DateInput?ngModel.$formatters.push(function(value){return $scope.date=dateParser.fromTimezone(value,ngModelOptions.getOption("timezone")),value}):(ngModel.$$parserName="date",ngModel.$validators.date=validator,ngModel.$parsers.unshift(parseDate),ngModel.$formatters.push(function(value){return ngModel.$isEmpty(value)?($scope.date=value,value):(angular.isNumber(value)&&(value=new Date(value)),$scope.date=dateParser.fromTimezone(value,ngModelOptions.getOption("timezone")),dateParser.filter($scope.date,dateFormat))})),ngModel.$viewChangeListeners.push(function(){$scope.date=parseDateString(ngModel.$viewValue)}),$element.on("keydown",inputKeydownBind),$popup=$compile(popupEl)($scope),popupEl.remove(),appendToBody?$document.find("body").append($popup):$element.after($popup),$scope.$on("$destroy",function(){for($scope.isOpen===!0&&($rootScope.$$phase||$scope.$apply(function(){$scope.isOpen=!1})),$popup.remove(),$element.off("keydown",inputKeydownBind),$document.off("click",documentClickBind),scrollParentEl&&scrollParentEl.off("scroll",positionPopup),angular.element($window).off("resize",positionPopup);watchListeners.length;)watchListeners.shift()()})},$scope.getText=function(key){return $scope[key+"Text"]||datepickerPopupConfig[key+"Text"]},$scope.isDisabled=function(date){"today"===date&&(date=dateParser.fromTimezone(new Date,ngModelOptions.getOption("timezone")));var dates={};return angular.forEach(["minDate","maxDate"],function(key){$scope.datepickerOptions[key]?angular.isDate($scope.datepickerOptions[key])?dates[key]=new Date($scope.datepickerOptions[key]):($datepickerPopupLiteralWarning&&$log.warn("Literal date support has been deprecated, please switch to date object usage"),dates[key]=new Date(dateFilter($scope.datepickerOptions[key],"medium"))):dates[key]=null}),$scope.datepickerOptions&&dates.minDate&&$scope.compare(date,dates.minDate)<0||dates.maxDate&&$scope.compare(date,dates.maxDate)>0},$scope.compare=function(date1,date2){return new Date(date1.getFullYear(),date1.getMonth(),date1.getDate())-new Date(date2.getFullYear(),date2.getMonth(),date2.getDate())},$scope.dateSelection=function(dt){$scope.date=dt;var date=$scope.date?dateParser.filter($scope.date,dateFormat):null;$element.val(date),ngModel.$setViewValue(date),closeOnDateSelection&&($scope.isOpen=!1,$element[0].focus())},$scope.keydown=function(evt){27===evt.which&&(evt.stopPropagation(),$scope.isOpen=!1,$element[0].focus())},$scope.select=function(date,evt){if(evt.stopPropagation(),"today"===date){var today=new Date;angular.isDate($scope.date)?(date=new Date($scope.date),date.setFullYear(today.getFullYear(),today.getMonth(),today.getDate())):(date=dateParser.fromTimezone(today,ngModelOptions.getOption("timezone")),date.setHours(0,0,0,0))}$scope.dateSelection(date)},$scope.close=function(evt){evt.stopPropagation(),$scope.isOpen=!1,$element[0].focus()},$scope.disabled=angular.isDefined($attrs.disabled)||!1,$attrs.ngDisabled&&watchListeners.push($scope.$parent.$watch($parse($attrs.ngDisabled),function(disabled){$scope.disabled=disabled})),$scope.$watch("isOpen",function(value){value?$scope.disabled?$scope.isOpen=!1:$timeout(function(){positionPopup(),onOpenFocus&&$scope.$broadcast("uib:datepicker.focus"),$document.on("click",documentClickBind);var placement=$attrs.popupPlacement?$attrs.popupPlacement:datepickerPopupConfig.placement;appendToBody||$position.parsePlacement(placement)[2]?(scrollParentEl=scrollParentEl||angular.element($position.scrollParent($element)),scrollParentEl&&scrollParentEl.on("scroll",positionPopup)):scrollParentEl=null,angular.element($window).on("resize",positionPopup)},0,!1):($document.off("click",documentClickBind),scrollParentEl&&scrollParentEl.off("scroll",positionPopup),angular.element($window).off("resize",positionPopup))}),$scope.$on("uib:datepicker.mode",function(){$timeout(positionPopup,0,!1)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{datepickerOptions:"=?",isOpen:"=?",currentText:"@",clearText:"@",closeText:"@"},link:function(scope,element,attrs,ctrls){var ngModel=ctrls[0],ctrl=ctrls[1];ctrl.init(ngModel)}}}).directive("uibDatepickerPopupWrap",function(){return{restrict:"A",transclude:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/datepickerPopup/popup.html"}}}),angular.module("ui.bootstrap.debounce",[]).factory("$$debounce",["$timeout",function($timeout){return function(callback,debounceTime){var timeoutPromise;return function(){var self=this,args=Array.prototype.slice.call(arguments);timeoutPromise&&$timeout.cancel(timeoutPromise),timeoutPromise=$timeout(function(){callback.apply(self,args)},debounceTime)}}}]),angular.module("ui.bootstrap.multiMap",[]).factory("$$multiMap",function(){return{createNew:function(){var map={};return{entries:function(){return Object.keys(map).map(function(key){return{key:key,value:map[key]}})},get:function(key){return map[key]},hasKey:function(key){return!!map[key]},keys:function(){return Object.keys(map)},put:function(key,value){map[key]||(map[key]=[]),map[key].push(value)},remove:function(key,value){var values=map[key];if(values){var idx=values.indexOf(value);idx!==-1&&values.splice(idx,1),values.length||delete map[key]}}}}}}),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.multiMap","ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope","$$multiMap",function($document,$rootScope,$$multiMap){var openScope=null,openedContainers=$$multiMap.createNew();this.isOnlyOpen=function(dropdownScope,appendTo){var openedDropdowns=openedContainers.get(appendTo);if(openedDropdowns){var openDropdown=openedDropdowns.reduce(function(toClose,dropdown){return dropdown.scope===dropdownScope?dropdown:toClose},{});if(openDropdown)return 1===openedDropdowns.length}return!1},this.open=function(dropdownScope,element,appendTo){if(openScope||$document.on("click",closeDropdown),openScope&&openScope!==dropdownScope&&(openScope.isOpen=!1),openScope=dropdownScope,appendTo){var openedDropdowns=openedContainers.get(appendTo);if(openedDropdowns){var openedScopes=openedDropdowns.map(function(dropdown){return dropdown.scope});openedScopes.indexOf(dropdownScope)===-1&&openedContainers.put(appendTo,{scope:dropdownScope})}else openedContainers.put(appendTo,{scope:dropdownScope})}},this.close=function(dropdownScope,element,appendTo){if(openScope===dropdownScope&&($document.off("click",closeDropdown),$document.off("keydown",this.keybindFilter),openScope=null),appendTo){var openedDropdowns=openedContainers.get(appendTo);if(openedDropdowns){var dropdownToClose=openedDropdowns.reduce(function(toClose,dropdown){return dropdown.scope===dropdownScope?dropdown:toClose},{});dropdownToClose&&openedContainers.remove(appendTo,dropdownToClose)}}};var closeDropdown=function(evt){if(openScope&&openScope.isOpen&&!(evt&&"disabled"===openScope.getAutoClose()||evt&&3===evt.which)){var toggleElement=openScope.getToggleElement();if(!(evt&&toggleElement&&toggleElement[0].contains(evt.target))){var dropdownElement=openScope.getDropdownElement();evt&&"outsideClick"===openScope.getAutoClose()&&dropdownElement&&dropdownElement[0].contains(evt.target)||(openScope.focusToggleElement(),openScope.isOpen=!1,$rootScope.$$phase||openScope.$apply())}}};this.keybindFilter=function(evt){if(openScope){var dropdownElement=openScope.getDropdownElement(),toggleElement=openScope.getToggleElement(),dropdownElementTargeted=dropdownElement&&dropdownElement[0].contains(evt.target),toggleElementTargeted=toggleElement&&toggleElement[0].contains(evt.target);27===evt.which?(evt.stopPropagation(),openScope.focusToggleElement(),closeDropdown()):openScope.isKeynavEnabled()&&[38,40].indexOf(evt.which)!==-1&&openScope.isOpen&&(dropdownElementTargeted||toggleElementTargeted)&&(evt.preventDefault(),evt.stopPropagation(),openScope.focusDropdownEntry(evt.which))}}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function($scope,$element,$attrs,$parse,dropdownConfig,uibDropdownService,$animate,$position,$document,$compile,$templateRequest){function removeDropdownMenu(){$element.append(self.dropdownMenu)}var templateScope,getIsOpen,self=this,scope=$scope.$new(),appendToOpenClass=dropdownConfig.appendToOpenClass,openClass=dropdownConfig.openClass,setIsOpen=angular.noop,toggleInvoker=$attrs.onToggle?$parse($attrs.onToggle):angular.noop,keynavEnabled=!1,body=$document.find("body");$element.addClass("dropdown"),this.init=function(){$attrs.isOpen&&(getIsOpen=$parse($attrs.isOpen),setIsOpen=getIsOpen.assign,$scope.$watch(getIsOpen,function(value){scope.isOpen=!!value})),keynavEnabled=angular.isDefined($attrs.keyboardNav)},this.toggle=function(open){return scope.isOpen=arguments.length?!!open:!scope.isOpen,angular.isFunction(setIsOpen)&&setIsOpen(scope,scope.isOpen),scope.isOpen},this.isOpen=function(){return scope.isOpen},scope.getToggleElement=function(){return self.toggleElement},scope.getAutoClose=function(){return $attrs.autoClose||"always"},scope.getElement=function(){return $element},scope.isKeynavEnabled=function(){return keynavEnabled},scope.focusDropdownEntry=function(keyCode){var elems=self.dropdownMenu?angular.element(self.dropdownMenu).find("a"):$element.find("ul").eq(0).find("a");switch(keyCode){case 40:angular.isNumber(self.selectedOption)?self.selectedOption=self.selectedOption===elems.length-1?self.selectedOption:self.selectedOption+1:self.selectedOption=0;break;case 38:angular.isNumber(self.selectedOption)?self.selectedOption=0===self.selectedOption?0:self.selectedOption-1:self.selectedOption=elems.length-1}elems[self.selectedOption].focus()},scope.getDropdownElement=function(){return self.dropdownMenu},scope.focusToggleElement=function(){self.toggleElement&&self.toggleElement[0].focus()},scope.$watch("isOpen",function(isOpen,wasOpen){var appendTo=null,appendToBody=!1;if(angular.isDefined($attrs.dropdownAppendTo)){var appendToEl=$parse($attrs.dropdownAppendTo)(scope);appendToEl&&(appendTo=angular.element(appendToEl))}if(angular.isDefined($attrs.dropdownAppendToBody)){var appendToBodyValue=$parse($attrs.dropdownAppendToBody)(scope);appendToBodyValue!==!1&&(appendToBody=!0)}if(appendToBody&&!appendTo&&(appendTo=body),appendTo&&self.dropdownMenu&&(isOpen?(appendTo.append(self.dropdownMenu),$element.on("$destroy",removeDropdownMenu)):($element.off("$destroy",removeDropdownMenu),removeDropdownMenu())),appendTo&&self.dropdownMenu){var css,rightalign,scrollbarPadding,pos=$position.positionElements($element,self.dropdownMenu,"bottom-left",!0),scrollbarWidth=0;if(css={top:pos.top+"px",display:isOpen?"block":"none"},rightalign=self.dropdownMenu.hasClass("dropdown-menu-right"),rightalign?(css.left="auto",scrollbarPadding=$position.scrollbarPadding(appendTo),scrollbarPadding.heightOverflow&&scrollbarPadding.scrollbarWidth&&(scrollbarWidth=scrollbarPadding.scrollbarWidth),css.right=window.innerWidth-scrollbarWidth-(pos.left+$element.prop("offsetWidth"))+"px"):(css.left=pos.left+"px",css.right="auto"),!appendToBody){var appendOffset=$position.offset(appendTo);css.top=pos.top-appendOffset.top+"px",rightalign?css.right=window.innerWidth-(pos.left-appendOffset.left+$element.prop("offsetWidth"))+"px":css.left=pos.left-appendOffset.left+"px"}self.dropdownMenu.css(css)}var openContainer=appendTo?appendTo:$element,dropdownOpenClass=appendTo?appendToOpenClass:openClass,hasOpenClass=openContainer.hasClass(dropdownOpenClass),isOnlyOpen=uibDropdownService.isOnlyOpen($scope,appendTo);if(hasOpenClass===!isOpen){var toggleClass;toggleClass=appendTo?isOnlyOpen?"removeClass":"addClass":isOpen?"addClass":"removeClass",$animate[toggleClass](openContainer,dropdownOpenClass).then(function(){angular.isDefined(isOpen)&&isOpen!==wasOpen&&toggleInvoker($scope,{open:!!isOpen})})}if(isOpen)self.dropdownMenuTemplateUrl?$templateRequest(self.dropdownMenuTemplateUrl).then(function(tplContent){templateScope=scope.$new(),$compile(tplContent.trim())(templateScope,function(dropdownElement){var newEl=dropdownElement;self.dropdownMenu.replaceWith(newEl),self.dropdownMenu=newEl,$document.on("keydown",uibDropdownService.keybindFilter)})}):$document.on("keydown",uibDropdownService.keybindFilter),scope.focusToggleElement(),uibDropdownService.open(scope,$element,appendTo);else{if(uibDropdownService.close(scope,$element,appendTo),self.dropdownMenuTemplateUrl){templateScope&&templateScope.$destroy();var newEl=angular.element('<ul class="dropdown-menu"></ul>');self.dropdownMenu.replaceWith(newEl),self.dropdownMenu=newEl}self.selectedOption=null}angular.isFunction(setIsOpen)&&setIsOpen($scope,isOpen)})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(scope,element,attrs,dropdownCtrl){dropdownCtrl.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(scope,element,attrs,dropdownCtrl){if(dropdownCtrl&&!angular.isDefined(attrs.dropdownNested)){element.addClass("dropdown-menu");var tplUrl=attrs.templateUrl;tplUrl&&(dropdownCtrl.dropdownMenuTemplateUrl=tplUrl),dropdownCtrl.dropdownMenu||(dropdownCtrl.dropdownMenu=element)}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(scope,element,attrs,dropdownCtrl){if(dropdownCtrl){element.addClass("dropdown-toggle"),dropdownCtrl.toggleElement=element;var toggleDropdown=function(event){event.preventDefault(),element.hasClass("disabled")||attrs.disabled||scope.$apply(function(){dropdownCtrl.toggle()})};element.on("click",toggleDropdown),element.attr({"aria-haspopup":!0,"aria-expanded":!1}),scope.$watch(dropdownCtrl.isOpen,function(isOpen){element.attr("aria-expanded",!!isOpen)}),scope.$on("$destroy",function(){element.off("click",toggleDropdown)})}}}}),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var stack=[];return{add:function(key,value){stack.push({key:key,value:value})},get:function(key){for(var i=0;i<stack.length;i++)if(key===stack[i].key)return stack[i]},keys:function(){for(var keys=[],i=0;i<stack.length;i++)keys.push(stack[i].key);return keys},top:function(){return stack[stack.length-1]},remove:function(key){for(var idx=-1,i=0;i<stack.length;i++)if(key===stack[i].key){idx=i;break}return stack.splice(idx,1)[0]},removeTop:function(){return stack.pop()},length:function(){return stack.length}}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.multiMap","ui.bootstrap.stackedMap","ui.bootstrap.position"]).provider("$uibResolve",function(){var resolve=this;this.resolver=null,this.setResolver=function(resolver){this.resolver=resolver},this.$get=["$injector","$q",function($injector,$q){var resolver=resolve.resolver?$injector.get(resolve.resolver):null;return{resolve:function(invocables,locals,parent,self){if(resolver)return resolver.resolve(invocables,locals,parent,self);var promises=[];return angular.forEach(invocables,function(value){angular.isFunction(value)||angular.isArray(value)?promises.push($q.resolve($injector.invoke(value))):angular.isString(value)?promises.push($q.resolve($injector.get(value))):promises.push($q.resolve(value))}),$q.all(promises).then(function(resolves){var resolveObj={},resolveIter=0;return angular.forEach(invocables,function(value,key){resolveObj[key]=resolves[resolveIter++]}),resolveObj})}}}]}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function($animate,$injector,$modalStack){function linkFn(scope,element,attrs){attrs.modalInClass&&($animate.addClass(element,attrs.modalInClass),scope.$on($modalStack.NOW_CLOSING_EVENT,function(e,setIsAsync){var done=setIsAsync();scope.modalOptions.animation?$animate.removeClass(element,attrs.modalInClass).then(done):done()}))}return{restrict:"A",compile:function(tElement,tAttrs){return tElement.addClass(tAttrs.backdropClass),linkFn}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animateCss","$document",function($modalStack,$q,$animateCss,$document){return{scope:{index:"@"},restrict:"A",transclude:!0,templateUrl:function(tElement,tAttrs){return tAttrs.templateUrl||"uib/template/modal/window.html"},link:function(scope,element,attrs){element.addClass(attrs.windowTopClass||""),scope.size=attrs.size,scope.close=function(evt){var modal=$modalStack.getTop();modal&&modal.value.backdrop&&"static"!==modal.value.backdrop&&evt.target===evt.currentTarget&&(evt.preventDefault(),evt.stopPropagation(),$modalStack.dismiss(modal.key,"backdrop click"))},element.on("click",scope.close),scope.$isRendered=!0;var modalRenderDeferObj=$q.defer();scope.$$postDigest(function(){modalRenderDeferObj.resolve()}),modalRenderDeferObj.promise.then(function(){var animationPromise=null;attrs.modalInClass&&(animationPromise=$animateCss(element,{addClass:attrs.modalInClass}).start(),scope.$on($modalStack.NOW_CLOSING_EVENT,function(e,setIsAsync){var done=setIsAsync();$animateCss(element,{removeClass:attrs.modalInClass}).start().then(done)})),$q.when(animationPromise).then(function(){var modal=$modalStack.getTop();if(modal&&$modalStack.modalRendered(modal.key),!$document[0].activeElement||!element[0].contains($document[0].activeElement)){var inputWithAutofocus=element[0].querySelector("[autofocus]");inputWithAutofocus?inputWithAutofocus.focus():element[0].focus()}})})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(tElement,tAttrs){tAttrs.modalAnimation&&tElement.addClass(tAttrs.uibModalAnimationClass)}}}).directive("uibModalTransclude",["$animate",function($animate){return{link:function(scope,element,attrs,controller,transclude){transclude(scope.$parent,function(clone){element.empty(),$animate.enter(clone,element)})}}}]).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap","$uibPosition",function($animate,$animateCss,$document,$compile,$rootScope,$q,$$multiMap,$$stackedMap,$uibPosition){function snake_case(name){var separator="-";return name.replace(SNAKE_CASE_REGEXP,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}function isVisible(element){return!!(element.offsetWidth||element.offsetHeight||element.getClientRects().length)}function backdropIndex(){for(var topBackdropIndex=-1,opened=openedWindows.keys(),i=0;i<opened.length;i++)openedWindows.get(opened[i]).value.backdrop&&(topBackdropIndex=i);return topBackdropIndex>-1&&topBackdropIndex<topModalIndex&&(topBackdropIndex=topModalIndex),topBackdropIndex}function removeModalWindow(modalInstance,elementToReceiveFocus){var modalWindow=openedWindows.get(modalInstance).value,appendToElement=modalWindow.appendTo;openedWindows.remove(modalInstance),previousTopOpenedModal=openedWindows.top(),previousTopOpenedModal&&(topModalIndex=parseInt(previousTopOpenedModal.value.modalDomEl.attr("index"),10)),removeAfterAnimate(modalWindow.modalDomEl,modalWindow.modalScope,function(){var modalBodyClass=modalWindow.openedClass||OPENED_MODAL_CLASS;openedClasses.remove(modalBodyClass,modalInstance);var areAnyOpen=openedClasses.hasKey(modalBodyClass);appendToElement.toggleClass(modalBodyClass,areAnyOpen),!areAnyOpen&&scrollbarPadding&&scrollbarPadding.heightOverflow&&scrollbarPadding.scrollbarWidth&&(scrollbarPadding.originalRight?appendToElement.css({paddingRight:scrollbarPadding.originalRight+"px"}):appendToElement.css({paddingRight:""}),scrollbarPadding=null),toggleTopWindowClass(!0)},modalWindow.closedDeferred),checkRemoveBackdrop(),elementToReceiveFocus&&elementToReceiveFocus.focus?elementToReceiveFocus.focus():appendToElement.focus&&appendToElement.focus()}function toggleTopWindowClass(toggleSwitch){var modalWindow;openedWindows.length()>0&&(modalWindow=openedWindows.top().value,modalWindow.modalDomEl.toggleClass(modalWindow.windowTopClass||"",toggleSwitch))}function checkRemoveBackdrop(){if(backdropDomEl&&backdropIndex()===-1){var backdropScopeRef=backdropScope;removeAfterAnimate(backdropDomEl,backdropScope,function(){backdropScopeRef=null}),backdropDomEl=void 0,backdropScope=void 0}}function removeAfterAnimate(domEl,scope,done,closedDeferred){function afterAnimating(){afterAnimating.done||(afterAnimating.done=!0,$animate.leave(domEl).then(function(){done&&done(),domEl.remove(),closedDeferred&&closedDeferred.resolve()}),scope.$destroy())}var asyncDeferred,asyncPromise=null,setIsAsync=function(){return asyncDeferred||(asyncDeferred=$q.defer(),asyncPromise=asyncDeferred.promise),function(){asyncDeferred.resolve()}};return scope.$broadcast($modalStack.NOW_CLOSING_EVENT,setIsAsync),$q.when(asyncPromise).then(afterAnimating)}function keydownListener(evt){if(evt.isDefaultPrevented())return evt;var modal=openedWindows.top();if(modal)switch(evt.which){case 27:modal.value.keyboard&&(evt.preventDefault(),$rootScope.$apply(function(){$modalStack.dismiss(modal.key,"escape key press")}));break;case 9:var list=$modalStack.loadFocusElementList(modal),focusChanged=!1;evt.shiftKey?($modalStack.isFocusInFirstItem(evt,list)||$modalStack.isModalFocused(evt,modal))&&(focusChanged=$modalStack.focusLastFocusableElement(list)):$modalStack.isFocusInLastItem(evt,list)&&(focusChanged=$modalStack.focusFirstFocusableElement(list)),focusChanged&&(evt.preventDefault(),evt.stopPropagation())}}function broadcastClosing(modalWindow,resultOrReason,closing){return!modalWindow.value.modalScope.$broadcast("modal.closing",resultOrReason,closing).defaultPrevented}function unhideBackgroundElements(){Array.prototype.forEach.call(document.querySelectorAll("["+ARIA_HIDDEN_ATTRIBUTE_NAME+"]"),function(hiddenEl){var ariaHiddenCount=parseInt(hiddenEl.getAttribute(ARIA_HIDDEN_ATTRIBUTE_NAME),10),newHiddenCount=ariaHiddenCount-1;hiddenEl.setAttribute(ARIA_HIDDEN_ATTRIBUTE_NAME,newHiddenCount),newHiddenCount||(hiddenEl.removeAttribute(ARIA_HIDDEN_ATTRIBUTE_NAME),hiddenEl.removeAttribute("aria-hidden"))})}var backdropDomEl,backdropScope,scrollbarPadding,OPENED_MODAL_CLASS="modal-open",openedWindows=$$stackedMap.createNew(),openedClasses=$$multiMap.createNew(),$modalStack={NOW_CLOSING_EVENT:"modal.stack.now-closing"},topModalIndex=0,previousTopOpenedModal=null,ARIA_HIDDEN_ATTRIBUTE_NAME="data-bootstrap-modal-aria-hidden-count",tabbableSelector="a[href], area[href], input:not([disabled]):not([tabindex='-1']), button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']), textarea:not([disabled]):not([tabindex='-1']), iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]",SNAKE_CASE_REGEXP=/[A-Z]/g;return $rootScope.$watch(backdropIndex,function(newBackdropIndex){backdropScope&&(backdropScope.index=newBackdropIndex)}),$document.on("keydown",keydownListener),$rootScope.$on("$destroy",function(){$document.off("keydown",keydownListener)}),$modalStack.open=function(modalInstance,modal){function applyAriaHidden(el){function getSiblings(el){var children=el.parent()?el.parent().children():[];return Array.prototype.filter.call(children,function(child){return child!==el[0]})}if(el&&"BODY"!==el[0].tagName)return getSiblings(el).forEach(function(sibling){var elemIsAlreadyHidden="true"===sibling.getAttribute("aria-hidden"),ariaHiddenCount=parseInt(sibling.getAttribute(ARIA_HIDDEN_ATTRIBUTE_NAME),10);ariaHiddenCount||(ariaHiddenCount=elemIsAlreadyHidden?1:0),sibling.setAttribute(ARIA_HIDDEN_ATTRIBUTE_NAME,ariaHiddenCount+1),sibling.setAttribute("aria-hidden","true")}),applyAriaHidden(el.parent())}var modalOpener=$document[0].activeElement,modalBodyClass=modal.openedClass||OPENED_MODAL_CLASS;toggleTopWindowClass(!1),previousTopOpenedModal=openedWindows.top(),openedWindows.add(modalInstance,{deferred:modal.deferred,renderDeferred:modal.renderDeferred,closedDeferred:modal.closedDeferred,modalScope:modal.scope,backdrop:modal.backdrop,keyboard:modal.keyboard,openedClass:modal.openedClass,windowTopClass:modal.windowTopClass,animation:modal.animation,appendTo:modal.appendTo}),openedClasses.put(modalBodyClass,modalInstance);var appendToElement=modal.appendTo,currBackdropIndex=backdropIndex();currBackdropIndex>=0&&!backdropDomEl&&(backdropScope=$rootScope.$new(!0),backdropScope.modalOptions=modal,backdropScope.index=currBackdropIndex,backdropDomEl=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>'),backdropDomEl.attr({"class":"modal-backdrop","ng-style":"{'z-index': 1040 + (index && 1 || 0) + index*10}","uib-modal-animation-class":"fade","modal-in-class":"in"}),modal.backdropClass&&backdropDomEl.addClass(modal.backdropClass),modal.animation&&backdropDomEl.attr("modal-animation","true"),$compile(backdropDomEl)(backdropScope),$animate.enter(backdropDomEl,appendToElement),$uibPosition.isScrollable(appendToElement)&&(scrollbarPadding=$uibPosition.scrollbarPadding(appendToElement),scrollbarPadding.heightOverflow&&scrollbarPadding.scrollbarWidth&&appendToElement.css({paddingRight:scrollbarPadding.right+"px"})));var content;modal.component?(content=document.createElement(snake_case(modal.component.name)),content=angular.element(content),content.attr({resolve:"$resolve","modal-instance":"$uibModalInstance",close:"$close($value)",dismiss:"$dismiss($value)"})):content=modal.content,topModalIndex=previousTopOpenedModal?parseInt(previousTopOpenedModal.value.modalDomEl.attr("index"),10)+1:0;var angularDomEl=angular.element('<div uib-modal-window="modal-window"></div>');angularDomEl.attr({"class":"modal","template-url":modal.windowTemplateUrl,"window-top-class":modal.windowTopClass,role:"dialog","aria-labelledby":modal.ariaLabelledBy,"aria-describedby":modal.ariaDescribedBy,size:modal.size,index:topModalIndex,animate:"animate","ng-style":"{'z-index': 1050 + $$topModalIndex*10, display: 'block'}",tabindex:-1,"uib-modal-animation-class":"fade","modal-in-class":"in"}).append(content),modal.windowClass&&angularDomEl.addClass(modal.windowClass),modal.animation&&angularDomEl.attr("modal-animation","true"),appendToElement.addClass(modalBodyClass),modal.scope&&(modal.scope.$$topModalIndex=topModalIndex),$animate.enter($compile(angularDomEl)(modal.scope),appendToElement),openedWindows.top().value.modalDomEl=angularDomEl,openedWindows.top().value.modalOpener=modalOpener,applyAriaHidden(angularDomEl)},$modalStack.close=function(modalInstance,result){var modalWindow=openedWindows.get(modalInstance);return unhideBackgroundElements(),modalWindow&&broadcastClosing(modalWindow,result,!0)?(modalWindow.value.modalScope.$$uibDestructionScheduled=!0,modalWindow.value.deferred.resolve(result),removeModalWindow(modalInstance,modalWindow.value.modalOpener),!0):!modalWindow},$modalStack.dismiss=function(modalInstance,reason){var modalWindow=openedWindows.get(modalInstance);return unhideBackgroundElements(),modalWindow&&broadcastClosing(modalWindow,reason,!1)?(modalWindow.value.modalScope.$$uibDestructionScheduled=!0,modalWindow.value.deferred.reject(reason),removeModalWindow(modalInstance,modalWindow.value.modalOpener),!0):!modalWindow},$modalStack.dismissAll=function(reason){for(var topModal=this.getTop();topModal&&this.dismiss(topModal.key,reason);)topModal=this.getTop()},$modalStack.getTop=function(){return openedWindows.top()},$modalStack.modalRendered=function(modalInstance){var modalWindow=openedWindows.get(modalInstance);modalWindow&&modalWindow.value.renderDeferred.resolve()},$modalStack.focusFirstFocusableElement=function(list){return list.length>0&&(list[0].focus(),!0)},$modalStack.focusLastFocusableElement=function(list){return list.length>0&&(list[list.length-1].focus(),!0)},$modalStack.isModalFocused=function(evt,modalWindow){if(evt&&modalWindow){var modalDomEl=modalWindow.value.modalDomEl;if(modalDomEl&&modalDomEl.length)return(evt.target||evt.srcElement)===modalDomEl[0]}return!1},$modalStack.isFocusInFirstItem=function(evt,list){return list.length>0&&(evt.target||evt.srcElement)===list[0]},$modalStack.isFocusInLastItem=function(evt,list){return list.length>0&&(evt.target||evt.srcElement)===list[list.length-1]},$modalStack.loadFocusElementList=function(modalWindow){if(modalWindow){var modalDomE1=modalWindow.value.modalDomEl;if(modalDomE1&&modalDomE1.length){var elements=modalDomE1[0].querySelectorAll(tabbableSelector);return elements?Array.prototype.filter.call(elements,function(element){return isVisible(element)}):elements}}},$modalStack}]).provider("$uibModal",function(){var $modalProvider={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function($rootScope,$q,$document,$templateRequest,$controller,$uibResolve,$modalStack){function getTemplatePromise(options){return options.template?$q.when(options.template):$templateRequest(angular.isFunction(options.templateUrl)?options.templateUrl():options.templateUrl)}var $modal={},promiseChain=null;return $modal.getPromiseChain=function(){return promiseChain},$modal.open=function(modalOptions){function resolveWithTemplate(){return templateAndResolvePromise}var modalResultDeferred=$q.defer(),modalOpenedDeferred=$q.defer(),modalClosedDeferred=$q.defer(),modalRenderDeferred=$q.defer(),modalInstance={result:modalResultDeferred.promise,opened:modalOpenedDeferred.promise,closed:modalClosedDeferred.promise,rendered:modalRenderDeferred.promise,close:function(result){return $modalStack.close(modalInstance,result)},dismiss:function(reason){return $modalStack.dismiss(modalInstance,reason)}};if(modalOptions=angular.extend({},$modalProvider.options,modalOptions),modalOptions.resolve=modalOptions.resolve||{},modalOptions.appendTo=modalOptions.appendTo||$document.find("body").eq(0),!modalOptions.appendTo.length)throw new Error("appendTo element not found. Make sure that the element passed is in DOM.");if(!modalOptions.component&&!modalOptions.template&&!modalOptions.templateUrl)throw new Error("One of component or template or templateUrl options is required.");var templateAndResolvePromise;templateAndResolvePromise=modalOptions.component?$q.when($uibResolve.resolve(modalOptions.resolve,{},null,null)):$q.all([getTemplatePromise(modalOptions),$uibResolve.resolve(modalOptions.resolve,{},null,null)]);var samePromise;return samePromise=promiseChain=$q.all([promiseChain]).then(resolveWithTemplate,resolveWithTemplate).then(function(tplAndVars){function constructLocals(obj,template,instanceOnScope,injectable){obj.$scope=modalScope,obj.$scope.$resolve={},instanceOnScope?obj.$scope.$uibModalInstance=modalInstance:obj.$uibModalInstance=modalInstance;var resolves=template?tplAndVars[1]:tplAndVars;angular.forEach(resolves,function(value,key){injectable&&(obj[key]=value),obj.$scope.$resolve[key]=value})}var providedScope=modalOptions.scope||$rootScope,modalScope=providedScope.$new();modalScope.$close=modalInstance.close,modalScope.$dismiss=modalInstance.dismiss,modalScope.$on("$destroy",function(){modalScope.$$uibDestructionScheduled||modalScope.$dismiss("$uibUnscheduledDestruction")});var ctrlInstance,ctrlInstantiate,modal={scope:modalScope,deferred:modalResultDeferred,renderDeferred:modalRenderDeferred,closedDeferred:modalClosedDeferred,animation:modalOptions.animation,backdrop:modalOptions.backdrop,keyboard:modalOptions.keyboard,backdropClass:modalOptions.backdropClass,
windowTopClass:modalOptions.windowTopClass,windowClass:modalOptions.windowClass,windowTemplateUrl:modalOptions.windowTemplateUrl,ariaLabelledBy:modalOptions.ariaLabelledBy,ariaDescribedBy:modalOptions.ariaDescribedBy,size:modalOptions.size,openedClass:modalOptions.openedClass,appendTo:modalOptions.appendTo},component={},ctrlLocals={};modalOptions.component?(constructLocals(component,!1,!0,!1),component.name=modalOptions.component,modal.component=component):modalOptions.controller&&(constructLocals(ctrlLocals,!0,!1,!0),ctrlInstantiate=$controller(modalOptions.controller,ctrlLocals,!0,modalOptions.controllerAs),modalOptions.controllerAs&&modalOptions.bindToController&&(ctrlInstance=ctrlInstantiate.instance,ctrlInstance.$close=modalScope.$close,ctrlInstance.$dismiss=modalScope.$dismiss,angular.extend(ctrlInstance,{$resolve:ctrlLocals.$scope.$resolve},providedScope)),ctrlInstance=ctrlInstantiate(),angular.isFunction(ctrlInstance.$onInit)&&ctrlInstance.$onInit()),modalOptions.component||(modal.content=tplAndVars[0]),$modalStack.open(modalInstance,modal),modalOpenedDeferred.resolve(!0)},function(reason){modalOpenedDeferred.reject(reason),modalResultDeferred.reject(reason)})["finally"](function(){promiseChain===samePromise&&(promiseChain=null)}),modalInstance},$modal}]};return $modalProvider}),angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function($parse){return{create:function(ctrl,$scope,$attrs){ctrl.setNumPages=$attrs.numPages?$parse($attrs.numPages).assign:angular.noop,ctrl.ngModelCtrl={$setViewValue:angular.noop},ctrl._watchers=[],ctrl.init=function(ngModelCtrl,config){ctrl.ngModelCtrl=ngModelCtrl,ctrl.config=config,ngModelCtrl.$render=function(){ctrl.render()},$attrs.itemsPerPage?ctrl._watchers.push($scope.$parent.$watch($attrs.itemsPerPage,function(value){ctrl.itemsPerPage=parseInt(value,10),$scope.totalPages=ctrl.calculateTotalPages(),ctrl.updatePage()})):ctrl.itemsPerPage=config.itemsPerPage,$scope.$watch("totalItems",function(newTotal,oldTotal){(angular.isDefined(newTotal)||newTotal!==oldTotal)&&($scope.totalPages=ctrl.calculateTotalPages(),ctrl.updatePage())})},ctrl.calculateTotalPages=function(){var totalPages=ctrl.itemsPerPage<1?1:Math.ceil($scope.totalItems/ctrl.itemsPerPage);return Math.max(totalPages||0,1)},ctrl.render=function(){$scope.page=parseInt(ctrl.ngModelCtrl.$viewValue,10)||1},$scope.selectPage=function(page,evt){evt&&evt.preventDefault();var clickAllowed=!$scope.ngDisabled||!evt;clickAllowed&&$scope.page!==page&&page>0&&page<=$scope.totalPages&&(evt&&evt.target&&evt.target.blur(),ctrl.ngModelCtrl.$setViewValue(page),ctrl.ngModelCtrl.$render())},$scope.getText=function(key){return $scope[key+"Text"]||ctrl.config[key+"Text"]},$scope.noPrevious=function(){return 1===$scope.page},$scope.noNext=function(){return $scope.page===$scope.totalPages},ctrl.updatePage=function(){ctrl.setNumPages($scope.$parent,$scope.totalPages),$scope.page>$scope.totalPages?$scope.selectPage($scope.totalPages):ctrl.ngModelCtrl.$render()},$scope.$on("$destroy",function(){for(;ctrl._watchers.length;)ctrl._watchers.shift()()})}}}]),angular.module("ui.bootstrap.pager",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function($scope,$attrs,uibPaging,uibPagerConfig){$scope.align=angular.isDefined($attrs.align)?$scope.$parent.$eval($attrs.align):uibPagerConfig.align,uibPaging.create(this,$scope,$attrs)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:!0}).directive("uibPager",["uibPagerConfig",function(uibPagerConfig){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],restrict:"A",controller:"UibPagerController",controllerAs:"pager",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/pager/pager.html"},link:function(scope,element,attrs,ctrls){element.addClass("pager");var paginationCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&paginationCtrl.init(ngModelCtrl,uibPagerConfig)}}}]),angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function($scope,$attrs,$parse,uibPaging,uibPaginationConfig){function makePage(number,text,isActive){return{number:number,text:text,active:isActive}}function getPages(currentPage,totalPages){var pages=[],startPage=1,endPage=totalPages,isMaxSized=angular.isDefined(maxSize)&&maxSize<totalPages;isMaxSized&&(rotate?(startPage=Math.max(currentPage-Math.floor(maxSize/2),1),endPage=startPage+maxSize-1,endPage>totalPages&&(endPage=totalPages,startPage=endPage-maxSize+1)):(startPage=(Math.ceil(currentPage/maxSize)-1)*maxSize+1,endPage=Math.min(startPage+maxSize-1,totalPages)));for(var number=startPage;number<=endPage;number++){var page=makePage(number,pageLabel(number),number===currentPage);pages.push(page)}if(isMaxSized&&maxSize>0&&(!rotate||forceEllipses||boundaryLinkNumbers)){if(startPage>1){if(!boundaryLinkNumbers||startPage>3){var previousPageSet=makePage(startPage-1,"...",!1);pages.unshift(previousPageSet)}if(boundaryLinkNumbers){if(3===startPage){var secondPageLink=makePage(2,"2",!1);pages.unshift(secondPageLink)}var firstPageLink=makePage(1,"1",!1);pages.unshift(firstPageLink)}}if(endPage<totalPages){if(!boundaryLinkNumbers||endPage<totalPages-2){var nextPageSet=makePage(endPage+1,"...",!1);pages.push(nextPageSet)}if(boundaryLinkNumbers){if(endPage===totalPages-2){var secondToLastPageLink=makePage(totalPages-1,totalPages-1,!1);pages.push(secondToLastPageLink)}var lastPageLink=makePage(totalPages,totalPages,!1);pages.push(lastPageLink)}}}return pages}var ctrl=this,maxSize=angular.isDefined($attrs.maxSize)?$scope.$parent.$eval($attrs.maxSize):uibPaginationConfig.maxSize,rotate=angular.isDefined($attrs.rotate)?$scope.$parent.$eval($attrs.rotate):uibPaginationConfig.rotate,forceEllipses=angular.isDefined($attrs.forceEllipses)?$scope.$parent.$eval($attrs.forceEllipses):uibPaginationConfig.forceEllipses,boundaryLinkNumbers=angular.isDefined($attrs.boundaryLinkNumbers)?$scope.$parent.$eval($attrs.boundaryLinkNumbers):uibPaginationConfig.boundaryLinkNumbers,pageLabel=angular.isDefined($attrs.pageLabel)?function(idx){return $scope.$parent.$eval($attrs.pageLabel,{$page:idx})}:angular.identity;$scope.boundaryLinks=angular.isDefined($attrs.boundaryLinks)?$scope.$parent.$eval($attrs.boundaryLinks):uibPaginationConfig.boundaryLinks,$scope.directionLinks=angular.isDefined($attrs.directionLinks)?$scope.$parent.$eval($attrs.directionLinks):uibPaginationConfig.directionLinks,$attrs.$set("role","menu"),uibPaging.create(this,$scope,$attrs),$attrs.maxSize&&ctrl._watchers.push($scope.$parent.$watch($parse($attrs.maxSize),function(value){maxSize=parseInt(value,10),ctrl.render()}));var originalRender=this.render;this.render=function(){originalRender(),$scope.page>0&&$scope.page<=$scope.totalPages&&($scope.pages=getPages($scope.page,$scope.totalPages))}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,boundaryLinkNumbers:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0,forceEllipses:!1}).directive("uibPagination",["$parse","uibPaginationConfig",function($parse,uibPaginationConfig){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],restrict:"A",controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/pagination/pagination.html"},link:function(scope,element,attrs,ctrls){element.addClass("pagination");var paginationCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&paginationCtrl.init(ngModelCtrl,uibPaginationConfig)}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){function snake_case(name){var regexp=/[A-Z]/g,separator="-";return name.replace(regexp,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}var defaultOptions={placement:"top",placementClassPrefix:"",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},triggerMap={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""},globalOptions={};this.options=function(value){angular.extend(globalOptions,value)},this.setTriggers=function(triggers){angular.extend(triggerMap,triggers)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function($window,$compile,$timeout,$document,$position,$interpolate,$rootScope,$parse,$$stackedMap){function keypressListener(e){if(27===e.which){var last=openedTooltips.top();last&&(last.value.close(),last=null)}}var openedTooltips=$$stackedMap.createNew();return $document.on("keyup",keypressListener),$rootScope.$on("$destroy",function(){$document.off("keyup",keypressListener)}),function(ttType,prefix,defaultTriggerShow,options){function getTriggers(trigger){var show=(trigger||options.trigger||defaultTriggerShow).split(" "),hide=show.map(function(trigger){return triggerMap[trigger]||trigger});return{show:show,hide:hide}}options=angular.extend({},defaultOptions,globalOptions,options);var directiveName=snake_case(ttType),startSym=$interpolate.startSymbol(),endSym=$interpolate.endSymbol(),template="<div "+directiveName+'-popup uib-title="'+startSym+"title"+endSym+'" '+(options.useContentExp?'content-exp="contentExp()" ':'content="'+startSym+"content"+endSym+'" ')+'origin-scope="origScope" class="uib-position-measure '+prefix+'" tooltip-animation-class="fade"uib-tooltip-classes ng-class="{ in: isOpen }" ></div>';return{compile:function(tElem,tAttrs){var tooltipLinker=$compile(template);return function(scope,element,attrs,tooltipCtrl){function toggleTooltipBind(){ttScope.isOpen?hideTooltipBind():showTooltipBind()}function showTooltipBind(){hasEnableExp&&!scope.$eval(attrs[prefix+"Enable"])||(cancelHide(),prepareTooltip(),ttScope.popupDelay?showTimeout||(showTimeout=$timeout(show,ttScope.popupDelay,!1)):show())}function hideTooltipBind(){cancelShow(),ttScope.popupCloseDelay?hideTimeout||(hideTimeout=$timeout(hide,ttScope.popupCloseDelay,!1)):hide()}function show(){return cancelShow(),cancelHide(),ttScope.content?(createTooltip(),void ttScope.$evalAsync(function(){ttScope.isOpen=!0,assignIsOpen(!0),positionTooltip()})):angular.noop}function cancelShow(){showTimeout&&($timeout.cancel(showTimeout),showTimeout=null),positionTimeout&&($timeout.cancel(positionTimeout),positionTimeout=null)}function hide(){ttScope&&ttScope.$evalAsync(function(){ttScope&&(ttScope.isOpen=!1,assignIsOpen(!1),ttScope.animation?transitionTimeout||(transitionTimeout=$timeout(removeTooltip,150,!1)):removeTooltip())})}function cancelHide(){hideTimeout&&($timeout.cancel(hideTimeout),hideTimeout=null),transitionTimeout&&($timeout.cancel(transitionTimeout),transitionTimeout=null)}function createTooltip(){tooltip||(tooltipLinkedScope=ttScope.$new(),tooltip=tooltipLinker(tooltipLinkedScope,function(tooltip){appendToBody?$document.find("body").append(tooltip):element.after(tooltip)}),openedTooltips.add(ttScope,{close:hide}),prepObservers())}function removeTooltip(){cancelShow(),cancelHide(),unregisterObservers(),tooltip&&(tooltip.remove(),tooltip=null,adjustmentTimeout&&$timeout.cancel(adjustmentTimeout)),openedTooltips.remove(ttScope),tooltipLinkedScope&&(tooltipLinkedScope.$destroy(),tooltipLinkedScope=null)}function prepareTooltip(){ttScope.title=attrs[prefix+"Title"],contentParse?ttScope.content=contentParse(scope):ttScope.content=attrs[ttType],ttScope.popupClass=attrs[prefix+"Class"],ttScope.placement=angular.isDefined(attrs[prefix+"Placement"])?attrs[prefix+"Placement"]:options.placement;var placement=$position.parsePlacement(ttScope.placement);lastPlacement=placement[1]?placement[0]+"-"+placement[1]:placement[0];var delay=parseInt(attrs[prefix+"PopupDelay"],10),closeDelay=parseInt(attrs[prefix+"PopupCloseDelay"],10);ttScope.popupDelay=isNaN(delay)?options.popupDelay:delay,ttScope.popupCloseDelay=isNaN(closeDelay)?options.popupCloseDelay:closeDelay}function assignIsOpen(isOpen){isOpenParse&&angular.isFunction(isOpenParse.assign)&&isOpenParse.assign(scope,isOpen)}function prepObservers(){observers.length=0,contentParse?(observers.push(scope.$watch(contentParse,function(val){ttScope.content=val,!val&&ttScope.isOpen&&hide()})),observers.push(tooltipLinkedScope.$watch(function(){repositionScheduled||(repositionScheduled=!0,tooltipLinkedScope.$$postDigest(function(){repositionScheduled=!1,ttScope&&ttScope.isOpen&&positionTooltip()}))}))):observers.push(attrs.$observe(ttType,function(val){ttScope.content=val,!val&&ttScope.isOpen?hide():positionTooltip()})),observers.push(attrs.$observe(prefix+"Title",function(val){ttScope.title=val,ttScope.isOpen&&positionTooltip()})),observers.push(attrs.$observe(prefix+"Placement",function(val){ttScope.placement=val?val:options.placement,ttScope.isOpen&&positionTooltip()}))}function unregisterObservers(){observers.length&&(angular.forEach(observers,function(observer){observer()}),observers.length=0)}function bodyHideTooltipBind(e){ttScope&&ttScope.isOpen&&tooltip&&(element[0].contains(e.target)||tooltip[0].contains(e.target)||hideTooltipBind())}function hideOnEscapeKey(e){27===e.which&&hideTooltipBind()}function prepTriggers(){var showTriggers=[],hideTriggers=[],val=scope.$eval(attrs[prefix+"Trigger"]);unregisterTriggers(),angular.isObject(val)?(Object.keys(val).forEach(function(key){showTriggers.push(key),hideTriggers.push(val[key])}),triggers={show:showTriggers,hide:hideTriggers}):triggers=getTriggers(val),"none"!==triggers.show&&triggers.show.forEach(function(trigger,idx){"outsideClick"===trigger?(element.on("click",toggleTooltipBind),$document.on("click",bodyHideTooltipBind)):trigger===triggers.hide[idx]?element.on(trigger,toggleTooltipBind):trigger&&(element.on(trigger,showTooltipBind),element.on(triggers.hide[idx],hideTooltipBind)),element.on("keypress",hideOnEscapeKey)})}var tooltip,tooltipLinkedScope,transitionTimeout,showTimeout,hideTimeout,positionTimeout,adjustmentTimeout,lastPlacement,appendToBody=!!angular.isDefined(options.appendToBody)&&options.appendToBody,triggers=getTriggers(void 0),hasEnableExp=angular.isDefined(attrs[prefix+"Enable"]),ttScope=scope.$new(!0),repositionScheduled=!1,isOpenParse=!!angular.isDefined(attrs[prefix+"IsOpen"])&&$parse(attrs[prefix+"IsOpen"]),contentParse=!!options.useContentExp&&$parse(attrs[ttType]),observers=[],positionTooltip=function(){tooltip&&tooltip.html()&&(positionTimeout||(positionTimeout=$timeout(function(){var ttPosition=$position.positionElements(element,tooltip,ttScope.placement,appendToBody),initialHeight=angular.isDefined(tooltip.offsetHeight)?tooltip.offsetHeight:tooltip.prop("offsetHeight"),elementPos=appendToBody?$position.offset(element):$position.position(element);tooltip.css({top:ttPosition.top+"px",left:ttPosition.left+"px"});var placementClasses=ttPosition.placement.split("-");tooltip.hasClass(placementClasses[0])||(tooltip.removeClass(lastPlacement.split("-")[0]),tooltip.addClass(placementClasses[0])),tooltip.hasClass(options.placementClassPrefix+ttPosition.placement)||(tooltip.removeClass(options.placementClassPrefix+lastPlacement),tooltip.addClass(options.placementClassPrefix+ttPosition.placement)),adjustmentTimeout=$timeout(function(){var currentHeight=angular.isDefined(tooltip.offsetHeight)?tooltip.offsetHeight:tooltip.prop("offsetHeight"),adjustment=$position.adjustTop(placementClasses,elementPos,initialHeight,currentHeight);adjustment&&tooltip.css(adjustment),adjustmentTimeout=null},0,!1),tooltip.hasClass("uib-position-measure")?($position.positionArrow(tooltip,ttPosition.placement),tooltip.removeClass("uib-position-measure")):lastPlacement!==ttPosition.placement&&$position.positionArrow(tooltip,ttPosition.placement),lastPlacement=ttPosition.placement,positionTimeout=null},0,!1)))};ttScope.origScope=scope,ttScope.isOpen=!1,ttScope.contentExp=function(){return ttScope.content},attrs.$observe("disabled",function(val){val&&cancelShow(),val&&ttScope.isOpen&&hide()}),isOpenParse&&scope.$watch(isOpenParse,function(val){ttScope&&!val===ttScope.isOpen&&toggleTooltipBind()});var unregisterTriggers=function(){triggers.show.forEach(function(trigger){"outsideClick"===trigger?element.off("click",toggleTooltipBind):(element.off(trigger,showTooltipBind),element.off(trigger,toggleTooltipBind)),element.off("keypress",hideOnEscapeKey)}),triggers.hide.forEach(function(trigger){"outsideClick"===trigger?$document.off("click",bodyHideTooltipBind):element.off(trigger,hideTooltipBind)})};prepTriggers();var animation=scope.$eval(attrs[prefix+"Animation"]);ttScope.animation=angular.isDefined(animation)?!!animation:options.animation;var appendToBodyVal,appendKey=prefix+"AppendToBody";appendToBodyVal=appendKey in attrs&&void 0===attrs[appendKey]||scope.$eval(attrs[appendKey]),appendToBody=angular.isDefined(appendToBodyVal)?appendToBodyVal:appendToBody,scope.$on("$destroy",function(){unregisterTriggers(),removeTooltip(),ttScope=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function($animate,$sce,$compile,$templateRequest){return{link:function(scope,elem,attrs){var currentScope,previousElement,currentElement,origScope=scope.$eval(attrs.tooltipTemplateTranscludeScope),changeCounter=0,cleanupLastIncludeContent=function(){previousElement&&(previousElement.remove(),previousElement=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&($animate.leave(currentElement).then(function(){previousElement=null}),previousElement=currentElement,currentElement=null)};scope.$watch($sce.parseAsResourceUrl(attrs.uibTooltipTemplateTransclude),function(src){var thisChangeId=++changeCounter;src?($templateRequest(src,!0).then(function(response){if(thisChangeId===changeCounter){var newScope=origScope.$new(),template=response,clone=$compile(template)(newScope,function(clone){cleanupLastIncludeContent(),$animate.enter(clone,elem)});currentScope=newScope,currentElement=clone,currentScope.$emit("$includeContentLoaded",src)}},function(){thisChangeId===changeCounter&&(cleanupLastIncludeContent(),scope.$emit("$includeContentError",src))}),scope.$emit("$includeContentRequested",src)):cleanupLastIncludeContent()}),scope.$on("$destroy",cleanupLastIncludeContent)}}}]).directive("uibTooltipClasses",["$uibPosition",function($uibPosition){return{restrict:"A",link:function(scope,element,attrs){if(scope.placement){var position=$uibPosition.parsePlacement(scope.placement);element.addClass(position[0])}scope.popupClass&&element.addClass(scope.popupClass),scope.animation&&element.addClass(attrs.tooltipAnimationClass)}}}]).directive("uibTooltipPopup",function(){return{restrict:"A",scope:{content:"@"},templateUrl:"uib/template/tooltip/tooltip-popup.html"}}).directive("uibTooltip",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{restrict:"A",scope:{contentExp:"&",originScope:"&"},templateUrl:"uib/template/tooltip/tooltip-template-popup.html"}}).directive("uibTooltipTemplate",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&"},templateUrl:"uib/template/tooltip/tooltip-html-popup.html"}}).directive("uibTooltipHtml",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{restrict:"A",scope:{uibTitle:"@",contentExp:"&",originScope:"&"},templateUrl:"uib/template/popover/popover-template.html"}}).directive("uibPopoverTemplate",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibPopoverTemplate","popover","click",{useContentExp:!0})}]).directive("uibPopoverHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&",uibTitle:"@"},templateUrl:"uib/template/popover/popover-html.html"}}).directive("uibPopoverHtml",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibPopoverHtml","popover","click",{useContentExp:!0})}]).directive("uibPopoverPopup",function(){return{restrict:"A",scope:{uibTitle:"@",content:"@"},templateUrl:"uib/template/popover/popover.html"}}).directive("uibPopover",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibPopover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function($scope,$attrs,progressConfig){function getMaxOrDefault(){return angular.isDefined($scope.maxParam)?$scope.maxParam:progressConfig.max}var self=this,animate=angular.isDefined($attrs.animate)?$scope.$parent.$eval($attrs.animate):progressConfig.animate;this.bars=[],$scope.max=getMaxOrDefault(),this.addBar=function(bar,element,attrs){animate||element.css({transition:"none"}),this.bars.push(bar),bar.max=getMaxOrDefault(),bar.title=attrs&&angular.isDefined(attrs.title)?attrs.title:"progressbar",bar.$watch("value",function(value){bar.recalculatePercentage()}),bar.recalculatePercentage=function(){var totalPercentage=self.bars.reduce(function(total,bar){return bar.percent=+(100*bar.value/bar.max).toFixed(2),total+bar.percent},0);totalPercentage>100&&(bar.percent-=totalPercentage-100)},bar.$on("$destroy",function(){element=null,self.removeBar(bar)})},this.removeBar=function(bar){this.bars.splice(this.bars.indexOf(bar),1),this.bars.forEach(function(bar){bar.recalculatePercentage()})},$scope.$watch("maxParam",function(maxParam){self.bars.forEach(function(bar){bar.max=getMaxOrDefault(),bar.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{maxParam:"=?max"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(scope,element,attrs,progressCtrl){progressCtrl.addBar(scope,element,attrs)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(scope,element,attrs,progressCtrl){progressCtrl.addBar(scope,angular.element(element.children()[0]),{title:attrs.title})}}}),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,enableReset:!0,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function($scope,$attrs,ratingConfig){var ngModelCtrl={$setViewValue:angular.noop},self=this;this.init=function(ngModelCtrl_){ngModelCtrl=ngModelCtrl_,ngModelCtrl.$render=this.render,ngModelCtrl.$formatters.push(function(value){return angular.isNumber(value)&&value<<0!==value&&(value=Math.round(value)),value}),this.stateOn=angular.isDefined($attrs.stateOn)?$scope.$parent.$eval($attrs.stateOn):ratingConfig.stateOn,this.stateOff=angular.isDefined($attrs.stateOff)?$scope.$parent.$eval($attrs.stateOff):ratingConfig.stateOff,this.enableReset=angular.isDefined($attrs.enableReset)?$scope.$parent.$eval($attrs.enableReset):ratingConfig.enableReset;var tmpTitles=angular.isDefined($attrs.titles)?$scope.$parent.$eval($attrs.titles):ratingConfig.titles;this.titles=angular.isArray(tmpTitles)&&tmpTitles.length>0?tmpTitles:ratingConfig.titles;var ratingStates=angular.isDefined($attrs.ratingStates)?$scope.$parent.$eval($attrs.ratingStates):new Array(angular.isDefined($attrs.max)?$scope.$parent.$eval($attrs.max):ratingConfig.max);$scope.range=this.buildTemplateObjects(ratingStates)},this.buildTemplateObjects=function(states){for(var i=0,n=states.length;i<n;i++)states[i]=angular.extend({index:i},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(i)},states[i]);return states},this.getTitle=function(index){return index>=this.titles.length?index+1:this.titles[index]},$scope.rate=function(value){if(!$scope.readonly&&value>=0&&value<=$scope.range.length){var newViewValue=self.enableReset&&ngModelCtrl.$viewValue===value?0:value;ngModelCtrl.$setViewValue(newViewValue),ngModelCtrl.$render()}},$scope.enter=function(value){$scope.readonly||($scope.value=value),$scope.onHover({value:value})},$scope.reset=function(){$scope.value=ngModelCtrl.$viewValue,$scope.onLeave()},$scope.onKeydown=function(evt){/(37|38|39|40)/.test(evt.which)&&(evt.preventDefault(),evt.stopPropagation(),$scope.rate($scope.value+(38===evt.which||39===evt.which?1:-1)))},this.render=function(){$scope.value=ngModelCtrl.$viewValue,$scope.title=self.getTitle($scope.value-1)}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],restrict:"A",scope:{readonly:"=?readOnly",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"uib/template/rating/rating.html",link:function(scope,element,attrs,ctrls){var ratingCtrl=ctrls[0],ngModelCtrl=ctrls[1];ratingCtrl.init(ngModelCtrl)}}}),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function($scope){function findTabIndex(index){for(var i=0;i<ctrl.tabs.length;i++)if(ctrl.tabs[i].index===index)return i}var oldIndex,ctrl=this;ctrl.tabs=[],ctrl.select=function(index,evt){if(!destroyed){var previousIndex=findTabIndex(oldIndex),previousSelected=ctrl.tabs[previousIndex];if(previousSelected){if(previousSelected.tab.onDeselect({$event:evt,$selectedIndex:index}),evt&&evt.isDefaultPrevented())return;previousSelected.tab.active=!1}var selected=ctrl.tabs[index];selected?(selected.tab.onSelect({$event:evt}),selected.tab.active=!0,ctrl.active=selected.index,oldIndex=selected.index):!selected&&angular.isDefined(oldIndex)&&(ctrl.active=null,oldIndex=null)}},ctrl.addTab=function(tab){if(ctrl.tabs.push({tab:tab,index:tab.index}),ctrl.tabs.sort(function(t1,t2){return t1.index>t2.index?1:t1.index<t2.index?-1:0}),tab.index===ctrl.active||!angular.isDefined(ctrl.active)&&1===ctrl.tabs.length){var newActiveIndex=findTabIndex(tab.index);ctrl.select(newActiveIndex)}},ctrl.removeTab=function(tab){for(var index,i=0;i<ctrl.tabs.length;i++)if(ctrl.tabs[i].tab===tab){index=i;break}if(ctrl.tabs[index].index===ctrl.active){var newActiveTabIndex=index===ctrl.tabs.length-1?index-1:index+1%ctrl.tabs.length;ctrl.select(newActiveTabIndex)}ctrl.tabs.splice(index,1)},$scope.$watch("tabset.active",function(val){angular.isDefined(val)&&val!==oldIndex&&ctrl.select(findTabIndex(val))});var destroyed;$scope.$on("$destroy",function(){destroyed=!0})}]).directive("uibTabset",function(){return{transclude:!0,replace:!0,scope:{},bindToController:{active:"=?",type:"@"},controller:"UibTabsetController",controllerAs:"tabset",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/tabs/tabset.html"},link:function(scope,element,attrs){scope.vertical=!!angular.isDefined(attrs.vertical)&&scope.$parent.$eval(attrs.vertical),scope.justified=!!angular.isDefined(attrs.justified)&&scope.$parent.$eval(attrs.justified)}}}).directive("uibTab",["$parse",function($parse){return{require:"^uibTabset",replace:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/tabs/tab.html"},transclude:!0,scope:{heading:"@",index:"=?",classes:"@?",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},controllerAs:"tab",link:function(scope,elm,attrs,tabsetCtrl,transclude){scope.disabled=!1,attrs.disable&&scope.$parent.$watch($parse(attrs.disable),function(value){scope.disabled=!!value}),angular.isUndefined(attrs.index)&&(tabsetCtrl.tabs&&tabsetCtrl.tabs.length?scope.index=Math.max.apply(null,tabsetCtrl.tabs.map(function(t){return t.index}))+1:scope.index=0),angular.isUndefined(attrs.classes)&&(scope.classes=""),scope.select=function(evt){if(!scope.disabled){for(var index,i=0;i<tabsetCtrl.tabs.length;i++)if(tabsetCtrl.tabs[i].tab===scope){index=i;break}tabsetCtrl.select(index,evt)}},tabsetCtrl.addTab(scope),scope.$on("$destroy",function(){tabsetCtrl.removeTab(scope)}),scope.$transcludeFn=transclude}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:"^uibTab",link:function(scope,elm){scope.$watch("headingElement",function(heading){heading&&(elm.html(""),elm.append(heading))})}}}).directive("uibTabContentTransclude",function(){function isTabHeading(node){return node.tagName&&(node.hasAttribute("uib-tab-heading")||node.hasAttribute("data-uib-tab-heading")||node.hasAttribute("x-uib-tab-heading")||"uib-tab-heading"===node.tagName.toLowerCase()||"data-uib-tab-heading"===node.tagName.toLowerCase()||"x-uib-tab-heading"===node.tagName.toLowerCase()||"uib:tab-heading"===node.tagName.toLowerCase())}return{restrict:"A",require:"^uibTabset",link:function(scope,elm,attrs){var tab=scope.$eval(attrs.uibTabContentTransclude).tab;tab.$transcludeFn(tab.$parent,function(contents){angular.forEach(contents,function(node){isTabHeading(node)?tab.headingElement=node:elm.append(node)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,showMeridian:!0,showSeconds:!1,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0,templateUrl:"uib/template/timepicker/timepicker.html"}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function($scope,$element,$attrs,$parse,$log,$locale,timepickerConfig){function getHoursFromTemplate(){var hours=+$scope.hours,valid=$scope.showMeridian?hours>0&&hours<13:hours>=0&&hours<24;if(valid&&""!==$scope.hours)return $scope.showMeridian&&(12===hours&&(hours=0),$scope.meridian===meridians[1]&&(hours+=12)),hours}function getMinutesFromTemplate(){var minutes=+$scope.minutes,valid=minutes>=0&&minutes<60;if(valid&&""!==$scope.minutes)return minutes}function getSecondsFromTemplate(){var seconds=+$scope.seconds;return seconds>=0&&seconds<60?seconds:void 0}function pad(value,noPad){return null===value?"":angular.isDefined(value)&&value.toString().length<2&&!noPad?"0"+value:value.toString()}function refresh(keyboardChange){makeValid(),ngModelCtrl.$setViewValue(new Date(selected)),updateTemplate(keyboardChange)}function makeValid(){hoursModelCtrl&&hoursModelCtrl.$setValidity("hours",!0),minutesModelCtrl&&minutesModelCtrl.$setValidity("minutes",!0),secondsModelCtrl&&secondsModelCtrl.$setValidity("seconds",!0),ngModelCtrl.$setValidity("time",!0),$scope.invalidHours=!1,$scope.invalidMinutes=!1,$scope.invalidSeconds=!1}function updateTemplate(keyboardChange){if(ngModelCtrl.$modelValue){var hours=selected.getHours(),minutes=selected.getMinutes(),seconds=selected.getSeconds();$scope.showMeridian&&(hours=0===hours||12===hours?12:hours%12),$scope.hours="h"===keyboardChange?hours:pad(hours,!padHours),"m"!==keyboardChange&&($scope.minutes=pad(minutes)),$scope.meridian=selected.getHours()<12?meridians[0]:meridians[1],"s"!==keyboardChange&&($scope.seconds=pad(seconds)),$scope.meridian=selected.getHours()<12?meridians[0]:meridians[1]}else $scope.hours=null,$scope.minutes=null,$scope.seconds=null,$scope.meridian=meridians[0]}function addSecondsToSelected(seconds){selected=addSeconds(selected,seconds),refresh()}function addMinutes(selected,minutes){return addSeconds(selected,60*minutes)}function addSeconds(date,seconds){var dt=new Date(date.getTime()+1e3*seconds),newDate=new Date(date);return newDate.setHours(dt.getHours(),dt.getMinutes(),dt.getSeconds()),newDate}function modelIsEmpty(){return(null===$scope.hours||""===$scope.hours)&&(null===$scope.minutes||""===$scope.minutes)&&(!$scope.showSeconds||$scope.showSeconds&&(null===$scope.seconds||""===$scope.seconds));
}var hoursModelCtrl,minutesModelCtrl,secondsModelCtrl,selected=new Date,watchers=[],ngModelCtrl={$setViewValue:angular.noop},meridians=angular.isDefined($attrs.meridians)?$scope.$parent.$eval($attrs.meridians):timepickerConfig.meridians||$locale.DATETIME_FORMATS.AMPMS,padHours=!angular.isDefined($attrs.padHours)||$scope.$parent.$eval($attrs.padHours);$scope.tabindex=angular.isDefined($attrs.tabindex)?$attrs.tabindex:0,$element.removeAttr("tabindex"),this.init=function(ngModelCtrl_,inputs){ngModelCtrl=ngModelCtrl_,ngModelCtrl.$render=this.render,ngModelCtrl.$formatters.unshift(function(modelValue){return modelValue?new Date(modelValue):null});var hoursInputEl=inputs.eq(0),minutesInputEl=inputs.eq(1),secondsInputEl=inputs.eq(2);hoursModelCtrl=hoursInputEl.controller("ngModel"),minutesModelCtrl=minutesInputEl.controller("ngModel"),secondsModelCtrl=secondsInputEl.controller("ngModel");var mousewheel=angular.isDefined($attrs.mousewheel)?$scope.$parent.$eval($attrs.mousewheel):timepickerConfig.mousewheel;mousewheel&&this.setupMousewheelEvents(hoursInputEl,minutesInputEl,secondsInputEl);var arrowkeys=angular.isDefined($attrs.arrowkeys)?$scope.$parent.$eval($attrs.arrowkeys):timepickerConfig.arrowkeys;arrowkeys&&this.setupArrowkeyEvents(hoursInputEl,minutesInputEl,secondsInputEl),$scope.readonlyInput=angular.isDefined($attrs.readonlyInput)?$scope.$parent.$eval($attrs.readonlyInput):timepickerConfig.readonlyInput,this.setupInputEvents(hoursInputEl,minutesInputEl,secondsInputEl)};var hourStep=timepickerConfig.hourStep;$attrs.hourStep&&watchers.push($scope.$parent.$watch($parse($attrs.hourStep),function(value){hourStep=+value}));var minuteStep=timepickerConfig.minuteStep;$attrs.minuteStep&&watchers.push($scope.$parent.$watch($parse($attrs.minuteStep),function(value){minuteStep=+value}));var min;watchers.push($scope.$parent.$watch($parse($attrs.min),function(value){var dt=new Date(value);min=isNaN(dt)?void 0:dt}));var max;watchers.push($scope.$parent.$watch($parse($attrs.max),function(value){var dt=new Date(value);max=isNaN(dt)?void 0:dt}));var disabled=!1;$attrs.ngDisabled&&watchers.push($scope.$parent.$watch($parse($attrs.ngDisabled),function(value){disabled=value})),$scope.noIncrementHours=function(){var incrementedSelected=addMinutes(selected,60*hourStep);return disabled||incrementedSelected>max||incrementedSelected<selected&&incrementedSelected<min},$scope.noDecrementHours=function(){var decrementedSelected=addMinutes(selected,60*-hourStep);return disabled||decrementedSelected<min||decrementedSelected>selected&&decrementedSelected>max},$scope.noIncrementMinutes=function(){var incrementedSelected=addMinutes(selected,minuteStep);return disabled||incrementedSelected>max||incrementedSelected<selected&&incrementedSelected<min},$scope.noDecrementMinutes=function(){var decrementedSelected=addMinutes(selected,-minuteStep);return disabled||decrementedSelected<min||decrementedSelected>selected&&decrementedSelected>max},$scope.noIncrementSeconds=function(){var incrementedSelected=addSeconds(selected,secondStep);return disabled||incrementedSelected>max||incrementedSelected<selected&&incrementedSelected<min},$scope.noDecrementSeconds=function(){var decrementedSelected=addSeconds(selected,-secondStep);return disabled||decrementedSelected<min||decrementedSelected>selected&&decrementedSelected>max},$scope.noToggleMeridian=function(){return selected.getHours()<12?disabled||addMinutes(selected,720)>max:disabled||addMinutes(selected,-720)<min};var secondStep=timepickerConfig.secondStep;$attrs.secondStep&&watchers.push($scope.$parent.$watch($parse($attrs.secondStep),function(value){secondStep=+value})),$scope.showSeconds=timepickerConfig.showSeconds,$attrs.showSeconds&&watchers.push($scope.$parent.$watch($parse($attrs.showSeconds),function(value){$scope.showSeconds=!!value})),$scope.showMeridian=timepickerConfig.showMeridian,$attrs.showMeridian&&watchers.push($scope.$parent.$watch($parse($attrs.showMeridian),function(value){if($scope.showMeridian=!!value,ngModelCtrl.$error.time){var hours=getHoursFromTemplate(),minutes=getMinutesFromTemplate();angular.isDefined(hours)&&angular.isDefined(minutes)&&(selected.setHours(hours),refresh())}else updateTemplate()})),this.setupMousewheelEvents=function(hoursInputEl,minutesInputEl,secondsInputEl){var isScrollingUp=function(e){e.originalEvent&&(e=e.originalEvent);var delta=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||delta>0};hoursInputEl.on("mousewheel wheel",function(e){disabled||$scope.$apply(isScrollingUp(e)?$scope.incrementHours():$scope.decrementHours()),e.preventDefault()}),minutesInputEl.on("mousewheel wheel",function(e){disabled||$scope.$apply(isScrollingUp(e)?$scope.incrementMinutes():$scope.decrementMinutes()),e.preventDefault()}),secondsInputEl.on("mousewheel wheel",function(e){disabled||$scope.$apply(isScrollingUp(e)?$scope.incrementSeconds():$scope.decrementSeconds()),e.preventDefault()})},this.setupArrowkeyEvents=function(hoursInputEl,minutesInputEl,secondsInputEl){hoursInputEl.on("keydown",function(e){disabled||(38===e.which?(e.preventDefault(),$scope.incrementHours(),$scope.$apply()):40===e.which&&(e.preventDefault(),$scope.decrementHours(),$scope.$apply()))}),minutesInputEl.on("keydown",function(e){disabled||(38===e.which?(e.preventDefault(),$scope.incrementMinutes(),$scope.$apply()):40===e.which&&(e.preventDefault(),$scope.decrementMinutes(),$scope.$apply()))}),secondsInputEl.on("keydown",function(e){disabled||(38===e.which?(e.preventDefault(),$scope.incrementSeconds(),$scope.$apply()):40===e.which&&(e.preventDefault(),$scope.decrementSeconds(),$scope.$apply()))})},this.setupInputEvents=function(hoursInputEl,minutesInputEl,secondsInputEl){if($scope.readonlyInput)return $scope.updateHours=angular.noop,$scope.updateMinutes=angular.noop,void($scope.updateSeconds=angular.noop);var invalidate=function(invalidHours,invalidMinutes,invalidSeconds){ngModelCtrl.$setViewValue(null),ngModelCtrl.$setValidity("time",!1),angular.isDefined(invalidHours)&&($scope.invalidHours=invalidHours,hoursModelCtrl&&hoursModelCtrl.$setValidity("hours",!1)),angular.isDefined(invalidMinutes)&&($scope.invalidMinutes=invalidMinutes,minutesModelCtrl&&minutesModelCtrl.$setValidity("minutes",!1)),angular.isDefined(invalidSeconds)&&($scope.invalidSeconds=invalidSeconds,secondsModelCtrl&&secondsModelCtrl.$setValidity("seconds",!1))};$scope.updateHours=function(){var hours=getHoursFromTemplate(),minutes=getMinutesFromTemplate();ngModelCtrl.$setDirty(),angular.isDefined(hours)&&angular.isDefined(minutes)?(selected.setHours(hours),selected.setMinutes(minutes),selected<min||selected>max?invalidate(!0):refresh("h")):invalidate(!0)},hoursInputEl.on("blur",function(e){ngModelCtrl.$setTouched(),modelIsEmpty()?makeValid():null===$scope.hours||""===$scope.hours?invalidate(!0):!$scope.invalidHours&&$scope.hours<10&&$scope.$apply(function(){$scope.hours=pad($scope.hours,!padHours)})}),$scope.updateMinutes=function(){var minutes=getMinutesFromTemplate(),hours=getHoursFromTemplate();ngModelCtrl.$setDirty(),angular.isDefined(minutes)&&angular.isDefined(hours)?(selected.setHours(hours),selected.setMinutes(minutes),selected<min||selected>max?invalidate(void 0,!0):refresh("m")):invalidate(void 0,!0)},minutesInputEl.on("blur",function(e){ngModelCtrl.$setTouched(),modelIsEmpty()?makeValid():null===$scope.minutes?invalidate(void 0,!0):!$scope.invalidMinutes&&$scope.minutes<10&&$scope.$apply(function(){$scope.minutes=pad($scope.minutes)})}),$scope.updateSeconds=function(){var seconds=getSecondsFromTemplate();ngModelCtrl.$setDirty(),angular.isDefined(seconds)?(selected.setSeconds(seconds),refresh("s")):invalidate(void 0,void 0,!0)},secondsInputEl.on("blur",function(e){modelIsEmpty()?makeValid():!$scope.invalidSeconds&&$scope.seconds<10&&$scope.$apply(function(){$scope.seconds=pad($scope.seconds)})})},this.render=function(){var date=ngModelCtrl.$viewValue;isNaN(date)?(ngModelCtrl.$setValidity("time",!1),$log.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(date&&(selected=date),selected<min||selected>max?(ngModelCtrl.$setValidity("time",!1),$scope.invalidHours=!0,$scope.invalidMinutes=!0):makeValid(),updateTemplate())},$scope.showSpinners=angular.isDefined($attrs.showSpinners)?$scope.$parent.$eval($attrs.showSpinners):timepickerConfig.showSpinners,$scope.incrementHours=function(){$scope.noIncrementHours()||addSecondsToSelected(60*hourStep*60)},$scope.decrementHours=function(){$scope.noDecrementHours()||addSecondsToSelected(60*-hourStep*60)},$scope.incrementMinutes=function(){$scope.noIncrementMinutes()||addSecondsToSelected(60*minuteStep)},$scope.decrementMinutes=function(){$scope.noDecrementMinutes()||addSecondsToSelected(60*-minuteStep)},$scope.incrementSeconds=function(){$scope.noIncrementSeconds()||addSecondsToSelected(secondStep)},$scope.decrementSeconds=function(){$scope.noDecrementSeconds()||addSecondsToSelected(-secondStep)},$scope.toggleMeridian=function(){var minutes=getMinutesFromTemplate(),hours=getHoursFromTemplate();$scope.noToggleMeridian()||(angular.isDefined(minutes)&&angular.isDefined(hours)?addSecondsToSelected(720*(selected.getHours()<12?60:-60)):$scope.meridian=$scope.meridian===meridians[0]?meridians[1]:meridians[0])},$scope.blur=function(){ngModelCtrl.$setTouched()},$scope.$on("$destroy",function(){for(;watchers.length;)watchers.shift()()})}]).directive("uibTimepicker",["uibTimepickerConfig",function(uibTimepickerConfig){return{require:["uibTimepicker","?^ngModel"],restrict:"A",controller:"UibTimepickerController",controllerAs:"timepicker",scope:{},templateUrl:function(element,attrs){return attrs.templateUrl||uibTimepickerConfig.templateUrl},link:function(scope,element,attrs,ctrls){var timepickerCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&timepickerCtrl.init(ngModelCtrl,element.find("input"))}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.debounce","ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function($parse){var TYPEAHEAD_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(input){var match=input.match(TYPEAHEAD_REGEXP);if(!match)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+input+'".');return{itemName:match[3],source:$parse(match[4]),viewMapper:$parse(match[2]||match[1]),modelMapper:$parse(match[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$$debounce","$uibPosition","uibTypeaheadParser",function(originalScope,element,attrs,$compile,$parse,$q,$timeout,$document,$window,$rootScope,$$debounce,$position,typeaheadParser){function fireRecalculating(){scope.moveInProgress||(scope.moveInProgress=!0,scope.$digest()),debouncedRecalculate()}function recalculatePosition(){scope.position=appendToBody?$position.offset(element):$position.position(element),scope.position.top+=element.prop("offsetHeight")}function extractOptions(ngModelCtrl){var ngModelOptions;return angular.version.minor<6?(ngModelOptions=ngModelCtrl.$options||{},ngModelOptions.getOption=function(key){return ngModelOptions[key]}):ngModelOptions=ngModelCtrl.$options,ngModelOptions}var modelCtrl,ngModelOptions,HOT_KEYS=[9,13,27,38,40],eventDebounceTime=200,minLength=originalScope.$eval(attrs.typeaheadMinLength);minLength||0===minLength||(minLength=1),originalScope.$watch(attrs.typeaheadMinLength,function(newVal){minLength=newVal||0===newVal?newVal:1});var waitTime=originalScope.$eval(attrs.typeaheadWaitMs)||0,isEditable=originalScope.$eval(attrs.typeaheadEditable)!==!1;originalScope.$watch(attrs.typeaheadEditable,function(newVal){isEditable=newVal!==!1});var hasFocus,selected,isLoadingSetter=$parse(attrs.typeaheadLoading).assign||angular.noop,isSelectEvent=attrs.typeaheadShouldSelect?$parse(attrs.typeaheadShouldSelect):function(scope,vals){var evt=vals.$event;return 13===evt.which||9===evt.which},onSelectCallback=$parse(attrs.typeaheadOnSelect),isSelectOnBlur=!!angular.isDefined(attrs.typeaheadSelectOnBlur)&&originalScope.$eval(attrs.typeaheadSelectOnBlur),isNoResultsSetter=$parse(attrs.typeaheadNoResults).assign||angular.noop,inputFormatter=attrs.typeaheadInputFormatter?$parse(attrs.typeaheadInputFormatter):void 0,appendToBody=!!attrs.typeaheadAppendToBody&&originalScope.$eval(attrs.typeaheadAppendToBody),appendTo=attrs.typeaheadAppendTo?originalScope.$eval(attrs.typeaheadAppendTo):null,focusFirst=originalScope.$eval(attrs.typeaheadFocusFirst)!==!1,selectOnExact=!!attrs.typeaheadSelectOnExact&&originalScope.$eval(attrs.typeaheadSelectOnExact),isOpenSetter=$parse(attrs.typeaheadIsOpen).assign||angular.noop,showHint=originalScope.$eval(attrs.typeaheadShowHint)||!1,parsedModel=$parse(attrs.ngModel),invokeModelSetter=$parse(attrs.ngModel+"($$$p)"),$setModelValue=function(scope,newValue){return angular.isFunction(parsedModel(originalScope))&&ngModelOptions.getOption("getterSetter")?invokeModelSetter(scope,{$$$p:newValue}):parsedModel.assign(scope,newValue)},parserResult=typeaheadParser.parse(attrs.uibTypeahead),scope=originalScope.$new(),offDestroy=originalScope.$on("$destroy",function(){scope.$destroy()});scope.$on("$destroy",offDestroy);var popupId="typeahead-"+scope.$id+"-"+Math.floor(1e4*Math.random());element.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":popupId});var inputsContainer,hintInputElem;showHint&&(inputsContainer=angular.element("<div></div>"),inputsContainer.css("position","relative"),element.after(inputsContainer),hintInputElem=element.clone(),hintInputElem.attr("placeholder",""),hintInputElem.attr("tabindex","-1"),hintInputElem.val(""),hintInputElem.css({position:"absolute",top:"0px",left:"0px","border-color":"transparent","box-shadow":"none",opacity:1,background:"none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255)",color:"#999"}),element.css({position:"relative","vertical-align":"top","background-color":"transparent"}),hintInputElem.attr("id")&&hintInputElem.removeAttr("id"),inputsContainer.append(hintInputElem),hintInputElem.after(element));var popUpEl=angular.element("<div uib-typeahead-popup></div>");popUpEl.attr({id:popupId,matches:"matches",active:"activeIdx",select:"select(activeIdx, evt)","move-in-progress":"moveInProgress",query:"query",position:"position","assign-is-open":"assignIsOpen(isOpen)",debounce:"debounceUpdate"}),angular.isDefined(attrs.typeaheadTemplateUrl)&&popUpEl.attr("template-url",attrs.typeaheadTemplateUrl),angular.isDefined(attrs.typeaheadPopupTemplateUrl)&&popUpEl.attr("popup-template-url",attrs.typeaheadPopupTemplateUrl);var resetHint=function(){showHint&&hintInputElem.val("")},resetMatches=function(){scope.matches=[],scope.activeIdx=-1,element.attr("aria-expanded",!1),resetHint()},getMatchId=function(index){return popupId+"-option-"+index};scope.$watch("activeIdx",function(index){index<0?element.removeAttr("aria-activedescendant"):element.attr("aria-activedescendant",getMatchId(index))});var inputIsExactMatch=function(inputValue,index){return!!(scope.matches.length>index&&inputValue)&&inputValue.toUpperCase()===scope.matches[index].label.toUpperCase()},getMatchesAsync=function(inputValue,evt){var locals={$viewValue:inputValue};isLoadingSetter(originalScope,!0),isNoResultsSetter(originalScope,!1),$q.when(parserResult.source(originalScope,locals)).then(function(matches){var onCurrentRequest=inputValue===modelCtrl.$viewValue;if(onCurrentRequest&&hasFocus)if(matches&&matches.length>0){scope.activeIdx=focusFirst?0:-1,isNoResultsSetter(originalScope,!1),scope.matches.length=0;for(var i=0;i<matches.length;i++)locals[parserResult.itemName]=matches[i],scope.matches.push({id:getMatchId(i),label:parserResult.viewMapper(scope,locals),model:matches[i]});if(scope.query=inputValue,recalculatePosition(),element.attr("aria-expanded",!0),selectOnExact&&1===scope.matches.length&&inputIsExactMatch(inputValue,0)&&(angular.isNumber(scope.debounceUpdate)||angular.isObject(scope.debounceUpdate)?$$debounce(function(){scope.select(0,evt)},angular.isNumber(scope.debounceUpdate)?scope.debounceUpdate:scope.debounceUpdate["default"]):scope.select(0,evt)),showHint){var firstLabel=scope.matches[0].label;angular.isString(inputValue)&&inputValue.length>0&&firstLabel.slice(0,inputValue.length).toUpperCase()===inputValue.toUpperCase()?hintInputElem.val(inputValue+firstLabel.slice(inputValue.length)):hintInputElem.val("")}}else resetMatches(),isNoResultsSetter(originalScope,!0);onCurrentRequest&&isLoadingSetter(originalScope,!1)},function(){resetMatches(),isLoadingSetter(originalScope,!1),isNoResultsSetter(originalScope,!0)})};appendToBody&&(angular.element($window).on("resize",fireRecalculating),$document.find("body").on("scroll",fireRecalculating));var debouncedRecalculate=$$debounce(function(){scope.matches.length&&recalculatePosition(),scope.moveInProgress=!1},eventDebounceTime);scope.moveInProgress=!1,scope.query=void 0;var timeoutPromise,scheduleSearchWithTimeout=function(inputValue){timeoutPromise=$timeout(function(){getMatchesAsync(inputValue)},waitTime)},cancelPreviousTimeout=function(){timeoutPromise&&$timeout.cancel(timeoutPromise)};resetMatches(),scope.assignIsOpen=function(isOpen){isOpenSetter(originalScope,isOpen)},scope.select=function(activeIdx,evt){var model,item,locals={};selected=!0,locals[parserResult.itemName]=item=scope.matches[activeIdx].model,model=parserResult.modelMapper(originalScope,locals),$setModelValue(originalScope,model),modelCtrl.$setValidity("editable",!0),modelCtrl.$setValidity("parse",!0),onSelectCallback(originalScope,{$item:item,$model:model,$label:parserResult.viewMapper(originalScope,locals),$event:evt}),resetMatches(),scope.$eval(attrs.typeaheadFocusOnSelect)!==!1&&$timeout(function(){element[0].focus()},0,!1)},element.on("keydown",function(evt){if(0!==scope.matches.length&&HOT_KEYS.indexOf(evt.which)!==-1){var shouldSelect=isSelectEvent(originalScope,{$event:evt});if(scope.activeIdx===-1&&shouldSelect||9===evt.which&&evt.shiftKey)return resetMatches(),void scope.$digest();evt.preventDefault();var target;switch(evt.which){case 27:evt.stopPropagation(),resetMatches(),originalScope.$digest();break;case 38:scope.activeIdx=(scope.activeIdx>0?scope.activeIdx:scope.matches.length)-1,scope.$digest(),target=popUpEl[0].querySelectorAll(".uib-typeahead-match")[scope.activeIdx],target.parentNode.scrollTop=target.offsetTop;break;case 40:scope.activeIdx=(scope.activeIdx+1)%scope.matches.length,scope.$digest(),target=popUpEl[0].querySelectorAll(".uib-typeahead-match")[scope.activeIdx],target.parentNode.scrollTop=target.offsetTop;break;default:shouldSelect&&scope.$apply(function(){angular.isNumber(scope.debounceUpdate)||angular.isObject(scope.debounceUpdate)?$$debounce(function(){scope.select(scope.activeIdx,evt)},angular.isNumber(scope.debounceUpdate)?scope.debounceUpdate:scope.debounceUpdate["default"]):scope.select(scope.activeIdx,evt)})}}}),element.on("focus",function(evt){hasFocus=!0,0!==minLength||modelCtrl.$viewValue||$timeout(function(){getMatchesAsync(modelCtrl.$viewValue,evt)},0)}),element.on("blur",function(evt){isSelectOnBlur&&scope.matches.length&&scope.activeIdx!==-1&&!selected&&(selected=!0,scope.$apply(function(){angular.isObject(scope.debounceUpdate)&&angular.isNumber(scope.debounceUpdate.blur)?$$debounce(function(){scope.select(scope.activeIdx,evt)},scope.debounceUpdate.blur):scope.select(scope.activeIdx,evt)})),!isEditable&&modelCtrl.$error.editable&&(modelCtrl.$setViewValue(),scope.$apply(function(){modelCtrl.$setValidity("editable",!0),modelCtrl.$setValidity("parse",!0)}),element.val("")),hasFocus=!1,selected=!1});var dismissClickHandler=function(evt){element[0]!==evt.target&&3!==evt.which&&0!==scope.matches.length&&(resetMatches(),$rootScope.$$phase||originalScope.$digest())};$document.on("click",dismissClickHandler),originalScope.$on("$destroy",function(){$document.off("click",dismissClickHandler),(appendToBody||appendTo)&&$popup.remove(),appendToBody&&(angular.element($window).off("resize",fireRecalculating),$document.find("body").off("scroll",fireRecalculating)),popUpEl.remove(),showHint&&inputsContainer.remove()});var $popup=$compile(popUpEl)(scope);appendToBody?$document.find("body").append($popup):appendTo?angular.element(appendTo).eq(0).append($popup):element.after($popup),this.init=function(_modelCtrl){modelCtrl=_modelCtrl,ngModelOptions=extractOptions(modelCtrl),scope.debounceUpdate=$parse(ngModelOptions.getOption("debounce"))(originalScope),modelCtrl.$parsers.unshift(function(inputValue){return hasFocus=!0,0===minLength||inputValue&&inputValue.length>=minLength?waitTime>0?(cancelPreviousTimeout(),scheduleSearchWithTimeout(inputValue)):getMatchesAsync(inputValue):(isLoadingSetter(originalScope,!1),cancelPreviousTimeout(),resetMatches()),isEditable?inputValue:inputValue?void modelCtrl.$setValidity("editable",!1):(modelCtrl.$setValidity("editable",!0),null)}),modelCtrl.$formatters.push(function(modelValue){var candidateViewValue,emptyViewValue,locals={};return isEditable||modelCtrl.$setValidity("editable",!0),inputFormatter?(locals.$model=modelValue,inputFormatter(originalScope,locals)):(locals[parserResult.itemName]=modelValue,candidateViewValue=parserResult.viewMapper(originalScope,locals),locals[parserResult.itemName]=void 0,emptyViewValue=parserResult.viewMapper(originalScope,locals),candidateViewValue!==emptyViewValue?candidateViewValue:modelValue)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","uibTypeahead"],link:function(originalScope,element,attrs,ctrls){ctrls[1].init(ctrls[0])}}}).directive("uibTypeaheadPopup",["$$debounce",function($$debounce){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&",assignIsOpen:"&",debounce:"&"},replace:!0,templateUrl:function(element,attrs){return attrs.popupTemplateUrl||"uib/template/typeahead/typeahead-popup.html"},link:function(scope,element,attrs){scope.templateUrl=attrs.templateUrl,scope.isOpen=function(){var isDropdownOpen=scope.matches.length>0;return scope.assignIsOpen({isOpen:isDropdownOpen}),isDropdownOpen},scope.isActive=function(matchIdx){return scope.active===matchIdx},scope.selectActive=function(matchIdx){scope.active=matchIdx},scope.selectMatch=function(activeIdx,evt){var debounce=scope.debounce();angular.isNumber(debounce)||angular.isObject(debounce)?$$debounce(function(){scope.select({activeIdx:activeIdx,evt:evt})},angular.isNumber(debounce)?debounce:debounce["default"]):scope.select({activeIdx:activeIdx,evt:evt})}}}}]).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function($templateRequest,$compile,$parse){return{scope:{index:"=",match:"=",query:"="},link:function(scope,element,attrs){var tplUrl=$parse(attrs.templateUrl)(scope.$parent)||"uib/template/typeahead/typeahead-match.html";$templateRequest(tplUrl).then(function(tplContent){var tplEl=angular.element(tplContent.trim());element.replaceWith(tplEl),$compile(tplEl)(scope)})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function($sce,$injector,$log){function escapeRegexp(queryToEscape){return queryToEscape.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function containsHtml(matchItem){return/<.*>/g.test(matchItem)}var isSanitizePresent;return isSanitizePresent=$injector.has("$sanitize"),function(matchItem,query){return!isSanitizePresent&&containsHtml(matchItem)&&$log.warn("Unsafe use of typeahead please use ngSanitize"),matchItem=query?(""+matchItem).replace(new RegExp(escapeRegexp(query),"gi"),"<strong>$&</strong>"):matchItem,isSanitizePresent||(matchItem=$sce.trustAsHtml(matchItem)),matchItem}}]),angular.module("uib/template/accordion/accordion-group.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/accordion/accordion-group.html",'<div role="tab" id="{{::headingId}}" aria-selected="{{isOpen}}" class="panel-heading" ng-keypress="toggleOpen($event)">\n  <h4 class="panel-title">\n    <a role="button" data-toggle="collapse" href aria-expanded="{{isOpen}}" aria-controls="{{::panelId}}" tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading" ng-disabled="isDisabled" uib-tabindex-toggle><span uib-accordion-header ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n  </h4>\n</div>\n<div id="{{::panelId}}" aria-labelledby="{{::headingId}}" aria-hidden="{{!isOpen}}" role="tabpanel" class="panel-collapse collapse" uib-collapse="!isOpen">\n  <div class="panel-body" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/accordion/accordion.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/accordion/accordion.html",'<div role="tablist" class="panel-group" ng-transclude></div>')}]),angular.module("uib/template/alert/alert.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/alert/alert.html",'<button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n  <span aria-hidden="true">&times;</span>\n  <span class="sr-only">Close</span>\n</button>\n<div ng-transclude></div>\n')}]),angular.module("uib/template/carousel/carousel.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/carousel/carousel.html",'<div class="carousel-inner" ng-transclude></div>\n<a role="button" href class="left carousel-control" ng-click="prev()" ng-class="{ disabled: isPrevDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n  <span class="sr-only">previous</span>\n</a>\n<a role="button" href class="right carousel-control" ng-click="next()" ng-class="{ disabled: isNextDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n  <span class="sr-only">next</span>\n</a>\n<ol class="carousel-indicators" ng-show="slides.length > 1">\n  <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n    <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n  </li>\n</ol>\n')}]),angular.module("uib/template/carousel/slide.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/carousel/slide.html",'<div class="text-center" ng-transclude></div>\n')}]),angular.module("uib/template/datepicker/datepicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/datepicker/datepicker.html",'<div ng-switch="datepickerMode">\n  <div uib-daypicker ng-switch-when="day" tabindex="0" class="uib-daypicker"></div>\n  <div uib-monthpicker ng-switch-when="month" tabindex="0" class="uib-monthpicker"></div>\n  <div uib-yearpicker ng-switch-when="year" tabindex="0" class="uib-yearpicker"></div>\n</div>\n')}]),angular.module("uib/template/datepicker/day.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-weeks" ng-repeat="row in rows track by $index" role="row">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row" class="uib-day text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default btn-sm"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/month.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::yearHeaderColspan}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-months" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-month text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/year.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::columns - 2}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-years" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-year text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n');
}]),angular.module("uib/template/datepickerPopup/popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/datepickerPopup/popup.html",'<ul role="presentation" class="uib-datepicker-popup dropdown-menu uib-position-measure" dropdown-nested ng-if="isOpen" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n  <li ng-transclude></li>\n  <li ng-if="showButtonBar" class="uib-button-bar">\n    <span class="btn-group pull-left">\n      <button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\', $event)" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n      <button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null, $event)">{{ getText(\'clear\') }}</button>\n    </span>\n    <button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close($event)">{{ getText(\'close\') }}</button>\n  </li>\n</ul>\n')}]),angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/modal/window.html","<div class=\"modal-dialog {{size ? 'modal-' + size : ''}}\"><div class=\"modal-content\" uib-modal-transclude></div></div>\n")}]),angular.module("uib/template/pager/pager.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/pager/pager.html",'<li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n')}]),angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/pagination/pagination.html",'<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'first\')}}</a></li>\n<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li role="menuitem" ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)" ng-disabled="ngDisabled&&!page.active" uib-tabindex-toggle>{{page.text}}</a></li>\n<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'last\')}}</a></li>\n')}]),angular.module("uib/template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tooltip/tooltip-html-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tooltip/tooltip-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind="content"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tooltip/tooltip-template-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner"\n  uib-tooltip-template-transclude="contentExp()"\n  tooltip-template-transclude-scope="originScope()"></div>\n')}]),angular.module("uib/template/popover/popover-html.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/popover/popover-html.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover-template.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/popover/popover-template.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content"\n      uib-tooltip-template-transclude="contentExp()"\n      tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/popover/popover.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind="content"></div>\n</div>\n')}]),angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n')}]),angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]),angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/rating/rating.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}" aria-valuetext="{{title}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}"></i>\n</span>\n')}]),angular.module("uib/template/tabs/tab.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tabs/tab.html",'<li ng-class="[{active: active, disabled: disabled}, classes]" class="uib-tab nav-item">\n  <a href ng-click="select($event)" class="nav-link" uib-tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("uib/template/tabs/tabset.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{tabset.type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane"\n         ng-repeat="tab in tabset.tabs"\n         ng-class="{active: tabset.active === tab.index}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("uib/template/timepicker/timepicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/timepicker/timepicker.html",'<table class="uib-timepicker">\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-increment hours"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-increment minutes"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-increment seconds"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link" ng-disabled="noIncrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}">\n        <input type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()">\n      </td>\n      <td class="uib-separator">:</td>\n      <td class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}">\n        <input type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()">\n      </td>\n      <td ng-show="showSeconds" class="uib-separator">:</td>\n      <td class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds">\n        <input type="text" placeholder="SS" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()">\n      </td>\n      <td ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-decrement hours"><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-decrement minutes"><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-decrement seconds"><a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link" ng-disabled="noDecrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/typeahead/typeahead-match.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/typeahead/typeahead-match.html",'<a href\n   tabindex="-1"\n   ng-bind-html="match.label | uibTypeaheadHighlight:query"\n   ng-attr-title="{{match.label}}"></a>\n')}]),angular.module("uib/template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li class="uib-typeahead-match" ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),angular.module("ui.bootstrap.carousel").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibCarouselCss&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),angular.$$uibCarouselCss=!0}),angular.module("ui.bootstrap.datepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker .uib-title{width:100%;}.uib-day button,.uib-month button,.uib-year button{min-width:100%;}.uib-left,.uib-right{width:100%}</style>'),angular.$$uibDatepickerCss=!0}),angular.module("ui.bootstrap.position").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibPositionCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>'),angular.$$uibPositionCss=!0}),angular.module("ui.bootstrap.datepickerPopup").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerpopupCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker-popup.dropdown-menu{display:block;float:none;margin:0;}.uib-button-bar{padding:10px 9px 2px;}</style>'),angular.$$uibDatepickerpopupCss=!0}),angular.module("ui.bootstrap.tooltip").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTooltipCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-tooltip-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-bottom > .tooltip-arrow,[uib-popover-popup].popover.top-left > .arrow,[uib-popover-popup].popover.top-right > .arrow,[uib-popover-popup].popover.bottom-left > .arrow,[uib-popover-popup].popover.bottom-right > .arrow,[uib-popover-popup].popover.left-top > .arrow,[uib-popover-popup].popover.left-bottom > .arrow,[uib-popover-popup].popover.right-top > .arrow,[uib-popover-popup].popover.right-bottom > .arrow,[uib-popover-html-popup].popover.top-left > .arrow,[uib-popover-html-popup].popover.top-right > .arrow,[uib-popover-html-popup].popover.bottom-left > .arrow,[uib-popover-html-popup].popover.bottom-right > .arrow,[uib-popover-html-popup].popover.left-top > .arrow,[uib-popover-html-popup].popover.left-bottom > .arrow,[uib-popover-html-popup].popover.right-top > .arrow,[uib-popover-html-popup].popover.right-bottom > .arrow,[uib-popover-template-popup].popover.top-left > .arrow,[uib-popover-template-popup].popover.top-right > .arrow,[uib-popover-template-popup].popover.bottom-left > .arrow,[uib-popover-template-popup].popover.bottom-right > .arrow,[uib-popover-template-popup].popover.left-top > .arrow,[uib-popover-template-popup].popover.left-bottom > .arrow,[uib-popover-template-popup].popover.right-top > .arrow,[uib-popover-template-popup].popover.right-bottom > .arrow{top:auto;bottom:auto;left:auto;right:auto;margin:0;}[uib-popover-popup].popover,[uib-popover-html-popup].popover,[uib-popover-template-popup].popover{display:block !important;}</style>'),angular.$$uibTooltipCss=!0}),angular.module("ui.bootstrap.timepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTimepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-time input{width:50px;}</style>'),angular.$$uibTimepickerCss=!0}),angular.module("ui.bootstrap.typeahead").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTypeaheadCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-typeahead-popup].dropdown-menu{display:block;}</style>'),angular.$$uibTypeaheadCss=!0}),function(window,angular){"use strict";function $RouteProvider(){function inherit(parent,extra){return angular.extend(Object.create(parent),extra)}function pathRegExp(path,opts){var insensitive=opts.caseInsensitiveMatch,ret={originalPath:path,regexp:path},keys=ret.keys=[];return path=path.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[\?\*])?/g,function(_,slash,key,option){var optional="?"===option||"*?"===option?"?":null,star="*"===option||"*?"===option?"*":null;return keys.push({name:key,optional:!!optional}),slash=slash||"",""+(optional?"":slash)+"(?:"+(optional?slash:"")+(star&&"(.+?)"||"([^/]+)")+(optional||"")+")"+(optional||"")}).replace(/([\/$\*])/g,"\\$1"),ret.regexp=new RegExp("^"+path+"$",insensitive?"i":""),ret}var routes={};this.when=function(path,route){var routeCopy=angular.copy(route);if(angular.isUndefined(routeCopy.reloadOnSearch)&&(routeCopy.reloadOnSearch=!0),angular.isUndefined(routeCopy.caseInsensitiveMatch)&&(routeCopy.caseInsensitiveMatch=this.caseInsensitiveMatch),routes[path]=angular.extend(routeCopy,path&&pathRegExp(path,routeCopy)),path){var redirectPath="/"==path[path.length-1]?path.substr(0,path.length-1):path+"/";routes[redirectPath]=angular.extend({redirectTo:path},pathRegExp(redirectPath,routeCopy))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(params){return"string"==typeof params&&(params={redirectTo:params}),this.when(null,params),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function($rootScope,$location,$routeParams,$q,$injector,$templateRequest,$sce){function switchRouteMatcher(on,route){var keys=route.keys,params={};if(!route.regexp)return null;var m=route.regexp.exec(on);if(!m)return null;for(var i=1,len=m.length;i<len;++i){var key=keys[i-1],val=m[i];key&&val&&(params[key.name]=val)}return params}function prepareRoute($locationEvent){var lastRoute=$route.current;preparedRoute=parseRoute(),preparedRouteIsUpdateOnly=preparedRoute&&lastRoute&&preparedRoute.$$route===lastRoute.$$route&&angular.equals(preparedRoute.pathParams,lastRoute.pathParams)&&!preparedRoute.reloadOnSearch&&!forceReload,preparedRouteIsUpdateOnly||!lastRoute&&!preparedRoute||$rootScope.$broadcast("$routeChangeStart",preparedRoute,lastRoute).defaultPrevented&&$locationEvent&&$locationEvent.preventDefault()}function commitRoute(){var lastRoute=$route.current,nextRoute=preparedRoute;preparedRouteIsUpdateOnly?(lastRoute.params=nextRoute.params,angular.copy(lastRoute.params,$routeParams),$rootScope.$broadcast("$routeUpdate",lastRoute)):(nextRoute||lastRoute)&&(forceReload=!1,$route.current=nextRoute,nextRoute&&nextRoute.redirectTo&&(angular.isString(nextRoute.redirectTo)?$location.path(interpolate(nextRoute.redirectTo,nextRoute.params)).search(nextRoute.params).replace():$location.url(nextRoute.redirectTo(nextRoute.pathParams,$location.path(),$location.search())).replace()),$q.when(nextRoute).then(function(){if(nextRoute){var template,templateUrl,locals=angular.extend({},nextRoute.resolve);return angular.forEach(locals,function(value,key){locals[key]=angular.isString(value)?$injector.get(value):$injector.invoke(value,null,null,key)}),angular.isDefined(template=nextRoute.template)?angular.isFunction(template)&&(template=template(nextRoute.params)):angular.isDefined(templateUrl=nextRoute.templateUrl)&&(angular.isFunction(templateUrl)&&(templateUrl=templateUrl(nextRoute.params)),angular.isDefined(templateUrl)&&(nextRoute.loadedTemplateUrl=$sce.valueOf(templateUrl),template=$templateRequest(templateUrl))),angular.isDefined(template)&&(locals.$template=template),$q.all(locals)}}).then(function(locals){nextRoute==$route.current&&(nextRoute&&(nextRoute.locals=locals,angular.copy(nextRoute.params,$routeParams)),$rootScope.$broadcast("$routeChangeSuccess",nextRoute,lastRoute))},function(error){nextRoute==$route.current&&$rootScope.$broadcast("$routeChangeError",nextRoute,lastRoute,error)}))}function parseRoute(){var params,match;return angular.forEach(routes,function(route,path){!match&&(params=switchRouteMatcher($location.path(),route))&&(match=inherit(route,{params:angular.extend({},$location.search(),params),pathParams:params}),match.$$route=route)}),match||routes[null]&&inherit(routes[null],{params:{},pathParams:{}})}function interpolate(string,params){var result=[];return angular.forEach((string||"").split(":"),function(segment,i){if(0===i)result.push(segment);else{var segmentMatch=segment.match(/(\w+)(?:[?*])?(.*)/),key=segmentMatch[1];result.push(params[key]),result.push(segmentMatch[2]||""),delete params[key]}}),result.join("")}var preparedRoute,preparedRouteIsUpdateOnly,forceReload=!1,$route={routes:routes,reload:function(){forceReload=!0;var fakeLocationEvent={defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0,forceReload=!1}};$rootScope.$evalAsync(function(){prepareRoute(fakeLocationEvent),fakeLocationEvent.defaultPrevented||commitRoute()})},updateParams:function(newParams){if(!this.current||!this.current.$$route)throw $routeMinErr("norout","Tried updating route when with no current route");newParams=angular.extend({},this.current.params,newParams),$location.path(interpolate(this.current.$$route.originalPath,newParams)),$location.search(newParams)}};return $rootScope.$on("$locationChangeStart",prepareRoute),$rootScope.$on("$locationChangeSuccess",commitRoute),$route}]}function $RouteParamsProvider(){this.$get=function(){return{}}}function ngViewFactory($route,$anchorScroll,$animate){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(scope,$element,attr,ctrl,$transclude){function cleanupLastView(){previousLeaveAnimation&&($animate.cancel(previousLeaveAnimation),previousLeaveAnimation=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&(previousLeaveAnimation=$animate.leave(currentElement),previousLeaveAnimation.then(function(){previousLeaveAnimation=null}),currentElement=null)}function update(){var locals=$route.current&&$route.current.locals,template=locals&&locals.$template;if(angular.isDefined(template)){var newScope=scope.$new(),current=$route.current,clone=$transclude(newScope,function(clone){$animate.enter(clone,null,currentElement||$element).then(function(){!angular.isDefined(autoScrollExp)||autoScrollExp&&!scope.$eval(autoScrollExp)||$anchorScroll()}),cleanupLastView()});currentElement=clone,currentScope=current.scope=newScope,currentScope.$emit("$viewContentLoaded"),currentScope.$eval(onloadExp)}else cleanupLastView()}var currentScope,currentElement,previousLeaveAnimation,autoScrollExp=attr.autoscroll,onloadExp=attr.onload||"";scope.$on("$routeChangeSuccess",update),update()}}}function ngViewFillContentFactory($compile,$controller,$route){return{restrict:"ECA",priority:-400,link:function(scope,$element){var current=$route.current,locals=current.locals;$element.html(locals.$template);var link=$compile($element.contents());if(current.controller){locals.$scope=scope;var controller=$controller(current.controller,locals);current.controllerAs&&(scope[current.controllerAs]=controller),$element.data("$ngControllerController",controller),$element.children().data("$ngControllerController",controller)}scope[current.resolveAs||"$resolve"]=locals,link(scope)}}}var ngRouteModule=angular.module("ngRoute",["ng"]).provider("$route",$RouteProvider),$routeMinErr=angular.$$minErr("ngRoute");ngRouteModule.provider("$routeParams",$RouteParamsProvider),ngRouteModule.directive("ngView",ngViewFactory),ngRouteModule.directive("ngView",ngViewFillContentFactory),ngViewFactory.$inject=["$route","$anchorScroll","$animate"],ngViewFillContentFactory.$inject=["$compile","$controller","$route"]}(window,window.angular),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports,require("angular")):"function"==typeof define&&define.amd?define(["exports","angular"],factory):factory(global["@uirouter/angularjs"]={},global.angular)}(this,function(exports,ng_from_import){"use strict";function curry(fn){function curried(args){return args.length>=func_args_length?fn.apply(null,args):function(){return curried(args.concat([].slice.apply(arguments)))}}var initial_args=[].slice.apply(arguments,[1]),func_args_length=fn.length;return curried(initial_args)}function compose(){var args=arguments,start=args.length-1;return function(){for(var i=start,result=args[start].apply(this,arguments);i--;)result=args[i].call(this,result);return result}}function pipe(){for(var funcs=[],_i=0;_i<arguments.length;_i++)funcs[_i]=arguments[_i];return compose.apply(null,[].slice.call(arguments).reverse())}function and(fn1,fn2){return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return fn1.apply(null,args)&&fn2.apply(null,args)}}function or(fn1,fn2){return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return fn1.apply(null,args)||fn2.apply(null,args)}}function invoke(fnName,args){return function(obj){return obj[fnName].apply(obj,args)}}function pattern(struct){return function(x){for(var i=0;i<struct.length;i++)if(struct[i][0](x))return struct[i][1](x)}}function isInjectable(val$$1){if(isArray(val$$1)&&val$$1.length){var head=val$$1.slice(0,-1),tail=val$$1.slice(-1);return!(head.filter(not(isString)).length||tail.filter(not(isFunction)).length)}return isFunction(val$$1)}function identity(x){return x}function noop(){}function createProxyFunctions(source,target,bind,fnNames,latebind){void 0===latebind&&(latebind=!1);var bindFunction=function(fnName){return source()[fnName].bind(bind())},makeLateRebindFn=function(fnName){return function(){return target[fnName]=bindFunction(fnName),target[fnName].apply(null,arguments)}};return fnNames=fnNames||Object.keys(source()),fnNames.reduce(function(acc,name){return acc[name]=latebind?makeLateRebindFn(name):bindFunction(name),acc},target)}function _inArray(array,obj){return array.indexOf(obj)!==-1}function _removeFrom(array,obj){var idx=array.indexOf(obj);return idx>=0&&array.splice(idx,1),array}function _pushTo(arr,val$$1){return arr.push(val$$1),val$$1}function defaults(opts){for(var defaultsList=[],_i=1;_i<arguments.length;_i++)defaultsList[_i-1]=arguments[_i];var _defaultsList=defaultsList.concat({}).reverse(),defaultVals=extend.apply(null,_defaultsList);return extend({},defaultVals,pick(opts||{},Object.keys(defaultVals)))}function ancestors(first,second){var path=[];for(var n in first.path){if(first.path[n]!==second.path[n])break;path.push(first.path[n])}return path}function pick(obj,propNames){var objCopy={};for(var _prop in obj)propNames.indexOf(_prop)!==-1&&(objCopy[_prop]=obj[_prop]);return objCopy}function omit(obj,propNames){return Object.keys(obj).filter(not(inArray(propNames))).reduce(function(acc,key){return acc[key]=obj[key],acc},{})}function pluck(collection,propName){return map(collection,prop(propName))}function filter(collection,callback){var arr=isArray(collection),result=arr?[]:{},accept=arr?function(x){return result.push(x)}:function(x,key){return result[key]=x};return forEach(collection,function(item,i){callback(item,i)&&accept(item,i)}),result}function find(collection,callback){var result;return forEach(collection,function(item,i){result||callback(item,i)&&(result=item)}),result}function map(collection,callback,target){return target=target||(isArray(collection)?[]:{}),forEach(collection,function(item,i){return target[i]=callback(item,i)}),target}function pushR(arr,obj){return arr.push(obj),arr}function assertFn(predicateOrMap,errMsg){return void 0===errMsg&&(errMsg="assert failure"),function(obj){var result=predicateOrMap(obj);if(!result)throw new Error(isFunction(errMsg)?errMsg(obj):errMsg);return result}}function arrayTuples(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];if(0===args.length)return[];for(var maxArrayLen=args.reduce(function(min,arr){return Math.min(arr.length,min)},9007199254740991),result=[],_loop_1=function(i){switch(args.length){case 1:result.push([args[0][i]]);break;case 2:result.push([args[0][i],args[1][i]]);break;case 3:result.push([args[0][i],args[1][i],args[2][i]]);break;case 4:result.push([args[0][i],args[1][i],args[2][i],args[3][i]]);break;default:result.push(args.map(function(array){return array[i]}))}},i=0;i<maxArrayLen;i++)_loop_1(i);return result}function applyPairs(memo,keyValTuple){var key,value;if(isArray(keyValTuple)&&(key=keyValTuple[0],value=keyValTuple[1]),!isString(key))throw new Error("invalid parameters to applyPairs");return memo[key]=value,memo}function tail(arr){return arr.length&&arr[arr.length-1]||void 0}function copy(src,dest){return dest&&Object.keys(dest).forEach(function(key){return delete dest[key]}),dest||(dest={}),extend(dest,src)}function _forEach(obj,cb,_this){return isArray(obj)?obj.forEach(cb,_this):void Object.keys(obj).forEach(function(key){return cb(obj[key],key)})}function _extend(toObj){for(var i=1;i<arguments.length;i++){var obj=arguments[i];if(obj)for(var keys=Object.keys(obj),j=0;j<keys.length;j++)toObj[keys[j]]=obj[keys[j]]}return toObj}function _equals(o1,o2){if(o1===o2)return!0;if(null===o1||null===o2)return!1;if(o1!==o1&&o2!==o2)return!0;var t1=typeof o1,t2=typeof o2;if(t1!==t2||"object"!==t1)return!1;var tup=[o1,o2];if(all(isArray)(tup))return _arraysEq(o1,o2);if(all(isDate)(tup))return o1.getTime()===o2.getTime();if(all(isRegExp)(tup))return o1.toString()===o2.toString();if(all(isFunction)(tup))return!0;var predicates=[isFunction,isArray,isDate,isRegExp];if(predicates.map(any).reduce(function(b,fn){return b||!!fn(tup)},!1))return!1;var keys={};for(var key in o1){if(!_equals(o1[key],o2[key]))return!1;keys[key]=!0}for(var key in o2)if(!keys[key])return!1;return!0}function _arraysEq(a1,a2){return a1.length===a2.length&&arrayTuples(a1,a2).reduce(function(b,t){return b&&_equals(t[0],t[1]);
},!0)}function uiViewString(uiview){if(!uiview)return"ui-view (defunct)";var state=uiview.creationContext?uiview.creationContext.name||"(root)":"(none)";return"[ui-view#"+uiview.id+" "+uiview.$type+":"+uiview.fqn+" ("+uiview.name+"@"+state+")]"}function normalizedCat(input){return isNumber(input)?exports.Category[input]:exports.Category[exports.Category[input]]}function matchState(state,criterion){function matchGlobs(_state){for(var globStrings=toMatch,i=0;i<globStrings.length;i++){var glob=new Glob(globStrings[i]);if(glob&&glob.matches(_state.name)||!glob&&globStrings[i]===_state.name)return!0}return!1}var toMatch=isString(criterion)?[criterion]:criterion,matchFn=isFunction(toMatch)?toMatch:matchGlobs;return!!matchFn(state)}function makeEvent(registry,transitionService,eventType){function hookRegistrationFn(matchObject,callback,options){void 0===options&&(options={});var registeredHook=new RegisteredHook(transitionService,eventType,callback,matchObject,removeHookFn,options);return hooks.push(registeredHook),registeredHook.deregister.bind(registeredHook)}var _registeredHooks=registry._registeredHooks=registry._registeredHooks||{},hooks=_registeredHooks[eventType.name]=[],removeHookFn=removeFrom(hooks);return registry[eventType.name]=hookRegistrationFn,hookRegistrationFn}function tupleSort(reverseDepthSort){return void 0===reverseDepthSort&&(reverseDepthSort=!1),function(l,r){var factor=reverseDepthSort?-1:1,depthDelta=(l.node.state.path.length-r.node.state.path.length)*factor;return 0!==depthDelta?depthDelta:r.hook.priority-l.hook.priority}}function ArrayType(type,mode){function arrayWrap(val){return isArray(val)?val:isDefined(val)?[val]:[]}function arrayUnwrap(val){switch(val.length){case 0:return;case 1:return"auto"===mode?val[0]:val;default:return val}}function arrayHandler(callback,allTruthyMode){return function(val){if(isArray(val)&&0===val.length)return val;var arr=arrayWrap(val),result=map(arr,callback);return allTruthyMode===!0?0===filter(result,function(x){return!x}).length:arrayUnwrap(result)}}function arrayEqualsHandler(callback){return function(val1,val2){var left=arrayWrap(val1),right=arrayWrap(val2);if(left.length!==right.length)return!1;for(var i=0;i<left.length;i++)if(!callback(left[i],right[i]))return!1;return!0}}var _this=this;["encode","decode","equals","$normalize"].forEach(function(name){var paramTypeFn=type[name].bind(type),wrapperFn="equals"===name?arrayEqualsHandler:arrayHandler;_this[name]=wrapperFn(paramTypeFn)}),extend(this,{dynamic:type.dynamic,name:type.name,pattern:type.pattern,inherit:type.inherit,is:arrayHandler(type.is.bind(type),!0),$arrayMode:mode})}function unwrapShorthand(cfg){function getStaticDefaultValue(){return cfg.value}return cfg=isShorthand(cfg)&&{value:cfg}||cfg,getStaticDefaultValue.__cacheable=!0,extend(cfg,{$$fn:isInjectable(cfg.value)?cfg.value:getStaticDefaultValue})}function getType(cfg,urlType,location,id,paramTypes){if(cfg.type&&urlType&&"string"!==urlType.name)throw new Error("Param '"+id+"' has two type configurations.");if(cfg.type&&urlType&&"string"===urlType.name&&paramTypes.type(cfg.type))return paramTypes.type(cfg.type);if(urlType)return urlType;if(!cfg.type){var type=location===exports.DefType.CONFIG?"any":location===exports.DefType.PATH?"path":location===exports.DefType.SEARCH?"query":"string";return paramTypes.type(type)}return cfg.type instanceof ParamType?cfg.type:paramTypes.type(cfg.type)}function getSquashPolicy(config,isOptional,defaultPolicy){var squash=config.squash;if(!isOptional||squash===!1)return!1;if(!isDefined(squash)||null==squash)return defaultPolicy;if(squash===!0||isString(squash))return squash;throw new Error("Invalid squash policy: '"+squash+"'. Valid policies: false, true, or arbitrary string")}function getReplace(config,arrayMode,isOptional,squash){var defaultPolicy=[{from:"",to:isOptional||arrayMode?void 0:""},{from:null,to:isOptional||arrayMode?void 0:""}],replace=isArray(config.replace)?config.replace:[];isString(squash)&&replace.push({from:squash,to:void 0});var configuredKeys=map(replace,prop("from"));return filter(defaultPolicy,function(item){return configuredKeys.indexOf(item.from)===-1}).concat(replace)}function maxLength(max,str){return str.length<=max?str:str.substr(0,max-3)+"..."}function padString(length,str){for(;str.length<length;)str+=" ";return str}function kebobString(camelCase){return camelCase.replace(/^([A-Z])/,function($1){return $1.toLowerCase()}).replace(/([A-Z])/g,function($1){return"-"+$1.toLowerCase()})}function functionToString(fn){var fnStr=fnToString(fn),namedFunctionMatch=fnStr.match(/^(function [^ ]+\([^)]*\))/),toStr=namedFunctionMatch?namedFunctionMatch[1]:fnStr,fnName=fn.name||"";return fnName&&toStr.match(/function \(/)?"function "+fnName+toStr.substr(9):toStr}function fnToString(fn){var _fn=isArray(fn)?fn.slice(-1)[0]:fn;return _fn&&_fn.toString()||"undefined"}function stringify(o){function format(value){if(isObject(value)){if(seen.indexOf(value)!==-1)return"[circular ref]";seen.push(value)}return stringifyPattern(value)}var seen=[];return JSON.stringify(o,function(key,value){return format(value)}).replace(/\\"/g,'"')}function splitOnDelim(delim){var re=new RegExp("("+delim+")","g");return function(str){return str.split(re).filter(identity)}}function joinNeighborsR(acc,x){return isString(tail(acc))&&isString(x)?acc.slice(0,-1).concat(tail(acc)+x):pushR(acc,x)}function initDefaultTypes(){var makeDefaultType=function(def){var valToString=function(val$$1){return null!=val$$1?val$$1.toString():val$$1},defaultTypeBase={encode:valToString,decode:valToString,is:is(String),pattern:/.*/,equals:function(a,b){return a==b}};return extend({},defaultTypeBase,def)};extend(ParamTypes.prototype,{string:makeDefaultType({}),path:makeDefaultType({pattern:/[^/]*/}),query:makeDefaultType({}),hash:makeDefaultType({inherit:!1}),"int":makeDefaultType({decode:function(val$$1){return parseInt(val$$1,10)},is:function(val$$1){return!isNullOrUndefined(val$$1)&&this.decode(val$$1.toString())===val$$1},pattern:/-?\d+/}),bool:makeDefaultType({encode:function(val$$1){return val$$1&&1||0},decode:function(val$$1){return 0!==parseInt(val$$1,10)},is:is(Boolean),pattern:/0|1/}),date:makeDefaultType({encode:function(val$$1){return this.is(val$$1)?[val$$1.getFullYear(),("0"+(val$$1.getMonth()+1)).slice(-2),("0"+val$$1.getDate()).slice(-2)].join("-"):void 0},decode:function(val$$1){if(this.is(val$$1))return val$$1;var match=this.capture.exec(val$$1);return match?new Date(match[1],match[2]-1,match[3]):void 0},is:function(val$$1){return val$$1 instanceof Date&&!isNaN(val$$1.valueOf())},equals:function(l,r){return["getFullYear","getMonth","getDate"].reduce(function(acc,fn){return acc&&l[fn]()===r[fn]()},!0)},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/}),json:makeDefaultType({encode:toJson,decode:fromJson,is:is(Object),equals:equals,pattern:/[^/]*/}),any:makeDefaultType({encode:identity,decode:identity,is:function(){return!0},equals:equals})})}function nameBuilder(state){return state.name}function selfBuilder(state){return state.self.$$state=function(){return state},state.self}function dataBuilder(state){return state.parent&&state.parent.data&&(state.data=state.self.data=inherit(state.parent.data,state.data)),state.data}function pathBuilder(state){return state.parent?state.parent.path.concat(state):[state]}function includesBuilder(state){var includes=state.parent?extend({},state.parent.includes):{};return includes[state.name]=!0,includes}function resolvablesBuilder(state){var objects2Tuples=function(resolveObj,resolvePolicies){return Object.keys(resolveObj||{}).map(function(token){return{token:token,val:resolveObj[token],deps:void 0,policy:resolvePolicies[token]}})},annotate=function(fn){var $injector=services.$injector;return fn.$inject||$injector&&$injector.annotate(fn,$injector.strictDi)||"deferred"},isResolveLiteral=function(obj){return!(!obj.token||!obj.resolveFn)},isLikeNg2Provider=function(obj){return!(!obj.provide&&!obj.token||!(obj.useValue||obj.useFactory||obj.useExisting||obj.useClass))},isTupleFromObj=function(obj){return!!(obj&&obj.val&&(isString(obj.val)||isArray(obj.val)||isFunction(obj.val)))},getToken=function(p){return p.provide||p.token},literal2Resolvable=pattern([[prop("resolveFn"),function(p){return new Resolvable(getToken(p),p.resolveFn,p.deps,p.policy)}],[prop("useFactory"),function(p){return new Resolvable(getToken(p),p.useFactory,p.deps||p.dependencies,p.policy)}],[prop("useClass"),function(p){return new Resolvable(getToken(p),function(){return new p.useClass},[],p.policy)}],[prop("useValue"),function(p){return new Resolvable(getToken(p),function(){return p.useValue},[],p.policy,p.useValue)}],[prop("useExisting"),function(p){return new Resolvable(getToken(p),identity,[p.useExisting],p.policy)}]]),tuple2Resolvable=pattern([[pipe(prop("val"),isString),function(tuple){return new Resolvable(tuple.token,identity,[tuple.val],tuple.policy)}],[pipe(prop("val"),isArray),function(tuple){return new Resolvable(tuple.token,tail(tuple.val),tuple.val.slice(0,-1),tuple.policy)}],[pipe(prop("val"),isFunction),function(tuple){return new Resolvable(tuple.token,tuple.val,annotate(tuple.val),tuple.policy)}]]),item2Resolvable=pattern([[is(Resolvable),function(r){return r}],[isResolveLiteral,literal2Resolvable],[isLikeNg2Provider,literal2Resolvable],[isTupleFromObj,tuple2Resolvable],[val(!0),function(obj){throw new Error("Invalid resolve value: "+stringify(obj))}]]),decl=state.resolve,items=isArray(decl)?decl:objects2Tuples(decl,state.resolvePolicy||{});return items.map(item2Resolvable)}function quoteRegExp(str,param){var surroundPattern=["",""],result=str.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!param)return result;switch(param.squash){case!1:surroundPattern=["(",")"+(param.isOptional?"?":"")];break;case!0:result=result.replace(/\/$/,""),surroundPattern=["(?:/(",")|/)?"];break;default:surroundPattern=["("+param.squash+"|",")?"]}return result+surroundPattern[0]+param.type.pattern.source+surroundPattern[1]}function appendBasePath(url,isHtml5,absolute,baseHref){return"/"===baseHref?url:isHtml5?stripLastPathElement(baseHref)+url:absolute?baseHref.slice(1)+url:url}function getHandlerFn(handler){if(!(isFunction(handler)||isString(handler)||is(TargetState)(handler)||TargetState.isDef(handler)))throw new Error("'handler' must be a string, function, TargetState, or have a state: 'newtarget' property");return isFunction(handler)?handler:val(handler)}function addCoreResolvables(trans){trans.addResolvable(Resolvable.fromData(UIRouter,trans.router),""),trans.addResolvable(Resolvable.fromData(Transition,trans),""),trans.addResolvable(Resolvable.fromData("$transition$",trans),""),trans.addResolvable(Resolvable.fromData("$stateParams",trans.params()),""),trans.entering().forEach(function(state){trans.addResolvable(Resolvable.fromData("$state$",state),state)})}function makeEnterExitRetainHook(hookName){return function(transition,state){var _state=state.$$state(),hookFn=_state[hookName];return hookFn(transition,state)}}function lazyLoadState(transition,state){function updateStateRegistry(result){return result&&Array.isArray(result.states)&&result.states.forEach(function(_state){return transition.router.stateRegistry.register(_state)}),result}var lazyLoadFn=state.$$state().lazyLoad,promise=lazyLoadFn._promise;if(!promise){var success=function(result){return delete state.lazyLoad,delete state.$$state().lazyLoad,delete lazyLoadFn._promise,result},error=function(err){return delete lazyLoadFn._promise,services.$q.reject(err)};promise=lazyLoadFn._promise=services.$q.when(lazyLoadFn(transition,state)).then(updateStateRegistry).then(success,error)}return promise}function ignoredHook(trans){var ignoredReason=trans._ignoredReason();if(ignoredReason){trace.traceTransitionIgnored(trans);var pending=trans.router.globals.transition;return"SameAsCurrent"===ignoredReason&&pending&&pending.abort(),Rejection.ignored().toPromise()}}function invalidTransitionHook(trans){if(!trans.valid())throw new Error(trans.error().toString())}function parseUrl$1(url){var orEmptyString=function(x){return x||""},_a=splitHash(url).map(orEmptyString),beforehash=_a[0],hash=_a[1],_b=splitQuery(beforehash).map(orEmptyString),path=_b[0],search=_b[1];return{path:path,search:search,hash:hash,url:url}}function locationPluginFactory(name,isHtml5,serviceClass,configurationClass){return function(uiRouter){function dispose(router){router.dispose(service),router.dispose(configuration)}var service=uiRouter.locationService=new serviceClass(uiRouter),configuration=uiRouter.locationConfig=new configurationClass(uiRouter,isHtml5);return{name:name,service:service,configuration:configuration,dispose:dispose}}}function servicesPlugin(router){return services.$injector=$injector,services.$q=$q,{name:"vanilla.services",$q:$q,$injector:$injector,dispose:function(){return null}}}function getNg1ViewConfigFactory(){var templateFactory=null;return function(path,view){return templateFactory=templateFactory||services.$injector.get("$templateFactory"),[new Ng1ViewConfig(path,view,templateFactory)]}}function ng1ViewsBuilder(state){if(!state.parent)return{};var tplKeys=["templateProvider","templateUrl","template","notify","async"],ctrlKeys=["controller","controllerProvider","controllerAs","resolveAs"],compKeys=["component","bindings","componentProvider"],nonCompKeys=tplKeys.concat(ctrlKeys),allViewKeys=compKeys.concat(nonCompKeys);if(isDefined(state.views)&&hasAnyKey(allViewKeys,state))throw new Error("State '"+state.name+"' has a 'views' object. It cannot also have \"view properties\" at the state level.  Move the following properties into a view (in the 'views' object):  "+allViewKeys.filter(function(key){return isDefined(state[key])}).join(", "));var views={},viewsObject=state.views||{$default:pick(state,allViewKeys)};return forEach(viewsObject,function(config,name){if(name=name||"$default",isString(config)&&(config={component:config}),config=extend({},config),hasAnyKey(compKeys,config)&&hasAnyKey(nonCompKeys,config))throw new Error("Cannot combine: "+compKeys.join("|")+" with: "+nonCompKeys.join("|")+" in stateview: '"+name+"@"+state.name+"'");config.resolveAs=config.resolveAs||"$resolve",config.$type="ng1",config.$context=state,config.$name=name;var normalized=ViewService.normalizeUIViewTarget(config.$context,config.$name);config.$uiViewName=normalized.uiViewName,config.$uiViewContextAnchor=normalized.uiViewContextAnchor,views[name]=config}),views}function getComponentBindings(name){var cmpDefs=services.$injector.get(name+"Directive");if(!cmpDefs||!cmpDefs.length)throw new Error("Unable to find component named '"+name+"'");return cmpDefs.map(getBindings).reduce(unnestR,[])}function $uiRouterProvider($locationProvider){function $get($location,$browser,$sniffer,$rootScope,$http,$templateCache){return ng1LocationService._runtimeServices($rootScope,$location,$sniffer,$browser),delete router.router,delete router.$get,router}router=this.router=new UIRouter,router.stateProvider=new StateProvider(router.stateRegistry,router.stateService),router.stateRegistry.decorator("views",ng1ViewsBuilder),router.stateRegistry.decorator("onExit",getStateHookBuilder("onExit")),router.stateRegistry.decorator("onRetain",getStateHookBuilder("onRetain")),router.stateRegistry.decorator("onEnter",getStateHookBuilder("onEnter")),router.viewService._pluginapi._viewConfigFactory("ng1",getNg1ViewConfigFactory());var ng1LocationService=router.locationService=router.locationConfig=new Ng1LocationServices($locationProvider);return Ng1LocationServices.monkeyPatchPathParameterType(router),router.router=router,router.$get=$get,$get.$inject=["$location","$browser","$sniffer","$rootScope","$http","$templateCache"],router}function runBlock($injector$$1,$q$$1,$uiRouter){services.$injector=$injector$$1,services.$q=$q$$1,$uiRouter.stateRegistry.get().map(function(x){return x.$$state().resolvables}).reduce(unnestR,[]).filter(function(x){return"deferred"===x.deps}).forEach(function(resolvable){return resolvable.deps=$injector$$1.annotate(resolvable.resolveFn,$injector$$1.strictDi)})}function watchDigests($rootScope){$rootScope.$watch(function(){trace.approximateDigests++})}function parseStateRef(ref){var parsed,paramsOnly=ref.match(/^\s*({[^}]*})\s*$/);if(paramsOnly&&(ref="("+paramsOnly[1]+")"),parsed=ref.replace(/\n/g," ").match(/^\s*([^(]*?)\s*(\((.*)\))?\s*$/),!parsed||4!==parsed.length)throw new Error("Invalid state ref '"+ref+"'");return{state:parsed[1]||null,paramExpr:parsed[3]||null}}function stateContext(el){var $uiView=el.parent().inheritedData("$uiView"),path=parse("$cfg.path")($uiView);return path?tail(path).state.name:void 0}function processedDef($state,$element,def){var uiState=def.uiState||$state.current.name,uiStateOpts=extend(defaultOpts($element,$state),def.uiStateOpts||{}),href=$state.href(uiState,def.uiStateParams,uiStateOpts);return{uiState:uiState,uiStateParams:def.uiStateParams,uiStateOpts:uiStateOpts,href:href}}function getTypeInfo(el){var isSvg="[object SVGAnimatedString]"===Object.prototype.toString.call(el.prop("href")),isForm="FORM"===el[0].nodeName;return{attr:isForm?"action":isSvg?"xlink:href":"href",isAnchor:"A"===el.prop("tagName").toUpperCase(),clickable:!isForm}}function clickHook(el,$state,$timeout,type,getDef){return function(e){var button=e.which||e.button,target=getDef();if(!(button>1||e.ctrlKey||e.metaKey||e.shiftKey||el.attr("target"))){var transition_1=$timeout(function(){el.attr("disabled")||$state.go(target.uiState,target.uiStateParams,target.uiStateOpts)});e.preventDefault();var ignorePreventDefaultCount_1=type.isAnchor&&!target.href?1:0;e.preventDefault=function(){ignorePreventDefaultCount_1--<=0&&$timeout.cancel(transition_1)}}}}function defaultOpts(el,$state){return{relative:stateContext(el)||$state.$current,inherit:!0,source:"sref"}}function bindEvents(element,scope,hookFn,uiStateOpts){var events;uiStateOpts&&(events=uiStateOpts.events),isArray(events)||(events=["click"]);for(var on=element.on?"on":"bind",_i=0,events_1=events;_i<events_1.length;_i++){var event_1=events_1[_i];element[on](event_1,hookFn)}scope.$on("$destroy",function(){for(var off=element.off?"off":"unbind",_i=0,events_2=events;_i<events_2.length;_i++){var event_2=events_2[_i];element[off](event_2,hookFn)}})}function $IsStateFilter($state){var isFilter=function(state,params,options){return $state.is(state,params,options)};return isFilter.$stateful=!0,isFilter}function $IncludedByStateFilter($state){var includesFilter=function(state,params,options){return $state.includes(state,params,options)};return includesFilter.$stateful=!0,includesFilter}function $ViewDirectiveFill($compile,$controller,$transitions,$view,$q$$1,$timeout){var getControllerAs=parse("viewDecl.controllerAs"),getResolveAs=parse("viewDecl.resolveAs");return{restrict:"ECA",priority:-400,compile:function(tElement){var initial=tElement.html();return tElement.empty(),function(scope,$element){var data=$element.data("$uiView");if(!data)return $element.html(initial),void $compile($element.contents())(scope);var cfg=data.$cfg||{viewDecl:{},getTemplate:noop},resolveCtx=cfg.path&&new ResolveContext(cfg.path);$element.html(cfg.getTemplate($element,resolveCtx)||initial),trace.traceUIViewFill(data.$uiView,$element.html());var link=$compile($element.contents()),controller=cfg.controller,controllerAs=getControllerAs(cfg),resolveAs=getResolveAs(cfg),locals=resolveCtx&&getLocals(resolveCtx);if(scope[resolveAs]=locals,controller){var controllerInstance=$controller(controller,extend({},locals,{$scope:scope,$element:$element}));controllerAs&&(scope[controllerAs]=controllerInstance,scope[controllerAs][resolveAs]=locals),$element.data("$ngControllerController",controllerInstance),$element.children().data("$ngControllerController",controllerInstance),registerControllerCallbacks($q$$1,$transitions,controllerInstance,scope,cfg)}if(isString(cfg.viewDecl.component))var cmp_1=cfg.viewDecl.component,kebobName=kebobString(cmp_1),tagRegexp_1=new RegExp("^(x-|data-)?"+kebobName+"$","i"),getComponentController=function(){var directiveEl=[].slice.call($element[0].children).filter(function(el){return el&&el.tagName&&tagRegexp_1.exec(el.tagName)});return directiveEl&&ng.element(directiveEl).data("$"+cmp_1+"Controller")},deregisterWatch_1=scope.$watch(getComponentController,function(ctrlInstance){ctrlInstance&&(registerControllerCallbacks($q$$1,$transitions,ctrlInstance,scope,cfg),deregisterWatch_1())});link(scope)}}}}function registerControllerCallbacks($q$$1,$transitions,controllerInstance,$scope,cfg){!isFunction(controllerInstance.$onInit)||cfg.viewDecl.component&&hasComponentImpl||controllerInstance.$onInit();var viewState=tail(cfg.path).state.self,hookOptions={bind:controllerInstance};if(isFunction(controllerInstance.uiOnParamsChanged)){var resolveContext=new ResolveContext(cfg.path),viewCreationTrans_1=resolveContext.getResolvable("$transition$").data,paramsUpdated=function($transition$){if($transition$!==viewCreationTrans_1&&$transition$.exiting().indexOf(viewState)===-1){var toParams=$transition$.params("to"),fromParams=$transition$.params("from"),getNodeSchema=function(node){return node.paramSchema},toSchema=$transition$.treeChanges("to").map(getNodeSchema).reduce(unnestR,[]),fromSchema=$transition$.treeChanges("from").map(getNodeSchema).reduce(unnestR,[]),changedToParams=toSchema.filter(function(param){var idx=fromSchema.indexOf(param);return idx===-1||!fromSchema[idx].type.equals(toParams[param.id],fromParams[param.id])});if(changedToParams.length){var changedKeys_1=changedToParams.map(function(x){return x.id}),newValues=filter(toParams,function(val$$1,key){return changedKeys_1.indexOf(key)!==-1});controllerInstance.uiOnParamsChanged(newValues,$transition$)}}};$scope.$on("$destroy",$transitions.onSuccess({},paramsUpdated,hookOptions))}if(isFunction(controllerInstance.uiCanExit)){var id_1=_uiCanExitId++,cacheProp_1="_uiCanExitIds",prevTruthyAnswer_1=function(trans){return!!trans&&(trans[cacheProp_1]&&trans[cacheProp_1][id_1]===!0||prevTruthyAnswer_1(trans.redirectedFrom()))},wrappedHook=function(trans){var promise,ids=trans[cacheProp_1]=trans[cacheProp_1]||{};return prevTruthyAnswer_1(trans)||(promise=$q$$1.when(controllerInstance.uiCanExit(trans)),promise.then(function(val$$1){return ids[id_1]=val$$1!==!1})),promise},criteria={exiting:viewState.name};$scope.$on("$destroy",$transitions.onBefore(criteria,wrappedHook,hookOptions))}}function $ViewScrollProvider(){var useAnchorScroll=!1;this.useAnchorScroll=function(){useAnchorScroll=!0},this.$get=["$anchorScroll","$timeout",function($anchorScroll,$timeout){return useAnchorScroll?$anchorScroll:function($element){return $timeout(function(){$element[0].scrollIntoView()},0,!1)}}]}var ng_from_global=angular,ng=ng_from_import&&ng_from_import.module?ng_from_import:ng_from_global,prop=function(name){return function(obj){return obj&&obj[name]}},propEq=curry(function(name,_val,obj){return obj&&obj[name]===_val}),parse=function(name){return pipe.apply(null,name.split(".").map(prop))},not=function(fn){return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return!fn.apply(null,args)}},all=function(fn1){return function(arr){return arr.reduce(function(b,x){return b&&!!fn1(x)},!0)}},any=function(fn1){return function(arr){return arr.reduce(function(b,x){return b||!!fn1(x)},!1)}},is=function(ctor){return function(obj){return null!=obj&&obj.constructor===ctor||obj instanceof ctor}},eq=function(value){return function(other){return value===other}},val=function(v){return function(){return v}},Glob=function(){function Glob(text){this.text=text,this.glob=text.split(".");var regexpString=this.text.split(".").map(function(seg){return"**"===seg?"(?:|(?:\\.[^.]*)*)":"*"===seg?"\\.[^.]*":"\\."+seg}).join("");this.regexp=new RegExp("^"+regexpString+"$")}return Glob.is=function(text){return!!/[!,*]+/.exec(text)},Glob.fromString=function(text){return Glob.is(text)?new Glob(text):null},Glob.prototype.matches=function(name){return this.regexp.test("."+name)},Glob}(),StateObject=function(){function StateObject(config){return StateObject.create(config||{})}return StateObject.create=function(stateDecl){stateDecl=StateObject.isStateClass(stateDecl)?new stateDecl:stateDecl;var state=inherit(inherit(stateDecl,StateObject.prototype));return stateDecl.$$state=function(){return state},state.self=stateDecl,state.__stateObjectCache={nameGlob:Glob.fromString(state.name)},state},StateObject.prototype.is=function(ref){return this===ref||this.self===ref||this.fqn()===ref},StateObject.prototype.fqn=function(){if(!(this.parent&&this.parent instanceof this.constructor))return this.name;var name=this.parent.fqn();return name?name+"."+this.name:this.name},StateObject.prototype.root=function(){return this.parent&&this.parent.root()||this},StateObject.prototype.parameters=function(opts){opts=defaults(opts,{inherit:!0,matchingKeys:null});var inherited=opts.inherit&&this.parent&&this.parent.parameters()||[];return inherited.concat(values(this.params)).filter(function(param){return!opts.matchingKeys||opts.matchingKeys.hasOwnProperty(param.id)})},StateObject.prototype.parameter=function(id,opts){return void 0===opts&&(opts={}),this.url&&this.url.parameter(id,opts)||find(values(this.params),propEq("id",id))||opts.inherit&&this.parent&&this.parent.parameter(id)},StateObject.prototype.toString=function(){return this.fqn()},StateObject.isStateClass=function(stateDecl){return isFunction(stateDecl)&&stateDecl.__uiRouterState===!0},StateObject.isState=function(obj){return isObject(obj.__stateObjectCache)},StateObject}(),toStr=Object.prototype.toString,tis=function(t){return function(x){return typeof x===t}},isUndefined=tis("undefined"),isDefined=not(isUndefined),isNull=function(o){return null===o},isNullOrUndefined=or(isNull,isUndefined),isFunction=tis("function"),isNumber=tis("number"),isString=tis("string"),isObject=function(x){return null!==x&&"object"==typeof x},isArray=Array.isArray,isDate=function(x){return"[object Date]"===toStr.call(x)},isRegExp=function(x){return"[object RegExp]"===toStr.call(x)},isState=StateObject.isState,isPromise=and(isObject,pipe(prop("then"),isFunction)),notImplemented=function(fnname){return function(){throw new Error(fnname+"(): No coreservices implementation for UI-Router is loaded.")}},services={$q:void 0,$injector:void 0},root="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||void 0,angular$1=root.angular||{},fromJson=angular$1.fromJson||JSON.parse.bind(JSON),toJson=angular$1.toJson||JSON.stringify.bind(JSON),forEach=angular$1.forEach||_forEach,extend=Object.assign||_extend,equals=angular$1.equals||_equals,inherit=function(parent,extra){return extend(Object.create(parent),extra)},inArray=curry(_inArray),removeFrom=curry(_removeFrom),pushTo=curry(_pushTo),deregAll=function(functions){return functions.slice().forEach(function(fn){"function"==typeof fn&&fn(),removeFrom(functions,fn)})},mergeR=function(memo,item){return extend(memo,item)},mapObj=map,values=function(obj){return Object.keys(obj).map(function(key){return obj[key]})},allTrueR=function(memo,elem){return memo&&elem},anyTrueR=function(memo,elem){return memo||elem},unnestR=function(memo,elem){return memo.concat(elem)},flattenR=function(memo,elem){return isArray(elem)?memo.concat(elem.reduce(flattenR,[])):pushR(memo,elem)},uniqR=function(acc,token){return inArray(acc,token)?acc:pushR(acc,token)},unnest=function(arr){return arr.reduce(unnestR,[])},flatten=function(arr){return arr.reduce(flattenR,[])},assertPredicate=assertFn,assertMap=assertFn,pairs=function(obj){return Object.keys(obj).map(function(key){return[key,obj[key]]})},silenceUncaughtInPromise=function(promise){return promise["catch"](function(e){return 0})&&promise},silentRejection=function(error){return silenceUncaughtInPromise(services.$q.reject(error))},Queue=function(){function Queue(_items,_limit){void 0===_items&&(_items=[]),void 0===_limit&&(_limit=null),this._items=_items,this._limit=_limit,this._evictListeners=[],this.onEvict=pushTo(this._evictListeners)}return Queue.prototype.enqueue=function(item){var items=this._items;return items.push(item),this._limit&&items.length>this._limit&&this.evict(),item},Queue.prototype.evict=function(){var item=this._items.shift();return this._evictListeners.forEach(function(fn){return fn(item)}),item},Queue.prototype.dequeue=function(){if(this.size())return this._items.splice(0,1)[0]},Queue.prototype.clear=function(){var current=this._items;return this._items=[],current},Queue.prototype.size=function(){return this._items.length},Queue.prototype.remove=function(item){var idx=this._items.indexOf(item);return idx>-1&&this._items.splice(idx,1)[0]},Queue.prototype.peekTail=function(){return this._items[this._items.length-1]},Queue.prototype.peekHead=function(){if(this.size())return this._items[0]},Queue}();!function(RejectType){RejectType[RejectType.SUPERSEDED=2]="SUPERSEDED",RejectType[RejectType.ABORTED=3]="ABORTED",RejectType[RejectType.INVALID=4]="INVALID",RejectType[RejectType.IGNORED=5]="IGNORED",RejectType[RejectType.ERROR=6]="ERROR"}(exports.RejectType||(exports.RejectType={}));var id=0,Rejection=function(){function Rejection(type,message,detail){this.$id=id++,this.type=type,this.message=message,this.detail=detail}return Rejection.isRejectionPromise=function(obj){return obj&&"function"==typeof obj.then&&is(Rejection)(obj._transitionRejection)},Rejection.superseded=function(detail,options){var message="The transition has been superseded by a different transition",rejection=new Rejection(exports.RejectType.SUPERSEDED,message,detail);return options&&options.redirected&&(rejection.redirected=!0),rejection},Rejection.redirected=function(detail){return Rejection.superseded(detail,{redirected:!0})},Rejection.invalid=function(detail){var message="This transition is invalid";return new Rejection(exports.RejectType.INVALID,message,detail)},Rejection.ignored=function(detail){var message="The transition was ignored";return new Rejection(exports.RejectType.IGNORED,message,detail)},Rejection.aborted=function(detail){var message="The transition has been aborted";return new Rejection(exports.RejectType.ABORTED,message,detail)},Rejection.errored=function(detail){var message="The transition errored";return new Rejection(exports.RejectType.ERROR,message,detail)},Rejection.normalize=function(detail){return is(Rejection)(detail)?detail:Rejection.errored(detail)},Rejection.prototype.toString=function(){var detailString=function(d){return d&&d.toString!==Object.prototype.toString?d.toString():stringify(d)},detail=detailString(this.detail),_a=this,$id=_a.$id,type=_a.type,message=_a.message;return"Transition Rejection($id: "+$id+" type: "+type+", message: "+message+", detail: "+detail+")"},Rejection.prototype.toPromise=function(){return extend(silentRejection(this),{_transitionRejection:this})},Rejection}(),viewConfigString=function(viewConfig){var view=viewConfig.viewDecl,state=view.$context.name||"(root)";return"[View#"+viewConfig.$id+" from '"+state+"' state]: target ui-view: '"+view.$uiViewName+"@"+view.$uiViewContextAnchor+"'"},consoleLog=Function.prototype.bind.call(console.log,console),consoletable=isFunction(console.table)?console.table.bind(console):consoleLog.bind(console);!function(Category){Category[Category.RESOLVE=0]="RESOLVE",Category[Category.TRANSITION=1]="TRANSITION",Category[Category.HOOK=2]="HOOK",Category[Category.UIVIEW=3]="UIVIEW",Category[Category.VIEWCONFIG=4]="VIEWCONFIG"}(exports.Category||(exports.Category={}));var _tid=parse("$id"),_rid=parse("router.$id"),transLbl=function(trans){return"Transition #"+_tid(trans)+"-"+_rid(trans)},Trace=function(){function Trace(){this._enabled={},this.approximateDigests=0}return Trace.prototype._set=function(enabled,categories){var _this=this;categories.length||(categories=Object.keys(exports.Category).map(function(k){return parseInt(k,10)}).filter(function(k){return!isNaN(k)}).map(function(key){return exports.Category[key];
})),categories.map(normalizedCat).forEach(function(category){return _this._enabled[category]=enabled})},Trace.prototype.enable=function(){for(var categories=[],_i=0;_i<arguments.length;_i++)categories[_i]=arguments[_i];this._set(!0,categories)},Trace.prototype.disable=function(){for(var categories=[],_i=0;_i<arguments.length;_i++)categories[_i]=arguments[_i];this._set(!1,categories)},Trace.prototype.enabled=function(category){return!!this._enabled[normalizedCat(category)]},Trace.prototype.traceTransitionStart=function(trans){this.enabled(exports.Category.TRANSITION)&&console.log(transLbl(trans)+": Started  -> "+stringify(trans))},Trace.prototype.traceTransitionIgnored=function(trans){this.enabled(exports.Category.TRANSITION)&&console.log(transLbl(trans)+": Ignored  <> "+stringify(trans))},Trace.prototype.traceHookInvocation=function(step,trans,options){if(this.enabled(exports.Category.HOOK)){var event=parse("traceData.hookType")(options)||"internal",context=parse("traceData.context.state.name")(options)||parse("traceData.context")(options)||"unknown",name=functionToString(step.registeredHook.callback);console.log(transLbl(trans)+":   Hook -> "+event+" context: "+context+", "+maxLength(200,name))}},Trace.prototype.traceHookResult=function(hookResult,trans,transitionOptions){this.enabled(exports.Category.HOOK)&&console.log(transLbl(trans)+":   <- Hook returned: "+maxLength(200,stringify(hookResult)))},Trace.prototype.traceResolvePath=function(path,when,trans){this.enabled(exports.Category.RESOLVE)&&console.log(transLbl(trans)+":         Resolving "+path+" ("+when+")")},Trace.prototype.traceResolvableResolved=function(resolvable,trans){this.enabled(exports.Category.RESOLVE)&&console.log(transLbl(trans)+":               <- Resolved  "+resolvable+" to: "+maxLength(200,stringify(resolvable.data)))},Trace.prototype.traceError=function(reason,trans){this.enabled(exports.Category.TRANSITION)&&console.log(transLbl(trans)+": <- Rejected "+stringify(trans)+", reason: "+reason)},Trace.prototype.traceSuccess=function(finalState,trans){this.enabled(exports.Category.TRANSITION)&&console.log(transLbl(trans)+": <- Success  "+stringify(trans)+", final state: "+finalState.name)},Trace.prototype.traceUIViewEvent=function(event,viewData,extra){void 0===extra&&(extra=""),this.enabled(exports.Category.UIVIEW)&&console.log("ui-view: "+padString(30,event)+" "+uiViewString(viewData)+extra)},Trace.prototype.traceUIViewConfigUpdated=function(viewData,context){this.enabled(exports.Category.UIVIEW)&&this.traceUIViewEvent("Updating",viewData," with ViewConfig from context='"+context+"'")},Trace.prototype.traceUIViewFill=function(viewData,html){this.enabled(exports.Category.UIVIEW)&&this.traceUIViewEvent("Fill",viewData," with: "+maxLength(200,html))},Trace.prototype.traceViewSync=function(pairs){if(this.enabled(exports.Category.VIEWCONFIG)){var uivheader="uiview component fqn",cfgheader="view config state (view name)",mapping=pairs.map(function(_a){var uiView=_a.uiView,viewConfig=_a.viewConfig,uiv=uiView&&uiView.fqn,cfg=viewConfig&&viewConfig.viewDecl.$context.name+": ("+viewConfig.viewDecl.$name+")";return _b={},_b[uivheader]=uiv,_b[cfgheader]=cfg,_b;var _b}).sort(function(a,b){return(a[uivheader]||"").localeCompare(b[uivheader]||"")});consoletable(mapping)}},Trace.prototype.traceViewServiceEvent=function(event,viewConfig){this.enabled(exports.Category.VIEWCONFIG)&&console.log("VIEWCONFIG: "+event+" "+viewConfigString(viewConfig))},Trace.prototype.traceViewServiceUIViewEvent=function(event,viewData){this.enabled(exports.Category.VIEWCONFIG)&&console.log("VIEWCONFIG: "+event+" "+uiViewString(viewData))},Trace}(),trace=new Trace;!function(TransitionHookPhase){TransitionHookPhase[TransitionHookPhase.CREATE=0]="CREATE",TransitionHookPhase[TransitionHookPhase.BEFORE=1]="BEFORE",TransitionHookPhase[TransitionHookPhase.RUN=2]="RUN",TransitionHookPhase[TransitionHookPhase.SUCCESS=3]="SUCCESS",TransitionHookPhase[TransitionHookPhase.ERROR=4]="ERROR"}(exports.TransitionHookPhase||(exports.TransitionHookPhase={})),function(TransitionHookScope){TransitionHookScope[TransitionHookScope.TRANSITION=0]="TRANSITION",TransitionHookScope[TransitionHookScope.STATE=1]="STATE"}(exports.TransitionHookScope||(exports.TransitionHookScope={}));var TargetState=function(){function TargetState(_stateRegistry,_identifier,_params,_options){this._stateRegistry=_stateRegistry,this._identifier=_identifier,this._identifier=_identifier,this._params=extend({},_params||{}),this._options=extend({},_options||{}),this._definition=_stateRegistry.matcher.find(_identifier,this._options.relative)}return TargetState.prototype.name=function(){return this._definition&&this._definition.name||this._identifier},TargetState.prototype.identifier=function(){return this._identifier},TargetState.prototype.params=function(){return this._params},TargetState.prototype.$state=function(){return this._definition},TargetState.prototype.state=function(){return this._definition&&this._definition.self},TargetState.prototype.options=function(){return this._options},TargetState.prototype.exists=function(){return!(!this._definition||!this._definition.self)},TargetState.prototype.valid=function(){return!this.error()},TargetState.prototype.error=function(){var base=this.options().relative;if(!this._definition&&base){var stateName=base.name?base.name:base;return"Could not resolve '"+this.name()+"' from state '"+stateName+"'"}return this._definition?this._definition.self?void 0:"State '"+this.name()+"' has an invalid definition":"No such state '"+this.name()+"'"},TargetState.prototype.toString=function(){return"'"+this.name()+"'"+stringify(this.params())},TargetState.prototype.withState=function(state){return new TargetState(this._stateRegistry,state,this._params,this._options)},TargetState.prototype.withParams=function(params,replace){void 0===replace&&(replace=!1);var newParams=replace?params:extend({},this._params,params);return new TargetState(this._stateRegistry,this._identifier,newParams,this._options)},TargetState.prototype.withOptions=function(options,replace){void 0===replace&&(replace=!1);var newOpts=replace?options:extend({},this._options,options);return new TargetState(this._stateRegistry,this._identifier,this._params,newOpts)},TargetState.isDef=function(obj){return obj&&obj.state&&(isString(obj.state)||isString(obj.state.name))},TargetState}(),defaultOptions={current:noop,transition:null,traceData:{},bind:null},TransitionHook=function(){function TransitionHook(transition,stateContext,registeredHook,options){var _this=this;this.transition=transition,this.stateContext=stateContext,this.registeredHook=registeredHook,this.options=options,this.isSuperseded=function(){return _this.type.hookPhase===exports.TransitionHookPhase.RUN&&!_this.options.transition.isActive()},this.options=defaults(options,defaultOptions),this.type=registeredHook.eventType}return TransitionHook.chain=function(hooks,waitFor){var createHookChainR=function(prev,nextHook){return prev.then(function(){return nextHook.invokeHook()})};return hooks.reduce(createHookChainR,waitFor||services.$q.when())},TransitionHook.invokeHooks=function(hooks,doneCallback){for(var idx=0;idx<hooks.length;idx++){var hookResult=hooks[idx].invokeHook();if(isPromise(hookResult)){var remainingHooks=hooks.slice(idx+1);return TransitionHook.chain(remainingHooks,hookResult).then(doneCallback)}}return doneCallback()},TransitionHook.runAllHooks=function(hooks){hooks.forEach(function(hook){return hook.invokeHook()})},TransitionHook.prototype.logError=function(err){this.transition.router.stateService.defaultErrorHandler()(err)},TransitionHook.prototype.invokeHook=function(){var _this=this,hook=this.registeredHook;if(!hook._deregistered){var notCurrent=this.getNotCurrentRejection();if(notCurrent)return notCurrent;var options=this.options;trace.traceHookInvocation(this,this.transition,options);var invokeCallback=function(){return hook.callback.call(options.bind,_this.transition,_this.stateContext)},normalizeErr=function(err){return Rejection.normalize(err).toPromise()},handleError=function(err){return hook.eventType.getErrorHandler(_this)(err)},handleResult=function(result){return hook.eventType.getResultHandler(_this)(result)};try{var result=invokeCallback();return!this.type.synchronous&&isPromise(result)?result["catch"](normalizeErr).then(handleResult,handleError):handleResult(result)}catch(err){return handleError(Rejection.normalize(err))}finally{hook.invokeLimit&&++hook.invokeCount>=hook.invokeLimit&&hook.deregister()}}},TransitionHook.prototype.handleHookResult=function(result){var _this=this,notCurrent=this.getNotCurrentRejection();if(notCurrent)return notCurrent;if(isPromise(result))return result.then(function(val$$1){return _this.handleHookResult(val$$1)});if(trace.traceHookResult(result,this.transition,this.options),result===!1)return Rejection.aborted("Hook aborted transition").toPromise();var isTargetState=is(TargetState);return isTargetState(result)?Rejection.redirected(result).toPromise():void 0},TransitionHook.prototype.getNotCurrentRejection=function(){var router=this.transition.router;return router._disposed?Rejection.aborted("UIRouter instance #"+router.$id+" has been stopped (disposed)").toPromise():this.transition._aborted?Rejection.aborted().toPromise():this.isSuperseded()?Rejection.superseded(this.options.current()).toPromise():void 0},TransitionHook.prototype.toString=function(){var _a=this,options=_a.options,registeredHook=_a.registeredHook,event=parse("traceData.hookType")(options)||"internal",context=parse("traceData.context.state.name")(options)||parse("traceData.context")(options)||"unknown",name=fnToString(registeredHook.callback);return event+" context: "+context+", "+maxLength(200,name)},TransitionHook.HANDLE_RESULT=function(hook){return function(result){return hook.handleHookResult(result)}},TransitionHook.LOG_REJECTED_RESULT=function(hook){return function(result){isPromise(result)&&result["catch"](function(err){return hook.logError(Rejection.normalize(err))})}},TransitionHook.LOG_ERROR=function(hook){return function(error){return hook.logError(error)}},TransitionHook.REJECT_ERROR=function(hook){return function(error){return silentRejection(error)}},TransitionHook.THROW_ERROR=function(hook){return function(error){throw error}},TransitionHook}(),RegisteredHook=function(){function RegisteredHook(tranSvc,eventType,callback,matchCriteria,removeHookFromRegistry,options){void 0===options&&(options={}),this.tranSvc=tranSvc,this.eventType=eventType,this.callback=callback,this.matchCriteria=matchCriteria,this.removeHookFromRegistry=removeHookFromRegistry,this.invokeCount=0,this._deregistered=!1,this.priority=options.priority||0,this.bind=options.bind||null,this.invokeLimit=options.invokeLimit}return RegisteredHook.prototype._matchingNodes=function(nodes,criterion){if(criterion===!0)return nodes;var matching=nodes.filter(function(node){return matchState(node.state,criterion)});return matching.length?matching:null},RegisteredHook.prototype._getDefaultMatchCriteria=function(){return mapObj(this.tranSvc._pluginapi._getPathTypes(),function(){return!0})},RegisteredHook.prototype._getMatchingNodes=function(treeChanges){var _this=this,criteria=extend(this._getDefaultMatchCriteria(),this.matchCriteria),paths=values(this.tranSvc._pluginapi._getPathTypes());return paths.reduce(function(mn,pathtype){var isStateHook=pathtype.scope===exports.TransitionHookScope.STATE,path=treeChanges[pathtype.name]||[],nodes=isStateHook?path:[tail(path)];return mn[pathtype.name]=_this._matchingNodes(nodes,criteria[pathtype.name]),mn},{})},RegisteredHook.prototype.matches=function(treeChanges){var matches=this._getMatchingNodes(treeChanges),allMatched=values(matches).every(identity);return allMatched?matches:null},RegisteredHook.prototype.deregister=function(){this.removeHookFromRegistry(this),this._deregistered=!0},RegisteredHook}(),HookBuilder=function(){function HookBuilder(transition){this.transition=transition}return HookBuilder.prototype.buildHooksForPhase=function(phase){var _this=this,$transitions=this.transition.router.transitionService;return $transitions._pluginapi._getEvents(phase).map(function(type){return _this.buildHooks(type)}).reduce(unnestR,[]).filter(identity)},HookBuilder.prototype.buildHooks=function(hookType){var transition=this.transition,treeChanges=transition.treeChanges(),matchingHooks=this.getMatchingHooks(hookType,treeChanges);if(!matchingHooks)return[];var baseHookOptions={transition:transition,current:transition.options().current},makeTransitionHooks=function(hook){var matches=hook.matches(treeChanges),matchingNodes=matches[hookType.criteriaMatchPath.name];return matchingNodes.map(function(node){var _options=extend({bind:hook.bind,traceData:{hookType:hookType.name,context:node}},baseHookOptions),state=hookType.criteriaMatchPath.scope===exports.TransitionHookScope.STATE?node.state.self:null,transitionHook=new TransitionHook(transition,state,hook,_options);return{hook:hook,node:node,transitionHook:transitionHook}})};return matchingHooks.map(makeTransitionHooks).reduce(unnestR,[]).sort(tupleSort(hookType.reverseSort)).map(function(tuple){return tuple.transitionHook})},HookBuilder.prototype.getMatchingHooks=function(hookType,treeChanges){var isCreate=hookType.hookPhase===exports.TransitionHookPhase.CREATE,$transitions=this.transition.router.transitionService,registries=isCreate?[$transitions]:[this.transition,$transitions];return registries.map(function(reg){return reg.getHooks(hookType.name)}).filter(assertPredicate(isArray,"broken event named: "+hookType.name)).reduce(unnestR,[]).filter(function(hook){return hook.matches(treeChanges)})},HookBuilder}(),ParamType=function(){function ParamType(def){this.pattern=/.*/,this.inherit=!0,extend(this,def)}return ParamType.prototype.is=function(val,key){return!0},ParamType.prototype.encode=function(val,key){return val},ParamType.prototype.decode=function(val,key){return val},ParamType.prototype.equals=function(a,b){return a==b},ParamType.prototype.$subPattern=function(){var sub=this.pattern.toString();return sub.substr(1,sub.length-2)},ParamType.prototype.toString=function(){return"{ParamType:"+this.name+"}"},ParamType.prototype.$normalize=function(val){return this.is(val)?val:this.decode(val)},ParamType.prototype.$asArray=function(mode,isSearch){if(!mode)return this;if("auto"===mode&&!isSearch)throw new Error("'auto' array mode is for query parameters only");return new ArrayType(this,mode)},ParamType}(),hasOwn=Object.prototype.hasOwnProperty,isShorthand=function(cfg){return 0===["value","type","squash","array","dynamic"].filter(hasOwn.bind(cfg||{})).length};!function(DefType){DefType[DefType.PATH=0]="PATH",DefType[DefType.SEARCH=1]="SEARCH",DefType[DefType.CONFIG=2]="CONFIG"}(exports.DefType||(exports.DefType={}));var Param=function(){function Param(id,type,config,location,urlMatcherFactory){function getArrayMode(){var arrayDefaults={array:location===exports.DefType.SEARCH&&"auto"},arrayParamNomenclature=id.match(/\[\]$/)?{array:!0}:{};return extend(arrayDefaults,arrayParamNomenclature,config).array}config=unwrapShorthand(config),type=getType(config,type,location,id,urlMatcherFactory.paramTypes);var arrayMode=getArrayMode();type=arrayMode?type.$asArray(arrayMode,location===exports.DefType.SEARCH):type;var isOptional=void 0!==config.value||location===exports.DefType.SEARCH,dynamic=isDefined(config.dynamic)?!!config.dynamic:!!type.dynamic,raw=isDefined(config.raw)?!!config.raw:!!type.raw,squash=getSquashPolicy(config,isOptional,urlMatcherFactory.defaultSquashPolicy()),replace=getReplace(config,arrayMode,isOptional,squash),inherit$$1=isDefined(config.inherit)?!!config.inherit:!!type.inherit;extend(this,{id:id,type:type,location:location,isOptional:isOptional,dynamic:dynamic,raw:raw,squash:squash,replace:replace,inherit:inherit$$1,array:arrayMode,config:config})}return Param.values=function(params,values$$1){void 0===values$$1&&(values$$1={});for(var paramValues={},_i=0,params_1=params;_i<params_1.length;_i++){var param=params_1[_i];paramValues[param.id]=param.value(values$$1[param.id])}return paramValues},Param.changed=function(params,values1,values2){return void 0===values1&&(values1={}),void 0===values2&&(values2={}),params.filter(function(param){return!param.type.equals(values1[param.id],values2[param.id])})},Param.equals=function(params,values1,values2){return void 0===values1&&(values1={}),void 0===values2&&(values2={}),0===Param.changed(params,values1,values2).length},Param.validates=function(params,values$$1){return void 0===values$$1&&(values$$1={}),params.map(function(param){return param.validates(values$$1[param.id])}).reduce(allTrueR,!0)},Param.prototype.isDefaultValue=function(value){return this.isOptional&&this.type.equals(this.value(),value)},Param.prototype.value=function(value){var _this=this,getDefaultValue=function(){if(_this._defaultValueCache)return _this._defaultValueCache.defaultValue;if(!services.$injector)throw new Error("Injectable functions cannot be called at configuration time");var defaultValue=services.$injector.invoke(_this.config.$$fn);if(null!==defaultValue&&void 0!==defaultValue&&!_this.type.is(defaultValue))throw new Error("Default value ("+defaultValue+") for parameter '"+_this.id+"' is not an instance of ParamType ("+_this.type.name+")");return _this.config.$$fn.__cacheable&&(_this._defaultValueCache={defaultValue:defaultValue}),defaultValue},replaceSpecialValues=function(val$$1){for(var _i=0,_a=_this.replace;_i<_a.length;_i++){var tuple=_a[_i];if(tuple.from===val$$1)return tuple.to}return val$$1};return value=replaceSpecialValues(value),isUndefined(value)?getDefaultValue():this.type.$normalize(value)},Param.prototype.isSearch=function(){return this.location===exports.DefType.SEARCH},Param.prototype.validates=function(value){if((isUndefined(value)||null===value)&&this.isOptional)return!0;var normalized=this.type.$normalize(value);if(!this.type.is(normalized))return!1;var encoded=this.type.encode(normalized);return!(isString(encoded)&&!this.type.pattern.exec(encoded))},Param.prototype.toString=function(){return"{Param:"+this.id+" "+this.type+" squash: '"+this.squash+"' optional: "+this.isOptional+"}"},Param}(),PathNode=function(){function PathNode(stateOrNode){if(stateOrNode instanceof PathNode){var node=stateOrNode;this.state=node.state,this.paramSchema=node.paramSchema.slice(),this.paramValues=extend({},node.paramValues),this.resolvables=node.resolvables.slice(),this.views=node.views&&node.views.slice()}else{var state=stateOrNode;this.state=state,this.paramSchema=state.parameters({inherit:!1}),this.paramValues={},this.resolvables=state.resolvables.map(function(res){return res.clone()})}}return PathNode.prototype.clone=function(){return new PathNode(this)},PathNode.prototype.applyRawParams=function(params){var getParamVal=function(paramDef){return[paramDef.id,paramDef.value(params[paramDef.id])]};return this.paramValues=this.paramSchema.reduce(function(memo,pDef){return applyPairs(memo,getParamVal(pDef))},{}),this},PathNode.prototype.parameter=function(name){return find(this.paramSchema,propEq("id",name))},PathNode.prototype.equals=function(node,paramsFn){var diff=this.diff(node,paramsFn);return diff&&0===diff.length},PathNode.prototype.diff=function(node,paramsFn){if(this.state!==node.state)return!1;var params=paramsFn?paramsFn(this):this.paramSchema;return Param.changed(params,this.paramValues,node.paramValues)},PathNode.clone=function(node){return node.clone()},PathNode}(),PathUtils=function(){function PathUtils(){}return PathUtils.makeTargetState=function(registry,path){var state=tail(path).state;return new TargetState(registry,state,path.map(prop("paramValues")).reduce(mergeR,{}),{})},PathUtils.buildPath=function(targetState){var toParams=targetState.params();return targetState.$state().path.map(function(state){return new PathNode(state).applyRawParams(toParams)})},PathUtils.buildToPath=function(fromPath,targetState){var toPath=PathUtils.buildPath(targetState);return targetState.options().inherit?PathUtils.inheritParams(fromPath,toPath,Object.keys(targetState.params())):toPath},PathUtils.applyViewConfigs=function($view,path,states){path.filter(function(node){return inArray(states,node.state)}).forEach(function(node){var viewDecls=values(node.state.views||{}),subPath=PathUtils.subPath(path,function(n){return n===node}),viewConfigs=viewDecls.map(function(view){return $view.createViewConfig(subPath,view)});node.views=viewConfigs.reduce(unnestR,[])})},PathUtils.inheritParams=function(fromPath,toPath,toKeys){function nodeParamVals(path,state){var node=find(path,propEq("state",state));return extend({},node&&node.paramValues)}function makeInheritedParamsNode(toNode){var toParamVals=extend({},toNode&&toNode.paramValues),incomingParamVals=pick(toParamVals,toKeys);toParamVals=omit(toParamVals,toKeys);var fromParamVals=omit(nodeParamVals(fromPath,toNode.state)||{},noInherit),ownParamVals=extend(toParamVals,fromParamVals,incomingParamVals);return new PathNode(toNode.state).applyRawParams(ownParamVals)}void 0===toKeys&&(toKeys=[]);var noInherit=fromPath.map(function(node){return node.paramSchema}).reduce(unnestR,[]).filter(function(param){return!param.inherit}).map(prop("id"));return toPath.map(makeInheritedParamsNode)},PathUtils.treeChanges=function(fromPath,toPath,reloadState){function applyToParams(retainedNode,idx){var cloned=retainedNode.clone();return cloned.paramValues=toPath[idx].paramValues,cloned}for(var max=Math.min(fromPath.length,toPath.length),keep=0,nodesMatch=function(node1,node2){return node1.equals(node2,PathUtils.nonDynamicParams)};keep<max&&fromPath[keep].state!==reloadState&&nodesMatch(fromPath[keep],toPath[keep]);)keep++;var from,retained,exiting,entering,to;from=fromPath,retained=from.slice(0,keep),exiting=from.slice(keep);var retainedWithToParams=retained.map(applyToParams);return entering=toPath.slice(keep),to=retainedWithToParams.concat(entering),{from:from,to:to,retained:retained,retainedWithToParams:retainedWithToParams,exiting:exiting,entering:entering}},PathUtils.matching=function(pathA,pathB,paramsFn){var done=!1,tuples=arrayTuples(pathA,pathB);return tuples.reduce(function(matching,_a){var nodeA=_a[0],nodeB=_a[1];return done=done||!nodeA.equals(nodeB,paramsFn),done?matching:matching.concat(nodeA)},[])},PathUtils.equals=function(pathA,pathB,paramsFn){return pathA.length===pathB.length&&PathUtils.matching(pathA,pathB,paramsFn).length===pathA.length},PathUtils.subPath=function(path,predicate){var node=find(path,predicate),elementIdx=path.indexOf(node);return elementIdx===-1?void 0:path.slice(0,elementIdx+1)},PathUtils.nonDynamicParams=function(node){return node.state.parameters({inherit:!1}).filter(function(param){return!param.dynamic})},PathUtils.paramValues=function(path){return path.reduce(function(acc,node){return extend(acc,node.paramValues)},{})},PathUtils}(),defaultResolvePolicy={when:"LAZY",async:"WAIT"},Resolvable=function(){function Resolvable(arg1,resolveFn,deps,policy,data){if(this.resolved=!1,this.promise=void 0,arg1 instanceof Resolvable)extend(this,arg1);else if(isFunction(resolveFn)){if(isNullOrUndefined(arg1))throw new Error("new Resolvable(): token argument is required");if(!isFunction(resolveFn))throw new Error("new Resolvable(): resolveFn argument must be a function");this.token=arg1,this.policy=policy,this.resolveFn=resolveFn,this.deps=deps||[],this.data=data,this.resolved=void 0!==data,this.promise=this.resolved?services.$q.when(this.data):void 0}else if(isObject(arg1)&&arg1.token&&(arg1.hasOwnProperty("resolveFn")||arg1.hasOwnProperty("data"))){var literal=arg1;return new Resolvable(literal.token,literal.resolveFn,literal.deps,literal.policy,literal.data)}}return Resolvable.prototype.getPolicy=function(state){var thisPolicy=this.policy||{},statePolicy=state&&state.resolvePolicy||{};return{when:thisPolicy.when||statePolicy.when||defaultResolvePolicy.when,async:thisPolicy.async||statePolicy.async||defaultResolvePolicy.async}},Resolvable.prototype.resolve=function(resolveContext,trans){var _this=this,$q=services.$q,getResolvableDependencies=function(){return $q.all(resolveContext.getDependencies(_this).map(function(resolvable){return resolvable.get(resolveContext,trans)}))},invokeResolveFn=function(resolvedDeps){return _this.resolveFn.apply(null,resolvedDeps)},waitForRx=function(observable$){var cached=observable$.cache(1);return cached.take(1).toPromise().then(function(){return cached})},node=resolveContext.findNode(this),state=node&&node.state,maybeWaitForRx="RXWAIT"===this.getPolicy(state).async?waitForRx:identity,applyResolvedValue=function(resolvedValue){return _this.data=resolvedValue,_this.resolved=!0,_this.resolveFn=null,trace.traceResolvableResolved(_this,trans),_this.data};return this.promise=$q.when().then(getResolvableDependencies).then(invokeResolveFn).then(maybeWaitForRx).then(applyResolvedValue)},Resolvable.prototype.get=function(resolveContext,trans){return this.promise||this.resolve(resolveContext,trans)},Resolvable.prototype.toString=function(){return"Resolvable(token: "+stringify(this.token)+", requires: ["+this.deps.map(stringify)+"])"},Resolvable.prototype.clone=function(){return new Resolvable(this)},Resolvable.fromData=function(token,data){return new Resolvable(token,function(){return data},null,null,data)},Resolvable}(),resolvePolicies={when:{LAZY:"LAZY",EAGER:"EAGER"},async:{WAIT:"WAIT",NOWAIT:"NOWAIT",RXWAIT:"RXWAIT"}},whens=resolvePolicies.when,ALL_WHENS=[whens.EAGER,whens.LAZY],EAGER_WHENS=[whens.EAGER],NATIVE_INJECTOR_TOKEN="Native Injector",ResolveContext=function(){function ResolveContext(_path){this._path=_path}return ResolveContext.prototype.getTokens=function(){return this._path.reduce(function(acc,node){return acc.concat(node.resolvables.map(function(r){return r.token}))},[]).reduce(uniqR,[])},ResolveContext.prototype.getResolvable=function(token){var matching=this._path.map(function(node){return node.resolvables}).reduce(unnestR,[]).filter(function(r){return r.token===token});return tail(matching)},ResolveContext.prototype.getPolicy=function(resolvable){var node=this.findNode(resolvable);return resolvable.getPolicy(node.state)},ResolveContext.prototype.subContext=function(state){return new ResolveContext(PathUtils.subPath(this._path,function(node){return node.state===state}))},ResolveContext.prototype.addResolvables=function(newResolvables,state){var node=find(this._path,propEq("state",state)),keys=newResolvables.map(function(r){return r.token});node.resolvables=node.resolvables.filter(function(r){return keys.indexOf(r.token)===-1}).concat(newResolvables)},ResolveContext.prototype.resolvePath=function(when,trans){var _this=this;void 0===when&&(when="LAZY");var whenOption=inArray(ALL_WHENS,when)?when:"LAZY",matchedWhens=whenOption===resolvePolicies.when.EAGER?EAGER_WHENS:ALL_WHENS;trace.traceResolvePath(this._path,when,trans);var matchesPolicy=function(acceptedVals,whenOrAsync){return function(resolvable){return inArray(acceptedVals,_this.getPolicy(resolvable)[whenOrAsync])}},promises=this._path.reduce(function(acc,node){var nodeResolvables=node.resolvables.filter(matchesPolicy(matchedWhens,"when")),nowait=nodeResolvables.filter(matchesPolicy(["NOWAIT"],"async")),wait=nodeResolvables.filter(not(matchesPolicy(["NOWAIT"],"async"))),subContext=_this.subContext(node.state),getResult=function(r){return r.get(subContext,trans).then(function(value){return{token:r.token,value:value}})};return nowait.forEach(getResult),acc.concat(wait.map(getResult))},[]);return services.$q.all(promises)},ResolveContext.prototype.injector=function(){return this._injector||(this._injector=new UIInjectorImpl(this))},ResolveContext.prototype.findNode=function(resolvable){return find(this._path,function(node){return inArray(node.resolvables,resolvable)})},ResolveContext.prototype.getDependencies=function(resolvable){var _this=this,node=this.findNode(resolvable),subPath=PathUtils.subPath(this._path,function(x){return x===node})||this._path,availableResolvables=subPath.reduce(function(acc,_node){return acc.concat(_node.resolvables)},[]).filter(function(res){return res!==resolvable}),getDependency=function(token){var matching=availableResolvables.filter(function(r){return r.token===token});if(matching.length)return tail(matching);var fromInjector=_this.injector().getNative(token);if(isUndefined(fromInjector))throw new Error("Could not find Dependency Injection token: "+stringify(token));return new Resolvable(token,function(){return fromInjector},[],fromInjector)};return resolvable.deps.map(getDependency)},ResolveContext}(),UIInjectorImpl=function(){function UIInjectorImpl(context){this.context=context,this["native"]=this.get(NATIVE_INJECTOR_TOKEN)||services.$injector}return UIInjectorImpl.prototype.get=function(token){var resolvable=this.context.getResolvable(token);if(resolvable){if("NOWAIT"===this.context.getPolicy(resolvable).async)return resolvable.get(this.context);if(!resolvable.resolved)throw new Error("Resolvable async .get() not complete:"+stringify(resolvable.token));return resolvable.data}return this.getNative(token)},UIInjectorImpl.prototype.getAsync=function(token){var resolvable=this.context.getResolvable(token);return resolvable?resolvable.get(this.context):services.$q.when(this["native"].get(token))},UIInjectorImpl.prototype.getNative=function(token){return this["native"]&&this["native"].get(token)},UIInjectorImpl}(),stateSelf=prop("self"),Transition=function(){function Transition(fromPath,targetState,router){var _this=this;if(this._deferred=services.$q.defer(),this.promise=this._deferred.promise,this._registeredHooks={},this._hookBuilder=new HookBuilder(this),this.isActive=function(){return _this.router.globals.transition===_this},this.router=router,this._targetState=targetState,!targetState.valid())throw new Error(targetState.error());this._options=extend({current:val(this)},targetState.options()),this.$id=router.transitionService._transitionCount++;var toPath=PathUtils.buildToPath(fromPath,targetState);this._treeChanges=PathUtils.treeChanges(fromPath,toPath,this._options.reloadState),this.createTransitionHookRegFns();var onCreateHooks=this._hookBuilder.buildHooksForPhase(exports.TransitionHookPhase.CREATE);TransitionHook.invokeHooks(onCreateHooks,function(){return null}),this.applyViewConfigs(router)}return Transition.prototype.onBefore=function(criteria,callback,options){},Transition.prototype.onStart=function(criteria,callback,options){},Transition.prototype.onExit=function(criteria,callback,options){},Transition.prototype.onRetain=function(criteria,callback,options){},Transition.prototype.onEnter=function(criteria,callback,options){},Transition.prototype.onFinish=function(criteria,callback,options){},Transition.prototype.onSuccess=function(criteria,callback,options){},Transition.prototype.onError=function(criteria,callback,options){},Transition.prototype.createTransitionHookRegFns=function(){var _this=this;this.router.transitionService._pluginapi._getEvents().filter(function(type){return type.hookPhase!==exports.TransitionHookPhase.CREATE}).forEach(function(type){return makeEvent(_this,_this.router.transitionService,type)})},Transition.prototype.getHooks=function(hookName){return this._registeredHooks[hookName]},Transition.prototype.applyViewConfigs=function(router){var enteringStates=this._treeChanges.entering.map(function(node){return node.state});PathUtils.applyViewConfigs(router.transitionService.$view,this._treeChanges.to,enteringStates)},Transition.prototype.$from=function(){return tail(this._treeChanges.from).state},Transition.prototype.$to=function(){return tail(this._treeChanges.to).state},Transition.prototype.from=function(){return this.$from().self},Transition.prototype.to=function(){return this.$to().self},Transition.prototype.targetState=function(){return this._targetState},Transition.prototype.is=function(compare){return compare instanceof Transition?this.is({to:compare.$to().name,from:compare.$from().name}):!(compare.to&&!matchState(this.$to(),compare.to)||compare.from&&!matchState(this.$from(),compare.from));
},Transition.prototype.params=function(pathname){return void 0===pathname&&(pathname="to"),Object.freeze(this._treeChanges[pathname].map(prop("paramValues")).reduce(mergeR,{}))},Transition.prototype.injector=function(state,pathName){void 0===pathName&&(pathName="to");var path=this._treeChanges[pathName];return state&&(path=PathUtils.subPath(path,function(node){return node.state===state||node.state.name===state})),new ResolveContext(path).injector()},Transition.prototype.getResolveTokens=function(pathname){return void 0===pathname&&(pathname="to"),new ResolveContext(this._treeChanges[pathname]).getTokens()},Transition.prototype.addResolvable=function(resolvable,state){void 0===state&&(state=""),resolvable=is(Resolvable)(resolvable)?resolvable:new Resolvable(resolvable);var stateName="string"==typeof state?state:state.name,topath=this._treeChanges.to,targetNode=find(topath,function(node){return node.state.name===stateName}),resolveContext=new ResolveContext(topath);resolveContext.addResolvables([resolvable],targetNode.state)},Transition.prototype.redirectedFrom=function(){return this._options.redirectedFrom||null},Transition.prototype.originalTransition=function(){var rf=this.redirectedFrom();return rf&&rf.originalTransition()||this},Transition.prototype.options=function(){return this._options},Transition.prototype.entering=function(){return map(this._treeChanges.entering,prop("state")).map(stateSelf)},Transition.prototype.exiting=function(){return map(this._treeChanges.exiting,prop("state")).map(stateSelf).reverse()},Transition.prototype.retained=function(){return map(this._treeChanges.retained,prop("state")).map(stateSelf)},Transition.prototype.views=function(pathname,state){void 0===pathname&&(pathname="entering");var path=this._treeChanges[pathname];return path=state?path.filter(propEq("state",state)):path,path.map(prop("views")).filter(identity).reduce(unnestR,[])},Transition.prototype.treeChanges=function(pathname){return pathname?this._treeChanges[pathname]:this._treeChanges},Transition.prototype.redirect=function(targetState){for(var redirects=1,trans=this;null!=(trans=trans.redirectedFrom());)if(++redirects>20)throw new Error("Too many consecutive Transition redirects (20+)");var redirectOpts={redirectedFrom:this,source:"redirect"};"url"===this.options().source&&targetState.options().location!==!1&&(redirectOpts.location="replace");var newOptions=extend({},this.options(),targetState.options(),redirectOpts);targetState=targetState.withOptions(newOptions,!0);var newTransition=this.router.transitionService.create(this._treeChanges.from,targetState),originalEnteringNodes=this._treeChanges.entering,redirectEnteringNodes=newTransition._treeChanges.entering,nodeIsReloading=function(reloadState){return function(node){return reloadState&&node.state.includes[reloadState.name]}},matchingEnteringNodes=PathUtils.matching(redirectEnteringNodes,originalEnteringNodes,PathUtils.nonDynamicParams).filter(not(nodeIsReloading(targetState.options().reloadState)));return matchingEnteringNodes.forEach(function(node,idx){node.resolvables=originalEnteringNodes[idx].resolvables}),newTransition},Transition.prototype._changedParams=function(){var tc=this._treeChanges;if(!this._options.reload&&!tc.exiting.length&&!tc.entering.length&&tc.to.length===tc.from.length){var pathsDiffer=arrayTuples(tc.to,tc.from).map(function(tuple){return tuple[0].state!==tuple[1].state}).reduce(anyTrueR,!1);if(!pathsDiffer){var nodeSchemas=tc.to.map(function(node){return node.paramSchema}),_a=[tc.to,tc.from].map(function(path){return path.map(function(x){return x.paramValues})}),toValues=_a[0],fromValues=_a[1],tuples=arrayTuples(nodeSchemas,toValues,fromValues);return tuples.map(function(_a){var schema=_a[0],toVals=_a[1],fromVals=_a[2];return Param.changed(schema,toVals,fromVals)}).reduce(unnestR,[])}}},Transition.prototype.dynamic=function(){var changes=this._changedParams();return!!changes&&changes.map(function(x){return x.dynamic}).reduce(anyTrueR,!1)},Transition.prototype.ignored=function(){return!!this._ignoredReason()},Transition.prototype._ignoredReason=function(){var pending=this.router.globals.transition,reloadState=this._options.reloadState,same=function(pathA,pathB){if(pathA.length!==pathB.length)return!1;var matching=PathUtils.matching(pathA,pathB);return pathA.length===matching.filter(function(node){return!reloadState||!node.state.includes[reloadState.name]}).length},newTC=this.treeChanges(),pendTC=pending&&pending.treeChanges();return pendTC&&same(pendTC.to,newTC.to)&&same(pendTC.exiting,newTC.exiting)?"SameAsPending":0===newTC.exiting.length&&0===newTC.entering.length&&same(newTC.from,newTC.to)?"SameAsCurrent":void 0},Transition.prototype.run=function(){var _this=this,runAllHooks=TransitionHook.runAllHooks,getHooksFor=function(phase){return _this._hookBuilder.buildHooksForPhase(phase)},transitionSuccess=function(){trace.traceSuccess(_this.$to(),_this),_this.success=!0,_this._deferred.resolve(_this.to()),runAllHooks(getHooksFor(exports.TransitionHookPhase.SUCCESS))},transitionError=function(reason){trace.traceError(reason,_this),_this.success=!1,_this._deferred.reject(reason),_this._error=reason,runAllHooks(getHooksFor(exports.TransitionHookPhase.ERROR))},runTransition=function(){var allRunHooks=getHooksFor(exports.TransitionHookPhase.RUN),done=function(){return services.$q.when(void 0)};return TransitionHook.invokeHooks(allRunHooks,done)},startTransition=function(){var globals=_this.router.globals;return globals.lastStartedTransitionId=_this.$id,globals.transition=_this,globals.transitionHistory.enqueue(_this),trace.traceTransitionStart(_this),services.$q.when(void 0)},allBeforeHooks=getHooksFor(exports.TransitionHookPhase.BEFORE);return TransitionHook.invokeHooks(allBeforeHooks,startTransition).then(runTransition).then(transitionSuccess,transitionError),this.promise},Transition.prototype.valid=function(){return!this.error()||void 0!==this.success},Transition.prototype.abort=function(){isUndefined(this.success)&&(this._aborted=!0)},Transition.prototype.error=function(){var state=this.$to();if(state.self["abstract"])return Rejection.invalid("Cannot transition to abstract state '"+state.name+"'");var paramDefs=state.parameters(),values$$1=this.params(),invalidParams=paramDefs.filter(function(param){return!param.validates(values$$1[param.id])});if(invalidParams.length){var invalidValues=invalidParams.map(function(param){return"["+param.id+":"+stringify(values$$1[param.id])+"]"}).join(", "),detail="The following parameter values are not valid for state '"+state.name+"': "+invalidValues;return Rejection.invalid(detail)}return this.success===!1?this._error:void 0},Transition.prototype.toString=function(){var fromStateOrName=this.from(),toStateOrName=this.to(),avoidEmptyHash=function(params){return null!==params["#"]&&void 0!==params["#"]?params:omit(params,["#"])},id=this.$id,from=isObject(fromStateOrName)?fromStateOrName.name:fromStateOrName,fromParams=stringify(avoidEmptyHash(this._treeChanges.from.map(prop("paramValues")).reduce(mergeR,{}))),toValid=this.valid()?"":"(X) ",to=isObject(toStateOrName)?toStateOrName.name:toStateOrName,toParams=stringify(avoidEmptyHash(this.params()));return"Transition#"+id+"( '"+from+"'"+fromParams+" -> "+toValid+"'"+to+"'"+toParams+" )"},Transition.diToken=Transition,Transition}(),stringifyPatternFn=null,stringifyPattern=function(value){var isRejection=Rejection.isRejectionPromise;return(stringifyPatternFn=stringifyPatternFn||pattern([[not(isDefined),val("undefined")],[isNull,val("null")],[isPromise,val("[Promise]")],[isRejection,function(x){return x._transitionRejection.toString()}],[is(Rejection),invoke("toString")],[is(Transition),invoke("toString")],[is(Resolvable),invoke("toString")],[isInjectable,functionToString],[val(!0),identity]]))(value)},beforeAfterSubstr=function(char){return function(str){if(!str)return["",""];var idx=str.indexOf(char);return idx===-1?[str,""]:[str.substr(0,idx),str.substr(idx+1)]}},hostRegex=new RegExp("^(?:[a-z]+:)?//[^/]+/"),stripLastPathElement=function(str){return str.replace(/\/[^/]*$/,"")},splitHash=beforeAfterSubstr("#"),splitQuery=beforeAfterSubstr("?"),splitEqual=beforeAfterSubstr("="),trimHashVal=function(str){return str?str.replace(/^#/,""):""},ParamTypes=function(){function ParamTypes(){this.enqueue=!0,this.typeQueue=[],this.defaultTypes=pick(ParamTypes.prototype,["hash","string","query","path","int","bool","date","json","any"]);var makeType=function(definition,name){return new ParamType(extend({name:name},definition))};this.types=inherit(map(this.defaultTypes,makeType),{})}return ParamTypes.prototype.dispose=function(){this.types={}},ParamTypes.prototype.type=function(name,definition,definitionFn){if(!isDefined(definition))return this.types[name];if(this.types.hasOwnProperty(name))throw new Error("A type named '"+name+"' has already been defined.");return this.types[name]=new ParamType(extend({name:name},definition)),definitionFn&&(this.typeQueue.push({name:name,def:definitionFn}),this.enqueue||this._flushTypeQueue()),this},ParamTypes.prototype._flushTypeQueue=function(){for(;this.typeQueue.length;){var type=this.typeQueue.shift();if(type.pattern)throw new Error("You cannot override a type's .pattern at runtime.");extend(this.types[type.name],services.$injector.invoke(type.def))}},ParamTypes}();initDefaultTypes();var defaultRuleSortFn,StateParams=function(){function StateParams(params){void 0===params&&(params={}),extend(this,params)}return StateParams.prototype.$inherit=function(newParams,$current,$to){var parentParams,parents=ancestors($current,$to),inherited={},inheritList=[];for(var i in parents)if(parents[i]&&parents[i].params&&(parentParams=Object.keys(parents[i].params),parentParams.length))for(var j in parentParams)inheritList.indexOf(parentParams[j])>=0||(inheritList.push(parentParams[j]),inherited[parentParams[j]]=this[parentParams[j]]);return extend({},inherited,newParams)},StateParams}(),parseUrl=function(url){if(!isString(url))return!1;var root$$1="^"===url.charAt(0);return{val:root$$1?url.substring(1):url,root:root$$1}},getUrlBuilder=function($urlMatcherFactoryProvider,root$$1){return function(state){var stateDec=state;stateDec&&stateDec.url&&stateDec.name&&stateDec.name.match(/\.\*\*$/)&&(stateDec.url+="{remainder:any}");var parsed=parseUrl(stateDec.url),parent=state.parent,url=parsed?$urlMatcherFactoryProvider.compile(parsed.val,{params:state.params||{},paramMap:function(paramConfig,isSearch){return stateDec.reloadOnSearch===!1&&isSearch&&(paramConfig=extend(paramConfig||{},{dynamic:!0})),paramConfig}}):stateDec.url;if(!url)return null;if(!$urlMatcherFactoryProvider.isMatcher(url))throw new Error("Invalid url '"+url+"' in state '"+state+"'");return parsed&&parsed.root?url:(parent&&parent.navigable||root$$1()).url.append(url)}},getNavigableBuilder=function(isRoot){return function(state){return!isRoot(state)&&state.url?state:state.parent?state.parent.navigable:null}},getParamsBuilder=function(paramFactory){return function(state){var makeConfigParam=function(config,id){return paramFactory.fromConfig(id,null,config)},urlParams=state.url&&state.url.parameters({inherit:!1})||[],nonUrlParams=values(mapObj(omit(state.params||{},urlParams.map(prop("id"))),makeConfigParam));return urlParams.concat(nonUrlParams).map(function(p){return[p.id,p]}).reduce(applyPairs,{})}},StateBuilder=function(){function StateBuilder(matcher,urlMatcherFactory){function parentBuilder(state){return isRoot(state)?null:matcher.find(self.parentName(state))||root$$1()}this.matcher=matcher;var self=this,root$$1=function(){return matcher.find("")},isRoot=function(state){return""===state.name};this.builders={name:[nameBuilder],self:[selfBuilder],parent:[parentBuilder],data:[dataBuilder],url:[getUrlBuilder(urlMatcherFactory,root$$1)],navigable:[getNavigableBuilder(isRoot)],params:[getParamsBuilder(urlMatcherFactory.paramFactory)],views:[],path:[pathBuilder],includes:[includesBuilder],resolvables:[resolvablesBuilder]}}return StateBuilder.prototype.builder=function(name,fn){var builders=this.builders,array=builders[name]||[];return isString(name)&&!isDefined(fn)?array.length>1?array:array[0]:isString(name)&&isFunction(fn)?(builders[name]=array,builders[name].push(fn),function(){return builders[name].splice(builders[name].indexOf(fn,1))&&null}):void 0},StateBuilder.prototype.build=function(state){var _a=this,matcher=_a.matcher,builders=_a.builders,parent=this.parentName(state);if(parent&&!matcher.find(parent,void 0,!1))return null;for(var key in builders)if(builders.hasOwnProperty(key)){var chain=builders[key].reduce(function(parentFn,step){return function(_state){return step(_state,parentFn)}},noop);state[key]=chain(state)}return state},StateBuilder.prototype.parentName=function(state){var name=state.name||"",segments=name.split("."),lastSegment=segments.pop();if("**"===lastSegment&&segments.pop(),segments.length){if(state.parent)throw new Error("States that specify the 'parent:' property should not have a '.' in their name ("+name+")");return segments.join(".")}return state.parent?isString(state.parent)?state.parent:state.parent.name:""},StateBuilder.prototype.name=function(state){var name=state.name;if(name.indexOf(".")!==-1||!state.parent)return name;var parentName=isString(state.parent)?state.parent:state.parent.name;return parentName?parentName+"."+name:name},StateBuilder}(),StateMatcher=function(){function StateMatcher(_states){this._states=_states}return StateMatcher.prototype.isRelative=function(stateName){return stateName=stateName||"",0===stateName.indexOf(".")||0===stateName.indexOf("^")},StateMatcher.prototype.find=function(stateOrName,base,matchGlob){if(void 0===matchGlob&&(matchGlob=!0),stateOrName||""===stateOrName){var isStr=isString(stateOrName),name=isStr?stateOrName:stateOrName.name;this.isRelative(name)&&(name=this.resolvePath(name,base));var state=this._states[name];if(state&&(isStr||!(isStr||state!==stateOrName&&state.self!==stateOrName)))return state;if(isStr&&matchGlob){var _states=values(this._states),matches=_states.filter(function(_state){return _state.__stateObjectCache.nameGlob&&_state.__stateObjectCache.nameGlob.matches(name)});return matches.length>1&&console.log("stateMatcher.find: Found multiple matches for "+name+" using glob: ",matches.map(function(match){return match.name})),matches[0]}}},StateMatcher.prototype.resolvePath=function(name,base){if(!base)throw new Error("No reference point given for path '"+name+"'");for(var baseState=this.find(base),splitName=name.split("."),pathLength=splitName.length,i=0,current=baseState;i<pathLength;i++)if(""!==splitName[i]||0!==i){if("^"!==splitName[i])break;if(!current.parent)throw new Error("Path '"+name+"' not valid for state '"+baseState.name+"'");current=current.parent}else current=baseState;var relName=splitName.slice(i).join(".");return current.name+(current.name&&relName?".":"")+relName},StateMatcher}(),StateQueueManager=function(){function StateQueueManager($registry,$urlRouter,states,builder,listeners){this.$registry=$registry,this.$urlRouter=$urlRouter,this.states=states,this.builder=builder,this.listeners=listeners,this.queue=[],this.matcher=$registry.matcher}return StateQueueManager.prototype.dispose=function(){this.queue=[]},StateQueueManager.prototype.register=function(stateDecl){var queue=this.queue,state=StateObject.create(stateDecl),name=state.name;if(!isString(name))throw new Error("State must have a valid name");if(this.states.hasOwnProperty(name)||inArray(queue.map(prop("name")),name))throw new Error("State '"+name+"' is already defined");return queue.push(state),this.flush(),state},StateQueueManager.prototype.flush=function(){for(var _this=this,_a=this,queue=_a.queue,states=_a.states,builder=_a.builder,registered=[],orphans=[],previousQueueLength={},getState=function(name){return _this.states.hasOwnProperty(name)&&_this.states[name]},notifyListeners=function(){registered.length&&_this.listeners.forEach(function(listener){return listener("registered",registered.map(function(s){return s.self}))})};queue.length>0;){var state=queue.shift(),name_1=state.name,result=builder.build(state),orphanIdx=orphans.indexOf(state);if(result){var existingState=getState(name_1);if(existingState&&existingState.name===name_1)throw new Error("State '"+name_1+"' is already defined");var existingFutureState=getState(name_1+".**");existingFutureState&&this.$registry.deregister(existingFutureState),states[name_1]=state,this.attachRoute(state),orphanIdx>=0&&orphans.splice(orphanIdx,1),registered.push(state)}else{var prev=previousQueueLength[name_1];if(previousQueueLength[name_1]=queue.length,orphanIdx>=0&&prev===queue.length)return queue.push(state),notifyListeners(),states;orphanIdx<0&&orphans.push(state),queue.push(state)}}return notifyListeners(),states},StateQueueManager.prototype.attachRoute=function(state){!state["abstract"]&&state.url&&this.$urlRouter.rule(this.$urlRouter.urlRuleFactory.create(state))},StateQueueManager}(),StateRegistry=function(){function StateRegistry(_router){this._router=_router,this.states={},this.listeners=[],this.matcher=new StateMatcher(this.states),this.builder=new StateBuilder(this.matcher,_router.urlMatcherFactory),this.stateQueue=new StateQueueManager(this,_router.urlRouter,this.states,this.builder,this.listeners),this._registerRoot()}return StateRegistry.prototype._registerRoot=function(){var rootStateDef={name:"",url:"^",views:null,params:{"#":{value:null,type:"hash",dynamic:!0}},"abstract":!0},_root=this._root=this.stateQueue.register(rootStateDef);_root.navigable=null},StateRegistry.prototype.dispose=function(){var _this=this;this.stateQueue.dispose(),this.listeners=[],this.get().forEach(function(state){return _this.get(state)&&_this.deregister(state)})},StateRegistry.prototype.onStatesChanged=function(listener){return this.listeners.push(listener),function(){removeFrom(this.listeners)(listener)}.bind(this)},StateRegistry.prototype.root=function(){return this._root},StateRegistry.prototype.register=function(stateDefinition){return this.stateQueue.register(stateDefinition)},StateRegistry.prototype._deregisterTree=function(state){var _this=this,all$$1=this.get().map(function(s){return s.$$state()}),getChildren=function(states){var _children=all$$1.filter(function(s){return states.indexOf(s.parent)!==-1});return 0===_children.length?_children:_children.concat(getChildren(_children))},children=getChildren([state]),deregistered=[state].concat(children).reverse();return deregistered.forEach(function(_state){var $ur=_this._router.urlRouter;$ur.rules().filter(propEq("state",_state)).forEach($ur.removeRule.bind($ur)),delete _this.states[_state.name]}),deregistered},StateRegistry.prototype.deregister=function(stateOrName){var _state=this.get(stateOrName);if(!_state)throw new Error("Can't deregister state; not found: "+stateOrName);var deregisteredStates=this._deregisterTree(_state.$$state());return this.listeners.forEach(function(listener){return listener("deregistered",deregisteredStates.map(function(s){return s.self}))}),deregisteredStates},StateRegistry.prototype.get=function(stateOrName,base){var _this=this;if(0===arguments.length)return Object.keys(this.states).map(function(name){return _this.states[name].self});var found=this.matcher.find(stateOrName,base);return found&&found.self||null},StateRegistry.prototype.decorator=function(name,func){return this.builder.builder(name,func)},StateRegistry}(),memoizeTo=function(obj,_prop,fn){return obj[_prop]=obj[_prop]||fn()},splitOnSlash=splitOnDelim("/"),UrlMatcher=function(){function UrlMatcher(pattern$$1,paramTypes,paramFactory,config){var _this=this;this.config=config,this._cache={path:[this]},this._children=[],this._params=[],this._segments=[],this._compiled=[],this.pattern=pattern$$1,this.config=defaults(this.config,{params:{},strict:!0,caseInsensitive:!1,paramMap:identity});for(var matchArray,p,segment,placeholder=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,searchPlaceholder=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,patterns=[],last=0,checkParamErrors=function(id){if(!UrlMatcher.nameValidator.test(id))throw new Error("Invalid parameter name '"+id+"' in pattern '"+pattern$$1+"'");if(find(_this._params,propEq("id",id)))throw new Error("Duplicate parameter name '"+id+"' in pattern '"+pattern$$1+"'")},matchDetails=function(m,isSearch){var id=m[2]||m[3],regexp=isSearch?m[4]:m[4]||("*"===m[1]?"[\\s\\S]*":null),makeRegexpType=function(str){return inherit(paramTypes.type(isSearch?"query":"path"),{pattern:new RegExp(str,_this.config.caseInsensitive?"i":void 0)})};return{id:id,regexp:regexp,cfg:_this.config.params[id],segment:pattern$$1.substring(last,m.index),type:regexp?paramTypes.type(regexp)||makeRegexpType(regexp):null}};(matchArray=placeholder.exec(pattern$$1))&&(p=matchDetails(matchArray,!1),!(p.segment.indexOf("?")>=0));)checkParamErrors(p.id),this._params.push(paramFactory.fromPath(p.id,p.type,this.config.paramMap(p.cfg,!1))),this._segments.push(p.segment),patterns.push([p.segment,tail(this._params)]),last=placeholder.lastIndex;segment=pattern$$1.substring(last);var i=segment.indexOf("?");if(i>=0){var search=segment.substring(i);if(segment=segment.substring(0,i),search.length>0)for(last=0;matchArray=searchPlaceholder.exec(search);)p=matchDetails(matchArray,!0),checkParamErrors(p.id),this._params.push(paramFactory.fromSearch(p.id,p.type,this.config.paramMap(p.cfg,!0))),last=placeholder.lastIndex}this._segments.push(segment),this._compiled=patterns.map(function(_pattern){return quoteRegExp.apply(null,_pattern)}).concat(quoteRegExp(segment))}return UrlMatcher.encodeDashes=function(str){return encodeURIComponent(str).replace(/-/g,function(c){return"%5C%"+c.charCodeAt(0).toString(16).toUpperCase()})},UrlMatcher.pathSegmentsAndParams=function(matcher){var staticSegments=matcher._segments,pathParams=matcher._params.filter(function(p){return p.location===exports.DefType.PATH});return arrayTuples(staticSegments,pathParams.concat(void 0)).reduce(unnestR,[]).filter(function(x){return""!==x&&isDefined(x)})},UrlMatcher.queryParams=function(matcher){return matcher._params.filter(function(p){return p.location===exports.DefType.SEARCH})},UrlMatcher.compare=function(a,b){var segments=function(matcher){return matcher._cache.segments=matcher._cache.segments||matcher._cache.path.map(UrlMatcher.pathSegmentsAndParams).reduce(unnestR,[]).reduce(joinNeighborsR,[]).map(function(x){return isString(x)?splitOnSlash(x):x}).reduce(unnestR,[])},weights=function(matcher){return matcher._cache.weights=matcher._cache.weights||segments(matcher).map(function(segment){return"/"===segment?1:isString(segment)?2:segment instanceof Param?3:void 0})},padArrays=function(l,r,padVal){for(var len=Math.max(l.length,r.length);l.length<len;)l.push(padVal);for(;r.length<len;)r.push(padVal)},weightsA=weights(a),weightsB=weights(b);padArrays(weightsA,weightsB,0);var cmp,i,_pairs=arrayTuples(weightsA,weightsB);for(i=0;i<_pairs.length;i++)if(cmp=_pairs[i][0]-_pairs[i][1],0!==cmp)return cmp;return 0},UrlMatcher.prototype.append=function(url){return this._children.push(url),url._cache={path:this._cache.path.concat(url),parent:this,pattern:null},url},UrlMatcher.prototype.isRoot=function(){return this._cache.path[0]===this},UrlMatcher.prototype.toString=function(){return this.pattern},UrlMatcher.prototype.exec=function(path,search,hash,options){function decodePathArray(paramVal){var reverseString=function(str){return str.split("").reverse().join("")},unquoteDashes=function(str){return str.replace(/\\-/g,"-")},split=reverseString(paramVal).split(/-(?!\\)/),allReversed=map(split,reverseString);return map(allReversed,unquoteDashes).reverse()}var _this=this;void 0===search&&(search={}),void 0===options&&(options={});var match=memoizeTo(this._cache,"pattern",function(){return new RegExp(["^",unnest(_this._cache.path.map(prop("_compiled"))).join(""),_this.config.strict===!1?"/?":"","$"].join(""),_this.config.caseInsensitive?"i":void 0)}).exec(path);if(!match)return null;var allParams=this.parameters(),pathParams=allParams.filter(function(param){return!param.isSearch()}),searchParams=allParams.filter(function(param){return param.isSearch()}),nPathSegments=this._cache.path.map(function(urlm){return urlm._segments.length-1}).reduce(function(a,x){return a+x}),values$$1={};if(nPathSegments!==match.length-1)throw new Error("Unbalanced capture group in route '"+this.pattern+"'");for(var i=0;i<nPathSegments;i++){for(var param=pathParams[i],value=match[i+1],j=0;j<param.replace.length;j++)param.replace[j].from===value&&(value=param.replace[j].to);value&&param.array===!0&&(value=decodePathArray(value)),isDefined(value)&&(value=param.type.decode(value)),values$$1[param.id]=param.value(value)}return searchParams.forEach(function(param){for(var value=search[param.id],j=0;j<param.replace.length;j++)param.replace[j].from===value&&(value=param.replace[j].to);isDefined(value)&&(value=param.type.decode(value)),values$$1[param.id]=param.value(value)}),hash&&(values$$1["#"]=hash),values$$1},UrlMatcher.prototype.parameters=function(opts){return void 0===opts&&(opts={}),opts.inherit===!1?this._params:unnest(this._cache.path.map(function(matcher){return matcher._params}))},UrlMatcher.prototype.parameter=function(id,opts){var _this=this;void 0===opts&&(opts={});var findParam=function(){for(var _i=0,_a=_this._params;_i<_a.length;_i++){var param=_a[_i];if(param.id===id)return param}},parent=this._cache.parent;return findParam()||opts.inherit!==!1&&parent&&parent.parameter(id,opts)||null},UrlMatcher.prototype.validates=function(params){var validParamVal=function(param,val$$1){return!param||param.validates(val$$1)};params=params||{};var paramSchema=this.parameters().filter(function(paramDef){return params.hasOwnProperty(paramDef.id)});return paramSchema.map(function(paramDef){return validParamVal(paramDef,params[paramDef.id])}).reduce(allTrueR,!0)},UrlMatcher.prototype.format=function(values$$1){function getDetails(param){var value=param.value(values$$1[param.id]),isValid=param.validates(value),isDefaultValue=param.isDefaultValue(value),squash=!!isDefaultValue&&param.squash,encoded=param.type.encode(value);return{param:param,value:value,isValid:isValid,isDefaultValue:isDefaultValue,squash:squash,encoded:encoded}}void 0===values$$1&&(values$$1={});var urlMatchers=this._cache.path,pathSegmentsAndParams=urlMatchers.map(UrlMatcher.pathSegmentsAndParams).reduce(unnestR,[]).map(function(x){return isString(x)?x:getDetails(x)}),queryParams=urlMatchers.map(UrlMatcher.queryParams).reduce(unnestR,[]).map(getDetails),isInvalid=function(param){return param.isValid===!1};if(pathSegmentsAndParams.concat(queryParams).filter(isInvalid).length)return null;var pathString=pathSegmentsAndParams.reduce(function(acc,x){if(isString(x))return acc+x;var squash=x.squash,encoded=x.encoded,param=x.param;return squash===!0?acc.match(/\/$/)?acc.slice(0,-1):acc:isString(squash)?acc+squash:squash!==!1?acc:null==encoded?acc:isArray(encoded)?acc+map(encoded,UrlMatcher.encodeDashes).join("-"):param.raw?acc+encoded:acc+encodeURIComponent(encoded)},""),queryString=queryParams.map(function(paramDetails){var param=paramDetails.param,squash=paramDetails.squash,encoded=paramDetails.encoded,isDefaultValue=paramDetails.isDefaultValue;if(!(null==encoded||isDefaultValue&&squash!==!1)&&(isArray(encoded)||(encoded=[encoded]),0!==encoded.length))return param.raw||(encoded=map(encoded,encodeURIComponent)),encoded.map(function(val$$1){return param.id+"="+val$$1})}).filter(identity).reduce(unnestR,[]).join("&");return pathString+(queryString?"?"+queryString:"")+(values$$1["#"]?"#"+values$$1["#"]:"")},UrlMatcher.nameValidator=/^\w+([-.]+\w+)*(?:\[\])?$/,UrlMatcher}(),UrlMatcherFactory=function(){function UrlMatcherFactory(){var _this=this;this.paramTypes=new ParamTypes,this._isCaseInsensitive=!1,this._isStrictMode=!0,this._defaultSquashPolicy=!1,this.paramFactory={fromConfig:function(id,type,config){return new Param(id,type,config,exports.DefType.CONFIG,_this)},fromPath:function(id,type,config){return new Param(id,type,config,exports.DefType.PATH,_this)},fromSearch:function(id,type,config){return new Param(id,type,config,exports.DefType.SEARCH,_this)}},this._getConfig=function(config){return extend({strict:_this._isStrictMode,caseInsensitive:_this._isCaseInsensitive},config)},extend(this,{UrlMatcher:UrlMatcher,Param:Param})}return UrlMatcherFactory.prototype.caseInsensitive=function(value){return this._isCaseInsensitive=isDefined(value)?value:this._isCaseInsensitive},UrlMatcherFactory.prototype.strictMode=function(value){return this._isStrictMode=isDefined(value)?value:this._isStrictMode},UrlMatcherFactory.prototype.defaultSquashPolicy=function(value){if(isDefined(value)&&value!==!0&&value!==!1&&!isString(value))throw new Error("Invalid squash policy: "+value+". Valid policies: false, true, arbitrary-string");return this._defaultSquashPolicy=isDefined(value)?value:this._defaultSquashPolicy},UrlMatcherFactory.prototype.compile=function(pattern,config){return new UrlMatcher(pattern,this.paramTypes,this.paramFactory,this._getConfig(config))},UrlMatcherFactory.prototype.isMatcher=function(object){if(!isObject(object))return!1;var result=!0;return forEach(UrlMatcher.prototype,function(val,name){isFunction(val)&&(result=result&&isDefined(object[name])&&isFunction(object[name]))}),result},UrlMatcherFactory.prototype.type=function(name,definition,definitionFn){var type=this.paramTypes.type(name,definition,definitionFn);return isDefined(definition)?this:type},UrlMatcherFactory.prototype.$get=function(){return this.paramTypes.enqueue=!1,this.paramTypes._flushTypeQueue(),this},UrlMatcherFactory.prototype.dispose=function(){this.paramTypes.dispose()},UrlMatcherFactory}(),UrlRuleFactory=function(){function UrlRuleFactory(router){this.router=router}return UrlRuleFactory.prototype.compile=function(str){return this.router.urlMatcherFactory.compile(str)},UrlRuleFactory.prototype.create=function(what,handler){var _this=this,makeRule=pattern([[isString,function(_what){return makeRule(_this.compile(_what))}],[is(UrlMatcher),function(_what){return _this.fromUrlMatcher(_what,handler)}],[isState,function(_what){return _this.fromState(_what,_this.router)}],[is(RegExp),function(_what){return _this.fromRegExp(_what,handler)}],[isFunction,function(_what){return new BaseUrlRule(_what,handler)}]]),rule=makeRule(what);if(!rule)throw new Error("invalid 'what' in when()");return rule},UrlRuleFactory.prototype.fromUrlMatcher=function(urlMatcher,handler){function matchUrlParamters(url){var params=urlMatcher.exec(url.path,url.search,url.hash);return urlMatcher.validates(params)&&params}function matchPriority(params){var optional=urlMatcher.parameters().filter(function(param){return param.isOptional});if(!optional.length)return 1e-6;var matched=optional.filter(function(param){return params[param.id]});return matched.length/optional.length}var _handler=handler;isString(handler)&&(handler=this.router.urlMatcherFactory.compile(handler)),is(UrlMatcher)(handler)&&(_handler=function(match){return handler.format(match)});var details={urlMatcher:urlMatcher,matchPriority:matchPriority,type:"URLMATCHER"};return extend(new BaseUrlRule(matchUrlParamters,_handler),details)},UrlRuleFactory.prototype.fromState=function(state,router){var handler=function(match){var $state=router.stateService,globals=router.globals;$state.href(state,match)!==$state.href(globals.current,globals.params)&&$state.transitionTo(state,match,{inherit:!0,source:"url"})},details={state:state,type:"STATE"};return extend(this.fromUrlMatcher(state.url,handler),details)},UrlRuleFactory.prototype.fromRegExp=function(regexp,handler){if(regexp.global||regexp.sticky)throw new Error("Rule RegExp must not be global or sticky");var redirectUrlTo=function(match){return handler.replace(/\$(\$|\d{1,2})/,function(m,what){return match["$"===what?0:Number(what)]})},_handler=isString(handler)?redirectUrlTo:handler,matchParamsFromRegexp=function(url){return regexp.exec(url.path);
},details={regexp:regexp,type:"REGEXP"};return extend(new BaseUrlRule(matchParamsFromRegexp,_handler),details)},UrlRuleFactory.isUrlRule=function(obj){return obj&&["type","match","handler"].every(function(key){return isDefined(obj[key])})},UrlRuleFactory}(),BaseUrlRule=function(){function BaseUrlRule(match,handler){var _this=this;this.match=match,this.type="RAW",this.matchPriority=function(match){return 0-_this.$id},this.handler=handler||identity}return BaseUrlRule}(),prioritySort=function(a,b){return(b.priority||0)-(a.priority||0)},typeSort=function(a,b){var weights={STATE:4,URLMATCHER:4,REGEXP:3,RAW:2,OTHER:1};return(weights[a.type]||0)-(weights[b.type]||0)},urlMatcherSort=function(a,b){return a.urlMatcher&&b.urlMatcher?UrlMatcher.compare(a.urlMatcher,b.urlMatcher):0},idSort=function(a,b){var useMatchPriority={STATE:!0,URLMATCHER:!0},equal=useMatchPriority[a.type]&&useMatchPriority[b.type];return equal?0:(a.$id||0)-(b.$id||0)};defaultRuleSortFn=function(a,b){var cmp=prioritySort(a,b);return 0!==cmp?cmp:(cmp=typeSort(a,b),0!==cmp?cmp:(cmp=urlMatcherSort(a,b),0!==cmp?cmp:idSort(a,b)))};var UrlRouter=function(){function UrlRouter(router){this._sortFn=defaultRuleSortFn,this._rules=[],this.interceptDeferred=!1,this._id=0,this._sorted=!1,this._router=router,this.urlRuleFactory=new UrlRuleFactory(router),createProxyFunctions(val(UrlRouter.prototype),this,val(this))}return UrlRouter.prototype.dispose=function(){this.listen(!1),this._rules=[],delete this._otherwiseFn},UrlRouter.prototype.sort=function(compareFn){this._rules=this.stableSort(this._rules,this._sortFn=compareFn||this._sortFn),this._sorted=!0},UrlRouter.prototype.ensureSorted=function(){this._sorted||this.sort()},UrlRouter.prototype.stableSort=function(arr,compareFn){var arrOfWrapper=arr.map(function(elem,idx){return{elem:elem,idx:idx}});return arrOfWrapper.sort(function(wrapperA,wrapperB){var cmpDiff=compareFn(wrapperA.elem,wrapperB.elem);return 0===cmpDiff?wrapperA.idx-wrapperB.idx:cmpDiff}),arrOfWrapper.map(function(wrapper){return wrapper.elem})},UrlRouter.prototype.match=function(url){var _this=this;this.ensureSorted(),url=extend({path:"",search:{},hash:""},url);var rules=this.rules();this._otherwiseFn&&rules.push(this._otherwiseFn);for(var best,checkRule=function(rule){var match=rule.match(url,_this._router);return match&&{match:match,rule:rule,weight:rule.matchPriority(match)}},i=0;i<rules.length&&(!best||0===this._sortFn(rules[i],best.rule));i++){var current=checkRule(rules[i]);best=!best||current&&current.weight>best.weight?current:best}return best},UrlRouter.prototype.sync=function(evt){if(!evt||!evt.defaultPrevented){var router=this._router,$url=router.urlService,$state=router.stateService,url={path:$url.path(),search:$url.search(),hash:$url.hash()},best=this.match(url),applyResult=pattern([[isString,function(newurl){return $url.url(newurl,!0)}],[TargetState.isDef,function(def){return $state.go(def.state,def.params,def.options)}],[is(TargetState),function(target){return $state.go(target.state(),target.params(),target.options())}]]);applyResult(best&&best.rule.handler(best.match,url,router))}},UrlRouter.prototype.listen=function(enabled){var _this=this;return enabled!==!1?this._stopFn=this._stopFn||this._router.urlService.onChange(function(evt){return _this.sync(evt)}):(this._stopFn&&this._stopFn(),void delete this._stopFn)},UrlRouter.prototype.update=function(read){var $url=this._router.locationService;return read?void(this.location=$url.url()):void($url.url()!==this.location&&$url.url(this.location,!0))},UrlRouter.prototype.push=function(urlMatcher,params,options){var replace=options&&!!options.replace;this._router.urlService.url(urlMatcher.format(params||{}),replace)},UrlRouter.prototype.href=function(urlMatcher,params,options){var url=urlMatcher.format(params);if(null==url)return null;options=options||{absolute:!1};var cfg=this._router.urlService.config,isHtml5=cfg.html5Mode();if(isHtml5||null===url||(url="#"+cfg.hashPrefix()+url),url=appendBasePath(url,isHtml5,options.absolute,cfg.baseHref()),!options.absolute||!url)return url;var slash=!isHtml5&&url?"/":"",cfgPort=cfg.port(),port=80===cfgPort||443===cfgPort?"":":"+cfgPort;return[cfg.protocol(),"://",cfg.host(),port,slash,url].join("")},UrlRouter.prototype.rule=function(rule){var _this=this;if(!UrlRuleFactory.isUrlRule(rule))throw new Error("invalid rule");return rule.$id=this._id++,rule.priority=rule.priority||0,this._rules.push(rule),this._sorted=!1,function(){return _this.removeRule(rule)}},UrlRouter.prototype.removeRule=function(rule){removeFrom(this._rules,rule)},UrlRouter.prototype.rules=function(){return this.ensureSorted(),this._rules.slice()},UrlRouter.prototype.otherwise=function(handler){var handlerFn=getHandlerFn(handler);this._otherwiseFn=this.urlRuleFactory.create(val(!0),handlerFn),this._sorted=!1},UrlRouter.prototype.initial=function(handler){var handlerFn=getHandlerFn(handler),matchFn=function(urlParts,router){return 0===router.globals.transitionHistory.size()&&!!/^\/?$/.exec(urlParts.path)};this.rule(this.urlRuleFactory.create(matchFn,handlerFn))},UrlRouter.prototype.when=function(matcher,handler,options){var rule=this.urlRuleFactory.create(matcher,handler);return isDefined(options&&options.priority)&&(rule.priority=options.priority),this.rule(rule),rule},UrlRouter.prototype.deferIntercept=function(defer){void 0===defer&&(defer=!0),this.interceptDeferred=defer},UrlRouter}(),ViewService=function(){function ViewService(){var _this=this;this._uiViews=[],this._viewConfigs=[],this._viewConfigFactories={},this._listeners=[],this._pluginapi={_rootViewContext:this._rootViewContext.bind(this),_viewConfigFactory:this._viewConfigFactory.bind(this),_registeredUIViews:function(){return _this._uiViews},_activeViewConfigs:function(){return _this._viewConfigs},_onSync:function(listener){return _this._listeners.push(listener),function(){return removeFrom(_this._listeners,listener)}}}}return ViewService.normalizeUIViewTarget=function(context,rawViewName){void 0===rawViewName&&(rawViewName="");var viewAtContext=rawViewName.split("@"),uiViewName=viewAtContext[0]||"$default",uiViewContextAnchor=isString(viewAtContext[1])?viewAtContext[1]:"^",relativeViewNameSugar=/^(\^(?:\.\^)*)\.(.*$)/.exec(uiViewName);relativeViewNameSugar&&(uiViewContextAnchor=relativeViewNameSugar[1],uiViewName=relativeViewNameSugar[2]),"!"===uiViewName.charAt(0)&&(uiViewName=uiViewName.substr(1),uiViewContextAnchor="");var relativeMatch=/^(\^(?:\.\^)*)$/;if(relativeMatch.exec(uiViewContextAnchor)){var anchorState=uiViewContextAnchor.split(".").reduce(function(anchor,x){return anchor.parent},context);uiViewContextAnchor=anchorState.name}else"."===uiViewContextAnchor&&(uiViewContextAnchor=context.name);return{uiViewName:uiViewName,uiViewContextAnchor:uiViewContextAnchor}},ViewService.prototype._rootViewContext=function(context){return this._rootContext=context||this._rootContext},ViewService.prototype._viewConfigFactory=function(viewType,factory){this._viewConfigFactories[viewType]=factory},ViewService.prototype.createViewConfig=function(path,decl){var cfgFactory=this._viewConfigFactories[decl.$type];if(!cfgFactory)throw new Error("ViewService: No view config factory registered for type "+decl.$type);var cfgs=cfgFactory(path,decl);return isArray(cfgs)?cfgs:[cfgs]},ViewService.prototype.deactivateViewConfig=function(viewConfig){trace.traceViewServiceEvent("<- Removing",viewConfig),removeFrom(this._viewConfigs,viewConfig)},ViewService.prototype.activateViewConfig=function(viewConfig){trace.traceViewServiceEvent("-> Registering",viewConfig),this._viewConfigs.push(viewConfig)},ViewService.prototype.sync=function(){function uiViewDepth(uiView){var stateDepth=function(context){return context&&context.parent?stateDepth(context.parent)+1:1};return 1e4*uiView.fqn.split(".").length+stateDepth(uiView.creationContext)}function viewConfigDepth(config){for(var context=config.viewDecl.$context,count=0;++count&&context.parent;)context=context.parent;return count}var _this=this,uiViewsByFqn=this._uiViews.map(function(uiv){return[uiv.fqn,uiv]}).reduce(applyPairs,{}),depthCompare=curry(function(depthFn,posNeg,left,right){return posNeg*(depthFn(left)-depthFn(right))}),matchingConfigPair=function(uiView){var matchingConfigs=_this._viewConfigs.filter(ViewService.matches(uiViewsByFqn,uiView));return matchingConfigs.length>1&&matchingConfigs.sort(depthCompare(viewConfigDepth,-1)),{uiView:uiView,viewConfig:matchingConfigs[0]}},configureUIView=function(tuple){_this._uiViews.indexOf(tuple.uiView)!==-1&&tuple.uiView.configUpdated(tuple.viewConfig)},uiViewTuples=this._uiViews.sort(depthCompare(uiViewDepth,1)).map(matchingConfigPair),matchedViewConfigs=uiViewTuples.map(function(tuple){return tuple.viewConfig}),unmatchedConfigTuples=this._viewConfigs.filter(function(config){return!inArray(matchedViewConfigs,config)}).map(function(viewConfig){return{uiView:void 0,viewConfig:viewConfig}});uiViewTuples.forEach(configureUIView);var allTuples=uiViewTuples.concat(unmatchedConfigTuples);this._listeners.forEach(function(cb){return cb(allTuples)}),trace.traceViewSync(allTuples)},ViewService.prototype.registerUIView=function(uiView){trace.traceViewServiceUIViewEvent("-> Registering",uiView);var uiViews=this._uiViews,fqnAndTypeMatches=function(uiv){return uiv.fqn===uiView.fqn&&uiv.$type===uiView.$type};return uiViews.filter(fqnAndTypeMatches).length&&trace.traceViewServiceUIViewEvent("!!!! duplicate uiView named:",uiView),uiViews.push(uiView),this.sync(),function(){var idx=uiViews.indexOf(uiView);return idx===-1?void trace.traceViewServiceUIViewEvent("Tried removing non-registered uiView",uiView):(trace.traceViewServiceUIViewEvent("<- Deregistering",uiView),void removeFrom(uiViews)(uiView))}},ViewService.prototype.available=function(){return this._uiViews.map(prop("fqn"))},ViewService.prototype.active=function(){return this._uiViews.filter(prop("$config")).map(prop("name"))},ViewService.matches=function(uiViewsByFqn,uiView){return function(viewConfig){if(uiView.$type!==viewConfig.viewDecl.$type)return!1;var vc=viewConfig.viewDecl,vcSegments=vc.$uiViewName.split("."),uivSegments=uiView.fqn.split(".");if(!equals(vcSegments,uivSegments.slice(0-vcSegments.length)))return!1;var negOffset=1-vcSegments.length||void 0,fqnToFirstSegment=uivSegments.slice(0,negOffset).join("."),uiViewContext=uiViewsByFqn[fqnToFirstSegment].creationContext;return vc.$uiViewContextAnchor===(uiViewContext&&uiViewContext.name)}},ViewService}(),UIRouterGlobals=function(){function UIRouterGlobals(){this.params=new StateParams,this.lastStartedTransitionId=-1,this.transitionHistory=new Queue([],1),this.successfulTransitions=new Queue([],1)}return UIRouterGlobals.prototype.dispose=function(){this.transitionHistory.clear(),this.successfulTransitions.clear(),this.transition=null},UIRouterGlobals}(),makeStub=function(keys){return keys.reduce(function(acc,key){return acc[key]=notImplemented(key),acc},{dispose:noop})},locationServicesFns=["url","path","search","hash","onChange"],locationConfigFns=["port","protocol","host","baseHref","html5Mode","hashPrefix"],umfFns=["type","caseInsensitive","strictMode","defaultSquashPolicy"],rulesFns=["sort","when","initial","otherwise","rules","rule","removeRule"],syncFns=["deferIntercept","listen","sync","match"],UrlService=function(){function UrlService(router,lateBind){void 0===lateBind&&(lateBind=!0),this.router=router,this.rules={},this.config={};var locationServices=function(){return router.locationService};createProxyFunctions(locationServices,this,locationServices,locationServicesFns,lateBind);var locationConfig=function(){return router.locationConfig};createProxyFunctions(locationConfig,this.config,locationConfig,locationConfigFns,lateBind);var umf=function(){return router.urlMatcherFactory};createProxyFunctions(umf,this.config,umf,umfFns);var urlRouter=function(){return router.urlRouter};createProxyFunctions(urlRouter,this.rules,urlRouter,rulesFns),createProxyFunctions(urlRouter,this,urlRouter,syncFns)}return UrlService.prototype.url=function(newurl,replace,state){},UrlService.prototype.path=function(){},UrlService.prototype.search=function(){},UrlService.prototype.hash=function(){},UrlService.prototype.onChange=function(callback){},UrlService.prototype.parts=function(){return{path:this.path(),search:this.search(),hash:this.hash()}},UrlService.prototype.dispose=function(){},UrlService.prototype.sync=function(evt){},UrlService.prototype.listen=function(enabled){},UrlService.prototype.deferIntercept=function(defer){},UrlService.prototype.match=function(urlParts){},UrlService.locationServiceStub=makeStub(locationServicesFns),UrlService.locationConfigStub=makeStub(locationConfigFns),UrlService}(),_routerInstance=0,UIRouter=function(){function UIRouter(locationService,locationConfig){void 0===locationService&&(locationService=UrlService.locationServiceStub),void 0===locationConfig&&(locationConfig=UrlService.locationConfigStub),this.locationService=locationService,this.locationConfig=locationConfig,this.$id=_routerInstance++,this._disposed=!1,this._disposables=[],this.trace=trace,this.viewService=new ViewService,this.globals=new UIRouterGlobals,this.transitionService=new TransitionService(this),this.urlMatcherFactory=new UrlMatcherFactory,this.urlRouter=new UrlRouter(this),this.stateRegistry=new StateRegistry(this),this.stateService=new StateService(this),this.urlService=new UrlService(this),this._plugins={},this.viewService._pluginapi._rootViewContext(this.stateRegistry.root()),this.globals.$current=this.stateRegistry.root(),this.globals.current=this.globals.$current.self,this.disposable(this.globals),this.disposable(this.stateService),this.disposable(this.stateRegistry),this.disposable(this.transitionService),this.disposable(this.urlRouter),this.disposable(locationService),this.disposable(locationConfig)}return UIRouter.prototype.disposable=function(disposable){this._disposables.push(disposable)},UIRouter.prototype.dispose=function(disposable){var _this=this;return disposable&&isFunction(disposable.dispose)?void disposable.dispose(this):(this._disposed=!0,void this._disposables.slice().forEach(function(d){try{"function"==typeof d.dispose&&d.dispose(_this),removeFrom(_this._disposables,d)}catch(ignored){}}))},UIRouter.prototype.plugin=function(plugin,options){void 0===options&&(options={});var pluginInstance=new plugin(this,options);if(!pluginInstance.name)throw new Error("Required property `name` missing on plugin: "+pluginInstance);return this._disposables.push(pluginInstance),this._plugins[pluginInstance.name]=pluginInstance},UIRouter.prototype.getPlugin=function(pluginName){return pluginName?this._plugins[pluginName]:values(this._plugins)},UIRouter}(),registerAddCoreResolvables=function(transitionService){return transitionService.onCreate({},addCoreResolvables)},TRANSITION_TOKENS=["$transition$",Transition],isTransition=inArray(TRANSITION_TOKENS),treeChangesCleanup=function(trans){var nodes=values(trans.treeChanges()).reduce(unnestR,[]).reduce(uniqR,[]),replaceTransitionWithNull=function(r){return isTransition(r.token)?Resolvable.fromData(r.token,null):r};nodes.forEach(function(node){node.resolvables=node.resolvables.map(replaceTransitionWithNull)})},redirectToHook=function(trans){function handleResult(result){if(result)return result instanceof TargetState?result:isString(result)?$state.target(result,trans.params(),trans.options()):result.state||result.params?$state.target(result.state||trans.to(),result.params||trans.params(),trans.options()):void 0}var redirect=trans.to().redirectTo;if(redirect){var $state=trans.router.stateService;return isFunction(redirect)?services.$q.when(redirect(trans)).then(handleResult):handleResult(redirect)}},registerRedirectToHook=function(transitionService){return transitionService.onStart({to:function(state){return!!state.redirectTo}},redirectToHook)},onExitHook=makeEnterExitRetainHook("onExit"),registerOnExitHook=function(transitionService){return transitionService.onExit({exiting:function(state){return!!state.onExit}},onExitHook)},onRetainHook=makeEnterExitRetainHook("onRetain"),registerOnRetainHook=function(transitionService){return transitionService.onRetain({retained:function(state){return!!state.onRetain}},onRetainHook)},onEnterHook=makeEnterExitRetainHook("onEnter"),registerOnEnterHook=function(transitionService){return transitionService.onEnter({entering:function(state){return!!state.onEnter}},onEnterHook)},RESOLVE_HOOK_PRIORITY=1e3,eagerResolvePath=function(trans){return new ResolveContext(trans.treeChanges().to).resolvePath("EAGER",trans).then(noop)},registerEagerResolvePath=function(transitionService){return transitionService.onStart({},eagerResolvePath,{priority:RESOLVE_HOOK_PRIORITY})},lazyResolveState=function(trans,state){return new ResolveContext(trans.treeChanges().to).subContext(state.$$state()).resolvePath("LAZY",trans).then(noop)},registerLazyResolveState=function(transitionService){return transitionService.onEnter({entering:val(!0)},lazyResolveState,{priority:RESOLVE_HOOK_PRIORITY})},resolveRemaining=function(trans){return new ResolveContext(trans.treeChanges().to).resolvePath("LAZY",trans).then(noop)},registerResolveRemaining=function(transitionService){return transitionService.onFinish({},resolveRemaining,{priority:RESOLVE_HOOK_PRIORITY})},loadEnteringViews=function(transition){var $q=services.$q,enteringViews=transition.views("entering");if(enteringViews.length)return $q.all(enteringViews.map(function(view){return $q.when(view.load())})).then(noop)},registerLoadEnteringViews=function(transitionService){return transitionService.onFinish({},loadEnteringViews)},activateViews=function(transition){var enteringViews=transition.views("entering"),exitingViews=transition.views("exiting");if(enteringViews.length||exitingViews.length){var $view=transition.router.viewService;exitingViews.forEach(function(vc){return $view.deactivateViewConfig(vc)}),enteringViews.forEach(function(vc){return $view.activateViewConfig(vc)}),$view.sync()}},registerActivateViews=function(transitionService){return transitionService.onSuccess({},activateViews)},updateGlobalState=function(trans){var globals=trans.router.globals,transitionSuccessful=function(){globals.successfulTransitions.enqueue(trans),globals.$current=trans.$to(),globals.current=globals.$current.self,copy(trans.params(),globals.params)},clearCurrentTransition=function(){globals.transition===trans&&(globals.transition=null)};trans.onSuccess({},transitionSuccessful,{priority:1e4}),trans.promise.then(clearCurrentTransition,clearCurrentTransition)},registerUpdateGlobalState=function(transitionService){return transitionService.onCreate({},updateGlobalState)},updateUrl=function(transition){var options=transition.options(),$state=transition.router.stateService,$urlRouter=transition.router.urlRouter;if("url"!==options.source&&options.location&&$state.$current.navigable){var urlOptions={replace:"replace"===options.location};$urlRouter.push($state.$current.navigable.url,$state.params,urlOptions)}$urlRouter.update(!0)},registerUpdateUrl=function(transitionService){return transitionService.onSuccess({},updateUrl,{priority:9999})},lazyLoadHook=function(transition){function retryTransition(){if("url"!==transition.originalTransition().options().source){var orig=transition.targetState();return router.stateService.target(orig.identifier(),orig.params(),orig.options())}var $url=router.urlService,result=$url.match($url.parts()),rule=result&&result.rule;if(rule&&"STATE"===rule.type){var state=rule.state,params=result.match;return router.stateService.target(state,params,transition.options())}router.urlService.sync()}var router=transition.router,promises=transition.entering().filter(function(state){return!!state.$$state().lazyLoad}).map(function(state){return lazyLoadState(transition,state)});return services.$q.all(promises).then(retryTransition)},registerLazyLoadHook=function(transitionService){return transitionService.onBefore({entering:function(state){return!!state.lazyLoad}},lazyLoadHook)},TransitionEventType=function(){function TransitionEventType(name,hookPhase,hookOrder,criteriaMatchPath,reverseSort,getResultHandler,getErrorHandler,synchronous){void 0===reverseSort&&(reverseSort=!1),void 0===getResultHandler&&(getResultHandler=TransitionHook.HANDLE_RESULT),void 0===getErrorHandler&&(getErrorHandler=TransitionHook.REJECT_ERROR),void 0===synchronous&&(synchronous=!1),this.name=name,this.hookPhase=hookPhase,this.hookOrder=hookOrder,this.criteriaMatchPath=criteriaMatchPath,this.reverseSort=reverseSort,this.getResultHandler=getResultHandler,this.getErrorHandler=getErrorHandler,this.synchronous=synchronous}return TransitionEventType}(),registerIgnoredTransitionHook=function(transitionService){return transitionService.onBefore({},ignoredHook,{priority:-9999})},registerInvalidTransitionHook=function(transitionService){return transitionService.onBefore({},invalidTransitionHook,{priority:-1e4})},defaultTransOpts={location:!0,relative:null,inherit:!1,notify:!0,reload:!1,custom:{},current:function(){return null},source:"unknown"},TransitionService=function(){function TransitionService(_router){this._transitionCount=0,this._eventTypes=[],this._registeredHooks={},this._criteriaPaths={},this._router=_router,this.$view=_router.viewService,this._deregisterHookFns={},this._pluginapi=createProxyFunctions(val(this),{},val(this),["_definePathType","_defineEvent","_getPathTypes","_getEvents","getHooks"]),this._defineCorePaths(),this._defineCoreEvents(),this._registerCoreTransitionHooks(),_router.globals.successfulTransitions.onEvict(treeChangesCleanup)}return TransitionService.prototype.onCreate=function(criteria,callback,options){},TransitionService.prototype.onBefore=function(criteria,callback,options){},TransitionService.prototype.onStart=function(criteria,callback,options){},TransitionService.prototype.onExit=function(criteria,callback,options){},TransitionService.prototype.onRetain=function(criteria,callback,options){},TransitionService.prototype.onEnter=function(criteria,callback,options){},TransitionService.prototype.onFinish=function(criteria,callback,options){},TransitionService.prototype.onSuccess=function(criteria,callback,options){},TransitionService.prototype.onError=function(criteria,callback,options){},TransitionService.prototype.dispose=function(router){values(this._registeredHooks).forEach(function(hooksArray){return hooksArray.forEach(function(hook){hook._deregistered=!0,removeFrom(hooksArray,hook)})})},TransitionService.prototype.create=function(fromPath,targetState){return new Transition(fromPath,targetState,this._router)},TransitionService.prototype._defineCoreEvents=function(){var Phase=exports.TransitionHookPhase,TH=TransitionHook,paths=this._criteriaPaths,NORMAL_SORT=!1,REVERSE_SORT=!0,SYNCHRONOUS=!0;this._defineEvent("onCreate",Phase.CREATE,0,paths.to,NORMAL_SORT,TH.LOG_REJECTED_RESULT,TH.THROW_ERROR,SYNCHRONOUS),this._defineEvent("onBefore",Phase.BEFORE,0,paths.to),this._defineEvent("onStart",Phase.RUN,0,paths.to),this._defineEvent("onExit",Phase.RUN,100,paths.exiting,REVERSE_SORT),this._defineEvent("onRetain",Phase.RUN,200,paths.retained),this._defineEvent("onEnter",Phase.RUN,300,paths.entering),this._defineEvent("onFinish",Phase.RUN,400,paths.to),this._defineEvent("onSuccess",Phase.SUCCESS,0,paths.to,NORMAL_SORT,TH.LOG_REJECTED_RESULT,TH.LOG_ERROR,SYNCHRONOUS),this._defineEvent("onError",Phase.ERROR,0,paths.to,NORMAL_SORT,TH.LOG_REJECTED_RESULT,TH.LOG_ERROR,SYNCHRONOUS)},TransitionService.prototype._defineCorePaths=function(){var STATE=exports.TransitionHookScope.STATE,TRANSITION=exports.TransitionHookScope.TRANSITION;this._definePathType("to",TRANSITION),this._definePathType("from",TRANSITION),this._definePathType("exiting",STATE),this._definePathType("retained",STATE),this._definePathType("entering",STATE)},TransitionService.prototype._defineEvent=function(name,hookPhase,hookOrder,criteriaMatchPath,reverseSort,getResultHandler,getErrorHandler,synchronous){void 0===reverseSort&&(reverseSort=!1),void 0===getResultHandler&&(getResultHandler=TransitionHook.HANDLE_RESULT),void 0===getErrorHandler&&(getErrorHandler=TransitionHook.REJECT_ERROR),void 0===synchronous&&(synchronous=!1);var eventType=new TransitionEventType(name,hookPhase,hookOrder,criteriaMatchPath,reverseSort,getResultHandler,getErrorHandler,synchronous);this._eventTypes.push(eventType),makeEvent(this,this,eventType)},TransitionService.prototype._getEvents=function(phase){var transitionHookTypes=isDefined(phase)?this._eventTypes.filter(function(type){return type.hookPhase===phase}):this._eventTypes.slice();return transitionHookTypes.sort(function(l,r){var cmpByPhase=l.hookPhase-r.hookPhase;return 0===cmpByPhase?l.hookOrder-r.hookOrder:cmpByPhase})},TransitionService.prototype._definePathType=function(name,hookScope){this._criteriaPaths[name]={name:name,scope:hookScope}},TransitionService.prototype._getPathTypes=function(){return this._criteriaPaths},TransitionService.prototype.getHooks=function(hookName){return this._registeredHooks[hookName]},TransitionService.prototype._registerCoreTransitionHooks=function(){var fns=this._deregisterHookFns;fns.addCoreResolves=registerAddCoreResolvables(this),fns.ignored=registerIgnoredTransitionHook(this),fns.invalid=registerInvalidTransitionHook(this),fns.redirectTo=registerRedirectToHook(this),fns.onExit=registerOnExitHook(this),fns.onRetain=registerOnRetainHook(this),fns.onEnter=registerOnEnterHook(this),fns.eagerResolve=registerEagerResolvePath(this),fns.lazyResolve=registerLazyResolveState(this),fns.resolveAll=registerResolveRemaining(this),fns.loadViews=registerLoadEnteringViews(this),fns.activateViews=registerActivateViews(this),fns.updateGlobals=registerUpdateGlobalState(this),fns.updateUrl=registerUpdateUrl(this),fns.lazyLoad=registerLazyLoadHook(this)},TransitionService}(),StateService=function(){function StateService(router){this.router=router,this.invalidCallbacks=[],this._defaultErrorHandler=function($error$){$error$ instanceof Error&&$error$.stack?(console.error($error$),console.error($error$.stack)):$error$ instanceof Rejection?(console.error($error$.toString()),$error$.detail&&$error$.detail.stack&&console.error($error$.detail.stack)):console.error($error$)};var getters=["current","$current","params","transition"],boundFns=Object.keys(StateService.prototype).filter(not(inArray(getters)));createProxyFunctions(val(StateService.prototype),this,val(this),boundFns)}return Object.defineProperty(StateService.prototype,"transition",{get:function(){return this.router.globals.transition},enumerable:!0,configurable:!0}),Object.defineProperty(StateService.prototype,"params",{get:function(){return this.router.globals.params},enumerable:!0,configurable:!0}),Object.defineProperty(StateService.prototype,"current",{get:function(){return this.router.globals.current},enumerable:!0,configurable:!0}),Object.defineProperty(StateService.prototype,"$current",{get:function(){return this.router.globals.$current},enumerable:!0,configurable:!0}),StateService.prototype.dispose=function(){this.defaultErrorHandler(noop),this.invalidCallbacks=[]},StateService.prototype._handleInvalidTargetState=function(fromPath,toState){function invokeNextCallback(){var nextCallback=callbackQueue.dequeue();if(void 0===nextCallback)return Rejection.invalid(toState.error()).toPromise();var callbackResult=services.$q.when(nextCallback(toState,fromState,injector));return callbackResult.then(checkForRedirect).then(function(result){return result||invokeNextCallback()})}var _this=this,fromState=PathUtils.makeTargetState(this.router.stateRegistry,fromPath),globals=this.router.globals,latestThing=function(){return globals.transitionHistory.peekTail()},latest=latestThing(),callbackQueue=new Queue(this.invalidCallbacks.slice()),injector=new ResolveContext(fromPath).injector(),checkForRedirect=function(result){if(result instanceof TargetState){var target=result;return target=_this.target(target.identifier(),target.params(),target.options()),target.valid()?latestThing()!==latest?Rejection.superseded().toPromise():_this.transitionTo(target.identifier(),target.params(),target.options()):Rejection.invalid(target.error()).toPromise()}};return invokeNextCallback()},StateService.prototype.onInvalid=function(callback){return this.invalidCallbacks.push(callback),function(){removeFrom(this.invalidCallbacks)(callback)}.bind(this)},StateService.prototype.reload=function(reloadState){return this.transitionTo(this.current,this.params,{reload:!isDefined(reloadState)||reloadState,inherit:!1,notify:!1})},StateService.prototype.go=function(to,params,options){var defautGoOpts={relative:this.$current,inherit:!0},transOpts=defaults(options,defautGoOpts,defaultTransOpts);return this.transitionTo(to,params,transOpts)},StateService.prototype.target=function(identifier,params,options){if(void 0===options&&(options={}),isObject(options.reload)&&!options.reload.name)throw new Error("Invalid reload state object");var reg=this.router.stateRegistry;if(options.reloadState=options.reload===!0?reg.root():reg.matcher.find(options.reload,options.relative),options.reload&&!options.reloadState)throw new Error("No such reload state '"+(isString(options.reload)?options.reload:options.reload.name)+"'");return new TargetState(this.router.stateRegistry,identifier,params,options)},StateService.prototype.getCurrentPath=function(){var _this=this,globals=this.router.globals,latestSuccess=globals.successfulTransitions.peekTail(),rootPath=function(){return[new PathNode(_this.router.stateRegistry.root())]};return latestSuccess?latestSuccess.treeChanges().to:rootPath()},StateService.prototype.transitionTo=function(to,toParams,options){var _this=this;void 0===toParams&&(toParams={}),void 0===options&&(options={});var router=this.router,globals=router.globals;options=defaults(options,defaultTransOpts);var getCurrent=function(){return globals.transition};options=extend(options,{current:getCurrent});var ref=this.target(to,toParams,options),currentPath=this.getCurrentPath();if(!ref.exists())return this._handleInvalidTargetState(currentPath,ref);if(!ref.valid())return silentRejection(ref.error());var rejectedTransitionHandler=function(trans){return function(error){if(error instanceof Rejection){var isLatest=router.globals.lastStartedTransitionId===trans.$id;if(error.type===exports.RejectType.IGNORED)return isLatest&&router.urlRouter.update(),services.$q.when(globals.current);var detail=error.detail;if(error.type===exports.RejectType.SUPERSEDED&&error.redirected&&detail instanceof TargetState){var redirect=trans.redirect(detail);return redirect.run()["catch"](rejectedTransitionHandler(redirect))}if(error.type===exports.RejectType.ABORTED)return isLatest&&router.urlRouter.update(),services.$q.reject(error)}var errorHandler=_this.defaultErrorHandler();return errorHandler(error),services.$q.reject(error)}},transition=this.router.transitionService.create(currentPath,ref),transitionToPromise=transition.run()["catch"](rejectedTransitionHandler(transition));return silenceUncaughtInPromise(transitionToPromise),extend(transitionToPromise,{transition:transition})},StateService.prototype.is=function(stateOrName,params,options){options=defaults(options,{relative:this.$current});var state=this.router.stateRegistry.matcher.find(stateOrName,options.relative);if(isDefined(state)){if(this.$current!==state)return!1;if(!params)return!0;var schema=state.parameters({inherit:!0,matchingKeys:params});return Param.equals(schema,Param.values(schema,params),this.params)}},StateService.prototype.includes=function(stateOrName,params,options){options=defaults(options,{relative:this.$current});var glob=isString(stateOrName)&&Glob.fromString(stateOrName);if(glob){if(!glob.matches(this.$current.name))return!1;stateOrName=this.$current.name}var state=this.router.stateRegistry.matcher.find(stateOrName,options.relative),include=this.$current.includes;if(isDefined(state)){if(!isDefined(include[state.name]))return!1;if(!params)return!0;var schema=state.parameters({inherit:!0,matchingKeys:params
});return Param.equals(schema,Param.values(schema,params),this.params)}},StateService.prototype.href=function(stateOrName,params,options){var defaultHrefOpts={lossy:!0,inherit:!0,absolute:!1,relative:this.$current};options=defaults(options,defaultHrefOpts),params=params||{};var state=this.router.stateRegistry.matcher.find(stateOrName,options.relative);if(!isDefined(state))return null;options.inherit&&(params=this.params.$inherit(params,this.$current,state));var nav=state&&options.lossy?state.navigable:state;return nav&&void 0!==nav.url&&null!==nav.url?this.router.urlRouter.href(nav.url,params,{absolute:options.absolute}):null},StateService.prototype.defaultErrorHandler=function(handler){return this._defaultErrorHandler=handler||this._defaultErrorHandler},StateService.prototype.get=function(stateOrName,base){var reg=this.router.stateRegistry;return 0===arguments.length?reg.get():reg.get(stateOrName,base||this.$current)},StateService.prototype.lazyLoad=function(stateOrName,transition){var state=this.get(stateOrName);if(!state||!state.lazyLoad)throw new Error("Can not lazy load "+stateOrName);var currentPath=this.getCurrentPath(),target=PathUtils.makeTargetState(this.router.stateRegistry,currentPath);return transition=transition||this.router.transitionService.create(currentPath,target),lazyLoadState(transition,state)},StateService}(),$q={when:function(val$$1){return new Promise(function(resolve,reject){return resolve(val$$1)})},reject:function(val$$1){return new Promise(function(resolve,reject){reject(val$$1)})},defer:function(){var deferred={};return deferred.promise=new Promise(function(resolve,reject){deferred.resolve=resolve,deferred.reject=reject}),deferred},all:function(promises){if(isArray(promises))return Promise.all(promises);if(isObject(promises)){var chain=Object.keys(promises).map(function(key){return promises[key].then(function(val$$1){return{key:key,val:val$$1}})});return $q.all(chain).then(function(values$$1){return values$$1.reduce(function(acc,tuple){return acc[tuple.key]=tuple.val,acc},{})})}}},globals={},STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,ARGUMENT_NAMES=/([^\s,]+)/g,$injector={get:function(name){return globals[name]},has:function(name){return null!=$injector.get(name)},invoke:function(fn,context,locals){var all$$1=extend({},globals,locals||{}),params=$injector.annotate(fn),ensureExist=assertPredicate(function(key){return all$$1.hasOwnProperty(key)},function(key){return"DI can't find injectable: '"+key+"'"}),args=params.filter(ensureExist).map(function(x){return all$$1[x]});return isFunction(fn)?fn.apply(context,args):fn.slice(-1)[0].apply(context,args)},annotate:function(fn){if(!isInjectable(fn))throw new Error("Not an injectable function: "+fn);if(fn&&fn.$inject)return fn.$inject;if(isArray(fn))return fn.slice(0,-1);var fnStr=fn.toString().replace(STRIP_COMMENTS,""),result=fnStr.slice(fnStr.indexOf("(")+1,fnStr.indexOf(")")).match(ARGUMENT_NAMES);return result||[]}},keyValsToObjectR=function(accum,_a){var key=_a[0],val$$1=_a[1];return accum.hasOwnProperty(key)?isArray(accum[key])?accum[key].push(val$$1):accum[key]=[accum[key],val$$1]:accum[key]=val$$1,accum},getParams=function(queryString){return queryString.split("&").filter(identity).map(splitEqual).reduce(keyValsToObjectR,{})},buildUrl=function(loc){var path=loc.path(),searchObject=loc.search(),hash=loc.hash(),search=Object.keys(searchObject).map(function(key){var param=searchObject[key],vals=isArray(param)?param:[param];return vals.map(function(val$$1){return key+"="+val$$1})}).reduce(unnestR,[]).join("&");return path+(search?"?"+search:"")+(hash?"#"+hash:"")},BaseLocationServices=function(){function BaseLocationServices(router,fireAfterUpdate){var _this=this;this.fireAfterUpdate=fireAfterUpdate,this._listeners=[],this._listener=function(evt){return _this._listeners.forEach(function(cb){return cb(evt)})},this.hash=function(){return parseUrl$1(_this._get()).hash},this.path=function(){return parseUrl$1(_this._get()).path},this.search=function(){return getParams(parseUrl$1(_this._get()).search)},this._location=root.location,this._history=root.history}return BaseLocationServices.prototype.url=function(url,replace){return void 0===replace&&(replace=!0),isDefined(url)&&url!==this._get()&&(this._set(null,null,url,replace),this.fireAfterUpdate&&this._listeners.forEach(function(cb){return cb({url:url})})),buildUrl(this)},BaseLocationServices.prototype.onChange=function(cb){var _this=this;return this._listeners.push(cb),function(){return removeFrom(_this._listeners,cb)}},BaseLocationServices.prototype.dispose=function(router){deregAll(this._listeners)},BaseLocationServices}(),__extends=function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),HashLocationService=function(_super){function HashLocationService(router){var _this=_super.call(this,router,!1)||this;return root.addEventListener("hashchange",_this._listener,!1),_this}return __extends(HashLocationService,_super),HashLocationService.prototype._get=function(){return trimHashVal(this._location.hash)},HashLocationService.prototype._set=function(state,title,url,replace){this._location.hash=url},HashLocationService.prototype.dispose=function(router){_super.prototype.dispose.call(this,router),root.removeEventListener("hashchange",this._listener)},HashLocationService}(BaseLocationServices),__extends$1=function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),MemoryLocationService=function(_super){function MemoryLocationService(router){return _super.call(this,router,!0)||this}return __extends$1(MemoryLocationService,_super),MemoryLocationService.prototype._get=function(){return this._url},MemoryLocationService.prototype._set=function(state,title,url,replace){this._url=url},MemoryLocationService}(BaseLocationServices),__extends$2=function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),PushStateLocationService=function(_super){function PushStateLocationService(router){var _this=_super.call(this,router,!0)||this;return _this._config=router.urlService.config,root.addEventListener("popstate",_this._listener,!1),_this}return __extends$2(PushStateLocationService,_super),PushStateLocationService.prototype._getBasePrefix=function(){return stripLastPathElement(this._config.baseHref())},PushStateLocationService.prototype._get=function(){var _a=this._location,pathname=_a.pathname,hash=_a.hash,search=_a.search;search=splitQuery(search)[1],hash=splitHash(hash)[1];var basePrefix=this._getBasePrefix(),exactBaseHrefMatch=pathname===this._config.baseHref(),startsWithBase=pathname.substr(0,basePrefix.length)===basePrefix;return pathname=exactBaseHrefMatch?"/":startsWithBase?pathname.substring(basePrefix.length):pathname,pathname+(search?"?"+search:"")+(hash?"#"+hash:"")},PushStateLocationService.prototype._set=function(state,title,url,replace){var basePrefix=this._getBasePrefix(),slash=url&&"/"!==url[0]?"/":"",fullUrl=""===url||"/"===url?this._config.baseHref():basePrefix+slash+url;replace?this._history.replaceState(state,title,fullUrl):this._history.pushState(state,title,fullUrl)},PushStateLocationService.prototype.dispose=function(router){_super.prototype.dispose.call(this,router),root.removeEventListener("popstate",this._listener)},PushStateLocationService}(BaseLocationServices),MemoryLocationConfig=function(){function MemoryLocationConfig(){var _this=this;this.dispose=noop,this._baseHref="",this._port=80,this._protocol="http",this._host="localhost",this._hashPrefix="",this.port=function(){return _this._port},this.protocol=function(){return _this._protocol},this.host=function(){return _this._host},this.baseHref=function(){return _this._baseHref},this.html5Mode=function(){return!1},this.hashPrefix=function(newval){return isDefined(newval)?_this._hashPrefix=newval:_this._hashPrefix}}return MemoryLocationConfig}(),BrowserLocationConfig=function(){function BrowserLocationConfig(router,_isHtml5){void 0===_isHtml5&&(_isHtml5=!1),this._isHtml5=_isHtml5,this._baseHref=void 0,this._hashPrefix=""}return BrowserLocationConfig.prototype.port=function(){return location.port?Number(location.port):"https"===this.protocol()?443:80},BrowserLocationConfig.prototype.protocol=function(){return location.protocol.replace(/:/g,"")},BrowserLocationConfig.prototype.host=function(){return location.hostname},BrowserLocationConfig.prototype.html5Mode=function(){return this._isHtml5},BrowserLocationConfig.prototype.hashPrefix=function(newprefix){return isDefined(newprefix)?this._hashPrefix=newprefix:this._hashPrefix},BrowserLocationConfig.prototype.baseHref=function(href){return isDefined(href)?this._baseHref=href:isDefined(this._baseHref)?this._baseHref:this.applyDocumentBaseHref()},BrowserLocationConfig.prototype.applyDocumentBaseHref=function(){var baseTag=document.getElementsByTagName("base")[0];return this._baseHref=baseTag?baseTag.href.substr(location.origin.length):location.pathname||"/"},BrowserLocationConfig.prototype.dispose=function(){},BrowserLocationConfig}(),hashLocationPlugin=locationPluginFactory("vanilla.hashBangLocation",!1,HashLocationService,BrowserLocationConfig),pushStateLocationPlugin=locationPluginFactory("vanilla.pushStateLocation",!0,PushStateLocationService,BrowserLocationConfig),memoryLocationPlugin=locationPluginFactory("vanilla.memoryLocation",!1,MemoryLocationService,MemoryLocationConfig),UIRouterPluginBase=function(){function UIRouterPluginBase(){}return UIRouterPluginBase.prototype.dispose=function(router){},UIRouterPluginBase}(),index=Object.freeze({root:root,fromJson:fromJson,toJson:toJson,forEach:forEach,extend:extend,equals:equals,identity:identity,noop:noop,createProxyFunctions:createProxyFunctions,inherit:inherit,inArray:inArray,_inArray:_inArray,removeFrom:removeFrom,_removeFrom:_removeFrom,pushTo:pushTo,_pushTo:_pushTo,deregAll:deregAll,defaults:defaults,mergeR:mergeR,ancestors:ancestors,pick:pick,omit:omit,pluck:pluck,filter:filter,find:find,mapObj:mapObj,map:map,values:values,allTrueR:allTrueR,anyTrueR:anyTrueR,unnestR:unnestR,flattenR:flattenR,pushR:pushR,uniqR:uniqR,unnest:unnest,flatten:flatten,assertPredicate:assertPredicate,assertMap:assertMap,assertFn:assertFn,pairs:pairs,arrayTuples:arrayTuples,applyPairs:applyPairs,tail:tail,copy:copy,_extend:_extend,silenceUncaughtInPromise:silenceUncaughtInPromise,silentRejection:silentRejection,notImplemented:notImplemented,services:services,Glob:Glob,curry:curry,compose:compose,pipe:pipe,prop:prop,propEq:propEq,parse:parse,not:not,and:and,or:or,all:all,any:any,is:is,eq:eq,val:val,invoke:invoke,pattern:pattern,isUndefined:isUndefined,isDefined:isDefined,isNull:isNull,isNullOrUndefined:isNullOrUndefined,isFunction:isFunction,isNumber:isNumber,isString:isString,isObject:isObject,isArray:isArray,isDate:isDate,isRegExp:isRegExp,isState:isState,isInjectable:isInjectable,isPromise:isPromise,Queue:Queue,maxLength:maxLength,padString:padString,kebobString:kebobString,functionToString:functionToString,fnToString:fnToString,stringify:stringify,beforeAfterSubstr:beforeAfterSubstr,hostRegex:hostRegex,stripLastPathElement:stripLastPathElement,splitHash:splitHash,splitQuery:splitQuery,splitEqual:splitEqual,trimHashVal:trimHashVal,splitOnDelim:splitOnDelim,joinNeighborsR:joinNeighborsR,get Category(){return exports.Category},Trace:Trace,trace:trace,get DefType(){return exports.DefType},Param:Param,ParamTypes:ParamTypes,StateParams:StateParams,ParamType:ParamType,PathNode:PathNode,PathUtils:PathUtils,resolvePolicies:resolvePolicies,defaultResolvePolicy:defaultResolvePolicy,Resolvable:Resolvable,NATIVE_INJECTOR_TOKEN:NATIVE_INJECTOR_TOKEN,ResolveContext:ResolveContext,resolvablesBuilder:resolvablesBuilder,StateBuilder:StateBuilder,StateObject:StateObject,StateMatcher:StateMatcher,StateQueueManager:StateQueueManager,StateRegistry:StateRegistry,StateService:StateService,TargetState:TargetState,get TransitionHookPhase(){return exports.TransitionHookPhase},get TransitionHookScope(){return exports.TransitionHookScope},HookBuilder:HookBuilder,matchState:matchState,RegisteredHook:RegisteredHook,makeEvent:makeEvent,get RejectType(){return exports.RejectType},Rejection:Rejection,Transition:Transition,TransitionHook:TransitionHook,TransitionEventType:TransitionEventType,defaultTransOpts:defaultTransOpts,TransitionService:TransitionService,UrlMatcher:UrlMatcher,UrlMatcherFactory:UrlMatcherFactory,UrlRouter:UrlRouter,UrlRuleFactory:UrlRuleFactory,BaseUrlRule:BaseUrlRule,UrlService:UrlService,ViewService:ViewService,UIRouterGlobals:UIRouterGlobals,UIRouter:UIRouter,$q:$q,$injector:$injector,BaseLocationServices:BaseLocationServices,HashLocationService:HashLocationService,MemoryLocationService:MemoryLocationService,PushStateLocationService:PushStateLocationService,MemoryLocationConfig:MemoryLocationConfig,BrowserLocationConfig:BrowserLocationConfig,keyValsToObjectR:keyValsToObjectR,getParams:getParams,parseUrl:parseUrl$1,buildUrl:buildUrl,locationPluginFactory:locationPluginFactory,servicesPlugin:servicesPlugin,hashLocationPlugin:hashLocationPlugin,pushStateLocationPlugin:pushStateLocationPlugin,memoryLocationPlugin:memoryLocationPlugin,UIRouterPluginBase:UIRouterPluginBase}),hasAnyKey=function(keys,obj){return keys.reduce(function(acc,key){return acc||isDefined(obj[key])},!1)},id$1=0,Ng1ViewConfig=function(){function Ng1ViewConfig(path,viewDecl,factory){var _this=this;this.path=path,this.viewDecl=viewDecl,this.factory=factory,this.$id=id$1++,this.loaded=!1,this.getTemplate=function(uiView,context){return _this.component?_this.factory.makeComponentTemplate(uiView,context,_this.component,_this.viewDecl.bindings):_this.template}}return Ng1ViewConfig.prototype.load=function(){var _this=this,$q$$1=services.$q,context=new ResolveContext(this.path),params=this.path.reduce(function(acc,node){return extend(acc,node.paramValues)},{}),promises={template:$q$$1.when(this.factory.fromConfig(this.viewDecl,params,context)),controller:$q$$1.when(this.getController(context))};return $q$$1.all(promises).then(function(results){return trace.traceViewServiceEvent("Loaded",_this),_this.controller=results.controller,extend(_this,results.template),_this})},Ng1ViewConfig.prototype.getController=function(context){var provider=this.viewDecl.controllerProvider;if(!isInjectable(provider))return this.viewDecl.controller;var deps=services.$injector.annotate(provider),providerFn=isArray(provider)?tail(provider):provider,resolvable=new Resolvable("",providerFn,deps);return resolvable.get(context)},Ng1ViewConfig}(),TemplateFactory=function(){function TemplateFactory(){var _this=this;this._useHttp=ng.version.minor<3,this.$get=["$http","$templateCache","$injector",function($http,$templateCache,$injector$$1){return _this.$templateRequest=$injector$$1.has&&$injector$$1.has("$templateRequest")&&$injector$$1.get("$templateRequest"),_this.$http=$http,_this.$templateCache=$templateCache,_this}]}return TemplateFactory.prototype.useHttpService=function(value){this._useHttp=value},TemplateFactory.prototype.fromConfig=function(config,params,context){var defaultTemplate="<ui-view></ui-view>",asTemplate=function(result){return services.$q.when(result).then(function(str){return{template:str}})},asComponent=function(result){return services.$q.when(result).then(function(str){return{component:str}})};return isDefined(config.template)?asTemplate(this.fromString(config.template,params)):isDefined(config.templateUrl)?asTemplate(this.fromUrl(config.templateUrl,params)):isDefined(config.templateProvider)?asTemplate(this.fromProvider(config.templateProvider,params,context)):isDefined(config.component)?asComponent(config.component):isDefined(config.componentProvider)?asComponent(this.fromComponentProvider(config.componentProvider,params,context)):asTemplate(defaultTemplate)},TemplateFactory.prototype.fromString=function(template,params){return isFunction(template)?template(params):template},TemplateFactory.prototype.fromUrl=function(url,params){return isFunction(url)&&(url=url(params)),null==url?null:this._useHttp?this.$http.get(url,{cache:this.$templateCache,headers:{Accept:"text/html"}}).then(function(response){return response.data}):this.$templateRequest(url)},TemplateFactory.prototype.fromProvider=function(provider,params,context){var deps=services.$injector.annotate(provider),providerFn=isArray(provider)?tail(provider):provider,resolvable=new Resolvable("",providerFn,deps);return resolvable.get(context)},TemplateFactory.prototype.fromComponentProvider=function(provider,params,context){var deps=services.$injector.annotate(provider),providerFn=isArray(provider)?tail(provider):provider,resolvable=new Resolvable("",providerFn,deps);return resolvable.get(context)},TemplateFactory.prototype.makeComponentTemplate=function(uiView,context,component,bindings){bindings=bindings||{};var prefix=ng.version.minor>=3?"::":"",kebob=function(camelCase){var kebobed=kebobString(camelCase);return/^(x|data)-/.exec(kebobed)?"x-"+kebobed:kebobed},attributeTpl=function(input){var name=input.name,type=input.type,attrName=kebob(name);if(uiView.attr(attrName)&&!bindings[name])return attrName+"='"+uiView.attr(attrName)+"'";var resolveName=bindings[name]||name;if("@"===type)return attrName+"='{{"+prefix+"$resolve."+resolveName+"}}'";if("&"===type){var res=context.getResolvable(resolveName),fn=res&&res.data,args=fn&&services.$injector.annotate(fn)||[],arrayIdxStr=isArray(fn)?"["+(fn.length-1)+"]":"";return attrName+"='$resolve."+resolveName+arrayIdxStr+"("+args.join(",")+")'"}return attrName+"='"+prefix+"$resolve."+resolveName+"'"},attrs=getComponentBindings(component).map(attributeTpl).join(" "),kebobName=kebob(component);return"<"+kebobName+" "+attrs+"></"+kebobName+">"},TemplateFactory}(),getBindings=function(def){return scopeBindings(isObject(def.bindToController)?def.bindToController:def.scope)},scopeBindings=function(bindingsObj){return Object.keys(bindingsObj||{}).map(function(key){return[key,/^([=<@&])[?]?(.*)/.exec(bindingsObj[key])]}).filter(function(tuple){return isDefined(tuple)&&isArray(tuple[1])}).map(function(tuple){return{name:tuple[1][2]||tuple[0],type:tuple[1][1]}})},StateProvider=function(){function StateProvider(stateRegistry,stateService){this.stateRegistry=stateRegistry,this.stateService=stateService,createProxyFunctions(val(StateProvider.prototype),this,val(this))}return StateProvider.prototype.decorator=function(name,func){return this.stateRegistry.decorator(name,func)||this},StateProvider.prototype.state=function(name,definition){return isObject(name)?definition=name:definition.name=name,this.stateRegistry.register(definition),this},StateProvider.prototype.onInvalid=function(callback){return this.stateService.onInvalid(callback)},StateProvider}(),getStateHookBuilder=function(hookName){return function(stateObject,parentFn){function decoratedNg1Hook(trans,state){var resolveContext=new ResolveContext(trans.treeChanges(pathname)),subContext=resolveContext.subContext(state.$$state()),locals=extend(getLocals(subContext),{$state$:state,$transition$:trans});return services.$injector.invoke(hook,this,locals)}var hook=stateObject[hookName],pathname="onExit"===hookName?"from":"to";return hook?decoratedNg1Hook:void 0}},Ng1LocationServices=function(){function Ng1LocationServices($locationProvider){this._urlListeners=[],this.$locationProvider=$locationProvider;var _lp=val($locationProvider);createProxyFunctions(_lp,this,_lp,["hashPrefix"])}return Ng1LocationServices.monkeyPatchPathParameterType=function(router){var pathType=router.urlMatcherFactory.type("path");pathType.encode=function(x){return null!=x?x.toString().replace(/(~|\/)/g,function(m){return{"~":"~~","/":"~2F"}[m]}):x},pathType.decode=function(x){return null!=x?x.toString().replace(/(~~|~2F)/g,function(m){return{"~~":"~","~2F":"/"}[m]}):x}},Ng1LocationServices.prototype.dispose=function(){},Ng1LocationServices.prototype.onChange=function(callback){var _this=this;return this._urlListeners.push(callback),function(){return removeFrom(_this._urlListeners)(callback)}},Ng1LocationServices.prototype.html5Mode=function(){var html5Mode=this.$locationProvider.html5Mode();return html5Mode=isObject(html5Mode)?html5Mode.enabled:html5Mode,html5Mode&&this.$sniffer.history},Ng1LocationServices.prototype.url=function(newUrl,replace,state){return void 0===replace&&(replace=!1),isDefined(newUrl)&&this.$location.url(newUrl),replace&&this.$location.replace(),state&&this.$location.state(state),this.$location.url()},Ng1LocationServices.prototype._runtimeServices=function($rootScope,$location,$sniffer,$browser){var _this=this;this.$location=$location,this.$sniffer=$sniffer,$rootScope.$on("$locationChangeSuccess",function(evt){return _this._urlListeners.forEach(function(fn){return fn(evt)})});var _loc=val($location),_browser=val($browser);createProxyFunctions(_loc,this,_loc,["replace","path","search","hash"]),createProxyFunctions(_loc,this,_loc,["port","protocol","host"]),createProxyFunctions(_browser,this,_browser,["baseHref"])},Ng1LocationServices}(),UrlRouterProvider=function(){function UrlRouterProvider(router){this._router=router,this._urlRouter=router.urlRouter}return UrlRouterProvider.injectableHandler=function(router,handler){return function(match){return services.$injector.invoke(handler,null,{$match:match,$stateParams:router.globals.params})}},UrlRouterProvider.prototype.$get=function(){var urlRouter=this._urlRouter;return urlRouter.update(!0),urlRouter.interceptDeferred||urlRouter.listen(),urlRouter},UrlRouterProvider.prototype.rule=function(ruleFn){var _this=this;if(!isFunction(ruleFn))throw new Error("'rule' must be a function");var match=function(){return ruleFn(services.$injector,_this._router.locationService)},rule=new BaseUrlRule(match,identity);return this._urlRouter.rule(rule),this},UrlRouterProvider.prototype.otherwise=function(rule){var _this=this,urlRouter=this._urlRouter;if(isString(rule))urlRouter.otherwise(rule);else{if(!isFunction(rule))throw new Error("'rule' must be a string or function");urlRouter.otherwise(function(){return rule(services.$injector,_this._router.locationService)})}return this},UrlRouterProvider.prototype.when=function(what,handler){return(isArray(handler)||isFunction(handler))&&(handler=UrlRouterProvider.injectableHandler(this._router,handler)),this._urlRouter.when(what,handler),this},UrlRouterProvider.prototype.deferIntercept=function(defer){this._urlRouter.deferIntercept(defer)},UrlRouterProvider}();ng.module("ui.router.angular1",[]);var mod_init=ng.module("ui.router.init",["ng"]),mod_util=ng.module("ui.router.util",["ui.router.init"]),mod_rtr=ng.module("ui.router.router",["ui.router.util"]),mod_state=ng.module("ui.router.state",["ui.router.router","ui.router.util","ui.router.angular1"]),mod_main=ng.module("ui.router",["ui.router.init","ui.router.state","ui.router.angular1"]),router=(ng.module("ui.router.compat",["ui.router"]),null);$uiRouterProvider.$inject=["$locationProvider"];var getProviderFor=function(serviceName){return["$uiRouterProvider",function($urp){var service=$urp.router[serviceName];return service.$get=function(){return service},service}]};runBlock.$inject=["$injector","$q","$uiRouter"];var getUrlRouterProvider=function(uiRouter){return uiRouter.urlRouterProvider=new UrlRouterProvider(uiRouter)},getStateProvider=function(){return extend(router.stateProvider,{$get:function(){return router.stateService}})};watchDigests.$inject=["$rootScope"],mod_init.provider("$uiRouter",$uiRouterProvider),mod_rtr.provider("$urlRouter",["$uiRouterProvider",getUrlRouterProvider]),mod_util.provider("$urlService",getProviderFor("urlService")),mod_util.provider("$urlMatcherFactory",["$uiRouterProvider",function(){return router.urlMatcherFactory}]),mod_util.provider("$templateFactory",function(){return new TemplateFactory}),mod_state.provider("$stateRegistry",getProviderFor("stateRegistry")),mod_state.provider("$uiRouterGlobals",getProviderFor("globals")),mod_state.provider("$transitions",getProviderFor("transitionService")),mod_state.provider("$state",["$uiRouterProvider",getStateProvider]),mod_state.factory("$stateParams",["$uiRouter",function($uiRouter){return $uiRouter.globals.params}]),mod_main.factory("$view",function(){return router.viewService}),mod_main.service("$trace",function(){return trace}),mod_main.run(watchDigests),mod_util.run(["$urlMatcherFactory",function($urlMatcherFactory){}]),mod_state.run(["$state",function($state){}]),mod_rtr.run(["$urlRouter",function($urlRouter){}]),mod_init.run(runBlock);var uiSrefDirective,getLocals=function(ctx){var tokens=ctx.getTokens().filter(isString),tuples=tokens.map(function(key){var resolvable=ctx.getResolvable(key),waitPolicy=ctx.getPolicy(resolvable).async;return[key,"NOWAIT"===waitPolicy?resolvable.promise:resolvable.data]});return tuples.reduce(applyPairs,{})};uiSrefDirective=["$uiRouter","$timeout",function($uiRouter,$timeout){var $state=$uiRouter.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(scope,element,attrs,uiSrefActive){function update(){var def=getDef();unlinkInfoFn&&unlinkInfoFn(),active&&(unlinkInfoFn=active.$$addStateInfo(def.uiState,def.uiStateParams)),null!=def.href&&attrs.$set(type.attr,def.href)}var hookFn,type=getTypeInfo(element),active=uiSrefActive[1]||uiSrefActive[0],unlinkInfoFn=null,rawDef={},getDef=function(){return processedDef($state,element,rawDef)},ref=parseStateRef(attrs.uiSref);rawDef.uiState=ref.state,rawDef.uiStateOpts=attrs.uiSrefOpts?scope.$eval(attrs.uiSrefOpts):{},ref.paramExpr&&(scope.$watch(ref.paramExpr,function(val$$1){rawDef.uiStateParams=extend({},val$$1),update()},!0),rawDef.uiStateParams=extend({},scope.$eval(ref.paramExpr))),update(),scope.$on("$destroy",$uiRouter.stateRegistry.onStatesChanged(update)),scope.$on("$destroy",$uiRouter.transitionService.onSuccess({},update)),type.clickable&&(hookFn=clickHook(element,$state,$timeout,type,getDef),bindEvents(element,scope,hookFn,rawDef.uiStateOpts))}}}];var uiStateDirective;uiStateDirective=["$uiRouter","$timeout",function($uiRouter,$timeout){var $state=$uiRouter.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(scope,element,attrs,uiSrefActive){function update(){var def=getDef();unlinkInfoFn&&unlinkInfoFn(),active&&(unlinkInfoFn=active.$$addStateInfo(def.uiState,def.uiStateParams)),null!=def.href&&attrs.$set(type.attr,def.href)}var hookFn,type=getTypeInfo(element),active=uiSrefActive[1]||uiSrefActive[0],unlinkInfoFn=null,rawDef={},getDef=function(){return processedDef($state,element,rawDef)},inputAttrs=["uiState","uiStateParams","uiStateOpts"],watchDeregFns=inputAttrs.reduce(function(acc,attr){return acc[attr]=noop,acc},{});inputAttrs.forEach(function(field){rawDef[field]=attrs[field]?scope.$eval(attrs[field]):null,attrs.$observe(field,function(expr){watchDeregFns[field](),watchDeregFns[field]=scope.$watch(expr,function(newval){rawDef[field]=newval,update()},!0)})}),update(),scope.$on("$destroy",$uiRouter.stateRegistry.onStatesChanged(update)),scope.$on("$destroy",$uiRouter.transitionService.onSuccess({},update)),type.clickable&&(hookFn=clickHook(element,$state,$timeout,type,getDef),bindEvents(element,scope,hookFn,rawDef.uiStateOpts))}}}];var uiSrefActiveDirective;uiSrefActiveDirective=["$state","$stateParams","$interpolate","$uiRouter",function($state,$stateParams,$interpolate,$uiRouter){return{restrict:"A",controller:["$scope","$element","$attrs",function($scope,$element,$attrs){function updateAfterTransition(trans){trans.promise.then(update,noop)}function setupEventListeners(){var deregisterStatesChangedListener=$uiRouter.stateRegistry.onStatesChanged(handleStatesChanged),deregisterOnStartListener=$uiRouter.transitionService.onStart({},updateAfterTransition),deregisterStateChangeSuccessListener=$scope.$on("$stateChangeSuccess",update);return function(){deregisterStatesChangedListener(),deregisterOnStartListener(),deregisterStateChangeSuccessListener()}}function handleStatesChanged(){setStatesFromDefinitionObject(uiSrefActive)}function setStatesFromDefinitionObject(statesDefinition){isObject(statesDefinition)&&(states=[],forEach(statesDefinition,function(stateOrName,activeClass){var addStateForClass=function(stateOrName,activeClass){var ref=parseStateRef(stateOrName);addState(ref.state,$scope.$eval(ref.paramExpr),activeClass)};isString(stateOrName)?addStateForClass(stateOrName,activeClass):isArray(stateOrName)&&forEach(stateOrName,function(stateOrName){addStateForClass(stateOrName,activeClass)})}))}function addState(stateName,stateParams,activeClass){var state=$state.get(stateName,stateContext($element)),stateInfo={state:state||{name:stateName},params:stateParams,activeClass:activeClass};return states.push(stateInfo),function(){removeFrom(states)(stateInfo)}}function update(){var splitClasses=function(str){return str.split(/\s/).filter(identity)},getClasses=function(stateList){return stateList.map(function(x){return x.activeClass}).map(splitClasses).reduce(unnestR,[])},allClasses=getClasses(states).concat(splitClasses(activeEqClass)).reduce(uniqR,[]),fuzzyClasses=getClasses(states.filter(function(x){return $state.includes(x.state.name,x.params)})),exactlyMatchesAny=!!states.filter(function(x){return $state.is(x.state.name,x.params)}).length,exactClasses=exactlyMatchesAny?splitClasses(activeEqClass):[],addClasses=fuzzyClasses.concat(exactClasses).reduce(uniqR,[]),removeClasses=allClasses.filter(function(cls){return!inArray(addClasses,cls)});$scope.$evalAsync(function(){addClasses.forEach(function(className){return $element.addClass(className)}),removeClasses.forEach(function(className){return $element.removeClass(className)})})}var activeEqClass,uiSrefActive,states=[];activeEqClass=$interpolate($attrs.uiSrefActiveEq||"",!1)($scope);try{uiSrefActive=$scope.$eval($attrs.uiSrefActive)}catch(e){}uiSrefActive=uiSrefActive||$interpolate($attrs.uiSrefActive||"",!1)($scope),setStatesFromDefinitionObject(uiSrefActive),this.$$addStateInfo=function(newState,newParams){if(!(isObject(uiSrefActive)&&states.length>0)){var deregister=addState(newState,newParams,uiSrefActive);return update(),deregister}},$scope.$on("$destroy",setupEventListeners()),$uiRouter.globals.transition&&updateAfterTransition($uiRouter.globals.transition),update()}]}}],ng.module("ui.router.state").directive("uiSref",uiSrefDirective).directive("uiSrefActive",uiSrefActiveDirective).directive("uiSrefActiveEq",uiSrefActiveDirective).directive("uiState",uiStateDirective),$IsStateFilter.$inject=["$state"],$IncludedByStateFilter.$inject=["$state"],ng.module("ui.router.state").filter("isState",$IsStateFilter).filter("includedByState",$IncludedByStateFilter);var uiView;uiView=["$view","$animate","$uiViewScroll","$interpolate","$q",function($view,$animate,$uiViewScroll,$interpolate,$q$$1){function getRenderer(attrs,scope){return{enter:function(element,target,cb){ng.version.minor>2?$animate.enter(element,null,target).then(cb):$animate.enter(element,null,target,cb)},leave:function(element,cb){ng.version.minor>2?$animate.leave(element).then(cb):$animate.leave(element,cb)}}}function configsEqual(config1,config2){return config1===config2}var rootData={$cfg:{viewDecl:{$context:$view._pluginapi._rootViewContext()}},$uiView:{}},directive={count:0,restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(tElement,tAttrs,$transclude){return function(scope,$element,attrs){
function configUpdatedCallback(config){(!config||config instanceof Ng1ViewConfig)&&(configsEqual(viewConfig,config)||(trace.traceUIViewConfigUpdated(activeUIView,config&&config.viewDecl&&config.viewDecl.$context),viewConfig=config,updateView(config)))}function cleanupLastView(){if(previousEl&&(trace.traceUIViewEvent("Removing (previous) el",previousEl.data("$uiView")),previousEl.remove(),previousEl=null),currentScope&&(trace.traceUIViewEvent("Destroying scope",activeUIView),currentScope.$destroy(),currentScope=null),currentEl){var _viewData_1=currentEl.data("$uiViewAnim");trace.traceUIViewEvent("Animate out",_viewData_1),renderer.leave(currentEl,function(){_viewData_1.$$animLeave.resolve(),previousEl=null}),previousEl=currentEl,currentEl=null}}function updateView(config){var newScope=scope.$new(),animEnter=$q$$1.defer(),animLeave=$q$$1.defer(),$uiViewData={$cfg:config,$uiView:activeUIView},$uiViewAnim={$animEnter:animEnter.promise,$animLeave:animLeave.promise,$$animLeave:animLeave};newScope.$emit("$viewContentLoading",name);var cloned=$transclude(newScope,function(clone){clone.data("$uiViewAnim",$uiViewAnim),clone.data("$uiView",$uiViewData),renderer.enter(clone,$element,function(){animEnter.resolve(),currentScope&&currentScope.$emit("$viewContentAnimationEnded"),(isDefined(autoScrollExp)&&!autoScrollExp||scope.$eval(autoScrollExp))&&$uiViewScroll(clone)}),cleanupLastView()});currentEl=cloned,currentScope=newScope,currentScope.$emit("$viewContentLoaded",config||viewConfig),currentScope.$eval(onloadExp)}var previousEl,currentEl,currentScope,viewConfig,unregister,onloadExp=attrs.onload||"",autoScrollExp=attrs.autoscroll,renderer=getRenderer(attrs,scope),inherited=$element.inheritedData("$uiView")||rootData,name=$interpolate(attrs.uiView||attrs.name||"")(scope)||"$default",activeUIView={$type:"ng1",id:directive.count++,name:name,fqn:inherited.$uiView.fqn?inherited.$uiView.fqn+"."+name:name,config:null,configUpdated:configUpdatedCallback,get creationContext(){var fromParentTagConfig=parse("$cfg.viewDecl.$context")(inherited),fromParentTag=parse("$uiView.creationContext")(inherited);return fromParentTagConfig||fromParentTag}};trace.traceUIViewEvent("Linking",activeUIView),$element.data("$uiView",{$uiView:activeUIView}),updateView(),unregister=$view.registerUIView(activeUIView),scope.$on("$destroy",function(){trace.traceUIViewEvent("Destroying/Unregistering",activeUIView),unregister()})}}};return directive}],$ViewDirectiveFill.$inject=["$compile","$controller","$transitions","$view","$q","$timeout"];var hasComponentImpl="function"==typeof ng.module("ui.router").component,_uiCanExitId=0;ng.module("ui.router.state").directive("uiView",uiView),ng.module("ui.router.state").directive("uiView",$ViewDirectiveFill),ng.module("ui.router.state").provider("$uiViewScroll",$ViewScrollProvider);var index$1="ui.router";exports["default"]=index$1,exports.core=index,exports.watchDigests=watchDigests,exports.getLocals=getLocals,exports.getNg1ViewConfigFactory=getNg1ViewConfigFactory,exports.ng1ViewsBuilder=ng1ViewsBuilder,exports.Ng1ViewConfig=Ng1ViewConfig,exports.StateProvider=StateProvider,exports.UrlRouterProvider=UrlRouterProvider,exports.root=root,exports.fromJson=fromJson,exports.toJson=toJson,exports.forEach=forEach,exports.extend=extend,exports.equals=equals,exports.identity=identity,exports.noop=noop,exports.createProxyFunctions=createProxyFunctions,exports.inherit=inherit,exports.inArray=inArray,exports._inArray=_inArray,exports.removeFrom=removeFrom,exports._removeFrom=_removeFrom,exports.pushTo=pushTo,exports._pushTo=_pushTo,exports.deregAll=deregAll,exports.defaults=defaults,exports.mergeR=mergeR,exports.ancestors=ancestors,exports.pick=pick,exports.omit=omit,exports.pluck=pluck,exports.filter=filter,exports.find=find,exports.mapObj=mapObj,exports.map=map,exports.values=values,exports.allTrueR=allTrueR,exports.anyTrueR=anyTrueR,exports.unnestR=unnestR,exports.flattenR=flattenR,exports.pushR=pushR,exports.uniqR=uniqR,exports.unnest=unnest,exports.flatten=flatten,exports.assertPredicate=assertPredicate,exports.assertMap=assertMap,exports.assertFn=assertFn,exports.pairs=pairs,exports.arrayTuples=arrayTuples,exports.applyPairs=applyPairs,exports.tail=tail,exports.copy=copy,exports._extend=_extend,exports.silenceUncaughtInPromise=silenceUncaughtInPromise,exports.silentRejection=silentRejection,exports.notImplemented=notImplemented,exports.services=services,exports.Glob=Glob,exports.curry=curry,exports.compose=compose,exports.pipe=pipe,exports.prop=prop,exports.propEq=propEq,exports.parse=parse,exports.not=not,exports.and=and,exports.or=or,exports.all=all,exports.any=any,exports.is=is,exports.eq=eq,exports.val=val,exports.invoke=invoke,exports.pattern=pattern,exports.isUndefined=isUndefined,exports.isDefined=isDefined,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isFunction=isFunction,exports.isNumber=isNumber,exports.isString=isString,exports.isObject=isObject,exports.isArray=isArray,exports.isDate=isDate,exports.isRegExp=isRegExp,exports.isState=isState,exports.isInjectable=isInjectable,exports.isPromise=isPromise,exports.Queue=Queue,exports.maxLength=maxLength,exports.padString=padString,exports.kebobString=kebobString,exports.functionToString=functionToString,exports.fnToString=fnToString,exports.stringify=stringify,exports.beforeAfterSubstr=beforeAfterSubstr,exports.hostRegex=hostRegex,exports.stripLastPathElement=stripLastPathElement,exports.splitHash=splitHash,exports.splitQuery=splitQuery,exports.splitEqual=splitEqual,exports.trimHashVal=trimHashVal,exports.splitOnDelim=splitOnDelim,exports.joinNeighborsR=joinNeighborsR,exports.Trace=Trace,exports.trace=trace,exports.Param=Param,exports.ParamTypes=ParamTypes,exports.StateParams=StateParams,exports.ParamType=ParamType,exports.PathNode=PathNode,exports.PathUtils=PathUtils,exports.resolvePolicies=resolvePolicies,exports.defaultResolvePolicy=defaultResolvePolicy,exports.Resolvable=Resolvable,exports.NATIVE_INJECTOR_TOKEN=NATIVE_INJECTOR_TOKEN,exports.ResolveContext=ResolveContext,exports.resolvablesBuilder=resolvablesBuilder,exports.StateBuilder=StateBuilder,exports.StateObject=StateObject,exports.StateMatcher=StateMatcher,exports.StateQueueManager=StateQueueManager,exports.StateRegistry=StateRegistry,exports.StateService=StateService,exports.TargetState=TargetState,exports.HookBuilder=HookBuilder,exports.matchState=matchState,exports.RegisteredHook=RegisteredHook,exports.makeEvent=makeEvent,exports.Rejection=Rejection,exports.Transition=Transition,exports.TransitionHook=TransitionHook,exports.TransitionEventType=TransitionEventType,exports.defaultTransOpts=defaultTransOpts,exports.TransitionService=TransitionService,exports.UrlMatcher=UrlMatcher,exports.UrlMatcherFactory=UrlMatcherFactory,exports.UrlRouter=UrlRouter,exports.UrlRuleFactory=UrlRuleFactory,exports.BaseUrlRule=BaseUrlRule,exports.UrlService=UrlService,exports.ViewService=ViewService,exports.UIRouterGlobals=UIRouterGlobals,exports.UIRouter=UIRouter,exports.$q=$q,exports.$injector=$injector,exports.BaseLocationServices=BaseLocationServices,exports.HashLocationService=HashLocationService,exports.MemoryLocationService=MemoryLocationService,exports.PushStateLocationService=PushStateLocationService,exports.MemoryLocationConfig=MemoryLocationConfig,exports.BrowserLocationConfig=BrowserLocationConfig,exports.keyValsToObjectR=keyValsToObjectR,exports.getParams=getParams,exports.parseUrl=parseUrl$1,exports.buildUrl=buildUrl,exports.locationPluginFactory=locationPluginFactory,exports.servicesPlugin=servicesPlugin,exports.hashLocationPlugin=hashLocationPlugin,exports.pushStateLocationPlugin=pushStateLocationPlugin,exports.memoryLocationPlugin=memoryLocationPlugin,exports.UIRouterPluginBase=UIRouterPluginBase,Object.defineProperty(exports,"__esModule",{value:!0})}),function(window,document,undefined){"use strict";function Flow(opts){if(this.support=!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof FileList||!Blob.prototype.slice&&!Blob.prototype.webkitSlice&&!Blob.prototype.mozSlice),this.support){this.supportDirectory=/Chrome/.test(window.navigator.userAgent)||/Firefox/.test(window.navigator.userAgent)||/Edge/.test(window.navigator.userAgent),this.files=[],this.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,singleFile:!1,fileParameterName:"file",progressCallbacksInterval:500,speedSmoothingFactor:.1,query:{},headers:{},withCredentials:!1,preprocess:null,method:"multipart",testMethod:"GET",uploadMethod:"POST",prioritizeFirstAndLastChunk:!1,allowDuplicateUploads:!1,target:"/",testChunks:!0,generateUniqueIdentifier:null,maxChunkRetries:0,chunkRetryInterval:null,permanentErrors:[404,413,415,500,501],successStatuses:[200,201,202],onDropStopPropagation:!1,initFileFn:null,readFileFn:webAPIFileRead},this.opts={},this.events={};var $=this;this.onDrop=function(event){$.opts.onDropStopPropagation&&event.stopPropagation(),event.preventDefault();var dataTransfer=event.dataTransfer;dataTransfer.items&&dataTransfer.items[0]&&dataTransfer.items[0].webkitGetAsEntry?$.webkitReadDataTransfer(event):$.addFiles(dataTransfer.files,event)},this.preventEvent=function(event){event.preventDefault()},this.opts=Flow.extend({},this.defaults,opts||{})}}function FlowFile(flowObj,file,uniqueIdentifier){this.flowObj=flowObj,this.bytes=null,this.file=file,this.name=file.fileName||file.name,this.size=file.size,this.relativePath=file.relativePath||file.webkitRelativePath||this.name,this.uniqueIdentifier=uniqueIdentifier===undefined?flowObj.generateUniqueIdentifier(file):uniqueIdentifier,this.chunks=[],this.paused=!1,this.error=!1,this.averageSpeed=0,this.currentSpeed=0,this._lastProgressCallback=Date.now(),this._prevUploadedSize=0,this._prevProgress=0,this.bootstrap()}function webAPIFileRead(fileObj,startByte,endByte,fileType,chunk){var function_name="slice";fileObj.file.slice?function_name="slice":fileObj.file.mozSlice?function_name="mozSlice":fileObj.file.webkitSlice&&(function_name="webkitSlice"),chunk.readFinished(fileObj.file[function_name](startByte,endByte,fileType))}function FlowChunk(flowObj,fileObj,offset){this.flowObj=flowObj,this.fileObj=fileObj,this.offset=offset,this.tested=!1,this.retries=0,this.pendingRetry=!1,this.preprocessState=0,this.readState=0,this.loaded=0,this.total=0,this.chunkSize=this.flowObj.opts.chunkSize,this.startByte=this.offset*this.chunkSize,this.computeEndByte=function(){var endByte=Math.min(this.fileObj.size,(this.offset+1)*this.chunkSize);return this.fileObj.size-endByte<this.chunkSize&&!this.flowObj.opts.forceChunkSize&&(endByte=this.fileObj.size),endByte},this.endByte=this.computeEndByte(),this.xhr=null;var $=this;this.event=function(event,args){args=Array.prototype.slice.call(arguments),args.unshift($),$.fileObj.chunkEvent.apply($.fileObj,args)},this.progressHandler=function(event){event.lengthComputable&&($.loaded=event.loaded,$.total=event.total),$.event("progress",event)},this.testHandler=function(event){var status=$.status(!0);"error"===status?($.event(status,$.message()),$.flowObj.uploadNextChunk()):"success"===status?($.tested=!0,$.event(status,$.message()),$.flowObj.uploadNextChunk()):$.fileObj.paused||($.tested=!0,$.send())},this.doneHandler=function(event){var status=$.status();if("success"===status||"error"===status)delete this.data,$.event(status,$.message()),$.flowObj.uploadNextChunk();else{$.event("retry",$.message()),$.pendingRetry=!0,$.abort(),$.retries++;var retryInterval=$.flowObj.opts.chunkRetryInterval;null!==retryInterval?setTimeout(function(){$.send()},retryInterval):$.send()}}}function arrayRemove(array,value){var index=array.indexOf(value);index>-1&&array.splice(index,1)}function evalOpts(data,args){return"function"==typeof data&&(args=Array.prototype.slice.call(arguments),data=data.apply(null,args.slice(1))),data}function async(fn,context){setTimeout(fn.bind(context),0)}function extend(dst,src){return each(arguments,function(obj){obj!==dst&&each(obj,function(value,key){dst[key]=value})}),dst}function each(obj,callback,context){if(obj){var key;if("undefined"!=typeof obj.length){for(key=0;key<obj.length;key++)if(callback.call(context,obj[key],key)===!1)return}else for(key in obj)if(obj.hasOwnProperty(key)&&callback.call(context,obj[key],key)===!1)return}}var ie10plus=window.navigator.msPointerEnabled;Flow.prototype={on:function(event,callback){event=event.toLowerCase(),this.events.hasOwnProperty(event)||(this.events[event]=[]),this.events[event].push(callback)},off:function(event,fn){event!==undefined?(event=event.toLowerCase(),fn!==undefined?this.events.hasOwnProperty(event)&&arrayRemove(this.events[event],fn):delete this.events[event]):this.events={}},fire:function(event,args){args=Array.prototype.slice.call(arguments),event=event.toLowerCase();var preventDefault=!1;return this.events.hasOwnProperty(event)&&each(this.events[event],function(callback){preventDefault=callback.apply(this,args.slice(1))===!1||preventDefault},this),"catchall"!=event&&(args.unshift("catchAll"),preventDefault=this.fire.apply(this,args)===!1||preventDefault),!preventDefault},webkitReadDataTransfer:function(event){function readDirectory(reader){reader.readEntries(function(entries){entries.length?(queue+=entries.length,each(entries,function(entry){if(entry.isFile){var fullPath=entry.fullPath;entry.file(function(file){fileReadSuccess(file,fullPath)},readError)}else entry.isDirectory&&readDirectory(entry.createReader())}),readDirectory(reader)):decrement()},readError)}function fileReadSuccess(file,fullPath){file.relativePath=fullPath.substring(1),files.push(file),decrement()}function readError(fileError){throw fileError}function decrement(){0==--queue&&$.addFiles(files,event)}var $=this,queue=event.dataTransfer.items.length,files=[];each(event.dataTransfer.items,function(item){var entry=item.webkitGetAsEntry();return entry?void(entry.isFile?fileReadSuccess(item.getAsFile(),entry.fullPath):readDirectory(entry.createReader())):void decrement()})},generateUniqueIdentifier:function(file){var custom=this.opts.generateUniqueIdentifier;if("function"==typeof custom)return custom(file);var relativePath=file.relativePath||file.webkitRelativePath||file.fileName||file.name;return file.size+"-"+relativePath.replace(/[^0-9a-zA-Z_-]/gim,"")},uploadNextChunk:function(preventEvents){var found=!1;if(this.opts.prioritizeFirstAndLastChunk&&(each(this.files,function(file){return!file.paused&&file.chunks.length&&"pending"===file.chunks[0].status()?(file.chunks[0].send(),found=!0,!1):!file.paused&&file.chunks.length>1&&"pending"===file.chunks[file.chunks.length-1].status()?(file.chunks[file.chunks.length-1].send(),found=!0,!1):void 0}),found))return found;if(each(this.files,function(file){if(file.paused||each(file.chunks,function(chunk){if("pending"===chunk.status())return chunk.send(),found=!0,!1}),found)return!1}),found)return!0;var outstanding=!1;return each(this.files,function(file){if(!file.isComplete())return outstanding=!0,!1}),outstanding||preventEvents||async(function(){this.fire("complete")},this),!1},assignBrowse:function(domNodes,isDirectory,singleFile,attributes){domNodes instanceof Element&&(domNodes=[domNodes]),each(domNodes,function(domNode){var input;"INPUT"===domNode.tagName&&"file"===domNode.type?input=domNode:(input=document.createElement("input"),input.setAttribute("type","file"),extend(input.style,{visibility:"hidden",position:"absolute",width:"1px",height:"1px"}),domNode.appendChild(input),domNode.addEventListener("click",function(){input.click()},!1)),this.opts.singleFile||singleFile||input.setAttribute("multiple","multiple"),isDirectory&&input.setAttribute("webkitdirectory","webkitdirectory"),each(attributes,function(value,key){input.setAttribute(key,value)});var $=this;input.addEventListener("change",function(e){e.target.value&&($.addFiles(e.target.files,e),e.target.value="")},!1)},this)},assignDrop:function(domNodes){"undefined"==typeof domNodes.length&&(domNodes=[domNodes]),each(domNodes,function(domNode){domNode.addEventListener("dragover",this.preventEvent,!1),domNode.addEventListener("dragenter",this.preventEvent,!1),domNode.addEventListener("drop",this.onDrop,!1)},this)},unAssignDrop:function(domNodes){"undefined"==typeof domNodes.length&&(domNodes=[domNodes]),each(domNodes,function(domNode){domNode.removeEventListener("dragover",this.preventEvent),domNode.removeEventListener("dragenter",this.preventEvent),domNode.removeEventListener("drop",this.onDrop)},this)},isUploading:function(){var uploading=!1;return each(this.files,function(file){if(file.isUploading())return uploading=!0,!1}),uploading},_shouldUploadNext:function(){var num=0,should=!0,simultaneousUploads=this.opts.simultaneousUploads;return each(this.files,function(file){each(file.chunks,function(chunk){if("uploading"===chunk.status()&&(num++,num>=simultaneousUploads))return should=!1,!1})}),should&&num},upload:function(){var ret=this._shouldUploadNext();if(ret!==!1){this.fire("uploadStart");for(var started=!1,num=1;num<=this.opts.simultaneousUploads-ret;num++)started=this.uploadNextChunk(!0)||started;started||async(function(){this.fire("complete")},this)}},resume:function(){each(this.files,function(file){file.isComplete()||file.resume()})},pause:function(){each(this.files,function(file){file.pause()})},cancel:function(){for(var i=this.files.length-1;i>=0;i--)this.files[i].cancel()},progress:function(){var totalDone=0,totalSize=0;return each(this.files,function(file){totalDone+=file.progress()*file.size,totalSize+=file.size}),totalSize>0?totalDone/totalSize:0},addFile:function(file,event){this.addFiles([file],event)},addFiles:function(fileList,event){var files=[];each(fileList,function(file){if((!ie10plus||ie10plus&&file.size>0)&&(file.size%4096!==0||"."!==file.name&&"."!==file.fileName)){var uniqueIdentifier=this.generateUniqueIdentifier(file);if(this.opts.allowDuplicateUploads||!this.getFromUniqueIdentifier(uniqueIdentifier)){var f=new FlowFile(this,file,uniqueIdentifier);this.fire("fileAdded",f,event)&&files.push(f)}}},this),this.fire("filesAdded",files,event)&&(each(files,function(file){this.opts.singleFile&&this.files.length>0&&this.removeFile(this.files[0]),this.files.push(file)},this),this.fire("filesSubmitted",files,event))},removeFile:function(file){for(var i=this.files.length-1;i>=0;i--)this.files[i]===file&&(this.files.splice(i,1),file.abort(),this.fire("fileRemoved",file))},getFromUniqueIdentifier:function(uniqueIdentifier){var ret=!1;return each(this.files,function(file){file.uniqueIdentifier===uniqueIdentifier&&(ret=file)}),ret},getSize:function(){var totalSize=0;return each(this.files,function(file){totalSize+=file.size}),totalSize},sizeUploaded:function(){var size=0;return each(this.files,function(file){size+=file.sizeUploaded()}),size},timeRemaining:function(){var sizeDelta=0,averageSpeed=0;return each(this.files,function(file){file.paused||file.error||(sizeDelta+=file.size-file.sizeUploaded(),averageSpeed+=file.averageSpeed)}),sizeDelta&&!averageSpeed?Number.POSITIVE_INFINITY:sizeDelta||averageSpeed?Math.floor(sizeDelta/averageSpeed):0}},FlowFile.prototype={measureSpeed:function(){var timeSpan=Date.now()-this._lastProgressCallback;if(timeSpan){var smoothingFactor=this.flowObj.opts.speedSmoothingFactor,uploaded=this.sizeUploaded();this.currentSpeed=Math.max((uploaded-this._prevUploadedSize)/timeSpan*1e3,0),this.averageSpeed=smoothingFactor*this.currentSpeed+(1-smoothingFactor)*this.averageSpeed,this._prevUploadedSize=uploaded}},chunkEvent:function(chunk,event,message){switch(event){case"progress":if(Date.now()-this._lastProgressCallback<this.flowObj.opts.progressCallbacksInterval)break;this.measureSpeed(),this.flowObj.fire("fileProgress",this,chunk),this.flowObj.fire("progress"),this._lastProgressCallback=Date.now();break;case"error":this.error=!0,this.abort(!0),this.flowObj.fire("fileError",this,message,chunk),this.flowObj.fire("error",message,this,chunk);break;case"success":if(this.error)return;this.measureSpeed(),this.flowObj.fire("fileProgress",this,chunk),this.flowObj.fire("progress"),this._lastProgressCallback=Date.now(),this.isComplete()&&(this.currentSpeed=0,this.averageSpeed=0,this.flowObj.fire("fileSuccess",this,message,chunk));break;case"retry":this.flowObj.fire("fileRetry",this,chunk)}},pause:function(){this.paused=!0,this.abort()},resume:function(){this.paused=!1,this.flowObj.upload()},abort:function(reset){this.currentSpeed=0,this.averageSpeed=0;var chunks=this.chunks;reset&&(this.chunks=[]),each(chunks,function(c){"uploading"===c.status()&&(c.abort(),this.flowObj.uploadNextChunk())},this)},cancel:function(){this.flowObj.removeFile(this)},retry:function(){this.bootstrap(),this.flowObj.upload()},bootstrap:function(){"function"==typeof this.flowObj.opts.initFileFn&&this.flowObj.opts.initFileFn(this),this.abort(!0),this.error=!1,this._prevProgress=0;for(var round=this.flowObj.opts.forceChunkSize?Math.ceil:Math.floor,chunks=Math.max(round(this.size/this.flowObj.opts.chunkSize),1),offset=0;offset<chunks;offset++)this.chunks.push(new FlowChunk(this.flowObj,this,offset))},progress:function(){if(this.error)return 1;if(1===this.chunks.length)return this._prevProgress=Math.max(this._prevProgress,this.chunks[0].progress()),this._prevProgress;var bytesLoaded=0;each(this.chunks,function(c){bytesLoaded+=c.progress()*(c.endByte-c.startByte)});var percent=bytesLoaded/this.size;return this._prevProgress=Math.max(this._prevProgress,percent>.9999?1:percent),this._prevProgress},isUploading:function(){var uploading=!1;return each(this.chunks,function(chunk){if("uploading"===chunk.status())return uploading=!0,!1}),uploading},isComplete:function(){var outstanding=!1;return each(this.chunks,function(chunk){var status=chunk.status();if("pending"===status||"uploading"===status||"reading"===status||1===chunk.preprocessState||1===chunk.readState)return outstanding=!0,!1}),!outstanding},sizeUploaded:function(){var size=0;return each(this.chunks,function(chunk){size+=chunk.sizeUploaded()}),size},timeRemaining:function(){if(this.paused||this.error)return 0;var delta=this.size-this.sizeUploaded();return delta&&!this.averageSpeed?Number.POSITIVE_INFINITY:delta||this.averageSpeed?Math.floor(delta/this.averageSpeed):0},getType:function(){return this.file.type&&this.file.type.split("/")[1]},getExtension:function(){return this.name.substr((~-this.name.lastIndexOf(".")>>>0)+2).toLowerCase()}},FlowChunk.prototype={getParams:function(){return{flowChunkNumber:this.offset+1,flowChunkSize:this.flowObj.opts.chunkSize,flowCurrentChunkSize:this.endByte-this.startByte,flowTotalSize:this.fileObj.size,flowIdentifier:this.fileObj.uniqueIdentifier,flowFilename:this.fileObj.name,flowRelativePath:this.fileObj.relativePath,flowTotalChunks:this.fileObj.chunks.length}},getTarget:function(target,params){return target+=target.indexOf("?")<0?"?":"&",target+params.join("&")},test:function(){this.xhr=new XMLHttpRequest,this.xhr.addEventListener("load",this.testHandler,!1),this.xhr.addEventListener("error",this.testHandler,!1);var testMethod=evalOpts(this.flowObj.opts.testMethod,this.fileObj,this),data=this.prepareXhrRequest(testMethod,!0);this.xhr.send(data)},preprocessFinished:function(){this.endByte=this.computeEndByte(),this.preprocessState=2,this.send()},readFinished:function(bytes){this.readState=2,this.bytes=bytes,this.send()},send:function(){var preprocess=this.flowObj.opts.preprocess,read=this.flowObj.opts.readFileFn;if("function"==typeof preprocess)switch(this.preprocessState){case 0:return this.preprocessState=1,void preprocess(this);case 1:return}switch(this.readState){case 0:return this.readState=1,void read(this.fileObj,this.startByte,this.endByte,this.fileObj.file.type,this);case 1:return}if(this.flowObj.opts.testChunks&&!this.tested)return void this.test();this.loaded=0,this.total=0,this.pendingRetry=!1,this.xhr=new XMLHttpRequest,this.xhr.upload.addEventListener("progress",this.progressHandler,!1),this.xhr.addEventListener("load",this.doneHandler,!1),this.xhr.addEventListener("error",this.doneHandler,!1);var uploadMethod=evalOpts(this.flowObj.opts.uploadMethod,this.fileObj,this),data=this.prepareXhrRequest(uploadMethod,!1,this.flowObj.opts.method,this.bytes);this.xhr.send(data)},abort:function(){var xhr=this.xhr;this.xhr=null,xhr&&xhr.abort()},status:function(isTest){return 1===this.readState?"reading":this.pendingRetry||1===this.preprocessState?"uploading":this.xhr?this.xhr.readyState<4?"uploading":this.flowObj.opts.successStatuses.indexOf(this.xhr.status)>-1?"success":this.flowObj.opts.permanentErrors.indexOf(this.xhr.status)>-1||!isTest&&this.retries>=this.flowObj.opts.maxChunkRetries?"error":(this.abort(),"pending"):"pending"},message:function(){return this.xhr?this.xhr.responseText:""},progress:function(){if(this.pendingRetry)return 0;var s=this.status();return"success"===s||"error"===s?1:"pending"===s?0:this.total>0?this.loaded/this.total:0},sizeUploaded:function(){var size=this.endByte-this.startByte;return"success"!==this.status()&&(size=this.progress()*size),size},prepareXhrRequest:function(method,isTest,paramsMethod,blob){var query=evalOpts(this.flowObj.opts.query,this.fileObj,this,isTest);query=extend(query,this.getParams());var target=evalOpts(this.flowObj.opts.target,this.fileObj,this,isTest),data=null;if("GET"===method||"octet"===paramsMethod){var params=[];each(query,function(v,k){params.push([encodeURIComponent(k),encodeURIComponent(v)].join("="))}),target=this.getTarget(target,params),data=blob||null}else data=new FormData,each(query,function(v,k){data.append(k,v)}),"undefined"!=typeof blob&&data.append(this.flowObj.opts.fileParameterName,blob,this.fileObj.file.name);return this.xhr.open(method,target,!0),this.xhr.withCredentials=this.flowObj.opts.withCredentials,each(evalOpts(this.flowObj.opts.headers,this.fileObj,this,isTest),function(v,k){this.xhr.setRequestHeader(k,v)},this),data}},Flow.evalOpts=evalOpts,Flow.extend=extend,Flow.each=each,Flow.FlowFile=FlowFile,Flow.FlowChunk=FlowChunk,Flow.version="2.13.0","object"==typeof module&&module&&"object"==typeof module.exports?module.exports=Flow:(window.Flow=Flow,"function"==typeof define&&define.amd&&define("flow",[],function(){return Flow}))}(window,document),angular.module("flow.provider",[]).provider("flowFactory",function(){"use strict";this.defaults={},this.factory=function(options){return new Flow(options)},this.events=[],this.on=function(event,callback){this.events.push([event,callback])},this.$get=function(){var fn=this.factory,defaults=this.defaults,events=this.events;return{create:function(opts){var flow=fn(angular.extend({},defaults,opts));return angular.forEach(events,function(event){flow.on(event[0],event[1])}),flow}}}}),angular.module("flow.init",["flow.provider"]).controller("flowCtrl",["$scope","$attrs","$parse","flowFactory",function($scope,$attrs,$parse,flowFactory){var options=angular.extend({},$scope.$eval($attrs.flowInit)),flow=$scope.$eval($attrs.flowObject)||flowFactory.create(options),catchAllHandler=function(eventName){var args=Array.prototype.slice.call(arguments);args.shift();var event=$scope.$broadcast.apply($scope,["flow::"+eventName,flow].concat(args));if({progress:1,filesSubmitted:1,fileSuccess:1,fileError:1,complete:1}[eventName]&&$scope.$applyAsync(),event.defaultPrevented)return!1};flow.on("catchAll",catchAllHandler),$scope.$on("$destroy",function(){flow.off("catchAll",catchAllHandler)}),$scope.$flow=flow,$attrs.hasOwnProperty("flowName")&&($parse($attrs.flowName).assign($scope,flow),$scope.$on("$destroy",function(){$parse($attrs.flowName).assign($scope)}))}]).directive("flowInit",[function(){return{scope:!0,controller:"flowCtrl"}}]),angular.module("flow.btn",["flow.init"]).directive("flowBtn",[function(){return{restrict:"EA",scope:!1,require:"^flowInit",link:function(scope,element,attrs){var isDirectory=attrs.hasOwnProperty("flowDirectory"),isSingleFile=attrs.hasOwnProperty("flowSingleFile"),inputAttrs=attrs.hasOwnProperty("flowAttrs")&&scope.$eval(attrs.flowAttrs);scope.$flow.assignBrowse(element,isDirectory,isSingleFile,inputAttrs)}}}]),angular.module("flow.dragEvents",["flow.init"]).directive("flowPreventDrop",function(){return{scope:!1,link:function(scope,element,attrs){element.bind("drop dragover",function(event){event.preventDefault()})}}}).directive("flowDragEnter",["$timeout",function($timeout){return{scope:!1,link:function(scope,element,attrs){function isFileDrag(dragEvent){var fileDrag=!1,dataTransfer=dragEvent.dataTransfer||dragEvent.originalEvent.dataTransfer;return angular.forEach(dataTransfer&&dataTransfer.types,function(val){"Files"===val&&(fileDrag=!0)}),fileDrag}var promise,enter=!1;element.bind("dragover",function(event){isFileDrag(event)&&(enter||(scope.$apply(attrs.flowDragEnter),enter=!0),$timeout.cancel(promise),event.preventDefault())}),element.bind("dragleave drop",function(event){$timeout.cancel(promise),promise=$timeout(function(){scope.$eval(attrs.flowDragLeave),promise=null,enter=!1},100)})}}}]),angular.module("flow.drop",["flow.init"]).directive("flowDrop",function(){return{scope:!1,require:"^flowInit",link:function(scope,element,attrs){function assignDrop(){scope.$flow.assignDrop(element)}function unAssignDrop(){scope.$flow.unAssignDrop(element)}attrs.flowDropEnabled?scope.$watch(attrs.flowDropEnabled,function(value){value?assignDrop():unAssignDrop()}):assignDrop()}}}),!function(angular){"use strict";function capitaliseFirstLetter(string){return string.charAt(0).toUpperCase()+string.slice(1)}var module=angular.module("flow.events",["flow.init"]),events={fileSuccess:["$file","$message"],fileProgress:["$file"],fileAdded:["$file","$event"],filesAdded:["$files","$event"],filesSubmitted:["$files","$event"],fileRetry:["$file"],fileRemoved:["$file"],fileError:["$file","$message"],uploadStart:[],complete:[],progress:[],error:["$message","$file"]};angular.forEach(events,function(eventArgs,eventName){var name="flow"+capitaliseFirstLetter(eventName);"flowUploadStart"==name&&(name="flowUploadStarted"),module.directive(name,[function(){return{require:"^flowInit",controller:["$scope","$attrs",function($scope,$attrs){$scope.$on("flow::"+eventName,function(){var funcArgs=Array.prototype.slice.call(arguments),event=funcArgs.shift();if($scope.$flow===funcArgs.shift()){var args={};angular.forEach(eventArgs,function(value,key){args[value]=funcArgs[key]}),$scope.$eval($attrs[name],args)===!1&&event.preventDefault()}})}]}}])})}(angular),angular.module("flow.img",["flow.init"]).directive("flowImg",[function(){return{scope:!1,require:"^flowInit",link:function(scope,element,attrs){var file=attrs.flowImg;scope.$watch(file,function(file){if(file){var fileReader=new FileReader;fileReader.readAsDataURL(file.file),fileReader.onload=function(event){scope.$apply(function(){attrs.$set("src",event.target.result)})}}})}}}]),angular.module("flow.transfers",["flow.init"]).directive("flowTransfers",[function(){return{scope:!0,require:"^flowInit",link:function(scope){scope.transfers=scope.$flow.files}}}]),angular.module("flow",["flow.provider","flow.init","flow.events","flow.btn","flow.drop","flow.transfers","flow.img","flow.dragEvents"]),angular.module("templates-sign",["../sign/static/sign/js/partials/base.html","../sign/static/sign/js/partials/confirm_modal.html","../sign/static/sign/js/partials/decline_modal.html","../sign/static/sign/js/partials/signature_element.html","../commons/js/partials/audit.html","../commons/js/partials/audit_download.html","../commons/js/partials/file_preview.html","../commons/js/partials/grip_directive.html","../commons/js/partials/image_cropper.html","../commons/js/partials/profile_dropdown.html","../commons/js/partials/sign_download.html","../commons/js/partials/sign_modal.html","../commons/js/partials/signature_document_preview.html","../commons/js/partials/signature_error_message.html","../commons/js/partials/signature_image.html","../commons/js/partials/signature_lawyaw_logo.html","../commons/js/partials/signature_preview.html","../commons/js/partials/signature_trail_preview.html","../commons/js/partials/text_input_modal.html","../commons/js/partials/ui_notification.html","../commons/js/partials/vault.html","../commons/js/partials/vault_file.html","../commons/js/partials/vault_rename.html","../commons/js/partials/yes_no_dialog.html"]),
angular.module("../sign/static/sign/js/partials/base.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../sign/static/sign/js/partials/base.html",'<div class="wrapper--sign wrapper--sign--isolated">\n  <div class="container-fluid">\n    <div class="panels-header panels-header--isolated-view">\n      <div class="header__action-bar">\n        <signature-error-message\n\t  ng-if="error.showError"\n          class="pull-right error-message error-message--left  alert-dismissable">\n        </signature-error-message>\n        <div class="dropdown">\n          <ul class="dropdown-menu header__action-decline-dropdown"\n\t      aria-labelledby="dropdownMenu">\n            <li ng-click="declineSignature()"\n\t\tclass="header__action-dropdown__item">Decline</li>\n          </ul>\n          <span ng-model="showDropdown"\n             ng-click="showDropdown=!showDropdown"\n             class="icon-options clickable dropdown-toggle header__action-options-icon"\n             data-toggle="dropdown" aria-haspopup="true"\n\t     aria-expanded="true"></span>\n        </div>\n        <button class="btn btn--primary pull-right"\n                ng-if="getUnsignedSignatureElementsInDoc(\n\t\t       clientSignatureData.documents[clientSignatureData.currentDocumentIndex]\n\t\t       ).length > 0"\n          ng-click="nextSignature();">\n          Next\n        </button>\n        <button class="btn btn--primary pull-right"\n                ng-if="getUnsignedSignatureElementsInDoc(\n\t\t       clientSignatureData.documents[clientSignatureData.currentDocumentIndex]).length === 0 &&\n                       !(clientSignatureData.documents[clientSignatureData.currentDocumentIndex].id ===\n                       clientSignatureData.documents[clientSignatureData.documents.length - 1].id)"\n                ng-click="nextDocument()">\n          Continue\n        </button>\n        <button class="btn btn--primary pull-right"\n                ng-if="getUnsignedSignatureElementsInDoc(\n\t\t       clientSignatureData.documents[clientSignatureData.currentDocumentIndex]).length === 0 &&\n                       (clientSignatureData.documents[clientSignatureData.currentDocumentIndex].id ===\n                       clientSignatureData.documents[clientSignatureData.documents.length - 1].id)"\n                ng-click="submitSignature();">\n          Done\n        </button>\n      </div>\n    </div>\n    <div id="canvas"\n         class="document-container--sign non-draggable"\n         ng-mouseup="resizeElementEnd($event)"\n         ng-click="handleClickOnCanvas()"\n         ng-mousemove="handleMouseMoveOnCanvas($event)"\n         ng-mouseleave="handleMouseLeaveOnCanvas($event)">\n      <img ng-repeat="page in currentDocument().pages"\n           class="document-picture--sign non-draggable"\n           ng-src="{{page.background_url}}" imgload>\n      <signature-elements ng-show="!imgLoading"></signature-elements>\n    </div>\n\n    <div class="col-xs-1 input-forms-overview-container input-forms-overview-container--sign">\n      <div class="input-forms-overview">\n        <div ng-repeat="doc in clientSignatureData.documents track by $index"\n             ng-click="clientSignatureData.currentDocumentIndex=$index">\n          <div class="form-overview"\n\t       ng-class="{\'highlighted-document\': clientSignatureData.currentDocumentIndex===$index}">\n            <div class="formm-name">\n              <span class="doc-name">\n                {{doc.title}} - {{doc.subtitle}}\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="document-navigation__btn-container--isolated">\n      <button ng-disabled="clientSignatureData.currentDocumentIndex==0"\n              ng-click="previousDocument()"\n\t      class="btn document-navigation__btn" ng-if="true">\n        Previous document\n      </button>\n      <button ng-disabled="clientSignatureData.currentDocumentIndex===(clientSignatureData.documents.length - 1)"\n              ng-click="nextDocument()"\n\t      class="btn document-navigation__btn pull-right">\n        Next  document\n      </button>\n    </div>\n\n  </div>\n</div>\n')}]),angular.module("../sign/static/sign/js/partials/confirm_modal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../sign/static/sign/js/partials/confirm_modal.html",'<div class="modal-header">\n  <h3 class="modal-title"></h3>\n</div>\n\n<div class="modal-body">\n  <p class="modal-intro">\n    I agree to use the electronic form of my signature to sign this document.\n  </p>\n\n</div>\n\n<div class="modal-footer">\n  <button class="btn btn--cancel"\n          ng-click="confirm(false)"> Edit </button>\n  <button class="btn btn--primary"\n          ng-click="confirm(true)">\n    I agree, submit\n  </button>\n</div>\n')}]),angular.module("../sign/static/sign/js/partials/decline_modal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../sign/static/sign/js/partials/decline_modal.html",'<div class="modal-header">\n  <h3 class="modal-title">\n    Decline to sign this document\n  </h3>\n</div>\n\n<div class="modal-body">\n  <p class="modal-intro">\n    Declining this document will clear anything you have entered and notify the sender.\n  </p>\n  <textarea type="text" class="input-box input-box--text-area" placeholder="Enter reason here"\n              ng-model="reason" required rows="4" cols="78">\n    </textarea>\n</div>\n\n<div class="modal-footer">\n  <button class="btn btn--cancel"\n\t  ng-click="confirm()"> Cancel </button>\n  <button class="btn btn--primary"\n          ng-disabled="!reason"\n          ng-click="confirm(reason)">\n    Decline\n  </button>\n</div>\n')}]),angular.module("../sign/static/sign/js/partials/signature_element.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../sign/static/sign/js/partials/signature_element.html",'<div ng-repeat="page in currentDocument().pages"\n     ng-init="pageIndex = $index">\n  <div ng-repeat="element in page.elements"\n       ng-click="handleElementClick(element); $event.stopPropagation()"\n       class="field-overlay black-field non-selectable non-draggable"\n       ng-class="{\'field-overlay--sign-element\' : element.input_type === kInputType.SIGNATURE_BLOCK ||\n                 element.input_type === kInputType.SIGNATURE_DATE,\n\t\t \'move-up\' : selectedElement.id === element.id}"\n       ng-style="getElementPosition(element, pageIndex, 0, 10)">\n    <!-- preview for textbox and textarea elements. -->\n    <div ng-if="element.input_type === kInputType.TEXTBOX ||\n                element.input_type === kInputType.TEXTAREA"\n        ng-class="{\'black-field\': exportMode,\n                   \'singleline\': element.input_type === kInputType.TEXTBOX,\n                    \'multiline\': element.input_type === kInputType.TEXTAREA}">\n      <span ng-bind-html="getTextOrParagraphValue(element, element.input_type)"\n            ng-class="{\'non-selectable non-draggable\': !isPackageHeaderElement(element), \'non-selectable non-draggable package-header-element\': isPackageHeaderElement(element)}"\n            clip-overflow=""\n            lawyaw-element=element\n            adjust-span-font-size-on-text-overflow=""\n            element-height="{{element.height}}"\n            input-type="{{element.input_type}}">\n      </span>\n    </div>\n    <!-- preview for checkboxes. -->\n    <div class="checkbox-container"\n         class="non-selectable non-draggable"\n         ng-if="element.input_type === kInputType.CHECKBOX">\n      <span ng-if="element.value" class="icon-check">\n      </span>\n    </div>\n\n\n    <!-- display sender\'s signature date elements. -->\n    <div class="date-text"\n         ng-if="!element.is_assigned && element.is_signed && element.value &&\n                element.input_type === kInputType.SIGNATURE_DATE">\n      {{element.value}}\n    </div>\n\n    <!-- display signature date elements. -->\n    <div class="date-text"\n         ng-if="element.is_assigned &&\n                element.input_type === kInputType.SIGNATURE_DATE">\n      {{currentDate}}\n    </div>\n\n    <!-- display signature signed elements. -->\n    <!-- override font style with the style from backend. -->\n    <div class="sign-name-text"\n         ng-style="{\'font-family\': element.sign_font}"\n         ng-if="element.is_signed &&\n                element.sign_text &&\n                element.input_type === kInputType.SIGNATURE_BLOCK">\n      {{element.sign_text}}\n    </div>\n\n    <!-- display signature signed elements. -->\n    <!-- override font style with the style from backend. -->\n    <div class="sign-name-text"\n         ng-mouseup="resizeElementEnd($event)"\n         ng-if="element.is_signed &&\n                element.sign_image && !(element.sign_text) &&\n                element.input_type === kInputType.SIGNATURE_BLOCK">\n\n      <!-- use element.sign_image for all sign images other than the current recipient\'s sign a-->\n      <sign-img\n        image-url="element.recipient_fprint === clientSignatureData.recipientFprint ? (signature.imageUrl || element.sign_image) : element.sign_image"\n        element="element"\n        base-element-selector="#canvas"\n        element-is-selected="isSelected(element)">\n      </sign-img>\n\n    </div>\n\n    <!-- Display drop down when element is selected and signed-->\n    <ul class="assign-dropdown" ng-if="selectedElement.id===element.id &&\n\t\t\t\t       element.is_assigned && element.is_signed">\n      <li ng-click="openSignatureModal(element); $event.stopPropagation();">\n\tEdit signatures</li>\n      <li ng-click="clearSignature(element); $event.stopPropagation();">\n\tClear signature</li>\n    </ul>\n\n    <!-- button for signature or sign date elements. -->\n    <div ng-if="!exportMode &&\n                !element.is_signed &&\n                element.is_assigned &&\n                element.input_type === kInputType.SIGNATURE_BLOCK">\n      <button\n        ng-click="showSignature(element)"\n        class="sign-button--recipient non-printable">\n        <i class="pull-left icon-signature-fill"></i>\n        Click to sign\n      </button>\n    </div>\n  </div>\n</div>\n')}]),angular.module("../commons/js/partials/audit.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/audit.html",'<div class="card audit-trail--preview m-t-16">\n  <div class="card__section card__section--header">\n    <h2 class="section-heading">\n      Summary\n    </h2>\n  </div>\n\n  <div class="card__section">\n    <div class="textfield">\n      <label  class="textfield__label">Title</label>\n      <span class="textfield__text">\n        {{ signatureData.title || getDocumentNames(signatureData.documents) }}\n      </span>\n    </div>\n\n    <div class="textfield" ng-if="signatureData.emailMessage">\n      <label  class="textfield__label">Email Message:</label>\n      <span class="textfield__text">\n        {{ signatureData.emailMessage }}\n      </span>\n    </div>\n\n    <div class="textfield">\n      <label  class="textfield__label">Status</label>\n      <div class="status-container status-container--sign"\n           ng-class="{\'status-container--progress\' : getPackageStatus(signatureData) === \'Out for signature\',\n                     \'status-container--declined\': [\'Declined\', \'Link expired\'].indexOf(getPackageStatus(signatureData)) !== -1,\n                     \'status-container--completed\': getPackageStatus(signatureData) === \'Closed\'}">\n        {{getPackageStatus(signatureData)}}\n      </div>\n    </div>\n\n    <div class="textfield">\n      <label  class="textfield__label">Package ID:</label>\n      <span class="textfield__text">\n        {{signatureData.fprint}}\n      </span>\n    </div>\n  </div>\n</div>\n\n<div class="card audit-trail--preview">\n  <div class="card__section card__section--header">\n    <h2 class="section-heading">Recipients</h2>\n  </div>\n\n  <div class="card__section"\n       ng-if="!(recipient.sign_order === 0 && signatureData.who_signs === kWhoSigns.OTHERS)"\n       ng-repeat="recipient in signatureData.recipients">\n      <div>\n        <div>\n          <div class="m-b-2">\n            {{recipient.email ? getRecipientName(recipient) + \' (\' + recipient.email + \')\' : getRecipientName(recipient)}}\n          </div>\n          <div>\n            <div class="recipient-status"\n                 ng-class="{\'recipient-status--signed\': getRecipientSignatureStatus(recipient) === \'Signed\',\n                           \'recipient-status--pending\': getRecipientSignatureStatus(recipient) === \'Signature pending\',\n                           \'recipient-status--declined\': [\'Declined\', \'Link Expired\'].indexOf(getRecipientSignatureStatus(recipient)) !== -1}">\n              <div>{{getRecipientSignatureStatus(recipient)}}</div>\n            </div>\n            <button class="btn btn--slim pull-right"\n                      ng-click="sendReminderEmail(recipient.email)"\n                      ng-if="recipient.sign_order!==0 &&\n\t\t\t     recipient.email_sent && !recipient.submitted &&\n\t\t\t     !recipient.declined && !recipient.expired &&\n                             (recipient.email !== userDataService.email)">\n                Send reminder\n              </button>\n              <button class="btn btn--slim pull-right"\n                      ng-click="sendNewLinkEmail(recipient.email)"\n                      ng-if="recipient.sign_order!==0 && recipient.email_sent &&\n\t\t\t     !recipient.submitted && !recipient.declined &&\n\t\t\t     recipient.expired">\n                Send new link\n              </button>\n              <button class="btn btn--primary btn--slim pull-right"\n                      ng-click="startSigning(recipient)"\n                      ng-if="showStartSigningButton(recipient)">\n                Start signing\n              </button>\n          </div>\n        </div>\n      </div>\n  </div>\n</div>\n')}]),angular.module("../commons/js/partials/audit_download.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/audit_download.html",'<div class="audit-download">\n  <h3 class="audit-download__title">\n    <span class="audit-download__label">Document Title: </span>\n    {{ getDocumentNames(signatureData.documents) }}\n  </h3>\n  <h3 class="audit-download__id">\n    <span class="audit-download__label">Status: </span>\n    {{ getPackageStatus(signatureData) }}\n  </h3>\n  <h3 class="audit-download__id" ng-if="signatureData.title">\n    <span class="audit-download__label">Email Title: </span>\n    {{ signatureData.title }}\n  </h3>\n  <h3 class="audit-download__id" ng-if="signatureData.emailMessage">\n    <span class="audit-download__label">Email Message: </span>\n    {{ signatureData.emailMessage }}\n  </h3>\n  <h3 class="audit-download__id">\n    <span class="audit-download__label">Package ID: </span>{{signatureData.fprint}}</h3>\n  <div class="table-wrapper">\n    <table class="content-table content-table--audit-download">\n      <thead class="content-table__header">\n        <tr>\n          <th>Action</th>\n          <th>Recipient</th>\n          <th>Time</th>\n          <th>IP</th>\n        </tr>\n      </thead>\n      <tbody>\n          <tr ng-repeat="auditLog in audit.auditTrail">\n            <td>{{auditActions[auditLog.action]}}</td>\n'+"            <td>{{auditLog.recipient.name + ' (' + auditLog.recipient.email + ')'}}</td>\n            <td>{{getFormattedDate(auditLog.timestamp)}}</td>\n            <td>{{'IP: ' + auditLog.ip_address}}</td>\n          </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n")}]),angular.module("../commons/js/partials/file_preview.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/file_preview.html",'<div class="modal-header modal-header--file">\n<div class="modal__dismiss">\n  <a href="" ng-click="cancel()">\n    <span class="icon-close"></span>\n  </a>\n</div>\n  <h3 class="modal-title modal__file-name">\n    {{file.name}}\n  </h3>\n  <div class="modal__icon-button">\n     <a href="{{file.docfile_url}}" download="{{file.download_name}}"><span class="icon-download modal__icon"></span></a>\n  </div>\n\n</div>\n<div class="modal-body">\n  <embed ng-src="{{file.displayfile_url}}"\n         class="magnified-document">\n  </embed>\n</div>\n')}]),angular.module("../commons/js/partials/grip_directive.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/grip_directive.html",'<svg class="drag-handle" width="8px" height="18px" viewBox="0 0 8 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g id="drag-handle" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Group-2" fill="#D1D3D6">\n            <rect id="Rectangle-2" x="0" y="0" width="2.7" height="2.7"></rect>\n            <rect id="Rectangle-2-Copy-2" x="0" y="5.1" width="2.7" height="2.7"></rect>\n            <rect id="Rectangle-2-Copy" x="5.1" y="0" width="2.7" height="2.7"></rect>\n            <rect id="Rectangle-2-Copy-3" x="5.1" y="5.1" width="2.7" height="2.7"></rect>\n            <rect id="Rectangle-2-Copy-5" x="0" y="10.2" width="2.7" height="2.7"></rect>\n            <rect id="Rectangle-2-Copy-4" x="5.1" y="10.2" width="2.7" height="2.7"></rect>\n            <rect id="Rectangle-2-Copy-7" x="0" y="15.3" width="2.7" height="2.7"></rect>\n            <rect id="Rectangle-2-Copy-6" x="5.1" y="15.3" width="2.7" height="2.7"></rect>\n        </g>\n    </g>\n</svg>\n')}]),angular.module("../commons/js/partials/image_cropper.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/image_cropper.html",'<div class="modal-header">\n</div>\n<div class="modal-body modal-body--img-cropper">\n  <div class="cropArea" ng-init="croppedImage=\'\';">\n    <img-crop\n      image="image"\n      result-image="croppedImage"\n      result-image-format="image/png"\n      class="crop-container"\n      area-type="square" >\n    </img-crop>\n  </div>\n</div>\n<div class="modal-footer modal-footer--client-access">\n  <button class="btn btn--cancel"\n          ng-click="cancel()">Cancel\n  </button>\n  <button class="btn btn--primary"\n          ng-click="transferCroppedImage()">\n    Confirm\n  </button>\n</div>\n')}]),angular.module("../commons/js/partials/profile_dropdown.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/profile_dropdown.html",'<div uib-dropdown uib-dropdown-toggle class="main-nav__item--account pull-right">\n   <a>\n      <div class="clearfix">\n         <div class="profile-pic profile-pic--small"\n            ng-class="{\'with-image\': membershipData.getMemberProfilePicUrl()}">\n            <img ng-if="membershipData.getMemberProfilePicUrl()"\n               ng-src="{{membershipData.getMemberProfilePicUrl()}}"/>\n            <span ng-if="!membershipData.getMemberProfilePicUrl()">\n            {{membershipData.getMemberInitials()}}\n            </span>\n         </div>\n         <span class="icon-arrow-drop-down"></span>\n      </div>\n   </a>\n   <ul uib-dropdown-menu class="dropdown-menu--account">\n      <li class="dropdown__item">\n         <a ng-click="gotoSettings()">Account</a>\n      </li>\n      <li class="dropdown__item">\n        <a ng-click="gotoSupport()">Support</a>\n      </li>\n      <li class="dropdown__item">\n         <a href ng-click="logout()">Logout</a>\n      </li>\n   </ul>\n</div>\n')}]),angular.module("../commons/js/partials/sign_download.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/sign_download.html",'<div download-signature-package-block="">\n  <audit-download></audit-download>\n  <div ng-repeat="doc in signatureData.documents"\n     class="picture-with-fields document-list-container">\n    {{inputDoc = doc; ""}}\n    <signature-document-preview\n      export-mode="true"\n      margin-bottom="0" margin-left="0" margin-top="0" margin-right="0">\n    </signature-document-preview>\n  </div>\n</div>\n')}]),angular.module("../commons/js/partials/sign_modal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/sign_modal.html",'<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <h3 class="modal-title ng-binding">Insert signature</h3>\n\n      <div class="tabs-container clearfix">\n        <ul class="tabs">\n          <li class="tab__title-container">\n            <span class="tab__title"\n                  ng-click="signOption = kSignOption.TYPE_IN;"\n                  ng-class="{\'is-active\': signOption === kSignOption.TYPE_IN}">\n              Type in\n            </span>\n          </li>\n          <li class="tab__title-container">\n            <span class="tab__title"\n                  ng-click="signOption = kSignOption.IMAGE;"\n                  ng-class="{\'is-active\': signOption === kSignOption.IMAGE}">\n              Use image\n            </span>\n          </li>\n        </ul>\n      </div>\n    </div>\n\n    <div class="modal-body modal-body--confirm">\n      <form>\n        <div ng-show="signOption === kSignOption.IMAGE">\n          <div class="sign-img-container" flow-init  flow-name="obj.flow">\n            <div ng-show="!signatureImgSource">\n              <div\n                flow-files-submitted="openImageUploader()"\n                class="btn btn--primary" flow-btn="">\n                Upload image\n              </div>\n            </div>\n            <span class="modal-fine-print m-t-2" ng-show="!signatureImgSource">\n              Maximum file size 250KB, accepted formats: png & jpg.\n            </span>\n\n            <div class="sign-img__action-panel" ng-show="signatureImgSource">\n              <div>\n                <img class="sign-img"\n                     ng-if="imageUploadCompleted"\n                     ng-src="{{ signatureImgSource }}">\n                <span ng-if="!imageUploadCompleted"\n                      class="loader">\n                </span>\n              </div>\n              <div class="sign-img__action-btn-container">\n                <button class="btn m-b-2"\n                        type="submit"\n                        ng-click="deleteImage()">\n                  Delete\n                </button>\n                <button\n                        flow-files-submitted="openImageUploader()"\n                  class="btn btn--primary pull-right" flow-btn="">\n                  Upload new\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div ng-show="signOption === kSignOption.TYPE_IN">\n          <div class="input-wrapper p-r-0 p-t-0">\n            <label class="textfield__label">\n              Type in your signature\n            </label>\n            <input type="text" class="input-box input-box--large"\n                   placeholder="{{signature.text}}"\n                   ng-style="{\'font-family\': fontStyle}"\n                   ng-focus="error.showEmptySignError=false"\n                   ng-model="signature.text">\n          </div>\n          <div class="input-wrapper p-l-0 p-r-0 clearfix">\n            <label class="textfield__label">\n              Choose font\n            </label>\n            <div class="segmented-radio">\n              <div class="radio-box--segmented">\n                <input type="radio" id="font_normal"\n                       name="font"\n                       ng-click="signature.text = signature.text || \'/s/\';"\n                       ng-model="fontStyle"\n                       value="\'timesnewroman\'">\n                <label for="font_normal" class="radio-label radio-label--large">\n                  Normal\n                </label>\n              </div>\n              <div class="radio-box--segmented">\n                <input type="radio" id="font_cursive"\n                       name="font"\n                       ng-model="fontStyle"\n                       ng-value="\'La Belle Aurore\'">\n                <label for="font_cursive" class="radio-label radio-label--large">\n                  Cursive\n                </label>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div ng-if="error.showEmptySignError"\n             class="error-message m-t-2">\n          {{error.errorMessage}}\n        </div>\n      </form>\n    </div>\n    <div class="modal-footer clearfix">\n      <div class="checkbox m-t-0 m-b-0 pull-left">\n        <label class="checkbox-field">\n          <input type="checkbox" ng-model="agreed">\n          <span class="checkbox-field__name m-l-1">\n            I agree this is a legal representation of my signature.\n          </span>\n        </label>\n      </div>\n      <button class="btn btn--primary pull-right"\n              type="submit"\n              ng-disabled="signOption === kSignOption.IMAGE ? !readyToInsert() : !agreed"\n              ng-click="signOption === kSignOption.IMAGE ? confirm({image: signature.image}) : confirm({text: signature.text, font: fontStyle})">\n'+"        {{(signature.text === undefined) || (signature.text === null) ? 'Insert' : 'Update'}}\n      </button>\n    </div>\n  </div>\n</div>\n")}]),angular.module("../commons/js/partials/signature_document_preview.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/signature_document_preview.html",'<div class="non-draggable">\n  <!--page-->\n  <div ng-repeat="page in inputDoc.pages">\n    <img\n      ng-style="{\'margin-bottom\': marginBottom, \'margin-top\': marginTop, \'margin-left\': marginLeft}"\n      class="non-draggable document-picture document-picture--preview" imgload\n      ng-src="{{page.background_url}}"/>\n  </div>\n  <!--page-->\n\n  <!-- signature-elements  -->\n  <div ng-show="!imgLoading"\n        ng-repeat="page in inputDoc.pages"\n        ng-init="pageIndex = $index">\n    <div ng-repeat="element in page.elements"\n          class="field-overlay black-field"\n          ng-style="getElementPositionWithPageTopMargin(element, pageIndex, marginLeft, marginTop)">\n      <!-- preview for textbox and textarea elements. -->\n      <div ng-if="element.input_type === kInputType.TEXTBOX ||\n                  element.input_type === kInputType.TEXTAREA"\n            ng-class="{\'black-field\': exportMode,\n                      \'singleline\': element.input_type === kInputType.TEXTBOX,\n                      \'multiline\': element.input_type === kInputType.TEXTAREA}">\n        <span ng-bind-html="getTextOrParagraphValue(\n          element, element.input_type)"\n              ng-class="{\'package-header-element\': isPackageHeaderElement(element)}"\n              clip-overflow=""\n              lawyaw-element=element\n              adjust-span-font-size-on-text-overflow=""\n              element-height="{{element.height}}"\n              input-type="{{element.input_type}}">\n        </span>\n      </div>\n      <!-- preview for checkboxes. -->\n      <div class="checkbox-container"\n            ng-if="element.input_type === kInputType.CHECKBOX">\n        <span ng-if="element.value" class="icon-check">\n        </span>\n      </div>\n\n      <!-- display signature in signed elements. -->\n      <!-- Override font from the value recieved from backend. -->\n      <div class="sign-name-text"\n           ng-class="{\'black-field\': exportMode}"\n           ng-style="{\'font-family\': element.recipient.font}"\n           ng-if="element.recipient  && element.recipient.text &&\n                  element.input_type === kInputType.SIGNATURE_BLOCK">\n        {{element.recipient.text}}\n      </div>\n\n      <!-- display signature image if user has not entered text and has added an image. -->\n      <div class="sign-name-text"\n           ng-if="element.recipient &&\n\t\t  element.recipient.image && !(element.recipient.text) &&\n                  element.input_type === kInputType.SIGNATURE_BLOCK">\n        <img class="signature-img"\n             ng-src="{{signature.image || element.recipient.image}}"\n             width="{{element.image_width}}"\n             height="{{element.image_height}}"\n             draggable="false">\n      </div>\n\n      <!-- display data in date elements. -->\n      <div class="date-text"\n            ng-if="element.recipient  && element.value &&\n                  element.input_type === kInputType.SIGNATURE_DATE">\n        {{element.value}}\n      </div>\n    </div>\n  </div>\n</div>\n')}]),angular.module("../commons/js/partials/signature_error_message.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/signature_error_message.html",'<div>\n  <a href="#" class="close" data-dismiss="alert" aria-label="close" ng-click="error.showError=false;">&times;</a>\n  {{error.errorMessage}}\n</div>\n')}]),angular.module("../commons/js/partials/signature_image.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/signature_image.html",'<!-- Template for signature image -->\n<img class="signature-img non-draggable"\n     ng-src="{{imageUrl}}"\n     width="{{element.image_width_temp || element.image_width || element.width}}"\n     ng-class="{\'signature-img--selected\': elementIsSelected}"\n     draggable="false"\n     ondragstart="return false;">\n<!-- html5\'s `draggable=false` does not work on firefox.\n     To make the image non draggable use: ondragstart="return false;"-->\n<div ng-if="elementIsSelected" class="svg-icon-container control-container control-container--move control-container--move-sign non-printable"\n     ng-style="{\'left\': element.image_width_temp || element.image_width || element.width}"\n     ng-click="baseElementScope.resizeElementEnd($event)"\n     ng-mousedown="resizeElementStart($event, element)">\n     <svg name="icon-resize" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 16 16" xml:space="preserve" width="100%" height="100%">\n       <g>\n         <polygon points="9,2 12.6,2 8.6,6 10,7.4 14,3.4 14,7 16,7 16,0 9,0 "></polygon>\n         <polygon data-color="color-2" points="6,8.6 2,12.6 2,9 0,9 0,16 7,16 7,14 3.4,14 7.4,10 "></polygon>\n       </g>\n     </svg>\n</div>\n')}]),angular.module("../commons/js/partials/signature_lawyaw_logo.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/signature_lawyaw_logo.html",'<svg width="75px" height="40px" viewBox="0 0 134 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="blue" transform="translate(-4.000000, -3.000000)">\n            <g id="logo" transform="translate(4.000000, 3.000000)">\n                <g id="Group" transform="translate(2.000000, 2.000000)">\n                    <rect id="Rectangle" fill="#FFFFFF" x="0" y="0" width="36" height="36"></rect>\n                    <g id="lawyaw-logo-white" transform="translate(5.000000, 6.000000)" fill="#2962FF">\n                        <g id="Symbols">\n                            <g id="logo">\n                                <g id="text" transform="translate(45.000000, 6.000000)">\n                                    <path d="M0,0 L2.6290606,0 L2.6290606,9.85073816 L7.49956389,9.85073816 L7.49956389,12.3658203 L0,12.3658203 L0,0 L0,0 Z M14.079438,0 L16.2534688,0 L21.4441781,12.3658203 L18.4780585,12.3658203 L17.4500284,9.74594318 L12.8154665,9.74594318 L11.8211423,12.3658203 L8.92243448,12.3658203 L14.079438,0 L14.079438,0 Z M15.0906151,3.59796469 L13.6412612,7.44045112 L16.556822,7.44045112 L15.0906151,3.59796469 L15.0906151,3.59796469 Z M22.1760777,0 L25.0410796,0 L26.9454632,7.92949486 L26.9791691,7.92949486 L29.4734061,0 L31.9170842,0 L34.3944682,8.13908515 L34.4281741,8.13908515 L36.4336755,0 L39.0964419,0 L35.6078808,12.3658203 L33.2653204,12.3658203 L30.6362598,3.80755482 L30.6025539,3.80755482 L27.9734934,12.3658203 L25.7151978,12.3658203 L22.1760777,0 L22.1760777,0 Z M44.4123446,7.09113419 L39.9294592,0 L43.198932,0 L45.7268749,4.62844974 L48.4064943,0 L51.5242904,0 L47.0414052,7.09113419 L47.0414052,12.3658203 L44.4123446,12.3658203 L44.4123446,7.09113419 L44.4123446,7.09113419 Z M56.2840457,0 L58.4580767,0 L63.648786,12.3658203 L60.6826664,12.3658203 L59.6546361,9.74594318 L55.0200743,9.74594318 L54.0257502,12.3658203 L51.1270423,12.3658203 L56.2840457,0 L56.2840457,0 Z M57.295223,3.59796469 L55.845869,7.44045112 L58.7614297,7.44045112 L57.295223,3.59796469 L57.295223,3.59796469 Z M64.8020093,0 L67.6670112,0 L69.5713949,7.92949486 L69.6051009,7.92949486 L72.0993377,0 L74.5430159,0 L77.0203999,8.13908515 L77.0541057,8.13908515 L79.0596071,0 L81.7223736,0 L78.2338123,12.3658203 L75.891252,12.3658203 L73.2621915,3.80755482 L73.2284856,3.80755482 L70.599425,12.3658203 L68.3411293,12.3658203 L64.8020093,0 L64.8020093,0 Z" id="LAWYAW"></path>\n                                </g>\n                            </g>\n                        </g>\n                    </g>\n                </g>\n                <path d="M36.9934988,0 C38.6539436,0 40,1.34230941 40,3.0065012 L40,36.9934988 C40,38.6539436 38.6576906,40 36.9934988,40 L3.0065012,40 C1.34605644,40 0,38.6576906 0,36.9934988 L0,3.0065012 C0,1.34605644 1.34230941,0 3.0065012,0 L36.9934988,0 Z M30.9463434,8.04409368 L22.8124856,8.04409368 L12.5550762,17.9635569 L12.5550762,25.8630709 L7.97246278,30.5434704 L7.97246278,31.7421326 L30.9723642,31.8805404 L30.9723642,31.255843 C30.7532574,31.030666 30.6296587,30.9037333 30.4104534,30.6785563 L9.62231794,30.5534357 L13.2817852,26.8161221 L21.2086596,26.8161221 L30.9463434,16.3516844 L30.9463434,8.04409368 Z M23.2323662,22.841351 L20.6875542,25.5760886 L14.4958909,25.5760886 L17.1737638,22.841351 L23.2323662,22.841351 Z M16.4404511,15.9139129 L16.4404511,21.8950441 L13.7692805,24.6230374 L13.7692805,18.4970562 L16.4404511,15.9139129 Z M28.9248051,16.7240266 L24.3862497,21.6013174 L18.3878695,21.6013174 L23.163569,16.7240266 L28.9248051,16.7240266 Z M22.4302561,10.1214192 L22.4302561,15.7778203 L17.6545568,20.6551111 L17.6545568,14.7397112 L22.4302561,10.1214192 Z M29.7322377,9.28412723 L29.7322377,15.4840936 L23.6444604,15.4840936 L23.6444604,9.28412723 L29.7322377,9.28412723 Z" id="Combined-Shape" fill="#2962FF"></path>\n            </g>\n        </g>\n    </g>\n</svg>');
}]),angular.module("../commons/js/partials/signature_preview.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/signature_preview.html",'<div class="wrapper--sign--preview">\n  <!-- in isolated view many views and their data is not available as user is not\n      authenticated. Don\'t render any of these to prevent any unpredicted behavior.\n      Never use any ng-show bullshit; it\'s not worth the efficiency.\n  -->\n  <div class="header header--sign-preview non-printable" ng-if="userIsSender">\n\n    <div class="row">\n      <div class="header__main col-xs-7 p-l-0">\n        <h1 class="header__name header__name--parent"><a href ng-click="gotoClientInfo()">{{projectData.project.client_name}}</a></h1>\n        <span class="icon-breadcrumb"></span>\n        <h1 class="header__name header__name--parent">{{projectData.project.title}}\n          <span class="clearfix star-container star-container--header"\n                ng-click="toggleProjectStar(projectData.project, !projectData.project.is_starred);\n                          $event.stopPropagation();">\n              <span ng-class="projectData.project.is_starred ? \'icon-star-filled\': \'icon-star-empty\'">\n              </span>\n          </span>\n        </h1>\n        <span class="icon-breadcrumb"></span>\n        <h1 class="header__name">{{ signatureData.title || getDocumentNames(signatureData.documents) }}\n            <span class="clearfix star-container star-container--header"\n                  ng-click="toggleProjectStar(projectData.project, !projectData.project.is_starred);\n                            $event.stopPropagation();">\n                <span ng-class="projectData.project.is_starred ? \'icon-star-filled\': \'icon-star-empty\'">\n                </span>\n            </span>\n        </h1>\n      </div>\n      <div class="header__actions">\n        <profile-dropdown></profile-dropdown>\n      </div>\n    </div>\n\n    <div class="tabs-container clearfix">\n      <ul class="tabs">\n        <li class="tab__title-container">\n          <a ng-show="$state.is(\'base.project.info\') || $state.is(\'base.project.signatures\')"\n             ui-sref="base.project.info"\n             ng-class="{\'is-active\': $state.is(\'base.project.info\')}"\n             class="tab__title">Overview</a>\n          <a ng-click="closeSignaturePreviewPage()"\n             class="tab__title">\n             <span class="icon-arrow-back"></span>\n             Back to signed documents\n          </a>\n        </li>\n        <li class="tab__title-container">\n          <a ng-show="$state.is(\'base.project.info\') || $state.is(\'base.project.signatures\')"\n              ui-sref="base.project.signatures"\n              ng-class="{\'is-active\': $state.is(\'base.project.signatures\')}"\n              class="tab__title">Signed documents</a>\n        </li>\n      </ul>\n    </div>\n\n  </div>\n\n  <div class="sign-preview__actions non-printable">\n    <a ng-click="openCancelModal()"\n       ng-show="showCancelButton(package)"\n       class="text-link text-link--dimmed m-t-1-5">\n      <span ng-if="!printStateService.showPrintingProgress">\n        Cancel signature request\n      </span>\n    </a>\n    <div class="download-container">\n      <a ng-click="printCombined()"\n         class="btn dropdown-toggle download-dropdown">\n        <span ng-if="!printStateService.showPrintingProgress">\n        <i class="icon-download"></i>\n        Download\n        </span>\n        <div ng-if="printStateService.showPrintingProgress" class="loader download">\n        </div>\n      </a>\n    </div>\n  </div>\n\n  <div class="content-wrapper content-wrapper--816">\n    <audit-preview class="non-printable"></audit-preview>\n  </div>\n\n  <!-- different margins in preview and print (no gap between pages in print) -->\n  <div ng-repeat="doc in signatureData.documents"\n     class="picture-with-fields document-list-container">\n    {{inputDoc = doc; ""}}\n    <signature-document-preview\n      export-mode="false"\n      margin-bottom="0" margin-left="0" margin-top="10" margin-right="0">\n    </signature-document-preview>\n  </div>\n  <div class="content-wrapper content-wrapper--816 m-t-3">\n    <signature-trail-preview></signature-trail-preview>\n  </div>\n</div>\n\n<!-- export -->\n<div class="non-printable invisible"\n     ng-if="printStateService.printSignaturePreview"\n     ng-include="\'../commons/js/partials/sign_download.html\'">\n</div>\n')}]),angular.module("../commons/js/partials/signature_trail_preview.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/signature_trail_preview.html",'<div ng-if="audit.auditTrail.length > 0"\n     class="card audit-trail--preview">\n  <div class="card__section card__section--header">\n    <h2 class="section-heading">Signature trail</h2>\n    <div>\n      <span class="audit-trail-subtitle">\n        Secured audit trail verified by\n      </span>\n      <span class="audit-trail-subtitle">\n        <signature-lawyaw-logo></signature-lawyaw-logo>\n      </span>\n    </div>\n  </div>\n  <div ng-repeat="auditLog in audit.auditTrail"\n       class="card__section">\n    <div class="bold">\n      {{auditActions[auditLog.action]}}\n    </div>\n    <div>\n'+"      {{auditLog.recipient.name + ' (' + auditLog.recipient.email + ')'}}\n    </div>\n    <div>\n      {{getFormattedDate(auditLog.timestamp)}}\n    </div>\n    <div>\n      {{'IP: ' + auditLog.ip_address}}\n    </div>\n  </div>\n</div>\n")}]),angular.module("../commons/js/partials/text_input_modal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/text_input_modal.html",'<form ng-submit="inputText && confirm(inputText)">\n  <div class="modal-header">\n    <h3 class="modal-title">{{modalTitle}}</h3>\n  </div>\n  <div class="modal-body">\n    <div class="table-wrapper">\n      <div class="input-wrapper input-wrapper--users-modal">\n        <label for="" class="input-label">{{inputLabel}}</label>\n        <input autofocus\n          onFocus="this.select()"\n          type="text" class="input-box" ng-model="inputText">\n      </div>\n    </div>\n  </div>\n  <div class="modal-footer">\n    <button class="btn btn--cancel"\n            type="button"\n            ng-click="cancel()">\n            Cancel\n    </button>\n    <button type="submit"\n            class="btn btn--primary"\n            ng-disabled="!inputText">\n            Confirm\n    </button>\n  </div>\n</form>\n      ')}]),angular.module("../commons/js/partials/ui_notification.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/ui_notification.html",'<div class="ui-notification">\n  <h3 ng-show="title" ng-bind-html="title"></h3>\n  <div class="notification__message-container">\n    <div ng-bind-html="message"></div>\n    <span class="icon-close pull-right clickable notification-dismiss" ng-click="kill(false)"></span>\n  </div>\n</div>\n')}]),angular.module("../commons/js/partials/vault.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/vault.html",'<div class="content-wrapper"\n     ng-init="getClientVault(clientId)"\n     flow-init flow-name="obj.flow"\n     flow-drop\n     flow-drag-enter="class=\'files-container--drag\'"\n     flow-drag-leave="class=\'\'"\n     ng-class="class"\n     flow-files-submitted="uploadFile()">\n  <div ng-if="vaultIsEmpty()" class="empty-state">\n   <div class="empty-state__message">\n     <div class="empty-state__img empty-state__img-vault">\n     </div>\n     <h3>No client files</h3>\n     <p>To upload files drag them here, or <span class="text-link" flow-btn="" flow-btn>Browse</span></p>\n   </div>\n  </div>\n  <ul class="files-container clearfix">\n    <li ng-if="!vaultIsEmpty()" class="file no-drag" flow-btn="">\n      <div class="abs-center flow-btn">\n        <div class="clearfix btn btn--circle">\n          <span class="icon-add"></span>\n        </div>\n      </div>\n    </li>\n    <li class="file no-drag" ng-repeat="file in clientData.client.files">\n      <vault-file\n          file="file"\n          ng-click="clickedOnFile(file)"\n          client-id="clientData.client.profile.id"\n          file-list="clientData.client.files">\n      </vault-file>\n    </li>\n\n  </ul>\n</div>\n')}]),angular.module("../commons/js/partials/vault_file.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/vault_file.html",'<div>\n  <div class="file__preview"\n       ng-style="{opacity: file.progress/100}">\n    <div class="file__thumbnail">\n      <img class="img-responsive"\n           ng-if="!file.isLoading && file.thumbnail_url"\n           ng-src="{{file.thumbnail_url}}" />\n    </div>\n  </div>\n  <div class="file__badge">\n    <div ng-if="!file.isLoading"\n      uib-dropdown ng-click="$event.stopPropagation();" class="dropdown--file-options">\n      <div uib-dropdown-toggle class="dropdown-toggle--file-options">\n        <div class="clearfix options-container">\n        <span class="icon-options"></span>\n      </div>\n      </div>\n      <ul uib-dropdown-menu>\n        <li class="dropdown__item">\n          <a ng-click="openRenameModal(file)">Rename</a>\n        </li>\n        <li class="dropdown__item"\n            confirm-title="Delete"\n            confirm="{{file.download_name}} will be permenatly removed."\n            confirm-ok="Delete" confirm-cancel="Cancel" confirm-danger="true"\n            ng-click="trashDocument(file); $event.stopPropagation();">\n          <a href>Remove</a>\n        </li>\n        <li class="dropdown__item"\n            ng-if="file.displayfile_url"\n            ng-click="viewDocument(file); $event.stopPropagation();">\n          <a href>View</a>\n        </li>\n        <li class="dropdown__item">\n          <a href="{{file.docfile_url}}" download="{{file.download_name}}">Download</a>\n        </li>\n      </ul>\n    </div>\n    <div class="file__name">{{file.name}}</div>\n    <p ng-if="!file.isLoading"\n      class="file__meta">Uploaded {{file.created_at}}\n    </p>\n    <div ng-if="file.isLoading"\n         class="progress-bar-container">\n    <div class="progress-bar--file"\n         ng-style="{ width: file.progress + \'%\'}">\n    </div>\n    </div>\n\n  </div>\n</div>\n')}]),angular.module("../commons/js/partials/vault_rename.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/vault_rename.html",'<form ng-submit="confirm(tempName)">\n  <div class="modal-header">\n    <h3 class="modal-title">Rename File</h3>\n  </div>\n  <div class="modal-body">\n    <div class="table-wrapper">\n      <div ng-init="tempName = file.name"\n           class="input-wrapper input-wrapper--users-modal">\n           <label for="" class="input-label">Enter a new name</label>\n           <input autofocus\n                  onFocus="this.select()"\n                  type="text" class="input-box" ng-model="tempName">\n      </div>\n    </div>\n  </div>\n  <div class="modal-footer">\n      <button class="btn btn--cancel"\n              ng-click="cancel()">Cancel</button>\n      <button class="btn btn--primary"\n              ng-click="confirm(tempName)">\n              Confirm\n      </button>\n  </div>\n</form>\n')}]),angular.module("../commons/js/partials/yes_no_dialog.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/yes_no_dialog.html",'<div class="modal-header">\n  <h3 class="modal-title">{{data.title}}</h3>\n</div>\n<div class="modal-body modal-body--confirm">{{data.text}}</div>\n<div class="modal-footer">\n  <button class="btn btn--cancel" ng-click="cancel()">{{data.cancel}}</button>\n  <button class="btn btn--primary"\n    ng-class="{\'btn--danger\': data.danger}"\n    ng-click="ok()">{{data.ok}}</button>\n</div>\n')}]),function(){var app;app=angular.module("ClientSignatureApp",["templates-sign","ui.router","ui.bootstrap","angular-loading-bar","CommonConstantsApp","ClientSignCtrlsApp","ClientSignatureDirectivesApps","SignUtilsApp","CommonsDirectivesApps","SmartFontSizeDirectivesApp"]),app.run(["$rootScope",function($rootScope){$rootScope.s3_url="https://clio-draft-static-prod-us-a.s3.amazonaws.com"}]),app.config(["$stateProvider","$urlRouterProvider","$httpProvider","$sceDelegateProvider","$locationProvider","cfpLoadingBarProvider","$urlMatcherFactoryProvider",function($stateProvider,$urlRouterProvider,$httpProvider,$sceDelegateProvider,$locationProvider,cfpLoadingBarProvider,$urlMatcherFactoryProvider){cfpLoadingBarProvider.includeSpinner=!1,$sceDelegateProvider.resourceUrlWhitelist(["self","https://lawyaw-media.s3.amazonaws.com/**","https://s3-us-west-1.amazonaws.com/**","https://clio-draft-media-prod-us-a.s3.amazonaws.com/**"]),$locationProvider.html5Mode(!0),$urlMatcherFactoryProvider.strictMode(!1),$stateProvider.state("base",{url:"/:recipient_fprint",templateUrl:"../sign/static/sign/js/partials/base.html",controller:"ClientSignCtrl"}).state("base:preview",{url:"/package/:package_fprint",templateUrl:"../commons/js/partials/signature_preview.html",controller:"PreviewCtrl"}),$httpProvider.defaults.xsrfCookieName="csrftoken",$httpProvider.defaults.xsrfHeaderName="X-CSRFToken"}])}(),function(){angular.module("ClientSignCtrlsApp",["BrowserServices","CommonConstantsApp","CommonsDirectivesApps","CommonsServices","ClientSignatureServicesApp","flow","LayoutUtilsApp","PhotoUploadApp","PrintServicesApp","SmartFontSizeDirectivesApp"]).controller("ClientSignCtrl",["$state","$scope","$window","$stateParams","$uibModal","$filter","clientSignatureData","initClientSignatureData","layoutUtils","kInputType","allSignedService","declineService",function($state,$scope,$window,$stateParams,$uibModal,$filter,clientSignatureData,initClientSignatureData,layoutUtils,kInputType,allSignedService,declineService){clientSignatureData.recipientFprint=$stateParams.recipient_fprint,initClientSignatureData(clientSignatureData.recipientFprint),$scope.clientSignatureData=clientSignatureData,$scope.currentDate=$filter("date")(new Date,"MM/dd/yyyy"),$scope.error={},$scope.dropdown={},$scope.currentDocument=function(){return clientSignatureData.documents[clientSignatureData.currentDocumentIndex]},$scope.nextDocument=function(){clientSignatureData.currentDocumentIndex<clientSignatureData.documents.length-1&&(clientSignatureData.currentDocumentIndex+=1)},$scope.previousDocument=function(){clientSignatureData.currentDocumentIndex>0&&(clientSignatureData.currentDocumentIndex-=1)},$scope.openSignatureModal=function(element){$scope.error.showError=!1,$scope.selectedElement=element;$uibModal.open({controller:"SignatureModalCtrl",templateUrl:"../commons/js/partials/sign_modal.html",resolve:{signature:function(){return $scope.signature},error:function(){return $scope.error},signImage:function(){return element.sign_image},element:function(){return element}}}).result.then(function(signature){$scope.signature=signature,element.sign_text=signature.text,element.sign_font=signature.font,element.sign_image=signature.image,element.value=signature.text||signature.image,element.is_signed=!0,clientSignatureData.documents.forEach(function(doc){doc.pages.forEach(function(page){page.elements.forEach(function(elem){elem.is_signed&&elem.recipient_fprint===clientSignatureData.recipientFprint&&(elem.sign_text=signature.text,element.sign_font=signature.font,elem.sign_image=signature.image,elem.is_signed=!0)})})}),delete $scope.selectedElement})},$scope.handleElementClick=function(element){$scope.selectedElement=element,element.hideEditDropdown&&(element.hideEditDropdown=!1,delete $scope.selectedElement),$scope.resizing&&$scope.resizeElementEnd(event)},$scope.clearSignature=function(element){delete element.sign_text,delete element.sign_font,delete element.sign_image,element.is_signed=!1,delete $scope.selectedElement},$scope.handleClickOnCanvas=function(){delete $scope.selectedElement},$scope.isSelected=function(element){return element.recipient_fprint===clientSignatureData.recipientFprint&&element===$scope.selectedElement},$scope.handleMouseMoveOnCanvas=function(event){if($scope.resizing)return void $scope.resize(event)},$scope.handleMouseLeaveOnCanvas=function(event){$scope.resizing&&$scope.resizeElementEnd(event)},$scope.showSignature=function(element){element.hideEditDropdown=!0,$scope.signature&&($scope.signature.text||$scope.signature.image)?(element.is_signed=!0,element.value=$scope.signature.text||$scope.signature.image,element.sign_image=$scope.signature.image,element.sign_text=$scope.signature.text,element.sign_font=$scope.signature.font):$scope.openSignatureModal(element)},$scope.submitSignature=function(){$scope.error.showError=!1;var incompleteElements=[],signatureElements={};clientSignatureData.documents.forEach(function(document){document.pages.forEach(function(page){page.elements.forEach(function(element){!element.is_signed&&element.is_assigned&&element.input_type===kInputType.SIGNATURE_BLOCK&&incompleteElements.push(element)})})});var modal;0===incompleteElements.length?modal=$uibModal.open({controller:"ConfirmModalCtrl",templateUrl:"../sign/static/sign/js/partials/confirm_modal.html"}).result.then(function(proceed){proceed&&(signatureElements.elements=[],clientSignatureData.documents.forEach(function(doc){doc.pages.forEach(function(page){page.elements.forEach(function(elem){elem.is_signed&&elem.sign_image&&elem.recipient_fprint===clientSignatureData.recipientFprint&&signatureElements.elements.push({id:elem.id,image_width:elem.image_width,image_height:elem.image_height}),elem.is_signed&&elem.sign_text&&elem.sign_font&&elem.recipient_fprint===clientSignatureData.recipientFprint&&(signatureElements.text=elem.sign_text,signatureElements.font=elem.sign_font)})})}),allSignedService(clientSignatureData.recipientFprint,signatureElements))}):($scope.error.showError=!0,$scope.error.errorMessage="Please sign before submiting the document.")},$scope.declineSignature=function(){$uibModal.open({controller:"DeclineModalCtrl",templateUrl:"../sign/static/sign/js/partials/decline_modal.html",resolve:{signature:function(){return $scope.signature}}}).result.then(function(reason){var declinePromise;reason&&(declinePromise=declineService(clientSignatureData.recipientFprint,reason),declinePromise.then(function(response){201===response.status&&($window.location.href="/sign/esign/"+clientSignatureData.recipientFprint+"/")},function(error){[404,410].indexOf(error.status)!==-1&&($window.location.href="/sign/esign/"+clientSignatureData.recipientFprint+"/")}))})},$scope.getUnsignedSignatureElementsInDoc=function(document){var unsignedElements=[];return document&&document.pages.forEach(function(page){page.elements.forEach(function(element){element.is_assigned&&!element.is_signed&&element.input_type===kInputType.SIGNATURE_BLOCK&&unsignedElements.push(element)})}),unsignedElements},$scope.nextSignature=function(){if(!$scope.signatureScrolling){var BrowswerHeight=$(window).height(),scrollTimeMillis=($("body").scrollTop(),500);if($(".sign-button--recipient").length>0&&$(".sign-button--recipient").first().offset().top){var nextButtonOffset=$(".sign-button--recipient").first().offset().top;nextButtonOffset&&($scope.signatureScrolling=!0,$("html, body").animate({scrollTop:nextButtonOffset-BrowswerHeight/2},scrollTimeMillis,function(){$scope.signatureScrolling=!1}))}}},$scope.getElementPosition=layoutUtils.getElementPosition,$scope.getTextOrParagraphValue=layoutUtils.getTextOrParagraphValue,$scope.isPackageHeaderElement=layoutUtils.isPackageHeaderElement,$scope.kInputType=kInputType}]).controller("SignatureModalCtrl",["$scope","$uibModalInstance","$uibModal","signature","error","apiUrlService","uploadPhotoService","deletePhotoService","clientSignatureData","signImage","element","kSignOption","uploadPhotoUtils",function($scope,$uibModalInstance,$uibModal,signature,error,apiUrlService,uploadPhotoService,deletePhotoService,clientSignatureData,signImage,element,kSignOption,uploadPhotoUtils){$scope.error=error,$scope.signature=signature||{},$scope.signature.image=signImage||"",$scope.obj={},$scope.selectedElement=element,$scope.kSignOption=kSignOption,$scope.error.showEmptySignError=!1,$scope.signOption=kSignOption.TYPE_IN,$scope.selectedElement.sign_image&&($scope.signOption=kSignOption.IMAGE),$scope.selectedElement.sign_font?$scope.fontStyle=$scope.selectedElement.sign_font:$scope.fontStyle="La Belle Aurore",$scope.readyToInsert=function(){return $scope.agreed&&$scope.imageUploadCompleted},$scope.confirm=function(signature){return $scope.signature.text||$scope.signature.image?(signature.imageUrl=$scope.signatureImgSource,void $uibModalInstance.close(signature)):($scope.error.showEmptySignError=!0,void($scope.error.errorMessage="Please enter your signature"))},$scope.hasImageExtension=function(file){var extension=file.getExtension(),arrayOfExtensions=["jpeg","jpg","png"];return arrayOfExtensions.indexOf(extension)!==-1},$scope.openImageUploader=function(){var file=$scope.obj.flow.files[0];if($scope.error.showEmptySignError=!1,file&&$scope.hasImageExtension(file)){if(file.file.size>25e4)return $scope.error.showEmptySignError=!0,$scope.error.errorMessage="Image exceeds max size limit of 250KB",void($scope.obj.flow.files=[]);$scope.imageUploadCompleted=!1,uploadPhotoUtils.readImageFromFile(file.file).then(function(image){var transparentImage=uploadPhotoUtils.makeBackgroundTransparent(image);return transparentImage?(file.file=uploadPhotoUtils.dataURItoBlob(transparentImage),file.file=uploadPhotoUtils.blobToFile(file.file,"signature.png"),void uploadPhotoService(file.file,{recipient_fprint:clientSignatureData.recipientFprint},apiUrlService.baseSignApi()+"image/").then(function(response){return 201===response.status&&($scope.signature.image=response.data.signature_image_path,$scope.signatureImgSource=response.data.signature_image_url,$scope.imageUploadCompleted=!0,$scope.error.showEmptySignError=!1,$scope.obj.flow.files=[]),response},function(err){$scope.error.showEmptySignError=!0,$scope.error.errorMessage="Please try again.",$scope.obj.flow.files=[]})):($scope.imageUploadCompleted=!0,$scope.error.showEmptySignError=!0,$scope.error.errorMessage="Please try again.",void($scope.obj.flow.files=[]))})}else $scope.error.showEmptySignError=!0,$scope.error.errorMessage=$scope.error.errorMessage||"Please try with a different image.",$scope.obj.flow.files=[]},$scope.deleteImage=function(){deletePhotoService(apiUrlService.baseSignApi()+"image/",{recipient_fprint:clientSignatureData.recipientFprint}).then(function(response){204===response.status&&(delete $scope.signature.image,delete $scope.signature.imageUrl,delete $scope.signatureImgSource,delete $scope.selectedElement.sign_image,delete $scope.selectedElement.value,$scope.selectedElement.is_signed=!1,$scope.signOption=kSignOption.TYPE_IN)})}}]).controller("DeclineModalCtrl",["$scope","$uibModalInstance","signature",function($scope,$uibModalInstance,signature){$scope.confirm=function(reason){$uibModalInstance.close(reason)}}]).controller("ConfirmModalCtrl",["$scope","$uibModalInstance",function($scope,$uibModalInstance){$scope.confirm=function(proceed){$uibModalInstance.close(proceed)}}]).controller("PreviewCtrl",["$scope","$stateParams","clientSignatureData","layoutUtils","signUtils","kInputType","kWhoSigns","SignActions","auditTrailService","assignmentService","detectBrowser","printStateService",function($scope,$stateParams,clientSignatureData,layoutUtils,signUtils,kInputType,kWhoSigns,SignActions,auditTrailService,assignmentService,detectBrowser,printStateService){$scope.kWhoSigns=kWhoSigns,$scope.signatureData=clientSignatureData,$scope.getElementPosition=layoutUtils.getElementPosition,$scope.getElementPositionWithPageTopMargin=layoutUtils.getElementPositionWithPageTopMargin,$scope.getTextOrParagraphValue=layoutUtils.getTextOrParagraphValue,$scope.isPackageHeaderElement=layoutUtils.isPackageHeaderElement,$scope.getRecipientSignatureStatus=signUtils.getRecipientSignatureStatus,$scope.getPackageStatus=signUtils.getPackageStatus,$scope.getRecipientName=signUtils.getRecipientName,$scope.kInputType=kInputType,$scope.auditActions=SignActions,$scope.printStateService=printStateService,$scope.audit={},$scope.userIsSender=!1,$scope["package"]=clientSignatureData,$scope.getFormattedDate=signUtils.getFormattedDate,$scope.browserName=detectBrowser(navigator.userAgent).name,$scope.printCombined=function(){printStateService.showPrintingProgress=!0,printStateService.printSignaturePreview=!0},auditTrailService($stateParams.package_fprint).then(function(response){200===response.status?$scope.audit.auditTrail=response.data:window.location="https://www.lawyaw.com"}),assignmentService($stateParams.package_fprint).then(function(response){200===response.status?(clientSignatureData.documents=response.data.documents,clientSignatureData.fprint=response.data.fprint,clientSignatureData.title=response.data.title,clientSignatureData.recipients=response.data.recipients,clientSignatureData.who_signs=response.data.who_signs,clientSignatureData.lawyaw_document_ids=response.data.lawyaw_document_ids):window.location="https://www.lawyaw.com"})}])}(),function(){angular.module("ClientSignatureDirectivesApps",[]).directive("signatureElements",[function(){return{templateUrl:"../sign/static/sign/js/partials/signature_element.html"}}]).directive("signatureDocumentPreview",[function($state){return{restrict:"E",templateUrl:"../commons/js/partials/signature_document_preview.html",link:function($scope,$element,$attrs){$scope.exportMode=$scope.$eval($attrs.exportMode),$scope.marginBottom=$scope.$eval($attrs.marginBottom),$scope.marginLeft=$scope.$eval($attrs.marginLeft),$scope.marginTop=$scope.$eval($attrs.marginTop),$scope.marginRight=$scope.$eval($attrs.marginRight)}}}]).directive("auditPreview",[function($state){return{restrict:"E",templateUrl:"../commons/js/partials/audit.html"}}]).directive("auditDownload",[function($state){return{restrict:"E",templateUrl:"../commons/js/partials/audit_download.html"}}]).directive("signatureTrailPreview",[function($state){return{restrict:"E",templateUrl:"../commons/js/partials/signature_trail_preview.html"}}]).directive("signatureLawyawLogo",[function(){return{restrict:"E",templateUrl:"../commons/js/partials/signature_lawyaw_logo.html"}}])}(),function(){angular.module("ClientSignatureServicesApp",["CommonsServices"]).factory("clientSignatureData",[function(){var clientSignatureData={};return clientSignatureData.recipientFprint={},clientSignatureData.documents=[],clientSignatureData.currentDocumentIndex=0,clientSignatureData}]).factory("initClientSignatureData",["$http","$window","$cookies","apiUrlService","clientSignatureData","commonErrorCallback",function($http,$window,$cookies,apiUrlService,clientSignatureData,commonErrorCallback){return function(recipientFprint){$http({method:"POST",ignoreLoadingBar:!0,url:apiUrlService.baseSignApi()+"package/",headers:{"Content-Type":"application/json",timezone:(new Date).getTimezoneOffset()},data:{recipient_fprint:recipientFprint}}).then(function(response){200===response.status&&(clientSignatureData.documents=response.data.documents,clientSignatureData.title=response.data.title,clientSignatureData.currentDocumentIndex=0)},function(error){404!==error.status&&400!==error.status||($window.location.href="/sign/esign/"+recipientFprint+"/"),commonErrorCallback(error)})}}]).factory("allSignedService",["$http","$cookies","$window","apiUrlService","commonErrorCallback",function($http,$cookies,$window,apiUrlService,commonErrorCallback){return function(recipientFprint,signature){$http({method:"POST",url:apiUrlService.baseSignApi()+"action/",headers:{"Content-Type":"application/json",timezone:(new Date).getTimezoneOffset()},data:{recipient_fprint:recipientFprint,text:signature.text,font:signature.font,action:"submit",elements:signature.elements}}).then(function(response){201===response.status&&($window.location.href="/sign/esign/"+recipientFprint+"/")},function(error){[404,410].indexOf(error.status)!==-1&&($window.location.href="/sign/esign/"+recipientFprint+"/"),commonErrorCallback(error)})}}]).factory("declineService",["$http","$cookies","apiUrlService",function($http,$cookies,apiUrlService){return function(recipientFprint,reason){return $http({method:"POST",url:apiUrlService.baseSignApi()+"action/",headers:{"Content-Type":"application/json",timezone:(new Date).getTimezoneOffset()},data:{recipient_fprint:recipientFprint,action:"decline",reason:reason}})}}]).factory("auditTrailService",["$http","apiUrlService",function($http,apiUrlService){return function(packageFprint){return $http({method:"GET",url:apiUrlService.baseSignApi()+"audit/?package_fprint="+packageFprint,headers:{"Content-Type":"application/json",timezone:(new Date).getTimezoneOffset()}})}}]).factory("assignmentService",["$http","apiUrlService",function($http,apiUrlService){return function(packageFprint){return $http({method:"GET",url:apiUrlService.baseSignApi()+"assignment/?package_fprint="+packageFprint,headers:{"Content-Type":"application/json",timezone:(new Date).getTimezoneOffset()}})}}])}(),angular.module("templates-commons",["../commons/js/partials/audit.html","../commons/js/partials/audit_download.html","../commons/js/partials/file_preview.html","../commons/js/partials/grip_directive.html","../commons/js/partials/image_cropper.html","../commons/js/partials/profile_dropdown.html","../commons/js/partials/sign_download.html","../commons/js/partials/sign_modal.html","../commons/js/partials/signature_document_preview.html","../commons/js/partials/signature_error_message.html","../commons/js/partials/signature_image.html","../commons/js/partials/signature_lawyaw_logo.html","../commons/js/partials/signature_preview.html","../commons/js/partials/signature_trail_preview.html","../commons/js/partials/text_input_modal.html","../commons/js/partials/ui_notification.html","../commons/js/partials/vault.html","../commons/js/partials/vault_file.html","../commons/js/partials/vault_rename.html","../commons/js/partials/yes_no_dialog.html"]),angular.module("../commons/js/partials/audit.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/audit.html",'<div class="card audit-trail--preview m-t-16">\n  <div class="card__section card__section--header">\n    <h2 class="section-heading">\n      Summary\n    </h2>\n  </div>\n\n  <div class="card__section">\n    <div class="textfield">\n      <label  class="textfield__label">Title</label>\n      <span class="textfield__text">\n        {{ signatureData.title || getDocumentNames(signatureData.documents) }}\n      </span>\n    </div>\n\n    <div class="textfield" ng-if="signatureData.emailMessage">\n      <label  class="textfield__label">Email Message:</label>\n      <span class="textfield__text">\n        {{ signatureData.emailMessage }}\n      </span>\n    </div>\n\n    <div class="textfield">\n      <label  class="textfield__label">Status</label>\n      <div class="status-container status-container--sign"\n           ng-class="{\'status-container--progress\' : getPackageStatus(signatureData) === \'Out for signature\',\n                     \'status-container--declined\': [\'Declined\', \'Link expired\'].indexOf(getPackageStatus(signatureData)) !== -1,\n                     \'status-container--completed\': getPackageStatus(signatureData) === \'Closed\'}">\n        {{getPackageStatus(signatureData)}}\n      </div>\n    </div>\n\n    <div class="textfield">\n      <label  class="textfield__label">Package ID:</label>\n      <span class="textfield__text">\n        {{signatureData.fprint}}\n      </span>\n    </div>\n  </div>\n</div>\n\n<div class="card audit-trail--preview">\n  <div class="card__section card__section--header">\n    <h2 class="section-heading">Recipients</h2>\n  </div>\n\n  <div class="card__section"\n       ng-if="!(recipient.sign_order === 0 && signatureData.who_signs === kWhoSigns.OTHERS)"\n       ng-repeat="recipient in signatureData.recipients">\n      <div>\n        <div>\n          <div class="m-b-2">\n            {{recipient.email ? getRecipientName(recipient) + \' (\' + recipient.email + \')\' : getRecipientName(recipient)}}\n          </div>\n          <div>\n            <div class="recipient-status"\n                 ng-class="{\'recipient-status--signed\': getRecipientSignatureStatus(recipient) === \'Signed\',\n                           \'recipient-status--pending\': getRecipientSignatureStatus(recipient) === \'Signature pending\',\n                           \'recipient-status--declined\': [\'Declined\', \'Link Expired\'].indexOf(getRecipientSignatureStatus(recipient)) !== -1}">\n              <div>{{getRecipientSignatureStatus(recipient)}}</div>\n            </div>\n            <button class="btn btn--slim pull-right"\n                      ng-click="sendReminderEmail(recipient.email)"\n                      ng-if="recipient.sign_order!==0 &&\n\t\t\t     recipient.email_sent && !recipient.submitted &&\n\t\t\t     !recipient.declined && !recipient.expired &&\n                             (recipient.email !== userDataService.email)">\n                Send reminder\n              </button>\n              <button class="btn btn--slim pull-right"\n                      ng-click="sendNewLinkEmail(recipient.email)"\n                      ng-if="recipient.sign_order!==0 && recipient.email_sent &&\n\t\t\t     !recipient.submitted && !recipient.declined &&\n\t\t\t     recipient.expired">\n                Send new link\n              </button>\n              <button class="btn btn--primary btn--slim pull-right"\n                      ng-click="startSigning(recipient)"\n                      ng-if="showStartSigningButton(recipient)">\n                Start signing\n              </button>\n          </div>\n        </div>\n      </div>\n  </div>\n</div>\n');
}]),angular.module("../commons/js/partials/audit_download.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/audit_download.html",'<div class="audit-download">\n  <h3 class="audit-download__title">\n    <span class="audit-download__label">Document Title: </span>\n    {{ getDocumentNames(signatureData.documents) }}\n  </h3>\n  <h3 class="audit-download__id">\n    <span class="audit-download__label">Status: </span>\n    {{ getPackageStatus(signatureData) }}\n  </h3>\n  <h3 class="audit-download__id" ng-if="signatureData.title">\n    <span class="audit-download__label">Email Title: </span>\n    {{ signatureData.title }}\n  </h3>\n  <h3 class="audit-download__id" ng-if="signatureData.emailMessage">\n    <span class="audit-download__label">Email Message: </span>\n    {{ signatureData.emailMessage }}\n  </h3>\n  <h3 class="audit-download__id">\n    <span class="audit-download__label">Package ID: </span>{{signatureData.fprint}}</h3>\n  <div class="table-wrapper">\n    <table class="content-table content-table--audit-download">\n      <thead class="content-table__header">\n        <tr>\n          <th>Action</th>\n          <th>Recipient</th>\n          <th>Time</th>\n          <th>IP</th>\n        </tr>\n      </thead>\n      <tbody>\n          <tr ng-repeat="auditLog in audit.auditTrail">\n            <td>{{auditActions[auditLog.action]}}</td>\n'+"            <td>{{auditLog.recipient.name + ' (' + auditLog.recipient.email + ')'}}</td>\n            <td>{{getFormattedDate(auditLog.timestamp)}}</td>\n            <td>{{'IP: ' + auditLog.ip_address}}</td>\n          </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n")}]),angular.module("../commons/js/partials/file_preview.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/file_preview.html",'<div class="modal-header modal-header--file">\n<div class="modal__dismiss">\n  <a href="" ng-click="cancel()">\n    <span class="icon-close"></span>\n  </a>\n</div>\n  <h3 class="modal-title modal__file-name">\n    {{file.name}}\n  </h3>\n  <div class="modal__icon-button">\n     <a href="{{file.docfile_url}}" download="{{file.download_name}}"><span class="icon-download modal__icon"></span></a>\n  </div>\n\n</div>\n<div class="modal-body">\n  <embed ng-src="{{file.displayfile_url}}"\n         class="magnified-document">\n  </embed>\n</div>\n')}]),angular.module("../commons/js/partials/grip_directive.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/grip_directive.html",'<svg class="drag-handle" width="8px" height="18px" viewBox="0 0 8 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g id="drag-handle" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Group-2" fill="#D1D3D6">\n            <rect id="Rectangle-2" x="0" y="0" width="2.7" height="2.7"></rect>\n            <rect id="Rectangle-2-Copy-2" x="0" y="5.1" width="2.7" height="2.7"></rect>\n            <rect id="Rectangle-2-Copy" x="5.1" y="0" width="2.7" height="2.7"></rect>\n            <rect id="Rectangle-2-Copy-3" x="5.1" y="5.1" width="2.7" height="2.7"></rect>\n            <rect id="Rectangle-2-Copy-5" x="0" y="10.2" width="2.7" height="2.7"></rect>\n            <rect id="Rectangle-2-Copy-4" x="5.1" y="10.2" width="2.7" height="2.7"></rect>\n            <rect id="Rectangle-2-Copy-7" x="0" y="15.3" width="2.7" height="2.7"></rect>\n            <rect id="Rectangle-2-Copy-6" x="5.1" y="15.3" width="2.7" height="2.7"></rect>\n        </g>\n    </g>\n</svg>\n')}]),angular.module("../commons/js/partials/image_cropper.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/image_cropper.html",'<div class="modal-header">\n</div>\n<div class="modal-body modal-body--img-cropper">\n  <div class="cropArea" ng-init="croppedImage=\'\';">\n    <img-crop\n      image="image"\n      result-image="croppedImage"\n      result-image-format="image/png"\n      class="crop-container"\n      area-type="square" >\n    </img-crop>\n  </div>\n</div>\n<div class="modal-footer modal-footer--client-access">\n  <button class="btn btn--cancel"\n          ng-click="cancel()">Cancel\n  </button>\n  <button class="btn btn--primary"\n          ng-click="transferCroppedImage()">\n    Confirm\n  </button>\n</div>\n')}]),angular.module("../commons/js/partials/profile_dropdown.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/profile_dropdown.html",'<div uib-dropdown uib-dropdown-toggle class="main-nav__item--account pull-right">\n   <a>\n      <div class="clearfix">\n         <div class="profile-pic profile-pic--small"\n            ng-class="{\'with-image\': membershipData.getMemberProfilePicUrl()}">\n            <img ng-if="membershipData.getMemberProfilePicUrl()"\n               ng-src="{{membershipData.getMemberProfilePicUrl()}}"/>\n            <span ng-if="!membershipData.getMemberProfilePicUrl()">\n            {{membershipData.getMemberInitials()}}\n            </span>\n         </div>\n         <span class="icon-arrow-drop-down"></span>\n      </div>\n   </a>\n   <ul uib-dropdown-menu class="dropdown-menu--account">\n      <li class="dropdown__item">\n         <a ng-click="gotoSettings()">Account</a>\n      </li>\n      <li class="dropdown__item">\n        <a ng-click="gotoSupport()">Support</a>\n      </li>\n      <li class="dropdown__item">\n         <a href ng-click="logout()">Logout</a>\n      </li>\n   </ul>\n</div>\n')}]),angular.module("../commons/js/partials/sign_download.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/sign_download.html",'<div download-signature-package-block="">\n  <audit-download></audit-download>\n  <div ng-repeat="doc in signatureData.documents"\n     class="picture-with-fields document-list-container">\n    {{inputDoc = doc; ""}}\n    <signature-document-preview\n      export-mode="true"\n      margin-bottom="0" margin-left="0" margin-top="0" margin-right="0">\n    </signature-document-preview>\n  </div>\n</div>\n')}]),angular.module("../commons/js/partials/sign_modal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/sign_modal.html",'<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <h3 class="modal-title ng-binding">Insert signature</h3>\n\n      <div class="tabs-container clearfix">\n        <ul class="tabs">\n          <li class="tab__title-container">\n            <span class="tab__title"\n                  ng-click="signOption = kSignOption.TYPE_IN;"\n                  ng-class="{\'is-active\': signOption === kSignOption.TYPE_IN}">\n              Type in\n            </span>\n          </li>\n          <li class="tab__title-container">\n            <span class="tab__title"\n                  ng-click="signOption = kSignOption.IMAGE;"\n                  ng-class="{\'is-active\': signOption === kSignOption.IMAGE}">\n              Use image\n            </span>\n          </li>\n        </ul>\n      </div>\n    </div>\n\n    <div class="modal-body modal-body--confirm">\n      <form>\n        <div ng-show="signOption === kSignOption.IMAGE">\n          <div class="sign-img-container" flow-init  flow-name="obj.flow">\n            <div ng-show="!signatureImgSource">\n              <div\n                flow-files-submitted="openImageUploader()"\n                class="btn btn--primary" flow-btn="">\n                Upload image\n              </div>\n            </div>\n            <span class="modal-fine-print m-t-2" ng-show="!signatureImgSource">\n              Maximum file size 250KB, accepted formats: png & jpg.\n            </span>\n\n            <div class="sign-img__action-panel" ng-show="signatureImgSource">\n              <div>\n                <img class="sign-img"\n                     ng-if="imageUploadCompleted"\n                     ng-src="{{ signatureImgSource }}">\n                <span ng-if="!imageUploadCompleted"\n                      class="loader">\n                </span>\n              </div>\n              <div class="sign-img__action-btn-container">\n                <button class="btn m-b-2"\n                        type="submit"\n                        ng-click="deleteImage()">\n                  Delete\n                </button>\n                <button\n                        flow-files-submitted="openImageUploader()"\n                  class="btn btn--primary pull-right" flow-btn="">\n                  Upload new\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div ng-show="signOption === kSignOption.TYPE_IN">\n          <div class="input-wrapper p-r-0 p-t-0">\n            <label class="textfield__label">\n              Type in your signature\n            </label>\n            <input type="text" class="input-box input-box--large"\n                   placeholder="{{signature.text}}"\n                   ng-style="{\'font-family\': fontStyle}"\n                   ng-focus="error.showEmptySignError=false"\n                   ng-model="signature.text">\n          </div>\n          <div class="input-wrapper p-l-0 p-r-0 clearfix">\n            <label class="textfield__label">\n              Choose font\n            </label>\n            <div class="segmented-radio">\n              <div class="radio-box--segmented">\n                <input type="radio" id="font_normal"\n                       name="font"\n                       ng-click="signature.text = signature.text || \'/s/\';"\n                       ng-model="fontStyle"\n                       value="\'timesnewroman\'">\n                <label for="font_normal" class="radio-label radio-label--large">\n                  Normal\n                </label>\n              </div>\n              <div class="radio-box--segmented">\n                <input type="radio" id="font_cursive"\n                       name="font"\n                       ng-model="fontStyle"\n                       ng-value="\'La Belle Aurore\'">\n                <label for="font_cursive" class="radio-label radio-label--large">\n                  Cursive\n                </label>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div ng-if="error.showEmptySignError"\n             class="error-message m-t-2">\n          {{error.errorMessage}}\n        </div>\n      </form>\n    </div>\n    <div class="modal-footer clearfix">\n      <div class="checkbox m-t-0 m-b-0 pull-left">\n        <label class="checkbox-field">\n          <input type="checkbox" ng-model="agreed">\n          <span class="checkbox-field__name m-l-1">\n            I agree this is a legal representation of my signature.\n          </span>\n        </label>\n      </div>\n      <button class="btn btn--primary pull-right"\n              type="submit"\n              ng-disabled="signOption === kSignOption.IMAGE ? !readyToInsert() : !agreed"\n              ng-click="signOption === kSignOption.IMAGE ? confirm({image: signature.image}) : confirm({text: signature.text, font: fontStyle})">\n'+"        {{(signature.text === undefined) || (signature.text === null) ? 'Insert' : 'Update'}}\n      </button>\n    </div>\n  </div>\n</div>\n")}]),angular.module("../commons/js/partials/signature_document_preview.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/signature_document_preview.html",'<div class="non-draggable">\n  <!--page-->\n  <div ng-repeat="page in inputDoc.pages">\n    <img\n      ng-style="{\'margin-bottom\': marginBottom, \'margin-top\': marginTop, \'margin-left\': marginLeft}"\n      class="non-draggable document-picture document-picture--preview" imgload\n      ng-src="{{page.background_url}}"/>\n  </div>\n  <!--page-->\n\n  <!-- signature-elements  -->\n  <div ng-show="!imgLoading"\n        ng-repeat="page in inputDoc.pages"\n        ng-init="pageIndex = $index">\n    <div ng-repeat="element in page.elements"\n          class="field-overlay black-field"\n          ng-style="getElementPositionWithPageTopMargin(element, pageIndex, marginLeft, marginTop)">\n      <!-- preview for textbox and textarea elements. -->\n      <div ng-if="element.input_type === kInputType.TEXTBOX ||\n                  element.input_type === kInputType.TEXTAREA"\n            ng-class="{\'black-field\': exportMode,\n                      \'singleline\': element.input_type === kInputType.TEXTBOX,\n                      \'multiline\': element.input_type === kInputType.TEXTAREA}">\n        <span ng-bind-html="getTextOrParagraphValue(\n          element, element.input_type)"\n              ng-class="{\'package-header-element\': isPackageHeaderElement(element)}"\n              clip-overflow=""\n              lawyaw-element=element\n              adjust-span-font-size-on-text-overflow=""\n              element-height="{{element.height}}"\n              input-type="{{element.input_type}}">\n        </span>\n      </div>\n      <!-- preview for checkboxes. -->\n      <div class="checkbox-container"\n            ng-if="element.input_type === kInputType.CHECKBOX">\n        <span ng-if="element.value" class="icon-check">\n        </span>\n      </div>\n\n      <!-- display signature in signed elements. -->\n      <!-- Override font from the value recieved from backend. -->\n      <div class="sign-name-text"\n           ng-class="{\'black-field\': exportMode}"\n           ng-style="{\'font-family\': element.recipient.font}"\n           ng-if="element.recipient  && element.recipient.text &&\n                  element.input_type === kInputType.SIGNATURE_BLOCK">\n        {{element.recipient.text}}\n      </div>\n\n      <!-- display signature image if user has not entered text and has added an image. -->\n      <div class="sign-name-text"\n           ng-if="element.recipient &&\n\t\t  element.recipient.image && !(element.recipient.text) &&\n                  element.input_type === kInputType.SIGNATURE_BLOCK">\n        <img class="signature-img"\n             ng-src="{{signature.image || element.recipient.image}}"\n             width="{{element.image_width}}"\n             height="{{element.image_height}}"\n             draggable="false">\n      </div>\n\n      <!-- display data in date elements. -->\n      <div class="date-text"\n            ng-if="element.recipient  && element.value &&\n                  element.input_type === kInputType.SIGNATURE_DATE">\n        {{element.value}}\n      </div>\n    </div>\n  </div>\n</div>\n')}]),angular.module("../commons/js/partials/signature_error_message.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/signature_error_message.html",'<div>\n  <a href="#" class="close" data-dismiss="alert" aria-label="close" ng-click="error.showError=false;">&times;</a>\n  {{error.errorMessage}}\n</div>\n')}]),angular.module("../commons/js/partials/signature_image.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/signature_image.html",'<!-- Template for signature image -->\n<img class="signature-img non-draggable"\n     ng-src="{{imageUrl}}"\n     width="{{element.image_width_temp || element.image_width || element.width}}"\n     ng-class="{\'signature-img--selected\': elementIsSelected}"\n     draggable="false"\n     ondragstart="return false;">\n<!-- html5\'s `draggable=false` does not work on firefox.\n     To make the image non draggable use: ondragstart="return false;"-->\n<div ng-if="elementIsSelected" class="svg-icon-container control-container control-container--move control-container--move-sign non-printable"\n     ng-style="{\'left\': element.image_width_temp || element.image_width || element.width}"\n     ng-click="baseElementScope.resizeElementEnd($event)"\n     ng-mousedown="resizeElementStart($event, element)">\n     <svg name="icon-resize" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 16 16" xml:space="preserve" width="100%" height="100%">\n       <g>\n         <polygon points="9,2 12.6,2 8.6,6 10,7.4 14,3.4 14,7 16,7 16,0 9,0 "></polygon>\n         <polygon data-color="color-2" points="6,8.6 2,12.6 2,9 0,9 0,16 7,16 7,14 3.4,14 7.4,10 "></polygon>\n       </g>\n     </svg>\n</div>\n')}]),angular.module("../commons/js/partials/signature_lawyaw_logo.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/signature_lawyaw_logo.html",'<svg width="75px" height="40px" viewBox="0 0 134 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="blue" transform="translate(-4.000000, -3.000000)">\n            <g id="logo" transform="translate(4.000000, 3.000000)">\n                <g id="Group" transform="translate(2.000000, 2.000000)">\n                    <rect id="Rectangle" fill="#FFFFFF" x="0" y="0" width="36" height="36"></rect>\n                    <g id="lawyaw-logo-white" transform="translate(5.000000, 6.000000)" fill="#2962FF">\n                        <g id="Symbols">\n                            <g id="logo">\n                                <g id="text" transform="translate(45.000000, 6.000000)">\n                                    <path d="M0,0 L2.6290606,0 L2.6290606,9.85073816 L7.49956389,9.85073816 L7.49956389,12.3658203 L0,12.3658203 L0,0 L0,0 Z M14.079438,0 L16.2534688,0 L21.4441781,12.3658203 L18.4780585,12.3658203 L17.4500284,9.74594318 L12.8154665,9.74594318 L11.8211423,12.3658203 L8.92243448,12.3658203 L14.079438,0 L14.079438,0 Z M15.0906151,3.59796469 L13.6412612,7.44045112 L16.556822,7.44045112 L15.0906151,3.59796469 L15.0906151,3.59796469 Z M22.1760777,0 L25.0410796,0 L26.9454632,7.92949486 L26.9791691,7.92949486 L29.4734061,0 L31.9170842,0 L34.3944682,8.13908515 L34.4281741,8.13908515 L36.4336755,0 L39.0964419,0 L35.6078808,12.3658203 L33.2653204,12.3658203 L30.6362598,3.80755482 L30.6025539,3.80755482 L27.9734934,12.3658203 L25.7151978,12.3658203 L22.1760777,0 L22.1760777,0 Z M44.4123446,7.09113419 L39.9294592,0 L43.198932,0 L45.7268749,4.62844974 L48.4064943,0 L51.5242904,0 L47.0414052,7.09113419 L47.0414052,12.3658203 L44.4123446,12.3658203 L44.4123446,7.09113419 L44.4123446,7.09113419 Z M56.2840457,0 L58.4580767,0 L63.648786,12.3658203 L60.6826664,12.3658203 L59.6546361,9.74594318 L55.0200743,9.74594318 L54.0257502,12.3658203 L51.1270423,12.3658203 L56.2840457,0 L56.2840457,0 Z M57.295223,3.59796469 L55.845869,7.44045112 L58.7614297,7.44045112 L57.295223,3.59796469 L57.295223,3.59796469 Z M64.8020093,0 L67.6670112,0 L69.5713949,7.92949486 L69.6051009,7.92949486 L72.0993377,0 L74.5430159,0 L77.0203999,8.13908515 L77.0541057,8.13908515 L79.0596071,0 L81.7223736,0 L78.2338123,12.3658203 L75.891252,12.3658203 L73.2621915,3.80755482 L73.2284856,3.80755482 L70.599425,12.3658203 L68.3411293,12.3658203 L64.8020093,0 L64.8020093,0 Z" id="LAWYAW"></path>\n                                </g>\n                            </g>\n                        </g>\n                    </g>\n                </g>\n                <path d="M36.9934988,0 C38.6539436,0 40,1.34230941 40,3.0065012 L40,36.9934988 C40,38.6539436 38.6576906,40 36.9934988,40 L3.0065012,40 C1.34605644,40 0,38.6576906 0,36.9934988 L0,3.0065012 C0,1.34605644 1.34230941,0 3.0065012,0 L36.9934988,0 Z M30.9463434,8.04409368 L22.8124856,8.04409368 L12.5550762,17.9635569 L12.5550762,25.8630709 L7.97246278,30.5434704 L7.97246278,31.7421326 L30.9723642,31.8805404 L30.9723642,31.255843 C30.7532574,31.030666 30.6296587,30.9037333 30.4104534,30.6785563 L9.62231794,30.5534357 L13.2817852,26.8161221 L21.2086596,26.8161221 L30.9463434,16.3516844 L30.9463434,8.04409368 Z M23.2323662,22.841351 L20.6875542,25.5760886 L14.4958909,25.5760886 L17.1737638,22.841351 L23.2323662,22.841351 Z M16.4404511,15.9139129 L16.4404511,21.8950441 L13.7692805,24.6230374 L13.7692805,18.4970562 L16.4404511,15.9139129 Z M28.9248051,16.7240266 L24.3862497,21.6013174 L18.3878695,21.6013174 L23.163569,16.7240266 L28.9248051,16.7240266 Z M22.4302561,10.1214192 L22.4302561,15.7778203 L17.6545568,20.6551111 L17.6545568,14.7397112 L22.4302561,10.1214192 Z M29.7322377,9.28412723 L29.7322377,15.4840936 L23.6444604,15.4840936 L23.6444604,9.28412723 L29.7322377,9.28412723 Z" id="Combined-Shape" fill="#2962FF"></path>\n            </g>\n        </g>\n    </g>\n</svg>')}]),angular.module("../commons/js/partials/signature_preview.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/signature_preview.html",'<div class="wrapper--sign--preview">\n  <!-- in isolated view many views and their data is not available as user is not\n      authenticated. Don\'t render any of these to prevent any unpredicted behavior.\n      Never use any ng-show bullshit; it\'s not worth the efficiency.\n  -->\n  <div class="header header--sign-preview non-printable" ng-if="userIsSender">\n\n    <div class="row">\n      <div class="header__main col-xs-7 p-l-0">\n        <h1 class="header__name header__name--parent"><a href ng-click="gotoClientInfo()">{{projectData.project.client_name}}</a></h1>\n        <span class="icon-breadcrumb"></span>\n        <h1 class="header__name header__name--parent">{{projectData.project.title}}\n          <span class="clearfix star-container star-container--header"\n                ng-click="toggleProjectStar(projectData.project, !projectData.project.is_starred);\n                          $event.stopPropagation();">\n              <span ng-class="projectData.project.is_starred ? \'icon-star-filled\': \'icon-star-empty\'">\n              </span>\n          </span>\n        </h1>\n        <span class="icon-breadcrumb"></span>\n        <h1 class="header__name">{{ signatureData.title || getDocumentNames(signatureData.documents) }}\n            <span class="clearfix star-container star-container--header"\n                  ng-click="toggleProjectStar(projectData.project, !projectData.project.is_starred);\n                            $event.stopPropagation();">\n                <span ng-class="projectData.project.is_starred ? \'icon-star-filled\': \'icon-star-empty\'">\n                </span>\n            </span>\n        </h1>\n      </div>\n      <div class="header__actions">\n        <profile-dropdown></profile-dropdown>\n      </div>\n    </div>\n\n    <div class="tabs-container clearfix">\n      <ul class="tabs">\n        <li class="tab__title-container">\n          <a ng-show="$state.is(\'base.project.info\') || $state.is(\'base.project.signatures\')"\n             ui-sref="base.project.info"\n             ng-class="{\'is-active\': $state.is(\'base.project.info\')}"\n             class="tab__title">Overview</a>\n          <a ng-click="closeSignaturePreviewPage()"\n             class="tab__title">\n             <span class="icon-arrow-back"></span>\n             Back to signed documents\n          </a>\n        </li>\n        <li class="tab__title-container">\n          <a ng-show="$state.is(\'base.project.info\') || $state.is(\'base.project.signatures\')"\n              ui-sref="base.project.signatures"\n              ng-class="{\'is-active\': $state.is(\'base.project.signatures\')}"\n              class="tab__title">Signed documents</a>\n        </li>\n      </ul>\n    </div>\n\n  </div>\n\n  <div class="sign-preview__actions non-printable">\n    <a ng-click="openCancelModal()"\n       ng-show="showCancelButton(package)"\n       class="text-link text-link--dimmed m-t-1-5">\n      <span ng-if="!printStateService.showPrintingProgress">\n        Cancel signature request\n      </span>\n    </a>\n    <div class="download-container">\n      <a ng-click="printCombined()"\n         class="btn dropdown-toggle download-dropdown">\n        <span ng-if="!printStateService.showPrintingProgress">\n        <i class="icon-download"></i>\n        Download\n        </span>\n        <div ng-if="printStateService.showPrintingProgress" class="loader download">\n        </div>\n      </a>\n    </div>\n  </div>\n\n  <div class="content-wrapper content-wrapper--816">\n    <audit-preview class="non-printable"></audit-preview>\n  </div>\n\n  <!-- different margins in preview and print (no gap between pages in print) -->\n  <div ng-repeat="doc in signatureData.documents"\n     class="picture-with-fields document-list-container">\n    {{inputDoc = doc; ""}}\n    <signature-document-preview\n      export-mode="false"\n      margin-bottom="0" margin-left="0" margin-top="10" margin-right="0">\n    </signature-document-preview>\n  </div>\n  <div class="content-wrapper content-wrapper--816 m-t-3">\n    <signature-trail-preview></signature-trail-preview>\n  </div>\n</div>\n\n<!-- export -->\n<div class="non-printable invisible"\n     ng-if="printStateService.printSignaturePreview"\n     ng-include="\'../commons/js/partials/sign_download.html\'">\n</div>\n')}]),angular.module("../commons/js/partials/signature_trail_preview.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/signature_trail_preview.html",'<div ng-if="audit.auditTrail.length > 0"\n     class="card audit-trail--preview">\n  <div class="card__section card__section--header">\n    <h2 class="section-heading">Signature trail</h2>\n    <div>\n      <span class="audit-trail-subtitle">\n        Secured audit trail verified by\n      </span>\n      <span class="audit-trail-subtitle">\n        <signature-lawyaw-logo></signature-lawyaw-logo>\n      </span>\n    </div>\n  </div>\n  <div ng-repeat="auditLog in audit.auditTrail"\n       class="card__section">\n    <div class="bold">\n      {{auditActions[auditLog.action]}}\n    </div>\n    <div>\n'+"      {{auditLog.recipient.name + ' (' + auditLog.recipient.email + ')'}}\n    </div>\n    <div>\n      {{getFormattedDate(auditLog.timestamp)}}\n    </div>\n    <div>\n      {{'IP: ' + auditLog.ip_address}}\n    </div>\n  </div>\n</div>\n")}]),angular.module("../commons/js/partials/text_input_modal.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/text_input_modal.html",'<form ng-submit="inputText && confirm(inputText)">\n  <div class="modal-header">\n    <h3 class="modal-title">{{modalTitle}}</h3>\n  </div>\n  <div class="modal-body">\n    <div class="table-wrapper">\n      <div class="input-wrapper input-wrapper--users-modal">\n        <label for="" class="input-label">{{inputLabel}}</label>\n        <input autofocus\n          onFocus="this.select()"\n          type="text" class="input-box" ng-model="inputText">\n      </div>\n    </div>\n  </div>\n  <div class="modal-footer">\n    <button class="btn btn--cancel"\n            type="button"\n            ng-click="cancel()">\n            Cancel\n    </button>\n    <button type="submit"\n            class="btn btn--primary"\n            ng-disabled="!inputText">\n            Confirm\n    </button>\n  </div>\n</form>\n      ')}]),angular.module("../commons/js/partials/ui_notification.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/ui_notification.html",'<div class="ui-notification">\n  <h3 ng-show="title" ng-bind-html="title"></h3>\n  <div class="notification__message-container">\n    <div ng-bind-html="message"></div>\n    <span class="icon-close pull-right clickable notification-dismiss" ng-click="kill(false)"></span>\n  </div>\n</div>\n')}]),angular.module("../commons/js/partials/vault.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/vault.html",'<div class="content-wrapper"\n     ng-init="getClientVault(clientId)"\n     flow-init flow-name="obj.flow"\n     flow-drop\n     flow-drag-enter="class=\'files-container--drag\'"\n     flow-drag-leave="class=\'\'"\n     ng-class="class"\n     flow-files-submitted="uploadFile()">\n  <div ng-if="vaultIsEmpty()" class="empty-state">\n   <div class="empty-state__message">\n     <div class="empty-state__img empty-state__img-vault">\n     </div>\n     <h3>No client files</h3>\n     <p>To upload files drag them here, or <span class="text-link" flow-btn="" flow-btn>Browse</span></p>\n   </div>\n  </div>\n  <ul class="files-container clearfix">\n    <li ng-if="!vaultIsEmpty()" class="file no-drag" flow-btn="">\n      <div class="abs-center flow-btn">\n        <div class="clearfix btn btn--circle">\n          <span class="icon-add"></span>\n        </div>\n      </div>\n    </li>\n    <li class="file no-drag" ng-repeat="file in clientData.client.files">\n      <vault-file\n          file="file"\n          ng-click="clickedOnFile(file)"\n          client-id="clientData.client.profile.id"\n          file-list="clientData.client.files">\n      </vault-file>\n    </li>\n\n  </ul>\n</div>\n')}]),angular.module("../commons/js/partials/vault_file.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/vault_file.html",'<div>\n  <div class="file__preview"\n       ng-style="{opacity: file.progress/100}">\n    <div class="file__thumbnail">\n      <img class="img-responsive"\n           ng-if="!file.isLoading && file.thumbnail_url"\n           ng-src="{{file.thumbnail_url}}" />\n    </div>\n  </div>\n  <div class="file__badge">\n    <div ng-if="!file.isLoading"\n      uib-dropdown ng-click="$event.stopPropagation();" class="dropdown--file-options">\n      <div uib-dropdown-toggle class="dropdown-toggle--file-options">\n        <div class="clearfix options-container">\n        <span class="icon-options"></span>\n      </div>\n      </div>\n      <ul uib-dropdown-menu>\n        <li class="dropdown__item">\n          <a ng-click="openRenameModal(file)">Rename</a>\n        </li>\n        <li class="dropdown__item"\n            confirm-title="Delete"\n            confirm="{{file.download_name}} will be permenatly removed."\n            confirm-ok="Delete" confirm-cancel="Cancel" confirm-danger="true"\n            ng-click="trashDocument(file); $event.stopPropagation();">\n          <a href>Remove</a>\n        </li>\n        <li class="dropdown__item"\n            ng-if="file.displayfile_url"\n            ng-click="viewDocument(file); $event.stopPropagation();">\n          <a href>View</a>\n        </li>\n        <li class="dropdown__item">\n          <a href="{{file.docfile_url}}" download="{{file.download_name}}">Download</a>\n        </li>\n      </ul>\n    </div>\n    <div class="file__name">{{file.name}}</div>\n    <p ng-if="!file.isLoading"\n      class="file__meta">Uploaded {{file.created_at}}\n    </p>\n    <div ng-if="file.isLoading"\n         class="progress-bar-container">\n    <div class="progress-bar--file"\n         ng-style="{ width: file.progress + \'%\'}">\n    </div>\n    </div>\n\n  </div>\n</div>\n')}]),angular.module("../commons/js/partials/vault_rename.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/vault_rename.html",'<form ng-submit="confirm(tempName)">\n  <div class="modal-header">\n    <h3 class="modal-title">Rename File</h3>\n  </div>\n  <div class="modal-body">\n    <div class="table-wrapper">\n      <div ng-init="tempName = file.name"\n           class="input-wrapper input-wrapper--users-modal">\n           <label for="" class="input-label">Enter a new name</label>\n           <input autofocus\n                  onFocus="this.select()"\n                  type="text" class="input-box" ng-model="tempName">\n      </div>\n    </div>\n  </div>\n  <div class="modal-footer">\n      <button class="btn btn--cancel"\n              ng-click="cancel()">Cancel</button>\n      <button class="btn btn--primary"\n              ng-click="confirm(tempName)">\n              Confirm\n      </button>\n  </div>\n</form>\n');
}]),angular.module("../commons/js/partials/yes_no_dialog.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("../commons/js/partials/yes_no_dialog.html",'<div class="modal-header">\n  <h3 class="modal-title">{{data.title}}</h3>\n</div>\n<div class="modal-body modal-body--confirm">{{data.text}}</div>\n<div class="modal-footer">\n  <button class="btn btn--cancel" ng-click="cancel()">{{data.cancel}}</button>\n  <button class="btn btn--primary"\n    ng-class="{\'btn--danger\': data.danger}"\n    ng-click="ok()">{{data.ok}}</button>\n</div>\n')}]),function(root,factory){"use strict";if("function"==typeof define&&define.amd)define(["angular"],factory);else{if("undefined"==typeof module||"object"!=typeof module.exports)return factory(root.angular);module.exports=factory(require("angular"))}}(this,function(angular){angular.module("angular-confirm",["ui.bootstrap.modal"]).controller("ConfirmModalController",["$scope","$uibModalInstance","data",function($scope,$uibModalInstance,data){$scope.data=angular.copy(data),$scope.ok=function(closeMessage){$uibModalInstance.close(closeMessage)},$scope.cancel=function(dismissMessage){angular.isUndefined(dismissMessage)&&(dismissMessage="cancel"),$uibModalInstance.dismiss(dismissMessage)}}]).value("$confirmModalDefaults",{templateUrl:"../commons/js/partials/yes_no_dialog.html",controller:"ConfirmModalController",defaultLabels:{title:"Confirm",ok:"OK",cancel:"Cancel",danger:!1},additionalTemplates:{}}).factory("$confirm",["$uibModal","$confirmModalDefaults",function($uibModal,$confirmModalDefaults){return function(data,settings){var defaults=angular.copy($confirmModalDefaults);if(settings=angular.extend(defaults,settings||{}),data=angular.extend({},settings.defaultLabels,data||{}),data.templateName){var customTemplateDefinition=settings.additionalTemplates[data.templateName];void 0!=customTemplateDefinition&&(settings.template=customTemplateDefinition.template,settings.templateUrl=customTemplateDefinition.templateUrl)}return"templateUrl"in settings&&"template"in settings&&delete settings.template,settings.resolve={data:function(){return data}},$uibModal.open(settings).result}}]).directive("confirm",["$confirm","$timeout",function($confirm,$timeout){return{priority:1,restrict:"A",scope:{confirmIf:"=",ngClick:"&",confirm:"@",confirmSettings:"=",confirmTemplateName:"@",confirmTitle:"@",confirmOk:"@",confirmDanger:"@",confirmCancel:"@"},link:function(scope,element,attrs){function onSuccess(){var rawEl=element[0];if(["checkbox","radio"].indexOf(rawEl.type)!=-1){var model=element.data("$ngModelController");model?(model.$setViewValue(!rawEl.checked),model.$render()):rawEl.checked=!rawEl.checked}scope.ngClick()}element.unbind("click").bind("click",function($event){$event.preventDefault(),$timeout(function(){if(angular.isUndefined(scope.confirmIf)||scope.confirmIf){var data={text:scope.confirm};scope.confirmTitle&&(data.title=scope.confirmTitle),scope.confirmOk&&(data.ok=scope.confirmOk),scope.confirmCancel&&(data.cancel=scope.confirmCancel),scope.confirmDanger&&(data.danger=scope.confirmDanger),scope.confirmTemplateName&&(data.templateName=scope.confirmTemplateName),$confirm(data,scope.confirmSettings||{}).then(onSuccess)}else scope.$apply(onSuccess)})})}}}])}),function(){angular.module("BrowserServices",[]).factory("isSafariUserAgent",[function(){return function(){var isSafari=navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&!navigator.userAgent.match("CriOS");return Boolean(isSafari)}}]).factory("isIEUserAgent",[function(){return function(){var userAgent=navigator.userAgent;return userAgent.indexOf("MSIE ")>0||(userAgent.indexOf("Trident/")>0||userAgent.indexOf("Edge/")>0)}}]).factory("detectBrowser",[function(){return function(userAgent){var browserInfo,browserString,tempInfo;return browserInfo={},browserString=userAgent.match(/(vivaldi|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([0-9|\.]+)/i)||[],/trident/i.test(browserString[1])?(tempInfo=/\brv[ :]+(\d+)/g.exec(userAgent)||[],browserInfo.name="MSIE",0!==tempInfo.length&&(browserInfo.version=tempInfo[1]),browserInfo):"Chrome"===browserString[1]&&(tempInfo=userAgent.match(/\b(OPR|Edge)\/(\d+)/),null!==tempInfo)?(tempInfo.indexOf("Edge")?browserInfo.name="MSIE":browserInfo.name="Opera",browserInfo.version=tempInfo.slice(1),browserInfo):(browserString=browserString[2]?[browserString[1],browserString[2]]:[navigator.appName,navigator.appVersion,"-?"],tempInfo=userAgent.match(/version\/(\d+)/i),null!==tempInfo&&browserString.splice(1,1,tempInfo[1]),browserInfo.name=browserString[0],browserInfo.version=browserString[1],browserInfo)}}])}(),function(){angular.module("ClientInfoServices",["CommonsServices","TabLocalStorageApp"]).factory("clientData",["tabLocalStorageService",function(tabLocalStorageService){var clientData={};return clientData.client={},clientData.setActiveClientId=function(clientId){clientData.client={},tabLocalStorageService.set("active-client-id",clientId)},clientData.getActiveClientId=function(){return tabLocalStorageService.get("active-client-id")},clientData.setUpdateProfile=function(){if(clientData.updateProfile={},clientData.client&&clientData.client.profile){clientData.updateProfile.id=clientData.client.profile.id,clientData.updateProfile.first_name=clientData.client.profile.first_name,clientData.updateProfile.middle_name=clientData.client.profile.middle_name,clientData.updateProfile.last_name=clientData.client.profile.last_name,clientData.updateProfile.dob=clientData.client.profile.dob,clientData.updateProfile.access_summary=clientData.client.profile.access_summary,clientData.updateProfile.client_type=clientData.client.profile.client_type;var contacts=clientData.client.profile.contacts;contacts&&contacts.length>0&&(clientData.updateProfile.phone=contacts[0].phone,clientData.updateProfile.fax=contacts[0].fax,clientData.updateProfile.email=contacts[0].email,clientData.updateProfile.address=contacts[0].address,clientData.updateProfile.city=contacts[0].city,clientData.updateProfile.state=contacts[0].state,clientData.updateProfile.zipcode=contacts[0].zipcode)}},clientData}]).factory("getClientInfo",["$http","apiUrlService","clientData","commonErrorCallback","getCommonHTTPHeaders",function($http,apiUrlService,clientData,commonErrorCallback,getCommonHTTPHeaders){return function(clientId){$http({method:"GET",ignoreLoadingBar:!0,url:apiUrlService.baseClientsApi()+apiUrlService.orgFprint()+apiUrlService.clientId(clientId)+"filter/info/",headers:getCommonHTTPHeaders()}).then(function(response){200===response.status&&(clientData.client.profile=response.data,clientData.setUpdateProfile(clientData.client))},commonErrorCallback)}}]).factory("getClientVault",["$http","apiUrlService","clientData","commonErrorCallback","getCommonHTTPHeaders",function($http,apiUrlService,clientData,commonErrorCallback,getCommonHTTPHeaders){return function(clientId){$http({method:"GET",url:apiUrlService.baseClientsApi()+apiUrlService.orgFprint()+apiUrlService.clientId(clientId)+"vault/",headers:getCommonHTTPHeaders()}).then(function(response){200===response.status&&(clientData.client.files=response.data)},commonErrorCallback)}}]).factory("getClientProjects",["$http","apiUrlService","clientData","commonErrorCallback","getCommonHTTPHeaders",function($http,apiUrlService,clientData,commonErrorCallback,getCommonHTTPHeaders){return function(clientId){return $http({method:"GET",url:apiUrlService.baseClientsApi()+apiUrlService.orgFprint()+apiUrlService.clientId(clientId)+"project/",headers:getCommonHTTPHeaders()}).then(function(response){200===response.status&&(response.data.forEach(function(project){project.last_modified=new Date(project.last_modified)}),clientData.client.projects=response.data)},commonErrorCallback)}}]).factory("deleteProject",["$http","apiUrlService","commonErrorCallback","getClientInfo","getClientProjects","getCommonHTTPHeaders",function($http,apiUrlService,commonErrorCallback,getClientInfo,getClientProjects,getCommonHTTPHeaders){return function(projectId,clientId){$http({method:"DELETE",ignoreLoadingBar:!0,url:apiUrlService.baseClientsApi()+apiUrlService.orgFprint()+apiUrlService.clientId(clientId)+apiUrlService.projectId(projectId),headers:getCommonHTTPHeaders()}).then(function(response){204===response.status&&(getClientInfo(clientId),getClientProjects(clientId))},commonErrorCallback)}}]).factory("cloneProject",["$http","apiUrlService","commonErrorCallback","getCommonHTTPHeaders","membershipData","subscriptionData",function($http,apiUrlService,commonErrorCallback,getCommonHTTPHeaders,membershipData,subscriptionData){return function(projectId,clientId,cloneClientId,projectTitle){return $http({method:"POST",ignoreLoadingBar:!0,url:apiUrlService.baseClientsApi()+apiUrlService.orgFprint()+apiUrlService.clientId(clientId)+apiUrlService.projectId(projectId)+"clone/cloneclient/"+cloneClientId+"/",headers:getCommonHTTPHeaders(),data:{title:projectTitle}}).then(function(response){if(201===response.status)return subscriptionData.updateReachedTrialEnd(membershipData.getActiveOrgFprint()),response},commonErrorCallback)}}])}(),function(){angular.module("ClientListServices",["CommonsServices"]).factory("clientSearch",[function(){return{display_name:""}}]).factory("clientsArray",[function(){return[]}]).factory("clientListData",["clientsArray",function(clientsArray){return{pager:void 0,num_total:void 0,num_starred:void 0,num_archived:void 0,num_active:void 0,clients:clientsArray,reset:function(){this.pager=void 0,this.num_total=void 0,this.num_starred=void 0,this.num_archived=void 0,this.num_active=void 0,this.clients.length=0}}}]).factory("getClientListStatusFilter",["$state",function($state){return function(){return $state.is("base.clientListActive")?"Active":$state.is("base.clientListArchived")?"Archived":$state.is("base.starred")?"Starred":void 0}}]).factory("getClientListFilter",["$state",function($state){return function(pageNum,pageSize){var filter="";return $state.is("base.clientListActive")?filter="filter/active/":$state.is("base.clientListArchived")?filter="filter/archived/":$state.is("base.starred")&&(filter="starred/"),pageNum?filter+"?page="+pageNum+(pageSize?"&pageSize="+pageSize:""):filter}}]).factory("getClientList",["$http","apiUrlService","clientListData","commonErrorCallback","getCommonHTTPHeaders",function($http,apiUrlService,clientListData,commonErrorCallback,getCommonHTTPHeaders){return function(filter){clientListData.reset();var url=apiUrlService.baseClientsApi()+apiUrlService.orgFprint()+"client/";return filter&&(url+=filter),$http({method:"GET",url:url,headers:getCommonHTTPHeaders()}).then(function(response){if(200===response.status)return response.data.clients.forEach(function(client){client.last_modified=new Date(client.last_modified)}),clientListData.num_total=response.data.num_total,clientListData.num_archived=response.data.num_archived,clientListData.num_active=response.data.num_active,clientListData.clients=response.data.clients,response},commonErrorCallback)}}]).factory("getClientListEntries",["$http","apiUrlService","commonErrorCallback","getCommonHTTPHeaders",function($http,apiUrlService,commonErrorCallback,getCommonHTTPHeaders){return function(filter,requestKey){var url=apiUrlService.baseClientsApi()+apiUrlService.orgFprint()+"client/";return filter&&(url+=filter),$http({method:"GET",url:url,headers:getCommonHTTPHeaders()}).then(function(response){if(200===response.status)return(response.data.clients?response.data.clients:response.data.pager.entries).forEach(function(client){client.last_modified=new Date(client.last_modified)}),requestKey&&(response.requestKey=requestKey),response},commonErrorCallback)}}]).factory("updateClientStatusInList",["$http","$state","apiUrlService","clientListData","commonErrorCallback","getCommonHTTPHeaders",function($http,$state,apiUrlService,clientListData,commonErrorCallback,getCommonHTTPHeaders){return function(clientId,status){var apiUrl=apiUrlService.baseClientsApi()+apiUrlService.orgFprint()+apiUrlService.clientId(clientId);$http({method:"POST",url:apiUrl,ignoreLoadingBar:!0,headers:getCommonHTTPHeaders(),data:{status:status}}).then(function(response){if(201===response.status){if($state.is("base.clientListActive")&&"Active"!==status||$state.is("base.clientListArchived")&&"Archived"!==status)for(var i=clientListData.clients.length-1;i>=0;i--)if(clientListData.clients[i].id===clientId){1===clientListData.clients.length?clientListData.clients=[]:clientListData.clients.splice(i,1);break}"Active"===status?(clientListData.num_active=clientListData.num_active+1,clientListData.num_archived=clientListData.num_archived-1):"Archived"===status&&(clientListData.num_active=clientListData.num_active-1,clientListData.num_archived=clientListData.num_archived+1)}},function(response){commonErrorCallback(response)})}}]).factory("updateClientStatusInInfiniteList",["$http","$state","apiUrlService","clientListData","commonErrorCallback","getCommonHTTPHeaders",function($http,$state,apiUrlService,clientListData,commonErrorCallback,getCommonHTTPHeaders){return function(clientId,status){var apiUrl=apiUrlService.baseClientsApi()+apiUrlService.orgFprint()+apiUrlService.clientId(clientId);return $http({method:"POST",url:apiUrl,ignoreLoadingBar:!0,headers:getCommonHTTPHeaders(),data:{status:status}}).then(function(response){201===response.status&&("Active"===status?(clientListData.num_active=clientListData.num_active+1,clientListData.num_archived=clientListData.num_archived-1):"Archived"===status&&(clientListData.num_active=clientListData.num_active-1,clientListData.num_archived=clientListData.num_archived+1))},function(response){commonErrorCallback(response)})}}]).factory("deleteClientInList",["$http","apiUrlService","commonErrorCallback","getClientList","getClientListFilter","getCommonHTTPHeaders",function($http,apiUrlService,commonErrorCallback,getClientList,getClientListFilter,getCommonHTTPHeaders){return function(client){$http({method:"DELETE",ignoreLoadingBar:!0,url:apiUrlService.baseClientsApi()+apiUrlService.orgFprint()+apiUrlService.clientId(client.id),headers:getCommonHTTPHeaders()}).then(function(response){if(204===response.status){var filter=getClientListFilter();getClientList(filter),analytics.track("Client Deleted",{client_id:client.id})}},commonErrorCallback)}}]).factory("deleteClientInInfiniteList",["$http","apiUrlService","commonErrorCallback","getCommonHTTPHeaders",function($http,apiUrlService,commonErrorCallback,getCommonHTTPHeaders){return function(client){$http({method:"DELETE",ignoreLoadingBar:!0,url:apiUrlService.baseClientsApi()+apiUrlService.orgFprint()+apiUrlService.clientId(client.id),headers:getCommonHTTPHeaders()}).then(function(response){204===response.status&&analytics.track("Client Deleted",{client_id:client.id})},commonErrorCallback)}}])}(),function(){angular.module("CommonConstantsApp",[]).constant("kIdentityMigration",{LEARN_MORE_LINK:"https://help.lawyaw.com/en/articles/11483042-clio-draft-login-resource-improvements",IDENTITY_TESTING_FLAG_STORAGE_KEY:"DRAFT_IDENTITY_TESTING_FLAG",MODAL_DISMISSED_STORAGE_KEY:"DRAFT_IDENTITY_MODAL_DISMISSED",INITIAL_RELEASE_DATE:new Date("2025-06-04T14:00:00Z"),MANDATORY_MODAL_DATE:new Date("2025-12-31T17:00:00Z"),BATCH_RELEASE_DATE_MAP:{3:new Date("2025-09-18T17:00:00Z"),4:new Date("2025-09-25T17:00:00Z"),11:new Date("2025-10-27T17:00:00Z")},ROLLOUT_BATCHES:{NO_MANAGE_POST_2020:"3",NO_MANAGE_PRE_2020:"4",NO_MANAGE_2020:"4",FINAL:"11"}}).constant("kUrls",{DRAFT_STAGING_RUNTIME_HOSTNAME:"staging.draft.clio.com",IDENTITY_BASE_DEV:"http://account.myclio.ca:1337",IDENTITY_BASE_STAGING:"https://staging.account.clio.services",IDENTITY_BASE_PROD:"https://account.clio.com"}).constant("kUserRole",{ATTORNEY:"Attorney",PARALEGAL:"Paralegal",ADMIN:"Admin",STUDENT:"Student",NON_LAWYER:"Not a Legal Professional",OTHER:"Other"}).constant("kOTPMethod",{TEXT:1,EMAIL:2}).constant("kSignOption",{TYPE_IN:1,IMAGE:2}).constant("kWhoSigns",{JUST_ME:1,ME_AND_OTHERS:2,OTHERS:3}).constant("SignActions",{1:"Signed",2:"Declined",3:"Viewed",4:"Downloaded"}).constant("kRecipientStatus",{SIGNED:"Signed",DECLINED:"Declined",PENDING:"Signature pending",EXPIRED:"Link expired"}).constant("kPackageStatus",{CLOSED:"Closed",DECLINED:"Declined",OUT_FOR_SIGNATURE:"Out for signature",WAITING_FOR_ME:"Waiting for me",DRAFTING:"Drafting",EXPIRED:"Link expired"}).constant("kInputType",{TEXTBOX:1,CHECKBOX:2,BUTTON:3,TEXTAREA:4,SIGNATURE_BLOCK:5,SIGNATURE_DATE:6}).constant("kVariableType",{UNKNOWN:"UNKNOWN",SHORT_TEXT:"SHORT_TEXT",LONG_TEXT:"LONG_TEXT",MULTIPLE_CHOICE:"MULTIPLE_CHOICE",DATE:"DATE"}).constant("kDocumentType",{TAGGED_PDF:1,PDF:2,TEXT:3,MS_WORD:4}).constant("kPDFPage",{HEIGHT:1056,WIDTH:816,MARGIN:10}).constant("kClientType",{PERSON:"Person",COMPANY:"Company"}).constant("kPlanType",{BASIC:"basic",PRO:"proplan"}).constant("kViewListingSettings",{MAX_VIEW_LIMIT:500,INITIAL_VIEW_LIMIT:15,VIEW_STEP:10})}(),function(){angular.module("CommonUtilsApp",[]).factory("loadingUtils",["$timeout",function($timeout){return function(scopeObject){var loadingUtils={};return loadingUtils.setIsLoading=function(isLoading){scopeObject.isLoading=isLoading},loadingUtils.isLoading=function(){return!(!scopeObject||!scopeObject.hasOwnProperty("isLoading"))&&scopeObject.isLoading},loadingUtils.setIsSaved=function(isSaved){scopeObject.isSaved=isSaved},loadingUtils.setIsSavedWithTimeout=function(){scopeObject.isSaved=!0,$timeout(function(){scopeObject.isSaved=!1},3e3)},loadingUtils.isSaved=function(){return!(!scopeObject||!scopeObject.hasOwnProperty("isSaved"))&&scopeObject.isSaved},loadingUtils}}]).factory("objectToArray",[function(){return function(obj,addKey){return angular.isObject(obj)?addKey===!1?Object.keys(obj).map(function(key){return obj[key]}):Object.keys(obj).map(function(key){var value=obj[key];return angular.isObject(value)?Object.defineProperty(value,"$key",{enumerable:!1,value:key}):{$key:key,$value:value}}):obj}}])}(),function(){angular.module("CommonsDirectivesApps",["BrowserServices","CommonConstantsApp","PrintServicesApp","ProfileDropdownCtrlsApp","templates-commons","templates-panels","VaultCtrlsApp"]).config(["$sceDelegateProvider",function($sceDelegateProvider){$sceDelegateProvider.resourceUrlWhitelist(["self","https://lawyaw-media.s3.amazonaws.com/**","https://s3-us-west-1.amazonaws.com/**","https://clio-draft-media-prod-us-a.s3.amazonaws.com/**"])}]).directive("compileSrc",["$compile","$location","$state","$filter","$templateRequest",function($compile,$location,$state,$filter,$templateRequest){return function(scope,element,attrs){scope.$watch(function(scope){return scope.$eval(attrs.compileSrc)},function(value){$state.is("base.sign")&&$templateRequest("../panels/static/panels/js/partials/html_signature_template.html").then(function(template){value=value.replace(/<lawyaw data-ng-bind="\$sign\.attorney[^\"]*">[^\<]+<\/lawyaw>/g,template),value=value.replace(/<lawyaw data-ng-bind="\$date[^\"]+">[^<]*<\/lawyaw>/g,'<span ng-if="draftingService.currentDocument.signed">'+$filter("date")(new Date,"MM/dd/yyyy")+"</span>"),element.html(value),$compile(element.contents())(scope)}),element.html(value),$compile(element.contents())(scope)})}}]).directive("mytooltip",["$timeout",function($timeout){"use strict";return{restrict:"A",link:function(scope,el){el.on("click",function(event){$(el).tooltip("hide")}),$timeout(function(){$(el).tooltip({container:"body"})})}}}]).directive("profileDropdown",function(){return{restrict:"E",scope:{},controller:"ProfileDropdownCtrl",templateUrl:"../commons/js/partials/profile_dropdown.html"}}).directive("imgload",["$timeout",function($timeout){return{link:function(scope,element,attrs){scope.$parent.imgLoading=!0,$timeout(function(){scope.$apply()}),element.bind("load",function(){scope.$parent.imgLoading=!1,$timeout(function(){scope.$apply()})})}}}]).directive("vault",[function(){return{restrict:"E",replace:!1,scope:{clientId:"=",selectedPdfFile:"="},templateUrl:"../commons/js/partials/vault.html",controller:"VaultCtrl"}}]).directive("vaultFile",[function(){return{restrict:"E",replace:!0,scope:{file:"=",fileList:"=",clientId:"=",selectPdfFile:"="},templateUrl:"../commons/js/partials/vault_file.html",controller:"VaultFileController"}}]).directive("selectOnClick",[function(){return{restrict:"A",link:function(scope,element){var focusedElement;element.on("click",function(){focusedElement!=this&&(this.select(),focusedElement=this)}),element.on("blur",function(){focusedElement=null})}}}]).directive("signatureErrorMessage",[function(){return{restrict:"E",templateUrl:"../commons/js/partials/signature_error_message.html"}}]).factory("getPrintHeader",[function(){return function(){var i,head=document.getElementsByTagName("head")[0],cssLinks=head.getElementsByTagName("link"),header="";for(i=0;i<cssLinks.length;++i)header+=cssLinks[i].outerHTML;var fontScipts=head.getElementsByTagName("script");for(i=0;i<fontScipts.length;++i)"font"===fontScipts[i].getAttribute("class")&&(header+=fontScipts[i].outerHTML);return header}}]).factory("getBrowserDownloadTimeout",["detectBrowser",function(detectBrowser){return function(){var browserName;return browserName=detectBrowser(navigator.userAgent).name,"Firefox"===browserName?3e3:300}}]).directive("downloadSignaturePackageBlock",["$timeout","exportWrapper","getPrintHeader","printStateService","prepareHtmlForPrint","getBrowserDownloadTimeout",function($timeout,exportWrapper,getPrintHeader,printStateService,prepareHtmlForPrint,getBrowserDownloadTimeout){return{link:{post:function(scope,element,attr){$timeout(function(){var children,header=getPrintHeader(),auditTrail=element.find("audit-download");children=element.find("signature-document-preview");for(var documents=[],i=0;i<children.length;i++)printStateService.printSignaturePreview&&(documents[i]={src:prepareHtmlForPrint(children[i].outerHTML),title:children[i].getAttribute("title")});printStateService.printSignaturePreview&&(documents[documents.length]={src:prepareHtmlForPrint(auditTrail[0].outerHTML),title:"Audit Trail"},exportWrapper(scope)(header,documents,null,"signed documents",!1)),printStateService.printSignaturePreview=!1},getBrowserDownloadTimeout())}}}}]).directive("downloadBlock",["$timeout","draftingService","exportWrapper","getBrowserDownloadTimeout","getPrintHeader","prepareHtmlForPrint","printWrapper","printStateService","projectData",function($timeout,draftingService,exportWrapper,getBrowserDownloadTimeout,getPrintHeader,prepareHtmlForPrint,printWrapper,printStateService,projectData){return{link:{post:function(scope,element,attr){$timeout(function(){var children,doc,header=getPrintHeader();if(printStateService.downloadCurrent){var currentDoc=document.getElementById("doc-"+draftingService.currentDocument.docid);return doc={src:prepareHtmlForPrint(currentDoc.outerHTML),title:currentDoc.getAttribute("title")},printWrapper(scope)(header,doc),printStateService.downloadCurrent=!1,printStateService.downloadStack=!1,void(printStateService.printCombined=!1)}children=element.find("document-preview");for(var documents=[],i=0;i<children.length;i++)if(printStateService.downloadCurrent){var exportID=children[i].getAttribute("export-id");if(exportID===draftingService.currentDocument.docid){doc={src:prepareHtmlForPrint(children[i].outerHTML),title:children[i].getAttribute("title")},printWrapper(scope)(header,doc);break}}else(printStateService.downloadStack||printStateService.printCombined)&&(documents[i]={src:prepareHtmlForPrint(children[i].outerHTML),title:children[i].getAttribute("title")});printStateService.downloadStack?exportWrapper(scope)(header,documents,projectData.project.fprint,projectData.project.title||"download",!0):printStateService.printCombined&&exportWrapper(scope)(header,documents,projectData.project.fprint,projectData.project.title||"download",!1),printStateService.downloadCurrent=!1,printStateService.downloadStack=!1,printStateService.printCombined=!1},getBrowserDownloadTimeout())}}}}]).directive("signImg",["kPDFPage","$timeout",function(kPDFPage,$timeout){return{restrict:"E",templateUrl:"../commons/js/partials/signature_image.html",scope:{element:"=",baseElementSelector:"@",elementIsSelected:"=",imageUrl:"="},link:function(scope,elem,attrs){var movedElement,image=elem.find(".signature-img")[0],baseElement=angular.element(scope.baseElementSelector),baseElementScope=baseElement.scope();baseElementScope.resizing=!1,baseElementScope.resizeStartPoint=void 0,baseElementScope.resizeElement=void 0,scope.baseElementScope=baseElementScope,scope.resizeElementStart=function(event,element){baseElementScope.resizeStartPoint=elementMovementLib.getXY(event),baseElementScope.resizeElement=element,baseElementScope.resizing=!0},baseElementScope.resizeElementEnd=function(event){baseElementScope.resizing&&(baseElementScope.resizeElement.image_width=baseElementScope.resizeElement.image_width_temp,movedElement=elementMovementLib.fixMovedElementsBoundary(baseElementScope.resizeElement),baseElementScope.resizeElement.top=movedElement.top,baseElementScope.resizeElement.left=movedElement.left,baseElementScope.resizing=!1)},baseElementScope.resize=function(event){var resizeEndPoint=elementMovementLib.getXY(event);baseElementScope.resizeElement.image_width_temp=baseElementScope.resizeElement.image_width+(resizeEndPoint.x-baseElementScope.resizeStartPoint.x),baseElementScope.resizeElement.image_width_temp=Math.max(baseElementScope.resizeElement.image_width_temp,50),baseElementScope.resizeElement.left+baseElementScope.resizeElement.image_width_temp>=kPDFPage.WIDTH&&(baseElementScope.resizeElement.image_width_temp=Math.min(baseElementScope.resizeElement.image_width_temp,kPDFPage.WIDTH-baseElementScope.resizeElement.left),baseElementScope.resizing=baseElementScope.resizeElementEnd({}))},scope.$watch(function(){return image.height},function(newHeight,oldHeight){scope.element.image_height=newHeight}),image.onload=function(e){scope.element.image_height=image.height,scope.element.image_width=image.width,scope.$apply(),$timeout(function(){var movedElement=elementMovementLib.fixMovedElementsBoundary(scope.element);scope.element.top=movedElement.top,scope.element.left=movedElement.left},1e3)}}}}])}(),function(){angular.module("DraggableDirectivesApps",["templates-commons"]).directive("gripDirective",[function(){return{restrict:"E",templateUrl:"../commons/js/partials/grip_directive.html"}}])}(),function(){angular.module("InputCtrlsApp",[]).controller("InputModalController",["$scope","$uibModalInstance","inputLabel","defaultValue","modalTitle",function($scope,$uibModalInstance,inputLabel,defaultValue,modalTitle){$scope.inputText=defaultValue.value||"",$scope.inputLabel=inputLabel.value,$scope.modalTitle=modalTitle.value,$scope.cancel=function(){$uibModalInstance.dismiss("cancel")},$scope.confirm=function(inputText){$uibModalInstance.close(inputText)}}])}(),function(){angular.module("LayoutUtilsApp",["CommonConstantsApp"]).factory("layoutUtils",["$sce","kInputType","kPDFPage",function($sce,kInputType,kPDFPage){var layoutUtils={};return layoutUtils.getElementPosition=function(element,pageIdx,marginLeft,marginBottom){var heightOffset=kPDFPage.HEIGHT,topOffset=heightOffset*pageIdx,topMargin=marginBottom*pageIdx,lineHeight=element.input_type===kInputType.TEXTAREA?19:14,style={top:element.top+topOffset+"px","margin-top":topMargin+"px",left:element.left+"px","margin-left":marginLeft+"px",width:parseInt(element.width)+"px",height:parseInt(element.height)+"px","line-height":lineHeight+"px"};return element.line_height&&element.input_type===kInputType.TEXTAREA&&(style["line-height"]=element.line_height+"px"),style},layoutUtils.isPackageHeaderElement=function(element){return element.value.indexOf("Lawyaw Package ID:")!==-1},layoutUtils.getElementPositionWithPageTopMargin=function(element,pageIdx,marginLeft,marginTop){var style=layoutUtils.getElementPosition(element,pageIdx,marginLeft,marginTop),topMargin=marginTop*(pageIdx+1);return style["margin-top"]=topMargin+"px",style},layoutUtils.renderConsecutiveSpaces=function(value){return void 0===value?"":value=value.replace(/( +)/g,function(space){return 1===space.length?" ":2===space.length?" &nbsp; ":" "+"&nbsp".repeat(space.length-2)+" "})},layoutUtils.splitTextIntoParagraphs=function(value,width){if(void 0===value)return"";var paragraphs=value.split("\n");return value=paragraphs.map(function(el){var paragraph='<p style="margin: 0; width: '+width+'px; ">';return paragraph=el?paragraph.concat(el):paragraph.concat("&nbsp;"),paragraph.concat("</p>")}).join("")},layoutUtils.getTextOrParagraphValue=function(element,inputType){var value=element.value;return inputType!==kInputType.TEXTAREA&&inputType!==kInputType.TEXTBOX||(value=layoutUtils.renderConsecutiveSpaces(value)),inputType===kInputType.TEXTAREA&&value&&(value=layoutUtils.splitTextIntoParagraphs(value,element.width)),$sce.trustAsHtml(value)},layoutUtils}])}(),function(){angular.module("LocationServiceApp",["CommonsServices"]).factory("locationService",["$http","apiUrlService","commonErrorCallback","getCommonHTTPHeaders",function($http,apiUrlService,commonErrorCallback,getCommonHTTPHeaders){var locationService={};return locationService.lookup=function(zipcode,output){zipcode&&5===zipcode.length&&$http({method:"GET",ignoreLoadingBar:!0,url:apiUrlService.baseClientsApi()+"zipcode/"+zipcode+"/",headers:getCommonHTTPHeaders()}).then(function(response){200===response.status&&(output.city=response.data.city,output.state=response.data.state)},function(response){commonErrorCallback(response)})},locationService}])}(),function(){angular.module("MembershipServices",["ngCookies","CommonsServices","TabLocalStorageApp"]).factory("membershipData",["$rootScope","$cookies","tabLocalStorageService",function($rootScope,$cookies,tabLocalStorageService){var membershipData={};return membershipData.memberships=[],membershipData.clearAll=function(){membershipData.memberships=[],membershipData.setActiveMembership(null)},membershipData.emptyMembership=function(){return!membershipData.memberships||0===membershipData.memberships.length||!membershipData.getActiveMembership()},membershipData.update=function(memberships){membershipData.memberships=memberships;for(var activeMembership=membershipData.getActiveMembership(),i=0;activeMembership&&i<membershipData.memberships.length;i++)if(membershipData.memberships[i].fprint===activeMembership.fprint)return void membershipData.setActiveMembership(membershipData.memberships[i]);membershipData.init(memberships)},membershipData.otpIsEnabled=function(){return membershipData.emptyMembership()&&membershipData.memberInfo?membershipData.memberInfo.otp_enabled:membershipData.getActiveMembership()?membershipData.getActiveMembership().otp_enabled:void 0},membershipData.IdentityInviteFprint=function(){return membershipData.memberInfo&&membershipData.memberInfo.identity_invite_fprint},membershipData.IsIdentityAuthenticated=function(){return membershipData.memberInfo&&membershipData.memberInfo.identity_authenticated},membershipData.clioTokenPresenceByOrg=function(){return membershipData.memberInfo&&membershipData.memberInfo.clio_token_presence_for_each_parent_org},membershipData.currentMembershipOrgCreatedAt=function(){return membershipData.currentMembership&&membershipData.currentMembership.org_created_at},membershipData.otpDeliveryMethod=function(){return membershipData.emptyMembership()&&membershipData.memberInfo?membershipData.memberInfo.otp_method:membershipData.getActiveMembership()?membershipData.getActiveMembership().otp_method:void 0},membershipData.getMemberProfilePicUrl=function(){return membershipData.emptyMembership()?membershipData.memberInfo?membershipData.memberInfo.profile_pic_url:void 0:membershipData.getActiveMembership().profile_pic_url},membershipData.getAuthenticatedUserPhoneNumber=function(){return membershipData.emptyMembership()&&membershipData.memberInfo?membershipData.memberInfo.auth_user_phone_number:membershipData.getActiveMembership()?membershipData.getActiveMembership().auth_user_phone_number:void 0},membershipData.getMemberDisplayName=function(){
if(membershipData.getActiveMembership())return membershipData.getActiveMembership().display_name},membershipData.getMemberShortName=function(){return membershipData.getActiveMembership()?membershipData.getActiveMembership().first_initial_last:""},membershipData.getMemberInitials=function(){return membershipData.emptyMembership()?membershipData.memberInfo?membershipData.memberInfo.initials:void 0:membershipData.getActiveMembership().initials},membershipData.isDefault=function(){return!!membershipData.getActiveMembership()&&membershipData.getActiveMembership().is_default},membershipData.isAdmin=function(){return!!membershipData.getActiveMembership()&&membershipData.getActiveMembership().admin},membershipData.id=function(){return membershipData.getActiveMembership()?membershipData.getActiveMembership().id:0},membershipData.canShare=function(){return!!membershipData.getActiveMembership()&&membershipData.getActiveMembership().can_share},membershipData.init=function(memberships){membershipData.memberships=memberships,membershipData.setActiveMembership(membershipData.memberships[0]);for(var defaultOrgIndex=void 0,subscribedOrgIndex=void 0,i=0;i<membershipData.memberships.length;i++)!defaultOrgIndex&&membershipData.memberships[i].is_default&&(defaultOrgIndex=i),!subscribedOrgIndex&&membershipData.memberships[i].subscription_id&&(subscribedOrgIndex=i);defaultOrgIndex?membershipData.setActiveMembership(membershipData.memberships[defaultOrgIndex]):subscribedOrgIndex&&membershipData.setActiveMembership(membershipData.memberships[subscribedOrgIndex])},membershipData.setActiveMembership=function(membership){membershipData.currentMembership=membership,tabLocalStorageService.set("currentMembership",membership)},membershipData.getActiveMembership=function(){var orgFprint=$cookies.get("orgFprint");if(orgFprint)for(var i=0;i<membershipData.memberships.length;i++)if(membershipData.memberships[i].fprint===orgFprint)return membershipData.memberships[i];return tabLocalStorageService.get("currentMembership")},membershipData.getActiveOrgFprint=function(){return membershipData&&0!==Object.keys(membershipData).length&&membershipData.currentMembership||(membershipData.currentMembership=membershipData.getActiveMembership()),membershipData.currentMembership?membershipData.currentMembership.fprint:void 0},membershipData}]).factory("getMembershipInfo",["$http","$state","apiUrlService","commonErrorCallback","getCommonHTTPHeaders","membershipData",function($http,$state,apiUrlService,commonErrorCallback,getCommonHTTPHeaders,membershipData){return function(scopeObject){return $http({method:"GET",ignoreLoadingBar:!0,url:apiUrlService.baseClientsApi()+"membership/",headers:getCommonHTTPHeaders()}).then(function(response){if(200===response.status){var data=response.data;return data.memberships&&0!==data.memberships.length?(scopeObject.loadingMembershipInfo=!1,membershipData.memberInfo=response.data.member_info,membershipData.update(data.memberships)):(membershipData.clearAll(),membershipData.memberInfo=response.data.member_info,$state.is("base.settings.profile")||$state.is("base.settings.account")||$state.transitionTo("base.emptyMembership")),response}},function(response){commonErrorCallback(response)})}}]).factory("initMembershipInfo",["$http","apiUrlService","commonErrorCallback","getCommonHTTPHeaders","membershipData",function($http,apiUrlService,commonErrorCallback,getCommonHTTPHeaders,membershipData){return function(){return $http({method:"GET",ignoreLoadingBar:!0,url:apiUrlService.baseClientsApi()+"membership/",headers:getCommonHTTPHeaders()}).then(function(response){if(200===response.status)return membershipData.memberInfo=response.data.member_info,membershipData.init(response.data.memberships),response},commonErrorCallback)}}]).factory("membershipAction",["$http","$window","apiUrlService","commonErrorCallback","getCommonHTTPHeaders","membershipData",function($http,$window,apiUrlService,commonErrorCallback,getCommonHTTPHeaders,membershipData){return function(membershipId,action){$http({method:"POST",url:apiUrlService.baseClientsApi()+apiUrlService.orgFprint()+apiUrlService.actionFn(action),headers:getCommonHTTPHeaders()}).then(function(response){if("default"===action&&201===response.status){for(var i=0;i<membershipData.memberships.length;++i)if(membershipData.memberships[i].id===membershipId){membershipData.memberships[i].is_default=!0,membershipData.setActiveMembership(membershipData.memberships[i]);break}}else"leave"===action&&204===response.status&&($window.location.href="/clients/")},commonErrorCallback)}}])}(),function(window){function fixResizedElementBoundary(element){var movedElement=JSON.parse(JSON.stringify(element));return movedElement.width=Number(movedElement.width),movedElement.left=Number(movedElement.left),movedElement.height=Number(movedElement.height),movedElement.top=Number(movedElement.top),movedElement.width=Math.min(movedElement.width,816-movedElement.left),movedElement.width=Math.max(movedElement.width,5),movedElement.height=Math.min(movedElement.height,1056-movedElement.top),movedElement.height=Math.max(movedElement.height,5),movedElement}function adjustTopFromMultiPageCanvasPosition(element){var pageHeight=1056,pageMargin=10,topPageNum=Math.floor(element.top/(pageHeight+pageMargin)),bottomPageNum=Math.floor((element.top+element.height)/(pageHeight+pageMargin));element.top=element.top-pageHeight*topPageNum-pageMargin*topPageNum,bottomPageNum>topPageNum&&(element.top=pageHeight-element.height)}function fixMovedElementsBoundaryCustomDim(element,maxWidth,docHeight){var movedElement=JSON.parse(JSON.stringify(element));return element.recipient&&!element.recipient.text&&element.recipient.image&&element.image_width?movedElement.left=Math.min(movedElement.left,maxWidth-element.image_width):movedElement.left=Math.min(movedElement.left,maxWidth-element.width),movedElement.left=Math.max(movedElement.left,0),movedElement.top=Math.min(movedElement.top,docHeight-element.height),element.recipient&&!element.recipient.text&&element.recipient.image&&element.image_height?movedElement.top=Math.max(movedElement.top,element.image_height-element.height):movedElement.top=Math.max(movedElement.top,0),movedElement}function fixMovedElementsBoundary(element){return fixMovedElementsBoundaryCustomDim(element,816,1056)}function getXY(e){var ev=e||window.event,mouse={};return ev.pageX?(mouse.x=ev.pageX+window.pageXOffset,mouse.y=ev.pageY-window.pageYOffset):ev.clientX&&(mouse.x=ev.clientX+document.body.scrollLeft,mouse.y=ev.clientY-document.body.scrollTop),mouse}function publishExternalAPI(elementMovementLib){angular.extend(elementMovementLib,{getXY:getXY,fixMovedElementsBoundary:fixMovedElementsBoundary,fixMovedElementsBoundaryCustomDim:fixMovedElementsBoundaryCustomDim,fixResizedElementBoundary:fixResizedElementBoundary,adjustTopFromMultiPageCanvasPosition:adjustTopFromMultiPageCanvasPosition})}var elementMovementLib=window.elementMovementLib||(window.elementMovementLib={});publishExternalAPI(elementMovementLib)}(window),function(){angular.module("PhotoUploadApp",["ngImgCrop"]).factory("deletePhotoService",["$http","$location","getCommonHTTPHeaders",function($http,$location,getCommonHTTPHeaders){return function(url,data){return $http({method:"DELETE",url:url,headers:getCommonHTTPHeaders(),data:data})}}]).factory("uploadPhotoService",["$http","$location","getCommonHTTPHeaders",function($http,$location,getCommonHTTPHeaders){return function(photo_file,extra,url){var extraKey,formdata=new FormData;for(extraKey in extra)formdata.append(extraKey,extra[extraKey]);photo_file&&formdata.append("photofile",photo_file);var headers=getCommonHTTPHeaders();return headers["Content-Type"]=void 0,$http({method:"POST",url:url,headers:headers,data:formdata})}}]).factory("uploadPhotoUtils",["$q",function($q){var utils={};return utils.dataURItoBlob=function(dataURI){var byteString;byteString=dataURI.split(",")[0].indexOf("base64")>=0?atob(dataURI.split(",")[1]):unescape(dataURI.split(",")[1]);for(var mimeString=dataURI.split(",")[0].split(":")[1].split(";")[0],ia=new Uint8Array(byteString.length),i=0;i<byteString.length;i++)ia[i]=byteString.charCodeAt(i);return new Blob([ia],{type:mimeString})},utils.blobToFile=function(blob,fileName){return new File([blob],fileName,{type:blob.type})},utils.toDataURI=function(url){return $q(function(resolve,reject){var xhr=new XMLHttpRequest;xhr.onload=function(){var reader=new FileReader;reader.onloadend=function(){resolve(reader.result)},reader.readAsDataURL(xhr.response)},xhr.open("GET",url),xhr.responseType="blob",xhr.send()})},utils.readImageFromFile=function(file){return $q(function(resolve,reject){var reader=new FileReader;reader.readAsDataURL(file),reader.onload=function(evt){var image=evt.target.result,im=new Image;im.src=image,resolve(im)}})},utils.makeBackgroundTransparent=function(originalImg){var canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");if(canvas.width=originalImg.width,canvas.height=originalImg.height,0===canvas.width||0===canvas.height)return null;ctx.drawImage(originalImg,0,0,canvas.width,canvas.height);for(var r,g,b,newImage=ctx.getImageData(0,0,canvas.width,canvas.height),imageData=newImage.data,newBackgroundPixel=(imageData.length,{r:0,g:0,b:0,a:0}),whitePixelThreshold={r:155,g:155,b:155},i=0,n=imageData.length;i<n;i+=4)r=imageData[i],g=imageData[i+1],b=imageData[i+2],r>=whitePixelThreshold.r&&g>=whitePixelThreshold.g&&b>=whitePixelThreshold.b&&(imageData[i]=newBackgroundPixel.r,imageData[i+1]=newBackgroundPixel.g,imageData[i+2]=newBackgroundPixel.b,imageData[i+3]=newBackgroundPixel.a);return newImage.data=imageData,ctx.putImageData(newImage,0,0),canvas.toDataURL("image/png")},utils}]).controller("ImageUploadCtrl",["$controller","$scope","$state","$uibModalInstance","file","uploadPhotoUtils",function($controller,$scope,$state,$uibModalInstance,file,uploadPhotoUtils){$scope.file=file,$scope.dataURItoBlob=uploadPhotoUtils.dataURItoBlob,$scope.cancel=function(){$uibModalInstance.dismiss("cancel")},$scope.readImageFileToCrop=function(file){var reader=new FileReader;reader.readAsDataURL(file.file),reader.onload=function(evt){$scope.$apply(function($scope){$scope.image=evt.target.result})}},$scope.readImageFileToCrop(file),$scope.transferCroppedImage=function(){var blobFinalImage=$scope.dataURItoBlob($scope.croppedImage);$scope.maybeResizeImgThenCloseModal(blobFinalImage,$scope.croppedImage)},$scope.maybeResizeImgThenCloseModal=function(blob,blobUri){var returnBlob=blob;if(blob.size>1e5){var image=new Image;image.src=blobUri,image.onload=function(){returnBlob=$scope.resizeImage(image,80,80),$uibModalInstance.close(returnBlob)}}else $uibModalInstance.close(returnBlob)},$scope.resizeImage=function(original_img,width,height){var canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");canvas.width=width,canvas.height=height,ctx.drawImage(original_img,0,0,canvas.width,canvas.height);var file=(ctx.getImageData(0,0,canvas.width,canvas.height),$scope.dataURItoBlob(canvas.toDataURL("image/png")));return file}}])}(),function(){angular.module("PrintServicesApp",["BrowserServices","CommonsServices","ProjectInfoServicesApp"]).factory("printStateService",[function(){var printStateService={};return printStateService.downloadCurrent=!1,printStateService.downloadStack=!1,printStateService.printCombined=!1,printStateService.printSignaturePreview=!1,printStateService.showPrintingProgress=!1,printStateService.showPopupMessage=!1,printStateService}]).factory("getFileNameFromHeaders",[function(){return function(response,defaultExtension){var defaultName="download."+defaultExtension,headers=response.headers();if(void 0===headers)return defaultName;var filename=headers["content-disposition"];if(void 0===filename)return defaultName;var prefix="attachment; filename=";return filename&&0===filename.indexOf(prefix)?filename.substring(prefix.length):defaultName}}]).factory("prepareHtmlForPrint",[function(){return function(inputHtml){var cleanHtml;cleanHtml=$.trim(inputHtml).replace(/<!--([\s\S]*?)-->/gim," "),cleanHtml=cleanHtml.replace("document-preview","div");var ngRegexp=new RegExp(' ng-(src|show|repeat|if|style|bind-html|class)=\\"[^\\"]+\\"',"g");return cleanHtml=cleanHtml.replace(ngRegexp," ")}}]).factory("fileDownloader",["$window","getFileNameFromHeaders","isIEUserAgent","isSafariUserAgent","printStateService",function($window,getFileNameFromHeaders,isIEUserAgent,isSafariUserAgent,printStateService){return function(response,fileType,fileName,safariOpenedWindow){var linkElement,clickEvent,isSafari;isSafari=isSafariUserAgent();var isIE=isIEUserAgent();fileName=void 0===fileName?getFileNameFromHeaders(response,fileType):fileName.replace(".","_")+"."+fileType;var headers=response.headers(),file=new Blob([response.data],{type:headers["content-type"]}),fileUrl=(window.URL||window.webkitURL).createObjectURL(file);if(isIE)$window.navigator.msSaveOrOpenBlob(file,fileName);else if("zip"===fileType)linkElement=document.createElement("a"),linkElement.setAttribute("href",fileUrl),linkElement.setAttribute("download",fileName),clickEvent=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1}),linkElement.dispatchEvent(clickEvent);else if(isSafari)safariOpenedWindow.location=fileUrl,safariOpenedWindow.focus();else{var newWindow=$window.open(fileUrl,"_blank");null!==newWindow&&void 0!==newWindow||(printStateService.showPopupMessage=!0,analytics.track("Download Blocked",{warning:!0}))}}}]).factory("exportWrapper",["$http","$window","commonErrorCallback","getCommonHTTPHeaders","fileDownloader","isSafariUserAgent","printStateService","membershipData","projectData",function($http,$window,commonErrorCallback,getCommonHTTPHeaders,fileDownloader,isSafariUserAgent,printStateService,membershipData,projectData){return function(scopeObject){return function(headerHTML,documentsHTML,projectFprint,fileName,zip,saveToBackend){var safariOpenedWindow,fileType,isSafari=isSafariUserAgent();isSafari&&!zip&&(safariOpenedWindow=$window.open(),safariOpenedWindow.document.write("Loading ...")),saveToBackend?$http({method:"POST",ignoreLoadingBar:!0,url:"/sign/api/v2/org/"+membershipData.getActiveOrgFprint()+"/project/"+projectData.project.id+"/package/"+projectFprint+"/saveGeneratedPdf",headers:getCommonHTTPHeaders(),data:{header:headerHTML,documents:documentsHTML}}):$http({method:"POST",ignoreLoadingBar:!0,url:zip?"/panels/api/v1/export/":"/panels/api/v1/printcombined/",headers:getCommonHTTPHeaders(),responseType:"arraybuffer",data:{header:headerHTML,documents:documentsHTML,fprint:projectFprint}}).then(function(response){printStateService.showPrintingProgress=!1,fileType=zip?"zip":"pdf",fileDownloader(response,fileType,fileName,safariOpenedWindow)},commonErrorCallback)}}}]).factory("printWrapper",["$http","$window","commonErrorCallback","getCommonHTTPHeaders","isSafariUserAgent","fileDownloader","printStateService",function($http,$window,commonErrorCallback,getCommonHTTPHeaders,isSafariUserAgent,fileDownloader,printStateService){return function(scopeObject){return function(headerHTML,documentHTML){var safariOpenedWindow,isSafari=isSafariUserAgent();isSafari&&(safariOpenedWindow=$window.open(),safariOpenedWindow.document.write("Loading ...")),$http({method:"POST",url:"/panels/api/v1/print/",ignoreLoadingBar:!0,headers:getCommonHTTPHeaders(),responseType:"arraybuffer",data:{header:headerHTML,document:documentHTML}}).then(function(response){printStateService.showPrintingProgress=!1,fileDownloader(response,"pdf",void 0,safariOpenedWindow)},commonErrorCallback)}}}])}(),function(){angular.module("ProfileDropdownCtrlsApp",["CommonsServices","MembershipServices"]).controller("ProfileDropdownCtrl",["$rootElement","$scope","$state","$window","getMembershipInfo","membershipData","logout",function($rootElement,$scope,$state,$window,getMembershipInfo,membershipData,logout){$scope.membershipData=membershipData,$scope.logout=logout,membershipData.hasOwnProperty("memberships")&&0!==membershipData.memberships.length||getMembershipInfo($scope),$scope.gotoSettings=function(){"ClientsApp"===$rootElement.attr("ng-app")?$state.transitionTo("base.settings.account"):$window.location.href="/clients/settings/account/profile/"},$scope.gotoSupport=function(){"ClientsApp"===$rootElement.attr("ng-app")?$state.transitionTo("base.support"):$window.location.href="/clients/support/"}}])}(),function(){angular.module("ProjectInfoServicesApp",["CommonsServices","CommonUtilsApp","ProjectListServicesApp","TabLocalStorageApp"]).factory("projectData",["tabLocalStorageService",function(tabLocalStorageService){var projectData={};return projectData.project={},projectData.setActiveProjectId=function(projectId,clientId,projectFprint){projectData.project={},tabLocalStorageService.set("active-project-id",projectId),tabLocalStorageService.set("active-project-client_id",clientId),tabLocalStorageService.set("active-project-fprint",projectFprint)},projectData.getActiveProjectId=function(){return tabLocalStorageService.get("active-project-id")},projectData.getActiveClientId=function(){return tabLocalStorageService.get("active-project-client_id")},projectData.getActiveProjectFprint=function(){return tabLocalStorageService.get("active-project-fprint")},projectData.setUpdateInfo=function(){projectData.updateInfo=angular.copy(projectData.project)},projectData}]).factory("projectStatusOptions",[function(){var projectStatusOptions={};return projectStatusOptions.options=["In progress","Review","Completed"],projectStatusOptions}]).factory("getProjectInfo",["$http","apiUrlService","commonErrorCallback","getCommonHTTPHeaders","loadingUtils","projectData",function($http,apiUrlService,commonErrorCallback,getCommonHTTPHeaders,loadingUtils,projectData){return function(clientId,projectId){return loadingUtils(projectData).setIsLoading(!0),$http({method:"GET",ignoreLoadingBar:!0,url:apiUrlService.baseClientsApi()+apiUrlService.orgFprint()+apiUrlService.clientId(clientId)+apiUrlService.projectId(projectId),headers:getCommonHTTPHeaders()}).then(function(response){if(200===response.status)return projectData.project=response.data,projectData.setUpdateInfo(),loadingUtils(projectData).setIsLoading(!1),response},commonErrorCallback)}}]).factory("updateProjectStatus",["$http","$state","apiUrlService","commonErrorCallback","getCommonHTTPHeaders","projectListData",function($http,$state,apiUrlService,commonErrorCallback,getCommonHTTPHeaders,projectListData){return function(projectId,clientId,oldStatus,newStatus,skipProjectsArrayUpdate){$http({method:"POST",ignoreLoadingBar:!0,url:apiUrlService.baseClientsApi()+apiUrlService.orgFprint()+apiUrlService.clientId(clientId)+apiUrlService.projectId(projectId),headers:getCommonHTTPHeaders(),data:{status:newStatus}}).then(function(response){if(201===response.status&&(trackEvent("Project Edited",{oldStatus:oldStatus,newStatus:newStatus}),$state.is("base.projectList"))){for(var i=0;i<projectListData.buckets.length;++i)projectListData.buckets[i].status===oldStatus&&projectListData.buckets[i].count>0?projectListData.buckets[i].count-=1:projectListData.buckets[i].status===newStatus&&(projectListData.buckets[i].count+=1);if(!skipProjectsArrayUpdate&&projectListData.activeBucket.status===oldStatus)for(var j=0;j<projectListData.projects.length;++j)if(projectListData.projects[j].id===projectId){1===projectListData.projects.length?projectListData.projects=[]:projectListData.projects.splice(j,1);break}}},commonErrorCallback),analytics.track("Project Updated Status")}}]).factory("updateProjectDocumentSortOrder",["$http","apiUrlService","commonErrorCallback","getCommonHTTPHeaders","projectData",function($http,apiUrlService,commonErrorCallback,getCommonHTTPHeaders,projectData){return function(clientId,projectId,docid_sort){return $http({method:"PUT",ignoreLoadingBar:!0,url:apiUrlService.baseClientsApi()+apiUrlService.orgFprint()+apiUrlService.clientId(clientId)+apiUrlService.projectId(projectId)+"sort-order/",headers:getCommonHTTPHeaders(),data:{docids:docid_sort}}).then(function(response){201===response.status&&(projectData.project=response.data)},commonErrorCallback)}}])}(),function(){angular.module("ProjectListServicesApp",[]).factory("projectSearch",[function(){return{searchText:void 0}}]).factory("projectsArray",[function(){return[]}]).factory("projectListData",["projectsArray",function(projectsArray){return{projects:projectsArray,reset:function(){this.projects.length=0}}}]).factory("addPagerQueryParams",[function(){return function(base,pageNum,pageSize){return pageNum?base+"?page="+pageNum+(pageSize?"&pageSize="+pageSize:""):base}}]).factory("getProjectListStatusFilter",["projectListData",function(projectListData){return function(){return projectListData&&projectListData.activeBucket&&projectListData.activeBucket.status?projectListData.activeBucket.status:""}}]).factory("makeProjectApiFilter",[function(){return function(status){return status?status.toLowerCase().replace(" ","_"):status}}]).factory("getProjectList",["$http","apiUrlService","commonErrorCallback","getCommonHTTPHeaders","projectListData",function($http,apiUrlService,commonErrorCallback,getCommonHTTPHeaders,projectListData){return function(filter){projectListData.projects=[];var url=apiUrlService.baseClientsApi()+apiUrlService.orgFprint()+"project/",starred="starred"==filter;return starred?url+="starred/":filter&&(url=url+"filter/"+filter+"/"),$http({method:"GET",url:url,headers:getCommonHTTPHeaders()}).then(function(response){if(200===response.status){if(projectListData.buckets=response.data.buckets,starred)projectListData.activeBucket=projectListData.buckets[0];else if(projectListData.buckets&&projectListData.buckets.length)for(var i=0;i<projectListData.buckets.length;++i)if(!projectListData.buckets[i].status){projectListData.num_total=projectListData.buckets[i].count,projectListData.activeBucket||(projectListData.activeBucket=projectListData.buckets[i]);break}return response.data.projects.forEach(function(project){project.last_modified=new Date(project.last_modified)}),projectListData.projects=response.data.projects,response}},function(response){commonErrorCallback(response)})}}]).factory("getProjectListEntries",["$http","apiUrlService","commonErrorCallback","getCommonHTTPHeaders","addPagerQueryParams",function($http,apiUrlService,commonErrorCallback,getCommonHTTPHeaders,addPagerQueryParams){return function(filter,pageNum,pageSize,requestKey){filter=(filter||"").toLowerCase().replace(" ","_");var url=apiUrlService.baseClientsApi()+apiUrlService.orgFprint()+"project/";return"starred"==filter?url+="starred/":filter&&(url=url+"filter/"+filter+"/"),$http({method:"GET",url:addPagerQueryParams(url,pageNum,pageSize),headers:getCommonHTTPHeaders()}).then(function(response){if(response&&requestKey&&(response.requestKey=requestKey),200===response.status)return response.data.pager.entries.forEach(function(project){project.last_modified=new Date(project.last_modified)}),response},function(response){commonErrorCallback(response)})}}]).factory("deleteProjectInList",["$http","apiUrlService","commonErrorCallback","getCommonHTTPHeaders","getProjectList",function($http,apiUrlService,commonErrorCallback,getCommonHTTPHeaders,getProjectList){return function(projectId,clientId,callbackFilter){$http({method:"DELETE",ignoreLoadingBar:!0,url:apiUrlService.baseClientsApi()+apiUrlService.orgFprint()+apiUrlService.clientId(clientId)+apiUrlService.projectId(projectId),headers:getCommonHTTPHeaders()}).then(function(response){204===response.status&&getProjectList(callbackFilter)},commonErrorCallback)}}])}(),function(){function removeAuthCookies($cookies){console.log("removing auth cookies"),$cookies.remove("orgFprint"),$cookies.remove("csrftoken")}angular.module("CommonsServices",["ngCookies","LocalStorageModule","MembershipServices"]).config(["localStorageServiceProvider",function(localStorageServiceProvider){localStorageServiceProvider.setStorageType("localStorage")}]).factory("getCommonHTTPHeaders",["$cookies",function($cookies){return function(){var headers={"Content-Type":"application/json",timezone:(new Date).getTimezoneOffset()};return headers}}]).factory("apiUrlService",["membershipData",function(membershipData){var apiUrlService={};return apiUrlService.baseAuthApi=function(){return"/api/v2/account/"},apiUrlService.basePanelsApi=function(){return"/panels/api/v1/"},apiUrlService.baseClientsApi=function(){return"/clients/api/v1/"},apiUrlService.baseAddinApi=function(){return"/word-addin/api/v1/"},apiUrlService.baseDocumentApi=function(){return"/document/api/v1/"},apiUrlService.baseCourtsApi=function(){return"/courts/api/v1/"},apiUrlService.baseIdentityApi=function(){return"/identity/"},apiUrlService.baseSignApi=function(){return"/sign/api/v1/"},apiUrlService.baseSignPath=function(){return"/sign/"},apiUrlService.orgFprint=function(){return"org/"+membershipData.getActiveOrgFprint()+"/"},apiUrlService.clientId=function(clientId){return"client/"+clientId+"/"},apiUrlService.matterId=function(matterId){return"matter/"+matterId+"/"},apiUrlService.projectId=function(projectId){return"project/"+projectId+"/"},apiUrlService.vaultId=function(clientfileId){return"vault/"+clientfileId+"/"},apiUrlService.actionFn=function(action){return"action/"+action+"/"},apiUrlService.noteId=function(noteId){return"note/"+noteId+"/"},apiUrlService.templateId=function(templateId){return"template/"+templateId+"/"},apiUrlService.documentId=function(docId){return"document/"+docId+"/"},apiUrlService.elementId=function(elementId){return"element/"+elementId+"/"},apiUrlService.membershipId=function(membershipId){return"membership/"+membershipId+"/"},apiUrlService.taskId=function(taskId){return"task/"+taskId+"/"},apiUrlService.packageFprint=function(packageFprint){return"package/"+packageFprint+"/"},apiUrlService.isolatedSignFprint=function(fprint){return"recipient/"+fprint+"/"},apiUrlService.signatureElementId=function(signatureElementId){return"element/"+signatureElementId+"/"},apiUrlService}]).factory("stringService",[function(){var stringService={};return stringService.capitalize=function(string){return string.charAt(0).toUpperCase()+string.slice(1).toLowerCase()},stringService}]).factory("passwordCheckService",[function(){var passwordCheckService={};return passwordCheckService.lengthCheck=function(password){return password&&password.length>5},passwordCheckService.caseCheck=function(password){return/[a-z]/.test(password)&&/[A-Z]/.test(password)},passwordCheckService.numberCheck=function(password){return/\d/.test(password)},passwordCheckService.isValidPassword=function(password){return passwordCheckService.lengthCheck(password)&&passwordCheckService.caseCheck(password)&&passwordCheckService.numberCheck(password)},passwordCheckService.confirmCheck=function(password,confirmPassword){return password&&password===confirmPassword},passwordCheckService}]).factory("getDisplayNumber",[function(){return function(number,suffix){return 1==number?number+" "+suffix:number+" "+suffix+"s"}}]).factory("logout",["$http","$window","$cookies","getCommonHTTPHeaders",function($http,$window,$cookies,getCommonHTTPHeaders){return function(){var headers=getCommonHTTPHeaders();headers["Content-Type"]=void 0,$http({method:"DELETE",url:"/api/v2/account/logout/",headers:headers}).then(function(response){removeAuthCookies($cookies),response.data&&response.data.identity_logout_url?$window.location.href=response.data.identity_logout_url:$window.location.href="/signin/"},function(response){removeAuthCookies($cookies),$window.location.href="/signin/"})}}]).factory("autoLogout",["$http","$window","$cookies","getCommonHTTPHeaders",function($http,$window,$cookies,getCommonHTTPHeaders){return function(){var headers=getCommonHTTPHeaders();headers["Content-Type"]=void 0,$http({method:"DELETE",url:"/api/v2/account/logout/",headers:headers}).then(function(response){removeAuthCookies($cookies),$window.location.href="/signin/?auto_logged=true"},function(response){removeAuthCookies($cookies),$window.location.href="/signin/?auto_logged=true"})}}]).factory("commonErrorCallback",["$window","autoLogout",function($window,autoLogout){return function(response){response&&response.status<0&&analytics.track("Basic Connection Loss",{location:$window.location,response:response}),401===response.status||response.status<0?(analytics.track("Basic Unauthenticated Response",{location:$window.location,response:response}),autoLogout()):402===response.status&&($window.location.href="/clients/subscription/")}}]).factory("vaultUploadFileWrapper",["$http","$cookies","apiUrlService",function($http,$cookies,apiUrlService){return function(scopeObject){return function(inputFile,clientId,fileList){function uploadProgress(evt){evt.lengthComputable&&scopeObject.$apply(function(){for(var i=0;i<fileList.length;++i)if(fileList[i].isLoading&&fileList[i].name===inputFile.name){fileList[i].progress=Math.round(100*evt.loaded/evt.total);break}})}function uploadComplete(evt){201===evt.target.status&&scopeObject.$apply(function(){for(var i=0;i<fileList.length;++i)if(fileList[i].isLoading&&fileList[i].name===inputFile.name){fileList[i]=JSON.parse(evt.target.responseText);break}})}function uploadFailed(evt){}function uploadCanceled(evt){}var index=0;fileList||(fileList=[]);for(var i=0;i<fileList.length;++i)if(!fileList[i].isLoading){index=i;break}fileList.splice(index,0,{}),fileList[index].name=inputFile.name,fileList[index].isLoading=!0,fileList[index].progress=0;var formdata=new FormData;formdata.append("clientfile",inputFile);var xhr=new XMLHttpRequest;xhr.upload.addEventListener("progress",uploadProgress,!1),xhr.addEventListener("load",uploadComplete,!1),xhr.addEventListener("error",uploadFailed,!1),xhr.addEventListener("abort",uploadCanceled,!1);var url=apiUrlService.baseClientsApi()+apiUrlService.orgFprint()+apiUrlService.clientId(clientId)+"vault/";xhr.open("POST",url,!0),xhr.setRequestHeader("X-CSRFToken",$cookies.get("csrftoken")),xhr.setRequestHeader("timezone",(new Date).getTimezoneOffset()),xhr.send(formdata)}}}]).factory("updateFileName",["$http","apiUrlService","commonErrorCallback","getCommonHTTPHeaders",function($http,apiUrlService,commonErrorCallback,getCommonHTTPHeaders){return function(newName,clientFile,clientId,uibModalInstance){$http({method:"PUT",ignoreLoadingBar:!0,url:apiUrlService.baseClientsApi()+apiUrlService.orgFprint()+apiUrlService.clientId(clientId)+apiUrlService.vaultId(clientFile.id),headers:getCommonHTTPHeaders(),data:{name:newName}}).then(function(response){201===response.status&&(clientFile.name=response.data.name,clientFile.download_name=response.data.download_name,uibModalInstance&&uibModalInstance.dismiss("confirm"))},function(response){commonErrorCallback(response)})}}]).factory("deleteFile",["$http","apiUrlService","commonErrorCallback","getCommonHTTPHeaders",function($http,apiUrlService,commonErrorCallback,getCommonHTTPHeaders){return function(clientFile,clientId,fileList){$http({method:"DELETE",ignoreLoadingBar:!0,url:apiUrlService.baseClientsApi()+apiUrlService.orgFprint()+apiUrlService.clientId(clientId)+apiUrlService.vaultId(clientFile.id),headers:getCommonHTTPHeaders()}).then(function(response){for(var i=fileList.length-1;i>=0;i--)if(fileList[i].id==clientFile.id){fileList.splice(i,1);break}204===response.status},function(response){commonErrorCallback(response)})}}]).factory("flagService",["$http","apiUrlService","commonErrorCallback","getCommonHTTPHeaders",function($http,apiUrlService,commonErrorCallback,getCommonHTTPHeaders){var flags={};return flags.getFlag=function(flagName){$http({method:"GET",ignoreLoadingBar:!0,url:apiUrlService.baseClientsApi()+"flags/"+flagName+"/",headers:getCommonHTTPHeaders()}).then(function(response){200===response.status&&(flags[flagName]=response.data.value)})},flags.putFlag=function(flagName,value){$http({method:"PUT",ignoreLoadingBar:!0,url:apiUrlService.baseClientsApi()+"flags/"+flagName+"/",headers:getCommonHTTPHeaders(),data:{value:value}}).then(function(response){200===response.status&&(flags[flagName]=value)},commonErrorCallback)},flags}]).factory("summarizerService",[function(){
var summarizerService={};return summarizerService.summarize=function(content,length){return content?$.trim(content).substring(0,length):""},summarizerService}]).factory("getSignaturePackageListService",["$http","$state","apiUrlService","getCommonHTTPHeaders",function($http,$state,apiUrlService,getCommonHTTPHeaders){return function(scopeObject){return function(clientId,projectId){return $http({method:"GET",ignoreLoadingBar:!0,url:apiUrlService.baseSignApi()+apiUrlService.orgFprint()+apiUrlService.clientId(clientId)+apiUrlService.projectId(projectId),headers:getCommonHTTPHeaders()}).then(function(response){200===response.status&&(scopeObject.signaturePackageList=response.data.filter(function(package){return package.recipients.length>0}))})}}}]).factory("createSubscriptionTempData",["localStorageService",function(localStorageService){var createSubscriptionTempData;return createSubscriptionTempData={clearAll:function(){localStorageService.remove("createSubscriptionTempInterval"),localStorageService.remove("createSubscriptionTempLicenses"),localStorageService.remove("createSubscriptionTempPlan"),localStorageService.remove("createSubscriptionTempOrgFprint"),localStorageService.remove("createSubscriptionTempCouponText")},remove:function(key){localStorageService.remove(key)},set:function(key,value){localStorageService.set(key,value)},get:function(key){return localStorageService.get(key)}}}]).factory("generateIdentityMigrationLink",["$http","apiUrlService","getCommonHTTPHeaders",function($http,apiUrlService,getCommonHTTPHeaders){return function(){return $http({method:"POST",url:apiUrlService.baseIdentityApi()+"migration-link",headers:getCommonHTTPHeaders(),data:{}}).then(function(response){if(201===response.status)return response.data.accept_url;throw new Error("Failed to generate identity migration link")},function(response){throw new Error("Failed to generate identity migration link")})}}])}(),function(){angular.module("SignUtilsApp",[]).factory("signUtils",["$sce","$filter","kInputType","kPackageStatus","kWhoSigns","kRecipientStatus","membershipData",function($sce,$filter,kInputType,kPackageStatus,kWhoSigns,kRecipientStatus,membershipData){var signUtils={};return signUtils.getRecipientName=function(recipient){return 0===recipient.sign_order?"Me":recipient.name},signUtils.getPackageStatus=function(package){var actualRecipients,expiredSignatures,closedCondition,submittedSignatures=[],sentSignatures=[],declinedSignatures=[];if(package.recipients&&package.recipients.length>0){if(expiredSignatures=package.recipients.filter(function(recipient){return recipient.expired}),actualRecipients=package.recipients.filter(function(recipient){return 0!==recipient.sign_order}),actualRecipients.forEach(function(actualRecipient){actualRecipient.submitted===!0&&submittedSignatures.push(actualRecipient),actualRecipient.email_sent===!0&&sentSignatures.push(actualRecipient),actualRecipient.declined===!0&&declinedSignatures.push(actualRecipient)}),closedCondition=package.who_signs!==kWhoSigns.JUST_ME?submittedSignatures.length===actualRecipients.length&&0!==actualRecipients.length:package.recipients[0].submitted,expiredSignatures.length>0)return package.status=kPackageStatus.EXPIRED,package.status=kPackageStatus.EXPIRED;if(closedCondition)return package.status=kPackageStatus.CLOSED,kPackageStatus.CLOSED;if(declinedSignatures.length>0)return package.status=kPackageStatus.DECLINED,kPackageStatus.DECLINED;if(0===sentSignatures.length&&package.who_signs!==kWhoSigns.JUST_ME)return package.status=kPackageStatus.DRAFTING,kPackageStatus.DRAFTING;if(0===actualRecipients.length)return package.status=kPackageStatus.WAITING_FOR_ME,kPackageStatus.WAITING_FOR_ME;if(sentSignatures.length<=actualRecipients.length)return package.status=kPackageStatus.OUT_FOR_SIGNATURE,kPackageStatus.OUT_FOR_SIGNATURE}},signUtils.getRecipientSignatureStatus=function(recipient){return recipient&&recipient.expired?kRecipientStatus.EXPIRED:recipient&&recipient.submitted?kRecipientStatus.SIGNED:recipient&&recipient.declined?kRecipientStatus.DECLINED:kRecipientStatus.PENDING},signUtils.minRecipientsCheck=function(signatureData){var recipientEmail,recipientElementCount={};signatureData.recipients.forEach(function(recipient){signatureData.who_signs===kWhoSigns.OTHERS&&0===recipient.sign_order||(recipient.count=0,recipientElementCount[recipient.email]=recipient)}),signatureData.documents.forEach(function(document){document.pages.forEach(function(page){page.elements.forEach(function(element){element.recipient&&element.input_type===kInputType.SIGNATURE_BLOCK&&recipientElementCount[element.recipient.email]&&++recipientElementCount[element.recipient.email].count})})});for(recipientEmail in recipientElementCount){var invalidRecipientCount=recipientElementCount.hasOwnProperty(recipientEmail)&&0===recipientElementCount[recipientEmail].count;if(invalidRecipientCount)return{valid:!1,name:recipientElementCount[recipientEmail].name}}return{valid:!0}},signUtils.getExpiryMessage=function(package){var firstExpiredRecipient,expiredRecipients=package.recipients.filter(function(recipient){return recipient.expired});if(expiredRecipients.length>0)return firstExpiredRecipient=expiredRecipients[0],"The signature request sent to "+firstExpiredRecipient.name+" ("+firstExpiredRecipient.email+') has expired since they did not sign in 14 days period. Click on "Send new link" to generate and send new request.'},signUtils.getFormattedDate=function(date){return $filter("date")(date,"yyyy-MM-dd HH:mm:ss Z")},signUtils.getFormattedNameString=function(nameList,entityType,pivot){var leftNames=nameList.slice(0,pivot),rightNames=nameList.slice(pivot,nameList.length),outputString=leftNames.join(", ");return rightNames.length>1?outputString=outputString+" & "+rightNames.length+" other "+entityType+"s":1===rightNames.length&&(outputString=outputString+" & "+rightNames.length+" other "+entityType),outputString},signUtils}])}(),function(){angular.module("SmartFontSizeDirectivesApp",[]).constant("kDefaultFontSize",{MAX_FONT:13,MID_FONT:11,MIN_FONT:9}).directive("clipOverflow",["kInputType",function(kInputType){return{scope:{lawyawElement:"="},link:function($scope,$element,$attrs){$scope.lawyawElement.input_type===kInputType.TEXTAREA?$element.css("clip","rect(0px "+parseInt($scope.lawyawElement.width)+"px "+parseInt($scope.lawyawElement.height)+"px 0px)"):$scope.lawyawElement.input_type===kInputType.TEXTBOX&&$element.css("clip","rect(0px "+parseInt($scope.lawyawElement.width)+"px 1056px 0px)")}}}]).factory("getCurrentIntFontSize",["kDefaultFontSize",function(kDefaultFontSize){return function(el){var fontString;return fontString=el[0].style.fontSize,fontString||(fontString=kDefaultFontSize.MAX_FONT+"px"),parseInt(fontString.replace("px",""))}}]).directive("adjustSpanFontSizeOnTextOverflow",["$window","kInputType","kDefaultFontSize",function($window,kInputType,kDefaultFontSize){return{link:function($scope,$element,$attrs){$window.matchMedia("print").addListener(function(mediaQueryList){if(mediaQueryList.matches){if("yes"===$attrs.printProcessed)return;$attrs.$set("printProcessed","yes")}else delete $attrs.printProcessed;"$digest"!==$scope.$$phase&&$scope.$apply()}),$scope.$watch(function(){return parseInt($attrs.inputType)===kInputType.TEXTAREA?$element[0].scrollHeight:$element[0].scrollWidth},function(){if($element.css("display","block"),$attrs.elementHeight&&parseInt($attrs.inputType)===kInputType.TEXTAREA){var fieldHeight=Math.round($attrs.elementHeight)+"px";$element.css("maxHeight",fieldHeight)}var enclosingDiv,currentFontSize,newFontSize,targetOffset,containerOffset,threshold;if(parseInt($attrs.inputType)===kInputType.TEXTAREA||parseInt($attrs.inputType)===kInputType.TEXTBOX){if(!$element.html()||""===$element.html())return void $element.css("fontSize",kDefaultFontSize.MAX_FONT.toString()+"px");for(var i=0;i<2;i++)enclosingDiv=$element[0].parentElement,parseInt($attrs.inputType)===kInputType.TEXTAREA?(containerOffset=enclosingDiv.offsetHeight,targetOffset=$element[0].scrollHeight,threshold=.8):(containerOffset=enclosingDiv.offsetWidth,targetOffset=$element[0].scrollWidth,$element.css("whiteSpace","pre"),threshold=.8),currentFontSize=parseInt($element.css("fontSize").replace("px","")),newFontSize=currentFontSize,targetOffset>containerOffset?newFontSize=Math.max(currentFontSize-2,kDefaultFontSize.MIN_FONT):targetOffset/containerOffset<threshold&&(newFontSize=Math.min(currentFontSize+2,kDefaultFontSize.MAX_FONT)),newFontSize>0&&(newFontSize<currentFontSize||0===i)&&(0!==targetOffset||0!==containerOffset)&&$element.css("fontSize",newFontSize.toString()+"px")}})}}}]).directive("resetInputFontSizeWhenEmpty",["kDefaultFontSize",function(kDefaultFontSize){return{link:function($scope,$element,$attrs){$scope.$watch(function(){return $element[0].value},function(){$element[0]&&0===$element[0].value.length&&$element.css("fontSize",kDefaultFontSize.MAX_FONT.toString()+"px")})}}}]).directive("adjustInputFontSizeOnTextOverflow",["$timeout","kInputType","kDefaultFontSize","getCurrentIntFontSize",function($timeout,kInputType,kDefaultFontSize,getCurrentIntFontSize){return{scope:{lawyawElement:"="},link:function($scope,$element,$attrs){$scope.$watch(function(){return $scope.lawyawElement.input_type===kInputType.TEXTAREA?$element[0].scrollHeight:$element[0].scrollWidth},function(){var enclosingDiv,currentFontSize,newFontSize,targetOffset,containerOffset,threshold;if(($scope.lawyawElement.input_type===kInputType.TEXTAREA||$scope.lawyawElement.input_type===kInputType.TEXTBOX)&&(currentFontSize=getCurrentIntFontSize($element),enclosingDiv=$element[0].parentElement,newFontSize=currentFontSize,$element[0])){$element[0].value&&0!==$element[0].value.length?$scope.lawyawElement.input_type===kInputType.TEXTAREA?(containerOffset=enclosingDiv.offsetHeight,targetOffset=$element[0].scrollHeight,threshold=.8):(containerOffset=enclosingDiv.offsetWidth,targetOffset=$element[0].scrollWidth,threshold=.8):newFontSize=kDefaultFontSize.MAX_FONT,targetOffset>containerOffset?newFontSize=Math.max(currentFontSize-2,kDefaultFontSize.MIN_FONT):targetOffset/containerOffset<threshold&&(newFontSize=Math.min(currentFontSize+2,kDefaultFontSize.MAX_FONT)),newFontSize>0&&(0!==targetOffset||0!==containerOffset)&&$element.css("fontSize",newFontSize.toString()+"px");var clipThreshold=1;$scope.lawyawElement.input_type===kInputType.TEXTAREA&&(clipThreshold=3),targetOffset>containerOffset+clipThreshold&&(0!==targetOffset||0!==containerOffset)?($timeout.cancel($scope.overflowTimer),$scope.overflowTimer=$timeout(function(){$scope.lawyawElement.textHasOverflowed=!0},750)):($timeout.cancel($scope.overflowTimer),$scope.lawyawElement.textHasOverflowed=!1)}})}}}])}(),function(){angular.module("TabLocalStorageApp",["ngCookies","ngStorage","LocalStorageModule"]).config(["localStorageServiceProvider",function(localStorageServiceProvider){localStorageServiceProvider.setStorageType("localStorage")}]).factory("tabLocalStorageService",["$sessionStorage","localStorageService",function($sessionStorage,localStorageService){var tabLocalStorageService={};return tabLocalStorageService.getCurrentTabIndex=function(){if($sessionStorage.tabIndex)return{index:$sessionStorage.tabIndex,newTab:!1};var maxTabIndex=localStorageService.get("max-tab-index");return maxTabIndex||(maxTabIndex=0),localStorageService.set("max-tab-index",maxTabIndex+1),$sessionStorage.tabIndex=maxTabIndex+1,{index:$sessionStorage.tabIndex,newTab:!0}},tabLocalStorageService.set=function(key,value){var tabIndex=tabLocalStorageService.getCurrentTabIndex();localStorageService.set(key+"-"+tabIndex.index,value),localStorageService.set(key+"-cache",value)},tabLocalStorageService.get=function(key){var tabIndex=tabLocalStorageService.getCurrentTabIndex(),tabData=localStorageService.get(key+"-"+tabIndex.index);if(tabData)return tabData;var cached=localStorageService.get(key+"-cache");return localStorageService.set(key+"-"+tabIndex.index,cached),cached},tabLocalStorageService.remove=function(key){var tabIndex=tabLocalStorageService.getCurrentTabIndex();localStorageService.remove(key+"-"+tabIndex.index)},tabLocalStorageService}])}(),function(){angular.module("VaultCtrlsApp",["CommonsServices","CommonsDirectivesApps","ClientInfoServices"]).controller("VaultCtrl",["$scope","$state","$uibModal","clientData","getClientVault","vaultUploadFileWrapper",function($scope,$state,$uibModal,clientData,getClientVault,vaultUploadFileWrapper){$scope.getClientVault=getClientVault,$scope.clientData=clientData,$scope.vaultIsEmpty=function(){return!clientData.client||!clientData.client.files||0===clientData.client.files.length},$scope.clickedOnFile=function(file){$state.is("base.clientInfo.vault")?$scope.openPreviewModal(file):$scope.selectPdfFile(file)},$scope.selectPdfFile=function(file){$scope.selectedPdfFile=file},$scope.openPreviewModal=function(file){$uibModal.open({templateUrl:"../commons/js/partials/file_preview.html",controller:"PreviewModalInstanceCtrl",windowClass:"app-modal-window",size:"lg",resolve:{file:file}})},$scope.obj={},$scope.uploadFile=function(){var files=$scope.obj.flow.files.map(function(fileObject){return fileObject.file});if(files)for(var i=0;i<files.length;++i)vaultUploadFileWrapper($scope)(files[i],$scope.clientId,clientData.client.files),analytics.track("Client Vault Document Uploaded",{location:"vault",type:files[i].type,name:files[i].name,size:files[i].size});$scope.obj.flow.files=[]}}]).controller("VaultFileController",["$scope","$window","$uibModal","deleteFile","updateFileName",function($scope,$window,$uibModal,deleteFile,updateFileName){$scope.trashDocument=function(file){deleteFile(file,$scope.clientId,$scope.fileList)},$scope.viewDocument=function(file){"/panels/"!==$window.location.pathname&&$window.open(file.displayfile_url||file.docfile_url,"_blank")},$scope.openRenameModal=function(file){$uibModal.open({templateUrl:"../commons/js/partials/vault_rename.html",controller:"VaultRenameModalCtrl",resolve:{file:file,clientId:$scope.clientId}})}}]).controller("PreviewModalInstanceCtrl",["$scope","$uibModalInstance","file",function($scope,$uibModalInstance,file){$scope.file=file,$scope.cancel=function(){$uibModalInstance.dismiss("cancel")}}]).controller("VaultRenameModalCtrl",["$scope","file","clientId","updateFileName","$uibModalInstance",function($scope,file,clientId,updateFileName,$uibModalInstance){$scope.file=file,$scope.clientId=clientId,$scope.confirm=function(newName){updateFileName(newName,file,$scope.clientId,$uibModalInstance)},$scope.cancel=function(){$uibModalInstance.dismiss("cancel")}}])}();