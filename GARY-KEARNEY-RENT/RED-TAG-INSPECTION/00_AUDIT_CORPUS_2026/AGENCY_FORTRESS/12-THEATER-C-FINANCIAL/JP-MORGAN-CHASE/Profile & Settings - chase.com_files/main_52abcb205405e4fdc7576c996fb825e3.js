define("analytics/channel/experimentImpressionChannel",["require","blue/event/channel"],(function(e){var t,n=e("blue/event/channel");return{getInstance:function(e,i){return t||(t=new n),t}}})),define("analytics/scroll/elementInViewport",[],(function(){return function(e,t){t||(t=50);var n=e.getBoundingClientRect();return n.bottom-n.height*t/100-window.innerHeight<1}})),define("analytics/channel/scrollStopChannel",["require","blue/event/channel","blue/event/channel/domEvents"],(function(e){var t=new(e("blue/event/channel")),n=e("blue/event/channel/domEvents");return function(e){return t.plug(n.asEventStream("scroll").debounce(e)),t}})),define("analytics/scroll/experimentWatcher",["require","exports","module","analytics/channel/experimentImpressionChannel","analytics/scroll/elementInViewport","blue/event/channel/component","analytics/channel/scrollStopChannel"],(function(e,t,n){var i,a,r,o=e("analytics/channel/experimentImpressionChannel"),s=e("analytics/scroll/elementInViewport"),c=e("blue/event/channel/component"),l=e("analytics/channel/scrollStopChannel"),d=n.config(),u={},p=["style","content","template"];function f(e){var t=Object.create(null);return t.data=e.context,t.name=e.name,t}function m(e){var t=document.querySelectorAll(e);return 1===t.length?t[0]:void 0}function g(e,t,n){(i=e[t].filter((function(e){return e.component===n.componentName})))&&i.length>0&&function(e,t,n){e.forEach((function(e){var t=m(e.selector);t&&(s(t,d.visibilityPercentage)?o.getInstance().emit(f({name:e.component,context:{experimentId:e.experimentId,choice:e.choice}})):(u[n]||(u[n]=[]),u[n].push({selector:e.selector,context:{experimentId:e.experimentId,choice:e.choice},name:e.component})))}))}(i,0,n.componentInstanceName)}return function(e){r=e,a||(a=l(d.delay||1e3).asEventStream().onValue((function(){var e,t;Object.keys(u).forEach((function(n){for(t=u[n],e=t.length-1;e>-1;e--)s(m(t[e].selector),d.visibilityPercentage)&&(o.getInstance().emit(f(t[e])),t.splice(e,1))}))}))),c.on("ready",(function(e){var t=r&&(r[e.target.context.areaName]||r.app);t&&p.forEach((function(n){t[n]&&g(t,n,e)}))})),c.on("destroy",(function(e){u[e.target.key]&&u[e.target.key].splice(0)}))}})),define("analytics/util/experimentActionHelper",[],(function(){var e;return{setExperimentData:function(t){e=t},getExperimentData:function(){return e},getExperimentActions:function(){var e=this.getExperimentData(),t=e&&Object.create(null),n=e&&Object.keys(e)||[],i=function(e,n){n&&n.forEach((function(n){for(var i=n.actions&&n.actions.length||0,a=0;a<i;a++)t[e+"."+n.component+"."+n.actions[a]]={experimentId:n.experimentId,choice:n.choice,action:n.actions[a]}}))};return n.forEach((function(t){i(t,e[t].style),i(t,e[t].template),i(t,e[t].content)})),t}}})),define("appkit-utilities/common/constants",{SYMBOLS:{POUND:"#",PERIOD:".",SLASH:"/",UNDERSCORE:"_"},VALUE:{THOUSAND:1e3,MILLION:1e6,BILLION:1e9,TRILLION:1e12},BRAND_ID:{JPMORGAN:"JPMORGAN"},DETAIL_TYPE:{MERCHANT:"MSA"}}),define("appkit-utilities/accountInfo/accountInfo",["require","blue/siteData","blue/log","appkit-utilities/common/constants"],(function(e){"use strict";var t=e("blue/siteData"),n=e("blue/log")("[accountInfo]"),i=e("appkit-utilities/common/constants"),a={profileType:{personal:["PER","MUG"],gemini:["GEM","GNC","GNM"],multiTin:["MUL","GNM","GMC"],multiChannel:["CHN"],businessBanking:["BUS","GNM","GNC","MUL","GEM"]},segmentType:{commercial:["CML","CRE"],smallBusiness:["BMG","BMS","BPL","BPS","BOH","BOS"],businessBanking:["BOH","BMG","BPL","PVB","WTH"],wealthy:["PVB","PCB","WTH"],jpmSecurities:["PCB"],privateBanking:["PVB","WTH"]},userType:{subUser:["SU"]},accountTypes:{managed:["WR2"],brokerage:["BR2"],margin:["MAR"],investmentManage:["MAN"]}};function r(e,t){(a=t||a).profileType?e&&e.profileType?(this.profileType=e.profileType,e.segmentType&&(this.segmentType=e.segmentType),e.userType&&(this.userType=e.userType),e.accountTypes&&(this.accountTypes=e.accountTypes)):n.error('missing accountInfo property "profileType"'):n.error('missing customMapper properties "profileType"')}function o(){return this.segmentType||(this.segmentType=t.getData("segment"),this.segmentType||n.error("Caller attempted to get segment from siteData before siteData was initialized.")),this.segmentType}function s(){var e;return this.accountTypes||(e=t.getData("accountTypes"),this.accountTypes=e&&!Array.isArray(e)?e.split("+"):e,this.accountTypes||n.error("Caller attempted to get accountType from siteData before siteData was initialized.")),this.accountTypes}function c(e){return"segmentType"===e?o.call(this):"accountTypes"===e?s.call(this):this[e]}return r.prototype={constructor:r,isAvailableInMapperList:function(e,t){var n,i,r,o=a[e]&&a[e][t];if(o){if("string"==typeof(r=c.call(this,e)))return-1!==o.indexOf(r);if(r instanceof Array)for(i=r.length,n=0;n<i;n++)if(o.indexOf(r[n])>-1)return!0}return!1},isCommercialUser:function(){return this.isAvailableInMapperList("segmentType","commercial")},isWealthyUser:function(){return this.isAvailableInMapperList("segmentType","wealthy")},isSmallBusinessUser:function(){return this.isAvailableInMapperList("segmentType","smallBusiness")},isBusinessBankingUser:function(){return this.isAvailableInMapperList("segmentType","businessBanking")},isGWMUser:function(){return this.isPrivateBankUser()||this.isJPMSecuritiesUser()},isBusinessUser:function(){return this.isCommercialUser()||this.isSmallBusinessUser()},isPersonalUser:function(){return this.isAvailableInMapperList("profileType","personal")},isGeminiUser:function(){return this.isAvailableInMapperList("profileType","gemini")},isMultiTinUser:function(){return this.isAvailableInMapperList("profileType","multiTin")},isMultiChannelUser:function(){return this.isAvailableInMapperList("profileType","multiChannel")},isBusinessBankingUserProfile:function(){return this.isAvailableInMapperList("profileType","businessBanking")},isSubUser:function(){return this.isAvailableInMapperList("userType","subUser")},isJPMSecuritiesUser:function(){return this.isAvailableInMapperList("segmentType","jpmSecurities")},isPrivateBankUser:function(){return this.isAvailableInMapperList("segmentType","privateBanking")},isFinancialAdvisor:function(){var e=t.getData("userType");return e?e.indexOf("FinancialAdvisor")>-1:(n.warn("siteData.userType is not set."),!1)},isGWMEmulationMode:function(){return this.isFinancialAdvisor()&&this.isWealthyUser()},isManagedBrokerage:function(){return this.isAvailableInMapperList("accountTypes","managed")},isBrokerage2:function(){return this.isAvailableInMapperList("accountTypes","brokerage")},isMargin:function(){return this.isAvailableInMapperList("accountTypes","margin")},isOlympic:function(){return this.isAvailableInMapperList("accountTypes","investmentManage")},isEligibleForRealTimeData:function(){return this.isBrokerage2()||this.isManagedBrokerage()||this.isMargin()||this.isOlympic()},isMerchantServicesUser:function(){return e=i.DETAIL_TYPE.MERCHANT,t.getData("accountTypes")?t.getData("accountTypes").indexOf(e)>-1:(n.warn("siteData.accountTypes is not set."),!1);var e},getSegment:o,getAccountType:s},r})),define("appkit-utilities/aop/console",["require","blue/root","blue/intercept","blue/log"],(function(e){return function(t){var n=e("blue/root");if("console"in n&&t.ccLogs&&!0===t.ccLogs.enabled){var i,a=[],r=e("blue/intercept").before,o=e("blue/log"),s=["DEBUG","WARN","ERROR"],c={info:0,debug:0,log:0,warn:1,error:2,assert:2},l=2,d=t.ccLogs.level;return d===s[1]?l=1:d===s[0]&&(l=0),Object.keys(c).forEach((function(e){if(e in n.console&&c[e]>=l){var t="Console client error logs : "+e+": ",s=o(t);i=r(n.console,e,(function(){arguments[0]!==t&&s.error.apply(s,arguments)})),a.push(i)}})),{removeConsoleLog:function(){for(var e=0;e<a.length;e++)a[e].remove()}}}}})),define("appkit-utilities/cookie/cookie",["require","blue/store/enumerable/cookie","blue/util","blue/is","blue/dom","blue/log"],(function(e){var t=new(e("blue/store/enumerable/cookie"))(null,!0),n=e("blue/util").object.extend,i=e("blue/is"),a=e("blue/dom"),r=e("blue/log")("[Cookie]"),o=a.location&&a.location.hostname,s=a.location&&a.location.protocol,c="."+o.split(".").slice(-2).join("."),l=/^https:$/i.test(s),d={expires:1,path:"/",domain:"localhost"!==o&&o?c:"localhost"};function u(e,a,o){var s=new Date,c=o&&o[e]||{},u=c&&c.name||"",p=n({},d,c);if(u)return i.undefined(a)||(null!==a&&s.setYear(s.getFullYear()+p.expires),null===c.expiry&&(s=null),i.boolean(c.secure)&&(l=c.secure),t.set(u,a,s,p.path,p.domain,l)),t.get(u);r.warn("cookie "+e+" not exist!")}return function(e,t){if(i.string(e)&&i.object(arguments[arguments.length-1])){if(2===arguments.length)return u(e,void 0,t);if(3===arguments.length)return u.apply(this,arguments)}r.warn("Please provide the correct arguments")}})),define("appkit-utilities/data/converter",[],(function(){return{b64toBlob:function(e,t,n){t=t||"",n=n||512;for(var i=atob(e),a=[],r=0;r<i.length;r+=n){for(var o=i.slice(r,r+n),s=new Array(o.length),c=0;c<o.length;c++)s[c]=o.charCodeAt(c);var l=new Uint8Array(s);a.push(l)}return new Blob(a,{type:t})}}})),define("appkit-utilities/formUtil/formUtil",["require","blue/log","blue-app/cache/sessionCache"],(function(e){var t=e("blue/log")("[formUtil]"),n=e("blue-app/cache/sessionCache"),i={},a=function(e){return function(e){return e.params&&e.params.isPopUp}(e)||!e.formAttr.downLoad||"_blank"===e.formAttr.target?e.formAttr.title:e.formAttr.target?e.formAttr.target:e.formAttr.downLoad?"_self":"_blank"},r=function(e){var r=i[e.formAttr.title],o=!1;try{o=r&&r.opener}catch(e){}o?r.focus():(e.params&&e.params.isPopUp?i[e.formAttr.title]=window.open("",e.formAttr.title,e.params.isPdf?"pdf":"resizable=1,width="+e.params.popUpWidth+",height="+e.params.popUpHeight):e.formAttr.downLoad&&"_blank"!==e.formAttr.target?(e.formAttr.downLoad||"_self"===e.formAttr.target)&&(i[e.formAttr.title]=window.open("",a(e))):i[e.formAttr.title]=window.open("",e.formAttr.title),function(e){var i,r=e.serviceUrl||"service-/svc/rl/accounts/secure/v1/csrf/token/list",o=n.get(r),s=o?o.response.csrfToken:"",c=document.createElement("form");c.setAttribute("enctype",e.formAttr.contentType||"application/x-www-form-urlencoded"),c.setAttribute("method",e.formAttr.method),c.setAttribute("action",e.formAttr.action),c.setAttribute("target",a(e)),c.style.display="none",Object.keys(e.inputData).forEach((function(t){var n=document.createElement("input");n.setAttribute("type","hidden"),n.setAttribute("name",t),n.setAttribute("value",e.inputData[t]),c.appendChild(n)}));var l=document.createElement("input");l.setAttribute("type","hidden"),l.setAttribute("name","csrftoken"),l.setAttribute("value",s),c.appendChild(l),(i=document.createElement("input")).setAttribute("type","submit"),i.setAttribute("name","submit"),i.setAttribute("value","Submit"),c.appendChild(i),document.body&&document.body.appendChild(c),i.click(),t.info(">>>>>Form post done"),c.parentNode.removeChild(c)}(e))},o=function(e){return new Promise((function(t,n){var a,r,o,s;r=o=(new Date).getTime(),s=setInterval((function(){o=(new Date).getTime(),("failure"!==(a=function(e){try{var t=i[e.formAttr.title].document;return t.querySelector("embed")||t.querySelector("img")?"application/pdf"===t.querySelector("embed").getAttribute("type")||t.querySelector("img")?"success":"failure":!t.querySelector("body").textContent&&JSON.parse(t.querySelector("body").textContent).status?"forceFailure":"failure"}catch(e){return"failure"}}(e))||o>r+5e3)&&("success"===a?t(!0):n(!1),clearInterval(s))}),1e3)}))};return{dynamicFormSubmit:function(e){if(e.formAttr.title=e.formAttr.title||"Document.pdf",r(e),e.params&&e.params.isDocumentDownloadCheck)return o(e)}}})),define("appkit-utilities/personalization/personalization",["require","blue/is","blue-app/settings","blue-app/validate/var/ZIP_CODE_REGEX","blue/store/enumerable/cookie","blue/siteData","blue/declare"],(function(e){var t=e("blue/is"),n=e("blue-app/settings"),i=e("blue-app/validate/var/ZIP_CODE_REGEX"),a=new(e("blue/store/enumerable/cookie"))(null,!0),r=e("blue/siteData");return e("blue/declare")({constructor:function(e,t){var i=n.get("persona");this.persona=i||{},this.geoFreshnessCookieName=t||"_geoFreshness",this.geoZipCookieName=e||"_geoZip"},getPersona:function(){return this.persona},getZipCode:function(){var e=this.persona.zip||r.getData("geoZip");return e&&(e=e.substring(0,5),i.test(e))?e:null},getEci:function(){return this.persona.ECI||null},getSegment:function(){return this.persona.segment||null},getLocale:function(){var e=this.persona.locale;return e&&t.string(e)||(e=null),e&&(e=e.replace("_","-")),e||"en-us"},getGeoZipCode:function(){var e=a.get(this.geoZipCookieName);return e||(e=this.getZipCode())&&a.set(this.geoZipCookieName,e,null,"/",".chase.com",!0),e},getGeoImageFreshness:function(){var e=a.get(this.geoFreshnessCookieName);return e||(e=(new Date).getMonth(),a.set(this.geoFreshnessCookieName,e,null,"/",".chase.com",!0)),e}})})),define("appkit-utilities/language/helper",["require","blue/resource/persona","blue-app/settings","blue/siteMode","blue/store/enumerable/cookie","appkit-utilities/personalization/personalization"],(function(e){var t=new(e("blue/resource/persona")),n=e("blue-app/settings"),i=e("blue/siteMode"),a="en-us",r=new(e("blue/store/enumerable/cookie"))("splash",!1,null,"/",".chase.com",!0),o=new(e("appkit-utilities/personalization/personalization"));function s(){return n.get("language",n.Type.PERM)||n.get("language")||n.get("languageDefault")||a}function c(){return!i.isModeEnabled("internationalizationSplash")}function l(){return c()?s():a}function d(){return l().split("-")[0]}return{getLanguage:l,getUserLanguage:s,getLanguagePrefix:function(){return l().replace("-","_")},isUserAllowedForeignLanguage:c,getContentLanguage:d,isLanguageSetTo:function(e){if("string"!=typeof e)throw new Error('argument "language" should be a 2 characters string, e.g. "en"');return d()===e},isPersonaLocaleForeignLanguage:function(){var e=t.read(),n=e&&e.locale?e.locale.replace("_","-"):"";return!!n&&n!==a},isCurrentLanguageSetToDefault:function(){var e=o.getLocale();return n.get("languageDefault")?e===n.get("languageDefault"):e===a},isInternationalizationEnabled:function(e){var t=n.get("languageSplashUnavailableSegments"),i=o.getSegment()||"";if(!t)throw new Error('setting "languageSplashUnavailableSegments" is undefined');return!e&&-1===t.indexOf(i.toUpperCase())},clearSplashViewed:function(){r.remove("internationalizationSplashSeen")},setSplashViewed:function(){r.set("internationalizationSplashSeen",!0)},getSplashViewed:function(){return r.get("internationalizationSplashSeen")}}})),define("appkit-utilities/podCookie/podCookie",["require","blue/log","blue/store/enumerable/cookie","blue/siteData","blue/root"],(function(e){return function(t){var n=t&&t.name||"POD",i=e("blue/log")("["+n+"Cookie]"),a=new(e("blue/store/enumerable/cookie"))(null,!0),r=e("blue/siteData"),o=t&&r.getData(t.siteDataPodID),s=t&&t.podCookieName||"podKey",c=o||t&&t.podCookieDefaultValue||1,l=e("blue/root"),d=l.location&&l.location.hostname||"",u=d&&"."+d.split(".").slice(-2).join("."),p=""===d?"":("localhost"===d?"localhost":t&&t.domain)||u,f=t&&t.path||"/",m=t&&t.expires||new Date((new Date).setYear((new Date).getFullYear()+1));i.warn("podCookie has been DEPRECATED, please use appkit/cookie/cookie.js."),a.set(s,c,m,f,p,!0),i.debug("Created "+n+" cookie")}})),define("appkit-utilities/rapidash/rapidash",["require","blue/util","blue/intercept","blue/log"],(function(e){var t,n=e("blue/util"),i=e("blue/intercept"),a=e("blue/log")("[rapidash]"),r=function(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)},o=function(e){return e?e.toString():""},s=function(e){return o(e).toUpperCase()},c=function(e){return function(){var t=Array.prototype.slice.call(arguments),i=t[0];return Array.isArray(i)?n.array[e].apply(this,t):"object"==typeof i?n.object[e].apply(this,t):void 0}};return t={combine:n.array.combine,compact:n.array.compact,difference:n.array.difference,intersection:n.array.intersection,invoke:n.array.invoke,range:n.array.range,sort:n.array.sort,union:n.array.union,unique:n.array.unique,toHtmlString:function(e){for(var t='<ul class="account-service-list">',n=0,i=e.length;n<i;n++)t+="<li>"+e[n]+"</li>";return t+"</ul>"},objToHtmlString:function(e,t){for(var n='<ul class="account-service-list">',i=0,a=e.length;i<a;i++)n+="<li>"+e[i][t]+"</li>";return n+"</ul>"},flatten:function(e){for(var t=[],n=0,i=e.length;n<i;n++)Array.isArray(e[n])?t=t.concat(e[n]):t.push(e[n]);return t},findByKey:function(e,t,i){return n.array.find(e,(function(e){return e[t]===i}))},compose:n.function.compose,debounce:n.function.debounce,partial:n.function.partial,prop:n.function.prop,series:n.function.series,times:n.function.times,wrap:n.function.wrap,equals:n.object.equals,every:n.object.every,extend:n.object.extend,filter:n.object.filter,find:n.object.find,functions:n.object.functions,get:n.object.get,has:n.object.has,map:n.object.map,merge:n.object.merge,set:n.object.set,unset:n.object.unset,deepCopy:function(e){var t={};return n.object.extend(!0,t,e),t},restructureObject:function(e){if(r(e)){var t={};return Object.keys(e).forEach((function(i){r(n.object.get(t,i))||n.object.set(t,i,e[i])})),t}return e},intersectObjects:function(e,t){if(!r(e)||!r(t))throw new Error('type error: function "intersectObjects" argument "o1, o2" must be type "object"');for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]||(t[n]=null))},values:function(e){var t=[];if(r(e))for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},bindMethods:function(e){Object.getOwnPropertyNames(e.constructor.prototype).forEach((function(t){"function"==typeof e[t]&&(e[t]=e[t].bind(e))}))},subclass:function(e,t){return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t},camelCase:n.string.camelCase,escapeHtml:n.string.escapeHtml,hyphenate:n.string.hyphenate,interpolate:n.string.interpolate,makePath:n.string.makePath,properCase:n.string.properCase,properCaseForNames:function(e){return function(e){return o(e).toLowerCase()}(e).replace(/^\w|\s\w|[-'](?=[a-zA-z])[a-zA-z]/g,s)},removeNonASCII:n.string.removeNonASCII,removeNonWord:n.string.removeNonWord,stripHtmlTags:n.string.stripHtmlTags,truncate:n.string.truncate,typecast:n.string.typecast,unCamelCase:n.string.unCamelCase,unescapeHtml:n.string.unescapeHtml,unhyphenate:n.string.unhyphenate,snakeCase:function(e){return n.string.unCamelCase(e,"_")},lispCase:function(e){return n.string.unCamelCase(e,"-")},max:c("max"),min:c("min"),pick:c("pick"),pluck:c("pluck"),forEach:function(e,t){var n;if(Array.isArray(e))e.forEach(t);else if("object"==typeof e)for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])},serialize:function(e,t,i){var a={};i.forEach((function(e,n){a[t+"["+n+"]"]=e})),n.object.extend(!1,e,a)},updateModel:function(e,t){var n;if(!r(t))throw new Error('type error: function "update" argument "object" must be type "object"');for(var i in t)if(t.hasOwnProperty(i))if(Array.isArray(t[i])){var a,o=0;for(a=(n=t[i]).length,e.set(i,[]);o<a;o++)e.set(i+"."+o,n[o])}else e.set(i,t[i])},isObject:r,toObject:function(e){var t={};return void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return/function ([^(]*)/.exec(this+"")[1]}}),e.forEach((function(e){"function"==typeof e?t[e.name]=e:t[e]=e})),t},setValueOrDefault:function(e,t){return e||(t||"")}},a.warn("Appkit Rapidash is deprecated. Please start using blue/util directly or move logics into your scrum codes"),Object.keys(t).forEach((function(e){i.after(t,e,(function(){a.warn("rapidash."+e+" is deprecated. Please start using blue/util directly.")}))})),t})),define("appkit-utilities/xDomainChannel/connector",["require","exports","module"],(function(e,t,n){return function(){var e,t,n={};function i(){return n}function a(e,n){var a=i();if(!a.appContext||n){if(e||"number"==typeof e||(e=Date.now()),t)if((t[a.hostId]||"")===e)return;r({action:"add",id:a.hostId,time:e})}}function r(t){e&&e.contentWindow.postMessage(t,i().target)}return{init:function(n){var r=i();return function(e,t){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.id=e.id||"smframe",t.hostId=function(e,t){for(t=e="";e++<36;t+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return t}(window.location.href),t.target=e.target||"http://localhost",t.host=e.host||"http://localhost",t.url=t.target+"?host="+t.host+"&id="+t.hostId}(n,r),r.appContext&&r.appContext.on("timeout:resetTime",(function(){a(Date.now(),!0)})),window.addEventListener("message",(function(e){t=e.data||{},r.peerActivityCallback&&r.peerActivityCallback.call(this,e.data)})),e=function(e){var t,n=e||i();if(!n.url||!n.id)return;return(t=document.createElement("iframe")).src=n.url,t.id=n.id,t.width=0,t.height=0,t.style="width:0; height:0; border:0; border:none;",document.body.insertAdjacentElement("afterend",t),t}(r),r.hostId},update:a,logoff:function(){r({action:"logoff",id:i().hostId})},getId:function(){if(!n.hostId)throw new Error("xDomainChannel().init() must be invoked prior to requesting getId()");return n.hostId}}}})),define("appkit-utilities/sessionTimeout/timeout",["require","exports","module","blue/site","blue/hash","blue-app/settings","blue/event/channel/domEvents","shared-data","appkit-utilities/xDomainChannel/connector"],(function(e,t,n){"use strict";var i,a,r=e("blue/site"),o=e("blue/hash"),s=e("blue-app/settings"),c=e("blue/event/channel/domEvents"),l=e("shared-data"),d=0,u=!1,p=!1,f=null,m=null,g=null,v=!1,h=!1,y=Date.now||(new Date).getTime,b=function(){clearInterval(d),d=0},C=function(){var e=y(),t=(s.get("lastServiceCallTime")||y())+1e3*a.sessionDelay,n=f+1e3*a.areYouThereDelay,r=f+1e3*a.serviceDelay;v?r<=e&&(i.broadcast("timeout:redirectToDestination",{isSessionTimeout:!0,needToHideOverlay:!1,clientId:m,redirectUrl:g}),b()):(n<=e&&!p&&(i.broadcast("timeout:showModal"),p=!0),t<=e&&(i.logger.debug("time to call service"),i.broadcast("timeout:extendSession")),r<=e&&i.broadcast("timeout:proceedToLogoff",{isSessionTimeout:!0,needToHideOverlay:!1,clientId:m,redirectUrl:g}))},A=function(){i.logger.debug(`User activity detected: ${f}`),f=y(),i.emit("timeout:resetTime",f),document.body.dispatchEvent(new CustomEvent("cxo:timeout:resetTime",{detail:{data:{lastUserActivity:f}}}))},I=function(){A(),d=setInterval(C,1e3*a.timeoutInterval)},E=function(){return 0!==d},S=function(){!function(e){if(u=!1,a.excludedActions)for(var t=0;t<a.excludedActions.length;++t)if(e===a.excludedActions[t])return u=!0;return u}(o.getHashArr()[1]||"index")?E()||I():b()},w=function(){i.logger.debug("Extend Session"),f=y(),p=!1},T=function(){i.logger.debug("No activity, Logging off"),p=!1,b()},O=y(),k=function(e,t){O+t-y()<=0&&("function"==typeof e&&e(),O=y())},D=function(e,t){if(e){var n=s.get("lastServiceCallTime")||y(),r=e.allowOverrideTimeout&&window.location.href.indexOf("?A59")>0;e.serviceDelay=r?120:e.serviceDelay,e.areYouThereDelay=r?60:e.areYouThereDelay,e.sessionDelay=r?80:e.sessionDelay,Object.assign(a,e),i.logger.debug("Session Timeout Initialized"),s.set({lastServiceCallTime:n},s.Type.USER),c.on((function(e){!E()||u||e.target!==window||"keydown"!==e.type&&"click"!==e.type&&"scroll"!==e.type||p||("scroll"===e.type?k(A,500):A())})),i.on({"blue:routeChange":S,"timeoutComponent:requestSessionExtension":w,"timeoutComponent:proceedToLogoff":T,"timeoutComponent:updateSettings":M,"messenger:userActivity":function(){p||A()}}),x(),S()}else i.logger.debug("Please pass settings object to SessionTimeout init method.")},x=function(){var t=n.config()||{};if("object"==typeof t&&t.enableCrossDomainCommunication){var a,r=e("appkit-utilities/xDomainChannel/connector")();i.on("timeoutComponent:beginCrossDomainSession",(function(){!a&&t.target&&t.host&&(a=r.init({target:t.target,host:t.host,peerActivityCallback:function(e){i.logger.debug("User activity detected in partner site"),"logoff"===e[e.lastUpdatedBy]?i.emit("timeoutComponent:proceedToLogoff"):i.emit("messenger:userActivity")},appContext:i}))}))}},M=function(e){e.overrideTimeout?a=e:Object.assign(a,e),b(),I()};return l.sharedDataObserver("octagonIdleState").subscribe((function(e){var t=e;h&&(t.isOctagonAppTimerStarted&&b(),!1===t.isOctagonAppTimerStarted&&S(),t.proceedToLogoff&&(i.broadcast("timeout:proceedToLogoff",{isSessionTimeout:!0,needToHideOverlay:!1}),T()))})),{init:function(e,t){if(h=!0,!e)return D(e);a=Object.assign({},e),i=t||r.context,f=y();const n=e.eligibleClientIds||[];g=e.redirectUrl||"",m="string"==typeof e.clientId?e.clientId.toUpperCase():"",(v=function(e){return!(!m||!e)&&e.map((e=>e.toUpperCase())).includes(m)}(n))?(i.logger.debug("Session Timeout Initialized for logon."),c.on((function(e){!E()||u||e.target!==window||"keydown"!==e.type&&"click"!==e.type&&"scroll"!==e.type||("scroll"===e.type?k(A,500):A())})),i.on({"blue:routeChange":S}),S()):D(e)}}})),define("appkit-utilities/VOC/util",["require","blue-app/with/locationAPI","blue/siteData","blue/log","appkit-utilities/language/helper","blue/routeHistory","blue/is","blue/util"],(function(e){var t=new(e("blue-app/with/locationAPI")),n=e("blue/siteData"),i=e("blue/log")("[VOCUtil]"),a=e("appkit-utilities/language/helper"),r=new(e("blue/routeHistory")),o=e("blue/is"),s=e("blue/util").object.extend,c={resizable:"yes",location:"no",status:"no",scrollbars:1,width:570,height:630,top:parseInt((screen.height-570)/2),left:parseInt((screen.width-630)/2)};function l(e){var o,c,l,d,u=a.isLanguageSetTo("es")?"/lang=es":"",p=t.getLocationProtocolAndServer()+t.getLocationPath()+"#",f=r.getHistory(0)?p+r.getHistory(0).url:"",m="",g=t.getLocationURL(),v=(new Date).getTime(),h={profileId:n.getData("ssv_pfid")||"",bSeg:n.getData("segment")||""};try{d=h,m="{"+Object.keys(d).map((function(e){return e+": '"+d[e]+"'"})).join(", ")+"}"}catch(e){i.warn("Error while performing JSON.stringify:",e)}if(l=e&&e.opinionLabParamsData&&e.opinionLabParamsData.referer||g){!l.endsWith("/")&&l.indexOf(";")<0&&(l+="/");try{l.endsWith("/")||(l+=";"),l+="bSeg="+n.getData("segment")+";brand="+n.getData("brandId")+u}catch(e){i.error("Error while performing referer URL")}l=encodeURIComponent(l)}return o={width:screen.width,height:screen.height,referer:encodeURIComponent(l),time1:v,time2:v,currentURL:encodeURIComponent(g+u),customVars:encodeURIComponent(m).replace(/'/g,"%27"),_rev:"2",custom_vars:"",ocodeVersion:"5.9",prev:encodeURIComponent(f),type:"Popup"},e&&e.opinionLabParamsData&&e.opinionLabParamsData.referer&&(e.opinionLabParamsData.referer=l),c=s({},o,e&&e.opinionLabParamsData),Object.keys(c).map((function(e){return e+"="+c[e]})).join("&")}return{openVOCSurvey:function(e,t,n){var a,r,d,u,p,f,m;(p=e&&o.string(e)?e:t,n=e&&o.string(e)&&t?t:n,p||o.string(p))?(e&&o.object(e)&&i.warn('voc/util: param "context" is no longer needed'),!n||o.plainObject(n)?(a=n&&n.windowName||"OnlineOpinion",r=l(n),d=s({},c,n&&n.windowFeatures),u="resizable="+(m=d).resizable+",location="+m.location+",status="+m.status+",scrollbars="+m.scrollbars+",width="+m.width+",height="+m.height+",top="+m.top+",left="+m.left,p+="?"+r,(f=window.open(p,a,u))&&f.focus()):i.error("options must be a plain object")):i.error("surveyUrl must be a string")}}})),define("appkit-utilities/jsBridge/jsBridge",["require","blue/root"],(function(e){"use strict";var t,n,i=e("blue/root"),a={},r="JPKJavaScriptBridgeHandler";function o(e,a){var o,s,c,l=function(){n.logger.info('calling javaScript bridge "'+e+'"'),void 0!==a?i[r][e](a):i[r][e]()};i.hybrid&&(o=e,c=0,new Promise((function(e,n){s=setInterval((function(){i[r]&&i[r][o]?(clearInterval(s),e()):c>=t?(clearInterval(s),n()):c++}),10)}))).then((function(){setTimeout(l,1)})).catch((function(){n.logger.error('javaScript bridge "'+e+'" is not available')}))}return a.init=function(e,r,s){var c;if(!e||!r)throw new Error("jsBridge: missing appContext or settings. jsBridge init failed.");if("function"!=typeof r)throw new Error("jsBridge: settings must be a function. Please follow the documentation.");t=s||500,c=r(o,i,n=e),Object.keys(c).forEach((function(e){a[e]?n.logger.warn("jsBridge."+e+' already exists. Please rename method "'+e+'"'):a[e]=c[e]}))},a.setJsBridgeHandler=function(){r=i&&i.DMFUseNewJSBridgeHandler?"DMFJSBridgeHandler":"JPKJavaScriptBridgeHandler"},a.callBridge=o,a.assignContext=function(e){n=e.appContext,t=e.maxRetryCount||t},a})),define("appkit-utilities/analyticsPersonalizationUtil/targetUtility",["require","blue/event/channel/analytics"],(function(e){"use strict";var t=e("blue/event/channel/analytics");return{targetAnalyticsCall:function(e,n){var i=n;t.emit("sendPersonalizationImpression",{tntPersonalizationData:{product:"tnt",category:2,elementName:i,elementPlacement:e}})}}})),define("appkit-utilities/analytics/data/hooks",[],(function(){return[{module:"appkit-utilities/content/dcu",ref:"dynamicSettings",method:"get"},{module:"appkit-utilities/content/dcu",ref:"dynamicSettings",method:"set"},{module:"appkit-utilities/content/dcu",ref:"dynamicContent",method:"get"},{module:"appkit-utilities/content/dcu",ref:"dynamicContent",method:"set"}]})),define("appkit-utilities/analytics/overlay",["require","blue/event/channel/component","blue/log"],(function(e){var t={},n=e("blue/event/channel/component"),i=e("blue/log")("[analytics-overlay]");function a(e){if(e&&e.output&&e.context&&e.context.is)return!0;var t=e&&e.name;return i.warn("INVALID_COMPONENT "+t),!1}function r(e,t){if(e.context.is.string(t)&&(a=t,r="Overlay",String.prototype.endsWith?a.endsWith(r):-1!==a.indexOf(r,a.length-r.length))){var n="";return e.spec&&e.spec.states&&e.spec.states[t]||(n="UNDEFINED_STATE "+t+" in "+e.name,i.warn(n)),{errorMsg:n}}var a,r;return i.warn("INVALID_STATE "+t+" in "+e.name),!1}function o(e,t,n,r){var o={value:t,overlayStatus:n,errorMsg:r},s=e.name||e.key||"Component";a(e)?e.output.emit("state",o):i.warn(s+" has been destroyed before "+t+" event could be emitted. Please wait for "+n+"Overlay to resolve before destroying component.")}function s(e,n){var i=t[n];e.context.is.array(i)&&i.map((function(e){e()})),delete t[n]}function c(e,i,a,r,c){return new Promise((function(l){var d=function(e,t,n){return e.name+"__"+t+"__"+n}(e,c,i);s(e,d),t[d]=n.on("action/"+c,(function(){o(e,i,a,r),s(e,d),l&&l()}))}))}return{showOverlay:function(e,t,n){var i=a(e)&&r(e,t);if(i){if(n)return c(e,t,"show",i.errorMsg,n);o(e,t,"show",i.errorMsg)}},hideOverlay:function(e,t,n){return a(e)&&r(e,t)?c(e,t,"hide","",n):Promise.reject(new Error("Invalid component or invalid state."))}}})),define("appkit-utilities/common/mediaQueryListener",["require"],(function(e){var t={XS:"xs",SM:"sm",MD:"md",LG:"lg"},n=function(){return!!window.getComputedStyle&&window.getComputedStyle(document.body,":after")},i=function(e){return null===e.afterElement&&(e.afterElement=n()),null===e.afterElement?t.XS:e.afterElement.getPropertyValue&&e.afterElement.getPropertyValue("content").replace(/['"]+/g,"")},a=function(){this.afterElement=n(),this.currentBreakpoint=i(this),this.lastBreakpoint=this.currentBreakpoint,this.BREAKPOINT=t,this.init()};return a.prototype={init:function(){!1!==this.afterElement&&this._resizeListener()},_resizeListener:function(){var e=this;function t(){var t;e.currentBreakpoint=i(e),e.currentBreakpoint!==e.lastBreakpoint&&(window.CustomEvent&&"function"==typeof window.CustomEvent&&(t=new CustomEvent("breakpoint-change",{detail:e.currentBreakpoint})),window.dispatchEvent(t),e.lastBreakpoint=e.currentBreakpoint)}window.addEventListener("load",t),window.addEventListener("resize",t),screen.orientation&&screen.orientation.addEventListener("change",t)}},new a})),define("appkit-utilities/common/timerAPI",[],(function(){"use strict";var e={};return{timerMark:function(t,n){var i=(n=n||{}).timestamp||Date.now(),a=n.startStop||"";"start"===a&&(t="!"+t),"stop"===a&&(t+="!"),e[t]=i},timerReport:function(){var t=["LOAD TIMER"],n=[];for(var i in e)e.hasOwnProperty(i)&&n.push(e[i]+":"+i);if(n.length<2)return"";n.sort();var a,r,o=n[0].split(":")[1],s=n[0].split(":")[0];return n.length&&t.push(n[0].split(":")[0]+" : "+n[0].split(":")[1]),n.forEach((function(e,n,i){if(0!==n){var c=e.split(":")[1],l=e.split(":")[0],d=c.indexOf("!");0===d&&(s=l,o=c),d>0&&(r=l,a=c),t.push(l+" : "+c+" ( "+(l-i[n-1].split(":")[0])+"ms )")}})),r||(r=n[n.length-1].split(":")[0],a=n[n.length-1].split(":")[1]),t.push("Total ("+o+" -> "+a+"): "+(r-s)+"ms"),t.join("\n").replace(/\!/g,"")}}})),define("appkit-utilities/dataSet/util",[],(function(){function e(e,t){return e[t]}function t(e){return void 0===e?Number.NEGATIVE_INFINITY:"string"==typeof e?e.toUpperCase():e}function n(){}return n.prototype.sort=function(n,i,a){var r="asc"===a||!0===a?-1:1,o=-1===r?1:-1;return n.sort((function(n,a){if(Array.isArray(i))for(var s,c,l=0;l<i.length;){if(s=e(n,i[l]),c=e(a,i[l]),(s=t(s))!==(c=t(c))){n=s,a=c;break}l++}else n=e(n,i),a=e(a,i),n=t(n),a=t(a);return n<a?r:n>a?o:0}))},n.prototype.search=function(e,t,n){if((t=(t="number"==typeof t?String(t):t).trim())&&t.length>0){var i=new RegExp(t,"i");e=e.filter((function(e){if(n)return i.test(e[n]);for(var t in e)if(e.hasOwnProperty(t)&&i.test(e[t]))return!0}))}return e},new n})),define("appkit-utilities/experimentation/config/experimentationConfig",[],(function(){return{CommonAreas:[],ContentComponentSpecs:["UPDATE_PAPERLESS_PREFERENCES"],targetElements:[]}})),define("appkit-utilities/content/dcu",["require","blue/is","blue/util","blue-app/settings","blue/log"],(function(e){var t,n,i=e("blue/is"),a=e("blue/util"),r="LOCALIZED_CONTENT",o=e("blue-app/settings"),s=e("blue/log")("[appkit dcu]");function c(e){var t;return t=r,a.object.has(e,"context.area.areaName")?t=r+"_"+e.context.area.areaName.toString().toLowerCase():e.area&&(t=r+"_"+e.area.name.toString().toLowerCase()),t}function l(e){return a.object.has(e,"spec.name")?e.spec.name:e.context?e.context.componentName:e.name}function d(e,t){var n,s=l(e),d=o.get(r+"_app"),u=o.get(c(e)),p=e.globalSpecs,f=function(e,n){return-1!==n.indexOf(t+".")};if(n=function(e,t,n){return e&&e[n]?e[n]:t&&t[n]?t[n]:void 0}(u,d,s)||{},i.plainObject(n)){n=a.object.filter(n,(function(e,n){return-1!==n.indexOf(t+".")}));for(var m=0;p&&m<p.length&&0===Object.keys(n).length;m++)n=a.object.filter(d[p[m]],f)}return n}function u(e,t,n,d){var u,p=n,f=d,m=e.globalSpecs||[];return i.plainObject(n)&&(p=d,f=n),u=function(e,t,n,s){var d,u=null,p=l(e),f=o.get(r+"_app"),m=n?t+"."+n:t;return d=function(e,t,n,i){return e&&e[n]?e:t&&t[n]||t&&function(e,t){if(t)for(var n=0,i=t.length;n<i;n++)if(e[t[n]])return!0;return!1}(t,i)?t:void 0}(o.get(c(e)),f,p,s),i.plainObject(d)&&((u=d[p]&&a.object.get(d[p],m))||(u=d[p]&&d[p][m]?d[p][m]:function(e,t,n){for(var i,a,r=0;t&&r<t.length;r++)if(i=e[a=t[r]]&&e[a][n])return i}(f,s,m))),u}(e,t,p,m),i.undefined(u)&&s.warn("Content was undefined: contentKey:"+t+", variation:"+n),u=i.defined(u)&&i.defined(f)&&i.plainObject(f)?a.string.interpolate(u,f):u}function p(e,t,n,r){var o=u.call(this,e,t,n,r);return i.undefined(o)&&s.warn("Content was undefined: contentKey:"+t+", variation:"+n),e[a.string.camelCase(t)]=o,o}function f(e,t,a){var r={};if(!i.array(t))throw s.warn("arrayOfContentKeys must be an array containing objects in the following format: {key, variation, props}"),new Error("arrayOfContentKeys must be an array containing objects in the following format: {key, variation, props}");for(var o=0;o<t.length;o++){var c=t[o];r[c.key]=a?n.get(e,c.key,c.variation,c.props):n.set(e,c.key,c.variation,c.props)}return r}return t={dynamicSettings:{get:u,set:p},dynamicContent:{get:u,set:p,getMultiple:function(e,t){return f(e,t,!0)},setMultiple:function(e,t){return f(e,t,!1)},getList:function(e,t,n,i){var a,r,o=d(e,t),s=[];return Object.keys(o).forEach((function(e){a={},(r=e.split(".")).length>1&&(a[n]=o[e],a[i]=r[1],s.push(a))})),s},getVariations:d,getGlobal:function(e,t){var a=e,r=t,o="GLOBAL";i.object(e)&&(a=e.label,r=e.variation,o=e.globalName||o);var s={area:{name:"app"},spec:{name:o}};return n.get(s,a,r)},setForBinding:function(e,t,n,i){var a=u.call(this,e,t,i);e[n]=a}}},n=t.dynamicContent,t})),define("appkit-utilities/experimentation/content/contentOverride",["require","appkit-utilities/experimentation/config/experimentationConfig","blue/intercept","blue-view/nodeDictionary","blue-app/settings","blue/is","appkit-utilities/content/dcu","blue/log"],(function(e){var t,n=e("appkit-utilities/experimentation/config/experimentationConfig"),i=e("blue/intercept"),a=e("blue-view/nodeDictionary"),r=e("blue-app/settings"),o=e("blue/is"),s=e("appkit-utilities/content/dcu"),c=e("blue/log")("[contentOverride]"),l={};function d(e,t,n,i,a){var r=e.EXPERIMENTS;return r&&r[t]&&r[t][a+"."+n]&&r[t][a+"."+n][i]}function u(e){for(var t,n,i,a,r,c=0,d=e.length,u=0;c<d;c++)if(e[c].experimentId,t=e[c].parameter,e[c].choice,n=e[c].component,i=l[n],o.defined(i))for(u=i.length;u--;)r=i[u].component,o.defined(r)&&(t=t.split("."),a=s.dynamicSettings.set(r,t[0],t[1]),o.undefined(t[1])&&(i[u].component.spec.settings[t[0]].value=a));delete l[n]}return{init:function(){var e,r,s,c,d=this,u=n.ContentComponentSpecs||[],p=[];e=u.length,t=i.on(a,"add",(function(){r=(s=arguments[1]).component&&s.component.name,!o.defined(r)||-1===u.indexOf(r)&&0!==e||(c=l[r],(p=c||[]).push(s),l[r]=p),0!==e&&e===Object.keys(l).length&&(d.overrideExperimentContent(),d.unplugComponentRegister())}))},unplugComponentRegister:function(){setTimeout(t&&t.remove,1e3)},setExperiment:function(e){this.experiments=e},getExperiment:function(){return this.experiments},overrideExperimentContent:function(){var e=this.getExperiment();if(o.defined(e)){for(var t,n,i,a=Object.keys(e),s=0,c=this,l=a.length;s<l;s++)t=a[s],n=t.toString().toLowerCase(),i=r.get("LOCALIZED_CONTENT_"+n),o.defined(i)&&o.defined(e[t].content)&&!o.empty(i)&&(i=c.overrideCq5Content(i,t),r.set("LOCALIZED_CONTENT_"+n,i,r.Type.ENV),u(e[t].content));this.unplugComponentRegister()}},overrideCq5Content:function(e,t){var n=this.getExperiment();if(o.defined(e)&&o.defined(n)&&!o.empty(n)){var i,a,r,s,l,u=n[t],p=0,f=0;if(u=u&&u.content,o.defined(u))if(e.EXPERIMENTS)for(p=u.length;f<p;f++)i=u[f].experimentId,a=u[f].parameter,r=u[f].choice,s=u[f].component,"control"!==r&&(e[s]&&e[s][a]?(l=d(e,i,a,r,s))?e[s][a]=l:c.error("Experimentation overrideCq5Content failed: cannot get choice "+r+" for setting '"+a+"' in component '"+s+"' in cq5 bundle of area '"+t+"'"):c.warn("Experimentation overrideCq5Content failed: content for setting '"+a+"' does not exist in component '"+s+"' area '"+t+"'"));else c.error("Experimentation overrideCq5Content failed: EXPERIMENTS does not exist in cq5 bundle of area '"+t+"'")}return e}}})),define("appkit-utilities/content/contentSvc",["require","exports","module","blue/is","blue/device","blue/log","blue-app/settings","blue/resource/persona","appkit-utilities/experimentation/content/contentOverride","blue/util","blue/root"],(function(e,t,n){"use strict";var i=e("blue/is"),a=e("blue/device"),r=e("blue/log")("[contentService]"),o=e("blue-app/settings"),s=e("blue/resource/persona"),c=e("appkit-utilities/experimentation/content/contentOverride"),l=e("blue/util").object.extend,d=e("blue/root").hybrid;return function(){this.context||(this.context={});var e=this.context.brandIdCookie&&this.context.brandIdCookie(),t=a.shortLang,u=!!i.defined(d)&&d,p="LOCALIZED_CONTENT_",f=n.config()?n.config():{},m=function(e,t){return i.defined(f[e])?f[e]:o.has(e)?o.get(e):t},g={ignoreSiteAndVersion:m("ignoreSiteAndVersion",!1),localBackup:m("localBackup",!1),useLocalContent:m("useLocalContent",!1),remoteContentUrl:m("remoteContentUrl",""),localContentUrl:m("localContentUrl",""),contentSite:m("contentSite",""),contentVersion:m("contentVersion",""),contentBrand:e||(i.defined(f.contentBrand)?f.contentBrand:""),contentViewType:u?"HYBRID":""},v=function(e){var t=f.contentUrls[e];return!!i.defined(t)&&i.defined(f.useLocalContent?t.local:t.remote)},h=function(e,n){var a=e?e.toString().toLowerCase():"app";if(n.success&&i.plainObject(n.result)){if(n.result.language===t&&(g.ignoreSiteAndVersion||n.result.version===g.contentVersion&&n.result.site===g.contentSite)){var s=c.overrideCq5Content(n.result.bundles,e);return o.set(p+a,s,o.Type.ENV),n}return r.warn("Remote content server response does not match requested language, version, or site"),o.set(p+a,{},o.Type.ENV),{}}return r.warn("Remove content server response was not successful or was formatted incorrectly"),o.set(p+a,{},o.Type.ENV),{}},y=function(e){var t=e?e.toString().toLowerCase():"app";return o.set(p+t,{},o.Type.ENV),{}},b=function(e,t,n){var i={url:e.getContentUrl(t)};return n&&l(i,n),e.remoteContent({},i).then(h.bind(e,t)).catch(y.bind(e,t))};!u&&o.has("contentLanguage")?t=o.get("contentLanguage"):i.defined(f.contentLanguage)&&(t=f.contentLanguage),this.hasAreaBasedContentSupport=i.defined(f.contentUrls),this.hasAreaBasedContentSupport||(f.contentUrls={app:{remote:g.remoteContentUrl,local:g.localContentUrl}}),this.hasContentLocation=v("app"),this.getContentUrl=function(e){var n=f.contentUrls[e||"app"];return n?function(e){if(!e)return"";for(var n=!0===f.useBrandContent&&g.contentBrand||"",i=e,a=/:[a-zA-Z]+/g,r={":language":t,":site":g.contentSite,":version":g.contentVersion,":brand":n,":viewtype":g.contentViewType},o=null;o=a.exec(e);){var s=o[0],c=r[s]||"";i=i.replace(s,c)}return i.replace(/([^a-zA-Z])_/g,"$1").replace(/_([^a-zA-Z])/g,"$1").replace(/([^:])\/+/g,"$1/")}(f.useLocalContent?n.local:n.remote):""},this.checkContentMapping=v,this.getAppContent=function(e){return v("app")?b(this,"app",e):Promise.reject("App specific content bundle not available")},this.getAreaContent=function(e,t){return e&&!v(e)?Promise.reject("Area based content not available"):b(this,e,t)},this.setLanguage=function(e){var t=new s,n=t.read(),a=e.replace("-","_");o.set("language",e,o.Type.PERM),o.set("contentLanguage",e.split("-")[0]),this.settings("remoteContent").url=this.getContentUrl("app"),1===a.split("_").length&&(a+="_us"),i.defined(n)&&i.plainObject(n)&&(n.locale=a,t.update(n))},this.serviceCalls={remoteContent:{settings:{method:"GET",redirect:!0,timeout:3e4,xhrFields:{withCredentials:!1},disableCsrf:!0,byPassUserProfileService:!0,url:this.getContentUrl("app")}}}}})),define("appkit-utilities/content/globalContentMixin",["require","blue-app/settings"],(function(e){var t,n=e("blue-app/settings"),i=function(){};return function(e,a){var r,o,s,c,l,d=this,u=d.context.is,p=n.get("LOCALIZED_CONTENT_app",n.Type.ENV);function f(e,t){d.model.set(e,t),Object.defineProperty(d,e,{get:function(){return d.model.get(e)},set:function(t){d.model.set(e,t)},configurable:!0,enumerable:!0}),d._("settings")||d._("settings",{}),d._("settings")[e]||(d._("settings")[e]={value:t})}function m(e){var t,n;if(!u.object(o))return!1;n=(t=Object.keys(o)).length;for(var i=0;i<n;i++){var a=t[i].split(".");if(a[0]===e)return 1===a.length?o[e]:null}return!1}if(r=(l=a)&&l.indexOf("GLOBAL")>=0?a:"GLOBAL",o=p&&p[r],!u.defined(e))throw d.context.logger.warn("contentKeys must be defined. A string or array of string keys is acceptable."),new Error("contentKeys must be defined. A string or array of string keys is acceptable.");if(!u.string(e)&&!u.array(e))throw d.context.logger.warn("contentKeys must be a string or an array."),new Error("contentKeys must be a string or an array.");u.string(e)&&(e=[e]),(s=d.globalSpecs||[]).push!==i&&(t=s.push,s.push=i),-1===s.indexOf(r)&&t.apply(s,[r]),d.globalSpecs&&delete d.globalSpecs,Object.defineProperty(d,"globalSpecs",{value:s,writable:!1,configurable:!0}),c=e.length;for(var g=0;g<c;g++){var v=e[g],h=m(v);h||null===h?f(v,h):d.context.logger.warn("GlobalContentMixin: contentKey that was passed in does not exist in the global spec. Key: "+v)}}})),define("appkit-utilities/content/interceptor/validator",[],(function(){"use strict";var e=!1,t=/showcontentlabels=true/gi;return{around:function(n){return new Promise((function(i,a){n.proceed().then((function(a){try{if(e=e||"SHOWCONTENTLABELS"===n.target.context.state().query.string||t.exec(n.target.context.state().query.string.toLowerCase()))return void i(function(e){if(e&&e.result&&e.result.bundles){var t=e.result.bundles;for(var n in t)for(var i in t[n])t[n][i]=i}return e}(a))}catch(e){}i(a)})).catch((function(e){a(e)}))}))}}})),define("appkit-utilities/messenger/protocolManager",[],(function(){"use strict";var e=function(e,t,n){return this.current=n[e]===t?n:null,null!==this.current};function t(){this.protocols=[],this.current={commandList:[]}}return t.prototype=Object.create(null),t.prototype.constructor=t,t.prototype.clear=function(){this.protocols=[],this.current={commandList:[]}},t.prototype.inject=function(e){this.locate(e.protocol)?e.commandList.every(this.injectCommand.bind(this)):(this.protocols.push(e),this.current=this.protocols[this.protocols.length-1])},t.prototype.injectCommand=function(e){for(var t=0;t<this.current.commandList.length;t++)if(this.current.commandList[t].command===e.command)return this.current.commandList[t].action=e.action,!0;return this.current.commandList.push(e),!0},t.prototype.locate=function(t,n){if(this.protocols.some(e.bind(this,"protocol",t)))return n&&this.current.commandList.some(e.bind(this,"command",n)),this.current},t})),define("appkit-utilities/messenger/messengerProtocols",[],(function(){"use strict";return{protocols:[{protocol:"handshake",commandList:[{command:"ready",action:function(){}}]},{protocol:"sessionTimeout",commandList:[{command:"userActivity",action:function(){}}]},{protocol:"childEvent",commandList:[{command:"quoteIframeRendered",action:function(){}},{command:"cancel",action:function(){this.shutdown()}},{command:"setTitle",action:function(){}},{command:"returnToAccounts",action:function(){this.shutdown()}},{command:"navigate",action:function(){this.shutdown()}},{command:"documentsnavigate",action:function(){this.shutdown()}},{command:"logoff",action:function(){this.shutdown()}},{command:"viewRendered",action:function(){}},{command:"error",action:function(){}},{command:"authSuccess",action:function(){this.shutdown()}},{command:"updateState",action:function(){}},{command:"stickyData",action:function(){}},{command:"interaction",action:function(){}},{command:"logService",action:function(){}},{command:"quickDepositPDF",action:function(e){}},{command:"returntoDWMApplication",action:function(e){this.shutdown()}},{command:"returnToAccountsWithProfileRefresh",action:function(e){this.shutdown()}},{command:"showExternalSpeedBump",action:function(e){}},{command:"showLanguageSpeedBump",action:function(e){}},{command:"setFocusToIFrame",action:function(e){}}]},{protocol:"displayEvent",commandList:[{command:"resize",action:function(){}},{command:"scrollTo",action:function(){}},{command:"getParentOffset",action:function(){}},{command:"setParentScroll",action:function(e){}},{command:"focus",action:function(){}}]},{protocol:"parentEvent",commandList:[{command:"requestState",action:function(){}}]}]}})),define("appkit-utilities/messenger/messenger",["require","blue/log","appkit-utilities/messenger/protocolManager","blue/root","blue/is","appkit-utilities/messenger/messengerProtocols"],(function(e){var t={},n=e("blue/log")("[messenger]"),i=new(e("appkit-utilities/messenger/protocolManager")),a=e("blue/root"),r=e("blue/is"),o=e("appkit-utilities/messenger/messengerProtocols"),s={},c=!1,l=!1,d=[],u=[],p=null,f=null,m=null,g=null,v=null,h=null,y=null,b=null,C=null,A=null,I=null,E=null,S=function(e,t,n){n||(n=a);for(var i=e.split(" "),r=0,o=i.length;r<o;r++)n.addEventListener(i[r],t,!1);u.push({type:e,node:n,listener:t})},w=function(e,t,n){for(var i=e.split(" "),a=0,r=i.length;a<r;a++)t.removeEventListener(i[a],n,!1)},T=function(){for(var e,t=0,n=u.length;t<n;t++)e=u[t],w(e.type,e.node,e.listener);u=[],l=!1,A=!1,c=!1},O=function(){try{if(d.length>0)for(n.info("draining queue of "+d.length+" messages");d.length>0;){var e=d.shift();p?E.postMessage(e,v):top.postMessage(e,v)}}catch(e){n.warn("Got postMessage domain error while draining queue: "+e)}},k=function(e){return(e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")).toLowerCase()},D=function(){return a.document.location.origin||k(a.document)},x=function(){p?(g=f,h="parent",v=m,y="child"):(g=m,h="child",v=f,y="parent")},M=function(e){if("object"==typeof e&&void 0!==e.command){if(e.domain||(e.domain=g),c&&l)O();else{if(!c)return n.info("Attempt to post a message ("+e.command+") before initialization complete, storing"),void d.push(e);if("ready"!==e.command)return n.info("Attempt to post a message ("+e.command+") when parent not loaded - storing"),void d.push(e)}n.info("Sending message: "+e.command);try{p?E.postMessage(e,v):top.postMessage(e,v)}catch(e){n.warn("postMessage error: "+e)}}else n.info("Message in invalid format: "+e+" ignoring")},P=function(e){switch(n.info("Got <"+e.command+"> command from domain "+e.domain),e.command){case"ready":p?(l&&A&&(l=!1,A=!1,R(!0)),l=!0,O(),A||(M({protocol:"handshake",command:"ack",ackCommand:"ready",domain:g,message:h+" ready"}),A=!0,s&&s[e.command]&&s[e.command]())):(n.info(h+" is ready. We are ready to go"),l=!0,O(),M({command:"ack",ackCommand:"ready",domain:g,message:h+" ready ACK"}));break;case"ack":n.info("Got ack, "+y+" domain is "+e.domain+" and current "+y+" domain is "+v),O(),l=!0;break;default:!function(e){var a=i.locate(e.protocol,e.command),r="messenger:"+e.command;a?(n.info("Match found for <"+e.command+"> executing"),(s&&s[e.command]?s[e.command]:a.action.bind(t))(e),e.context?e.context.eventId=r:e.context={eventId:r},b&&b.broadcast(e.context.eventId,e.context)):n.info("Protocol unrecognized: "+e.command+". Aborting.")}(e)}},N=function(e){if(n.info("Listener entered. Origin is "+e.origin),e.origin===v)n.info("Origin ok");else{var t=e.origin.toLowerCase();if(!(I.indexOf(t)>=0))return void n.info("Received message from unrecognized origin: "+e.origin+" - ignoring");n.info("Switching receivingDomain from ["+v+"] to ["+t+"]"),v=t,p&&(m=t,E=a.document.getElementById(C).contentWindow)}if(e&&e.data){var i=e.data;if(!i.command)return void n.info("Message unrecognized, ignoring");P(i)}else n.info("Missing event or event data, ignoring")}.bind(this),L=function(){S("message onmessage",(function(e){N(e)})),S("unload",T)},R=function(e){var t,i=a.document.getElementById(C);if(i)if(n.debug("Found the iframe with id = "+C),t=i.src){E=i.contentWindow;var r=t.split("/");m=""===r[0]?k(E):(r[0]+"//"+r[2]).toLowerCase(),f=D(),x(),n.debug("Found domains | "+h+" domain: "+g+" | "+y+" domain: "+v),c=!0,e||(L(),n.debug("Initialized OK"),M({command:"ready",domain:g,message:h+" ready"}))}else n.warn("FATAL iframe source not set");else n.warn("FATAL iframe not located in document")},_=function(){n.info("Initializing");for(var e=0;e<o.protocols.length;++e)i.inject(o.protocols[e]);if(c=!1,l=!1,p)R();else{if(m=D(),!f||!m)return void n.warn("messenger init failed...parentDomain or childDomain was undefined.");x(),n.info("Found domains | "+h+" domain: "+g+" | "+y+" domain: "+v),c=!0,L(),M({protocol:"handshake",command:"ready",domain:g,message:h+" ready"})}};return t.activate=function(){L()},t.init=function(e){if(c)n.warn("Messenger has already been initialized!");else{if(f=r.defined(e.parentDomain)?e.parentDomain:null,b=r.defined(e.appContext)?e.appContext:null,p=!t.isFramedIn(),r.defined(e.whiteListDomains)?I=e.whiteListDomains:(n.warn("Failing to set 'whiteListDomains' property can cause errors in the production multi-pod environment that don't show up in the test environments, which don't have multiple pods."),I=[]),p){if(!e.iframeId)return void n.warn("FATAL iframe id not specified");C=e.iframeId}s=e.overrideProtocolActions,e.isStandalone||!b?_():(b.on("messenger:sendMessage",(function(e){var t={};e.protocol&&(t.protocol=e.protocol),e.command&&(t.command=e.command),e.data&&(t.data=e.data),M(t)})),b.on("messenger:initMessenger",(function(){_()})),b.on("messenger:activateListeners",(function(){L()})),b.on("messenger:shutdownMessenger",(function(){T()})))}},t.isFramedIn=function(){return a!==a.top},t.sendMessage=function(e){M(e)},t.shutdown=function(){T()},t})),define("appkit-utilities/messenger/multiMessengerProtocols",[],(function(){"use strict";return{protocols:[{protocol:"handshake",commandList:[{command:"ready",action:function(){}}]},{protocol:"sessionTimeout",commandList:[{command:"userActivity",action:function(){}}]},{protocol:"childEvent",commandList:[{command:"quoteIframeRendered",action:function(){}},{command:"cancel",action:function(e){this.shutdown({id:e.id})}},{command:"setTitle",action:function(){}},{command:"returnToAccounts",action:function(e){this.shutdown({id:e.id})}},{command:"navigate",action:function(e){this.shutdown({id:e.id})}},{command:"documentsnavigate",action:function(e){this.shutdown({id:e.id})}},{command:"logoff",action:function(e){this.shutdown({id:e.id})}},{command:"viewRendered",action:function(){}},{command:"error",action:function(){}},{command:"authSuccess",action:function(e){this.shutdown({id:e.id})}},{command:"updateState",action:function(){}},{command:"stickyData",action:function(){}},{command:"interaction",action:function(){}},{command:"logService",action:function(){}},{command:"quickDepositPDF",action:function(e){}},{command:"returntoDWMApplication",action:function(e){this.shutdown({id:e.id})}},{command:"returnToAccountsWithProfileRefresh",action:function(e){this.shutdown({id:e.id})}},{command:"showExternalSpeedBump",action:function(e){}},{command:"showLanguageSpeedBump",action:function(e){}},{command:"setFocusToIFrame",action:function(e){}}]},{protocol:"displayEvent",commandList:[{command:"resize",action:function(){}},{command:"scrollTo",action:function(){}},{command:"getParentOffset",action:function(){}},{command:"setParentScroll",action:function(e){}},{command:"focus",action:function(){}}]},{protocol:"parentEvent",commandList:[{command:"requestState",action:function(){}}]}]}})),define("appkit-utilities/messenger/multiMessenger",["require","blue/log","appkit-utilities/messenger/protocolManager","blue/root","appkit-utilities/messenger/multiMessengerProtocols"],(function(e){"use strict";var t={},n=e("blue/log"),i=n("[messenger]"),a=new(e("appkit-utilities/messenger/protocolManager")),r=e("blue/root"),o=e("appkit-utilities/messenger/multiMessengerProtocols"),s=[],c=[],l=function(e,t,n,i){i||(i=r),i.addEventListener(t,n,!1),e.domEvents=e.domEvents||[],e.domEvents.push({type:t,listener:n,node:i})},d=function(e,t,n){n.removeEventListener(e,t,!1)},u=function(e){return s.find((function(t){return t.id===e}))},p=function(){return r.name||"unnamed"},f=function(e){e.logger.info("Shutting down messenger");for(var t,n=e.domEvents,i=0,a=n&&n.length;i<a;i++)t=n[i],d(t.type,t.listener,t.node);e.domEvents=[],e.destinationReady=!1,e.ackSent=!1,e.initialized=!1,e.logger.info("Messenger has been shutdown")},m=function(e,t){t.isParent?t.contentWindow.postMessage(e,t.childDomain):top.postMessage(e,t.receivingDomain)},g=function(e){if(c.length){e.logger.info("Attempting to drain "+c.length+" messages in queue");try{for(var t=c.length-1;t>=0;t--){var n=c[t];n.id&&n.id!==e.id?e.logger.warn("Message id doesnt match recipient, ignoring"):(m(n,e),c.splice(t,1))}}catch(t){e.logger.warn("Got postMessage domain error while draining queue: "+t)}}},v=function(e){return(e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")).toLowerCase()},h=function(){return r.document.location.origin||v(r.document)},y=function(e){e.isParent?(e.sendingDomain=e.parentDomain,e.sendingName="parent:"+e.parentName,e.receivingDomain=e.childDomain,e.receivingName="child:"+e.childName):(e.sendingDomain=e.childDomain,e.sendingName="child:"+e.childName,e.receivingDomain=e.parentDomain,e.receivingName="parent:"+e.parentName)},b=function(e){var i;e.isParent=!t.isFramedIn(),e.isParent?(i=e.id,e.parentName=i,e.childName=i,e.logger=n("[messenger:parent:"+e.parentName+"]")):(i=p(),e.childName=i,e.parentName=i,e.logger=n("[messenger:child:"+e.childName+"]"))},C=function(e,t){if("object"==typeof e&&e.command){if(t&&(b(t),e.domain||(e.domain=t.sendingDomain),e.id||(e.id=t.id)),t&&t.initialized&&t.destinationReady)g(t);else{if(!t||t&&!t.initialized)return i.info("Attempt to post a message <"+e.command+"> before initialization complete, storing"),void c.push(e);if("ready"!==e.command)return i.info("Attempt to post a message <"+e.command+"> before recipient has loaded, storing"),void c.push(e)}t.logger.info("Sending message: "+e.command);try{m(e,t)}catch(e){t.logger.warn("postMessage error: "+e)}}else i.info("Message in invalid format, aborting")},A=function(e,n){switch(n.logger.info("Got <"+e.command+"> command from domain "+e.domain),e.command){case"ready":n.isParent?(n.ackSent&&(n.ackSent=!1),n.destinationReady=!0,g(n),n.ackSent||(C({protocol:"handshake",command:"ack",ackCommand:"ready",message:n.sendingName+" ready"},n),n.ackSent=!0,n.overrideProtocolActions&&n.overrideProtocolActions[e.command]&&n.overrideProtocolActions[e.command](e))):(n.logger.info(n.sendingName+" is ready. We are ready to go"),n.destinationReady=!0,g(n),C({command:"ack",ackCommand:"ready",message:n.sendingName+" ready ACK"},n));break;case"ack":n.logger.info("Got ack, "+n.receivingName+" domain is "+e.domain+" and current "+n.receivingName+" domain is "+n.receivingDomain),g(n),n.destinationReady=!0;break;default:!function(e,n){var i=n.protocolManager.locate(e.protocol,e.command),a="messenger:"+e.command;i?(n.logger.info("Match found for <"+e.command+">, executing"),(n.overrideProtocolActions&&n.overrideProtocolActions[e.command]?n.overrideProtocolActions[e.command]:i.action.bind(t))(e),e.context?e.context.eventId=a:e.context={eventId:a},n.appContext&&n.appContext.broadcast(a+":"+e.id,e.context)):n.logger.info("Protocol unrecognized <"+e.command+">, aborting")}(e,n)}},I=function(e){e.initialized?e.logger.info("Listeners already activated for messenger, ignoring"):(e.initialized=!0,e.logger.info("Listeners attached for "+e.id),l(e,"message",(function(n){!function(e,n){var i=e.origin.toLowerCase(),a=e.data,r=e.source;if(n.logger.info("Listener entered. Origin is "+i),t.isFramedIn()||n===s.find((function(e){return e.contentWindow===r}))){if(n.receivingDomain===i)n.logger.info("Origin ok");else{if(!(n.whiteListDomains.indexOf(i)>-1))return void n.logger.info("Received message from unrecognized origin: "+i+", ignoring");n.isParent&&(n.logger.info("Reassiging childDomain and contentWindow for "+n.id+" from "+n.childDomain+" to "+i),n.childDomain=i,n.contentWindow=r),n.logger.info("Switching receivingDomain from "+n.receivingDomain+" to "+i),-1===n.whiteListDomains.indexOf(n.receivingDomain)&&n.whiteListDomains.push(n.receivingDomain),n.receivingDomain=i}if(a){if(!a.command)return void n.logger.info("Message unrecognized, ignoring");a.id||(a.id=n.id),A(a,n)}else n.logger.info("Missing event or event data, ignoring")}else n.logger.info("Message window does not match iframe window, ignoring")}(n,e)})),l(e,"unload",(function(){f(e)})))},E=function(e){if(b(e),e.initialized)e.logger.warn("Messenger has already been initialized!");else{e.logger.info("Initializing");for(var t=0;t<o.protocols.length;++t)a.inject(o.protocols[t]);if(e.protocolManager=a,e.initialized=!1,e.destinationReady=!1,e.isParent)!function(e){var t,n=r.document.getElementById(e.id);n?n.src?(e.el=n,e.contentWindow=n.contentWindow,e.src=n.src,e.ackSent=!1,e.destinationReady=!1,e.logger.info("Found the iframe with id of "+e.id),""===(t=e.src.split("/"))[0]?e.childDomain=v(e.contentWindow):e.childDomain=(t[0]+"//"+t[2]).toLowerCase(),e.parentDomain=h(),y(e),e.logger.info("Found domains | "+e.sendingName+" domain: "+e.sendingDomain+" | "+e.receivingName+" domain: "+e.receivingDomain),I(e),e.logger.info("Initialized ok"),C({command:"ready",message:e.sendingName+" ready"},e)):e.logger.warn("Iframe "+e.id+" source not set, aborting"):e.logger.warn("Iframe "+e.id+" not located in document, aborting")}(e);else{if(e.childDomain=h(),!e.parentDomain||!e.childDomain)return void e.logger.warn("Messenger init failed parentDomain or childDomain is undefined, aborting");y(e),e.logger.info("Found domains | "+e.sendingName+" domain: "+e.sendingDomain+" | "+e.receivingName+" domain: "+e.receivingDomain),I(e),C({protocol:"handshake",command:"ready",message:e.sendingName+" ready"},e)}}};return t.activate=function(e){var t;if(e&&e.id){var n=e.id;if(!(t=u(n)))return void i.info("Activate called with an id "+n+" that doesnt match any initialized messengers, ignoring")}else{var a=s.length;if(!a)return void i.info("Activate called when there are no messengers, ignoring");t=s[a-1],i.info("Activate called without specifying id. Assuming most recent messenger.")}I(t)},t.init=function(e){var t=e.iframeId||p(),n=u(t)||{id:t};if(n.logger=i,b(n),n&&n.initialized)n.logger.warn("Messenger has already been initialized!");else{if(n.isParent){if(!e.iframeId)return void n.logger.warn("IframeId not specified, aborting");n.id=e.iframeId}else{"unnamed"===p()&&n.logger.warn("Please add a name attribute to the iframe that equals the id attribute"),n.parentDomain=e.parentDomain||null}e.whiteListDomains?n.whiteListDomains=e.whiteListDomains:(n.logger.warn("Failing to set whiteListDomains property can cause errors in the production multi-pod environment that dont show up in the test environments, which dont have multiple pods"),n.whiteListDomains=[]),n.overrideProtocolActions=e.overrideProtocolActions,n.appContext=e.appContext||null,n.isStandalone=e.isStandalone||!n.appContext,u(n.id)||s.push(n),n.isStandalone?E(n):(n.appContext.on("messenger:sendMessage",(function(e){var t={};e.protocol&&(t.protocol=e.protocol),e.command&&(t.command=e.command),e.data&&(t.data=e.data),C(t,n)})),n.appContext.on("messenger:initMessenger",(function(){E(n)})),n.appContext.on("messenger:activateListeners",(function(){I(n)})),n.appContext.on("messenger:shutdownMessenger",(function(){f(n)})))}},t.isFramedIn=function(){return r!==r.top},t.sendMessage=function(e){var t;if(e.id)t=u(e.id);else{var n=s.length;n&&(t=s[n-1])}C(e,t)},t.shutdown=function(e){var t;if(e&&e.id){var n=e.id;if(!(t=u(n)))return void i.info("Shutdown called with an id "+n+" that doesnt match any initialized messengers, ignoring")}else{var a=s.length;if(!a)return void i.info("Shutdown called when there are no messengers, ignoring");t=s[a-1],i.info("Shutdown called without specifying id. Assuming most recent messenger.")}f(t)},t})),define("appkit-utilities/validation/variations",[],(function(){var e="INVALID_DATE",t="INVALID_FORMAT",n="MISSING_MANDATORY_DATA",i={Date:e,Length:t};return{Range:e,Ssn:t,Date:t,City:t,Email:t,Money:t,Numbers:t,Numeric:t,Pattern:t,ZipCode:t,PostalCode:t,Boolean:n,Length:"INVALID_LENGTH",Characters:t,AddressLine:t,Description:t,AlphaNumeric:t,ConstraintSet:t,NotBlank:n,PhoneNorthAmerica:t,PasswordCharacters:t,NotPhoneEmail:"EMAIL_ADDRESS_CANNOT_BE_PHONE_NUMBER",NotBeginWith1:"INVALID_FIRST_CHARACTER",SsnOao:"INVALID_SOCIAL_SECURITY_NUMBER",NonRepeatingCharacters:"INVALID_FORMAT_IDENTICAL_CHARACTERS",NonRepeatingAlphaNumerics:"INVALID_FORMAT_IDENTICAL_CHARACTERS",NonConsecutiveAlphaNumerics:"INVALID_FORMAT_CONSECUTIVE_CHARACTERS",phoneNumber:{NonConsecutiveAlphaNumerics:"INVALID_PHONE_NUMBER"},dateOfBirth:i,expirationDate:i,socialSecurityNumber:{NonConsecutiveAlphaNumerics:"INVALID_SOCIAL_SECURITY_NUMBER"},PersonalName:t,DateRange:e,confirmedCardId:{Numeric:"MISMATCHED_CONFIRMATION_DATA"}}})),define("appkit-utilities/validation/validationEngineAdapter",["require","blue/is","blue/util"],(function(e){var t,n=e("blue/is"),i=e("blue/util"),a=function(e){return function(n,i){var a={errorType:"",isValid:e.validator(i),compareTo:e.alsoValidate||[]};return e.message&&e.message.variation?a.errorType=a.isValid?"":e.message.variation:t.warn("No variation was provided for custom validator containing these fields: "+e.fields),a}},r=function(e,i,r){for(var o=0;o<e.length;o++){var s=e[o];if(n.function(s.validator))for(var c="required"===r?s.validator:a(s),l=0;s.fields&&l<s.fields.length;l++){var d=s.fields[l];i[d]||(i[d]=[]),i[d].push({validator:c,type:r})}else t.warn("No function was provided for the custom validator, it is required.")}return i};return{processValidators:function(e,a){t=a;var o={};return e?(e.requiredValidations&&(o=r(e.requiredValidations,o,"required")),e.customValidations&&(o=r(e.customValidations,o,"custom")),e.pageValidators&&(o=function(e,i){for(var a=0;a<e.length;a++){var r=e[a];n.function(r.validator)?(i.formValidators||(i.formValidators=[]),i.formValidators.push(r.validator)):t.warn("No function was provided for the custom validator, it is required.")}return i}(e.pageValidators,o)),i.object.equals(o,{})&&(Object.keys(e).forEach((function(t){n.function(e[t])&&(e[t]=[e[t]])})),o=e),e.requiredFields&&(o.requiredFields=e.requiredFields),o):{}}}})),define("appkit-utilities/validation/componentValidate",["require","appkit-utilities/validation/variations","appkit-utilities/content/dcu","appkit-utilities/validation/validationEngineAdapter"],(function(e){"use strict";var t,n,i,a,r,o,s,c,l,d,u,p,f=e("appkit-utilities/validation/variations"),m=e("appkit-utilities/content/dcu"),g=e("appkit-utilities/validation/validationEngineAdapter"),v=function(e){return e.list||e.item},h=function(e){return e.v||{}},y=function(e){var t,n,i=e.domEvent&&e.domEvent.currentTarget,a=e.context;return i&&(n=i.tagName||i.nodeName)&&-1!==n.toLowerCase().indexOf("mds")&&(t=i.name||i.id),!t&&a&&(t=a.name||a.groupName||a.checkedBinding||a.id),t},b=function(e,t,n,i){return p.get(e,t+"Error",n,i)||"["+t+"Error."+n+"]"},C=function(e,t,n,i,a,r){return a.loadErrorsOnDemand?void(a.errorMessageStore[r]={errorType:n,props:i}):b(e,t,n,i)},A=function(e){var t={},n=e.split("."),i=["list","idx","item"];return t.item=n[0],n.length>1&&(t.path=e,n.forEach((function(e,n){t[i[n]]=e}))),t},I=function(e,t){var n,r,o,s;return a(e)&&!i(e)?e:(i(e)?(t=t||{},e.forEach((function(e){if(n=A(e),s=Number(n.idx),n.list&&n.idx&&n.item){o=t[n.list]||[],r=o.length;for(var i=s;i>r;i--)o.push({});void 0===o[s]&&o.push({}),a(o[s])||!0===o[s]||1===o[s]||(o[s]={}),!0!==o[s]&&1!==o[s]&&(o[s][n.item]=!0),t[n.list]=o}else t[n.item]=!0}))):console.warn("Invalid Whitelist. White list must be set as an object (preferred) or array."),t)},E=function(e,t,n,i,r,o){var s,c=h(e),l=e.model.get();return l.whiteList=I(l.whiteList||{}),s=function(e){var t=[];return a(e)?t=Object.keys(e):console.warn("Invalid Whitelist. White list must be set as an object (preferred) or array."),t.length>0?t:void 0}(l.whiteList),{model:l,validators:t,formValidators:n,validations:c,validatedComponent:e.validate(r||s),props:e.context.props,specData:e.spec.data,variations:e.context.variations||f,requiredErrorType:e.context.requiredErrorType||"MISSING_MANDATORY_DATA",loadErrorsOnDemand:l.loadErrorsOnDemand||o,errorMessageStore:i}},S=function(e,t){var n=[];return i(t)?n=function(e,t){var n=[],i=[];return t.forEach((function(t,a){Object.keys(t).forEach((function(t){(n=[]).push(e),n.push(a),n.push(t),i.push(A(n.join(".")))}))})),i}(e,t):n.push(A(e)),n},w=function(e,t,n){var i={};return n&&n[e]&&(i=n[e][t]),i},T=function(e,t){var n=!0,i=e[t.property];return i&&(n=i.errorType!==t.errorType),n},O=function(e,t){return e.dtm=Date.now(),e.isFormValid=t.isValid,e[t.property]=t,e},k=function(e,t){var n=t.validation,i=t.property+t.idx+n,o=!r(e[i]&&e[i].isValid)||e[i].isValid;return!o&&t.item&&a(t.item)&&(o=!!t.item[n]),o},D=function(e,t){for(var n,i=!0,a=t.property,r=e.validators,s=Object.keys(r[a]),c=s.length,l=0;l<c;l++)if(n=s[l],o(r[a][n])&&(t.validation=n,!(i=k(e.validations,t))))return i;return i},x=function(e,t,n,i){var r,o,s,c=!1,l=t.length;for(r=0;r<l&&(s=t[r].index,o=t[r].property,(c=!!n[s])&&a(n[s])&&(c=-1!==i.indexOf(e+s+o)||!!n[s][o]),c);r++);return c},M=function(e,t){var n;if(!s(t)||0===Object.keys(t).length)return!0;if(!(e.list&&e.idx&&e.item))return t[e.item];if(n=t[e.list]){if(!i(n))return!0;if(1===n.length)return n[0][e.item];if(n.length>1&&e.idx<n.length)return n[e.idx][e.item]||!0===n[e.idx]||1===n[e.idx]}return!1},P=function(e,t){var n,o=e.list||e.item,l=t&&t[o];if(!s(t)||0===Object.keys(t).length)return!1;if(i(l)&&l.length>0){if(n=1===l.length?l[0]:l[e.idx],a(n))return!!n[e.item];if(c(n)||r(n))return!!n}else if(l)return!0;return!1},N=function(e,t,n){var o=e.model,s=e.validators,c=e.validations;return i(s[t])?(n=!!(!c[t]||r(c[t].isValid)&&c[t].isValid))||(n=!(!o.byPass||!o.byPass[t])):a(s[t])&&(n=function(e,t){var n,i={},r=!0,o=e.model,s=o.byPass&&o.byPass[t],c=o[t].length;for(n=0;n<c&&((r=!(!s||!s[n]||a(s[n])))||(i.idx=n,i.property=t,i.item=s&&s[n],r=D(e,i)));n++);return r}(e,t)),n},L=function(e){var t=e.validations,n=e.validatedComponent.failed,r={};return Object.keys(t).forEach((function(e){var n=t[e],i=n.fullPath||e;a(n)&&!n.isValid&&Object.keys(n).indexOf("isValid")>=0&&(r[e]=i)})),Object.keys(n).forEach((function(e){var t=n[e];i(t)?t.forEach((function(e){e.result&&!e.result.isValid&&(r[e.dataPath.replace(/\./g,"")]=e.dataPath)})):a(t)&&!t.isValid&&(r[e]=e)})),r},R=function(e){var t=function(e){var t=[];return Object.keys(e).forEach((function(n){r(e[n].isRequired)&&!e[n].isRequired&&t.push(n)})),t}(e.validations),n=e.validatedComponent,a=L(e),o=n.isValid&&0===Object.keys(a).length||function(e,t,n,a,r){var o,s,c,d,u,p,f=!1,m=l.deepClone(e);if(a){u=(s=Object.keys(m)).length;for(var g=0;g<u;g++)p=m[c=s[g]],d=A(p),-1===r.indexOf(c)&&M(d,a)||delete m[c];0===Object.keys(m).length&&(f=!0)}if(n&&!f){u=(s=Object.keys(t)).length;for(var v=0;v<u&&(o=s[v],(f=-1!==r.indexOf(o)||!!n[o])&&i(t[o])&&i(n[o])&&(f=x(o,t[o],n[o],r)),f);v++);}return f}(a,n.failed,e.model.byPass,e.model.whiteList,t);if(o)for(var s=Object.keys(e.validators),c=s.length,d=0;d<c&&(o=N(e,s[d],o));d++);return!!o&&H(e.formValidators,e.model)},_=function(e,t,n,i){for(var r,s=e.length,c=t.compareTo||[],l=0;l<s;l++){if(r=e[l],a(r)){if("required"===r.type)continue;if(!o(r.validator))continue;t=r.validator(i,n)}else t=r(i,n);if(!t.isValid)return t;for(var d=0;t.compareTo&&d<t.compareTo.length;d++)c.indexOf(t.compareTo[d])<0&&c.push(t.compareTo[d])}return t.compareTo=c,t},F=function(e,t,n,i){for(var s,c=e.length,l=0;l<c&&a(e);l++)if("required"===(s=e[l]).type&&o(s.validator)&&(t=s.validator(i,n),r(t)&&(t={isRequired:t}),t.isValid=!0,t.isRequired))return t;return t},j=function(e,t,n){var s=(t.path||t.item).indexOf(".")>=0?t.path:null,c=(t.path||t.item).replace(/\./g,""),d={isValid:!0,errorType:void 0,property:c,fullPath:s},p=l.deepClone(d),f=function(e,t,n){var a=v(t),r=e.failed[a],o=e.passed[a];return!n||r||o||(r=(e=n.validate(a)).failed[a]),i(r)&&(r=r.filter((function(e){return e.dataPath===t.path}))[0]),r}(e.validatedComponent,t,n),m=function(e,t){var n,a=e[v(t)];return i(a)&&t.list&&t.idx&&t.item&&(n=parseInt(t.idx),a=e[t.list][n]?e[t.list][n][t.item]:""),a}(e.model,t);return m||r(m)||!t.isRequired||(p={isValid:!1,errorType:e.requiredErrorType,props:w(t.item,e.requiredErrorType,e.props)}),!p.isValid||(p=function(e,t,n){var r,o=v(n),s=t.validators;return i(s[o])?e=F(s[o],e,t.model,n):a(s[n.list])&&(r=s[n.list][n.item],i(r)&&(e=F(r,e,t.model,n))),e}(p,e,t),!r(p.isRequired)||p.isRequired||m||r(m))?(f&&p.isValid&&(p.isValid=!1,p.errorType=function(e,t,n){var i,a,r="",o=e.failedConstraints||e.result&&e.result.failedConstraints,s=o.length;for(i=0;i<s;i++){r=o[i].type;break}return(a=n[t]&&n[t][r])?a:(n[r]||u.warn('The constraint "'+r+'" does not have a definition in the variations object.The error message will be undefined until an entry is made for it onto "this.context.variations" Please consult AppKitvalidation documentation for more details.'),n[r])}(f,t.item,e.variations),p.props=w(t.item,p.errorType,e.props)),p.isValid&&((p=function(e,t,n){var r,s=v(n),c=t.validators;return i(c[s])?e=_(c[s],e,t.model,n):a(c[n.list])&&(r=c[n.list][n.item],o(r)?e=r(n,t.model):i(r)&&(e=_(r,e,t.model,n))),e}(p,e,t)).props||(p.props=w(t.item,p.errorType,e.props))),p.property||(p.property=c),p.isValid&&(p.errorMessage=""),p.fullPath=s,p):(d.isRequired=!1,d)},U=function(e,t){return e.indexOf(t)>=0},V=function(e,t,n,i){var a,r,o={},s=n.validations;return t.forEach((function(t){a=A(t),r=a.path||a.item,s[r.replace(/\./g,"")]&&M(a,n.model.whiteList)&&(a.isRequired=U(i,v(a)),o=j(n,a,e),T(s,o)&&(o.isValid||(o.errorMessage=C(e,a.item,o.errorType,o.props,n)),s=O(s,o)))})),s},q=function(e){var t=e.validatedComponent,n=l.merge(t.updated,t.failed),i=[];return Object.keys(n).forEach((function(t){"List"===e.specData[t].type?e.specData[t].items&&Object.keys(e.specData[t].items).forEach((function(n){for(var a=0;e.model[t]&&a<e.model[t].length;a++)i.push([t,a,n].join("."))})):i.push(t)})),i},B=function(e,t,n){var i,a=[];return e.forEach((function(e){(i=t[e])&&"List"===i.type?i.items?Object.keys(i.items).forEach((function(t){for(var i=0;n[e]&&i<n[e].length;i++)a.push([e,i,t].join("."))})):u.warn('componentValidate.addToWhiteList can only add a root level array if the comp spec has "items" defined.'):a.push(e)})),a},z=function(e,t,n){n[e]&&"List"===n[e].type?t&&Object.keys(t).forEach((function(n){0===n.indexOf(e)&&t[n]&&delete t[n]})):t&&t[e]&&delete t[e]},H=function(e,t){for(var n=!0,i=0;e&&i<e.length&&(n=e[i](t));i++);return n},G=function(e,t){var n=t||{};n.getErrorCount=e.getErrorCount,e.v=n};return function(e,f){var w,k,D,x=this,N={},_=!1,F=null;p=e.dcu&&e.dcu.dynamicContent||m.dynamicContent,t=e.is.empty,n=e.is.string,i=e.is.array,a=e.is.object,r=e.is.boolean,o=e.is.function,c=e.is.number,s=e.is.defined,l=e.util.object,d=e.util.array,u=e.logger,w=l.deepClone(f),w=g.processValidators(w,u),k=w.formValidators||[],D=w.requiredFields||[],delete w.formValidators,delete w.requiredFields,x.addToWhiteList=function(e){var t=x.model.get(),r=t.whiteList,o=x.spec.data;n(e)&&(e=[e]),i(e)?(e=B(e,o,t),r&&i(r)?(r=r.slice(),x.model.set("whiteList",d.combine(r,e))):(r=a(r)?r:{},0===Object.keys(r).length&&x.v&&Object.keys(x.v).forEach((function(t){var n={};x.v[t].fullPath&&(n=A(x.v[t].fullPath)),(o[t]||o[n.list])&&-1===e.indexOf(n.path)&&-1===e.indexOf(t)&&-1===e.indexOf(n.list)&&delete x.v[t]})),x.model.set("whiteList",I(e,r))),x.validateDataItems(e,!0)):u.warn("componentValidate.addToWhiteList should takes a string or array as params")},x.removeFromWhiteList=function(e){var t,r,o,s,c,d=x.model.get("whiteList"),p=x.spec.data,f=[],m=!1;if(d){if(e){if(!i(e)){if(!n(e))return void u.warn("componentValidate removeFromWhiteList only takes an array or a string as params.");c=[e]}c=c||l.deepClone(e)}i(d)&&((c=c||d.slice()).forEach((function(e){s=d.indexOf(e),-1===e.indexOf(".")?(s>-1?d.splice(s,1):p[e]&&p[e].type&&"list"===p[e].type.toLowerCase()&&d.slice().forEach((function(t){t.split(".")[0]===e&&d.splice(d.indexOf(t),1)})),z(e,x.v,p)):s>-1?(d.splice(s,1),x.v&&x.v[e.replace(/\./g,"")]&&delete x.v[e.replace(/\./g,"")]):(o=e.split(".")[0],d.slice().forEach((function(t){o===t.split(".")[0]&&(f.push(e),m=!0)})))})),m&&(d=I(B(d,p,x.model.get())),c=f,m=!1)),!i(d)&&a(d)&&(c=c||Object.keys(d)).forEach((function(e){e.indexOf(".")>-1?(t=A(e),(r=d[t.list])[t.idx]&&r[t.idx][t.item]&&delete r[t.idx][t.item],x.v&&x.v[e.replace(/\./g,"")]&&delete x.v[e.replace(/\./g,"")]):(d[e]&&delete d[e],z(e,x.v,p))})),x.model.set("whiteList",d),x.verifyForm()}else u.warn("No items found for removal since whiteList does not exist.")},x.validateDataItems=function(e,t){var n={};e.forEach((function(e){n={context:{name:e}},x.validateDataItem(n,t)}))},x.validateDataItem=function(e,n){var i,a,r,s,c,l,d,u=y(e),p=A(u),f=v(p),m=u.replace(/\./g,"");_||(_=!0,s=E(x,w,k,N),r=q(s),F=r.slice(),(d=r.indexOf(u))>=0&&r.splice(d,1),x.validateDataItems(r,!0)),i=(s=E(x,w,k,N,f,n)).validatedComponent,a=s.validations,p.isRequired=function(e,t,n){var i=!1;return-1===t.indexOf(n)?(i=e.domEvent&&e.domEvent.currentTarget&&e.domEvent.currentTarget.hasAttribute&&o(e.domEvent.currentTarget.hasAttribute)?e.domEvent.currentTarget.hasAttribute("required"):e.context&&e.context.required)&&t.push(n):i=!0,!!i}(e,D,f),M(p,s.model.whiteList)&&(P(p,s.model.byPass)||((l=j(s,p)).isValid&&delete N[m],i.updated[f]||T(a,l)?(l.isValid||(delete N[m],l.errorMessage=C(x,p.item,l.errorType,l.props,s,m)),a=O(a,l),c=l.compareTo||[],t(c)||(a=V(x,c,s,D)),a.isFormValid&&(a.isFormValid=R(s)),G(x,a)):x.getErrorMessage({context:{name:u}})))},x.validateFormData=function(){var e,n,i,a={},r=E(x,w,k,N),o=q(r),s=r.validations;_||(_=!0,F=o.slice()),F&&(o=d.combine(o,F)),o.length>0&&o.forEach((function(n){S(n,x[n]).forEach((function(n){var i=v(n),o=(n.path||n.item).replace(/\./g,"");M(n,r.model.whiteList)&&(P(n,r.model.byPass)||(n.isRequired=U(D,i),a=j(r,n),delete N[o],a.isValid||(a.errorMessage=C(x,n.item,a.errorType,a.props,r,o)),s=O(s,a),e=a.compareTo||[],t(e)||(s=V(x,e,r,D))))}))})),s.isFormValid=R(r),G(x,s),s.isFormValid||(n=L({validations:s,validatedComponent:{failed:{}}}),Object.keys(n).forEach((function(e){i=n[e],N[e]&&x.getErrorMessage({context:{name:i}})})))},x.verifyForm=function(){for(var e,t,n,i=!0,r=x.model.get(),o=h(x),s=Object.keys(o),c=s.length,l=0;l<c;l++)if(t=s[l],e=A(t),M(e,I(r.whiteList||{}))&&!P(e,r.byPass)&&(n=o[t],a(n)&&-1!==Object.keys(n).indexOf("isValid")&&!n.isValid)){i=!1;break}o.isFormValid=!!i&&H(k,x.model.get()),G(x,o)},x.getErrorMessage=function(e){var t,n=y(e),i=A(n),a=v(i),r=n.replace(/\./g,""),o=x.v;if(!a)return u.warn("event context or domEvent currentTarget did not include a name, getErrorMessage failed."),"";t=N[r],o&&!o[r]&&(o[r]={}),t&&(o[r].errorMessage=b(x,i.item,t.errorType,t.props),delete N[r],G(x,o))},x.getErrorCount=function(){var e,t=0;return Object.keys(x.v).forEach((function(n){(e=x.v[n])&&e.errorMessage&&t++})),t}}})),define("appkit-utilities/validation/controllerValidate",[],(function(){return function(e){var t=this,n=e.is.array,i=e.is.function;t.validateComponents=function(e){var a=(e=e||{}).exclusions,r=e.hideErrors,o=e.exitOnInvalid,s=!0,c=Object.keys(t.components);n(a)&&a.length&&(c=c.filter((function(e){return a.indexOf(e)<0})));for(var l=c.filter((function(e){return t.registry.hasComponent(e)})),d=0;d<l.length;d++){var u=t.components[l[d]];if(i(u.validateFormData)&&(r?u.verifyForm():u.validateFormData(),s=s&&u.v.isFormValid,o&&!s))break}return s}}})),define("appkit-utilities/validation/customValidators/addressValidators",[],(function(){var e=/^[0-9]+$/;function t(e){return e&&e.toString&&e.toString()}return{zipCodeFormatValidator:function(n){return!(!(n=t(n))||!n.match(e))},zipCodeLengthValidator:function(e,n){return!!(e=t(e))&&(n?4===e.length:5===e.length)}}})),define("appkit-utilities/formatters/formattersUtil",[],(function(){return{dateFormats:{L:function(){return"L"},l:function(){return"l"},LL:function(){return"LL"},ll:function(){return"ll"},LLL:function(){return"LLL"},lll:function(){return"lll"},LLLL:function(){return"LLLL"},llll:function(){return"llll"},"MM/YYYY":function(){return"MM/YYYY"},"MMM DD":function(){return"MMM DD"},"MM/DD/YYYY":function(){return"MM/DD/YYYY"},"MM-DD-YYYY":function(){return"MM-DD-YYYY"},"YYYY-MM-DD":function(){return"YYYY-MM-DD"},"MMM DD YYYY":function(){return"MMM DD YYYY"},"MMM Do YYYY":function(){return"MMM Do YYYY"},"MMM DD, YYYY":function(){return"MMM DD, YYYY"},"MMM D, YYYY":function(){return"MMM D, YYYY"},"MMMM D, YYYY":function(){return"MMMM D, YYYY"},YYYYMMDD:function(){return"YYYYMMDD"},MMDDYYYY:function(){return"MMDDYYYY"},default:function(){return"L"},LT:function(){return"LT"},LTS:function(){return"LTS"}}}})),define("appkit-utilities/formatters/dateTime",["require","moment","blue/is","blue/log","blue/util","appkit-utilities/content/dcu","appkit-utilities/formatters/formattersUtil","moment/locale/es"],(function(e){var t=e("moment"),n=e("blue/is"),i=e("blue/log")("[dateTime]"),a=e("blue/util").object.extend,r=e("appkit-utilities/content/dcu"),o=e("appkit-utilities/formatters/formattersUtil").dateFormats,s=null;function c(e,t){return s||(s={hyphen:r.dynamicContent.getGlobal("hyphenSymbol"),doubleHyphen:r.dynamicContent.getGlobal("doubleHyphenSymbol"),defaultNull:r.dynamicContent.getGlobal("notAvailableLabel")}),i.warn("data '"+e+"' is invalid, please provide a valid one"),s[t]||s.defaultNull}function l(e){return n.function(o[e])?o[e]():(i.warn("Date format '"+e+"' not supported, return default MM/DD/YYYY"),o.default())}function d(e,n){var i={monthsShort:"Ene_Feb_Mar_Abr_May_Jun_Jul_Ago_Sep_Oct_Nov_Dic".split("_")},r=a({},{inputFormat:"",outputFormat:"MM/DD/YYYY",exceptionValue:"defaultNull"},n);return e&&t(e,r.inputFormat).isValid()?("en"!==this.lang&&"es"!==this.lang||t.updateLocale(this.lang,"es"===this.lang&&i),t(e,r.inputFormat).format(l(r.outputFormat))):c(e,r.exceptionValue)}function u(e){var n=t(e),i=n.isDST()?-4:-5;return n.utc().utcOffset(i)}function p(e,t){return(e.military?"H:mm":"h:mm A")+(" ["+t+"]")+(n.string(e.dateFormat)&&0===e.dateFormat.length?"":" "+l(e.dateFormat))}function f(e,n,i,a){return t(e,n).isValid()?t(e,n).format(i):c(e,a)}return e("moment/locale/es"),t.locale("en"),{dateFormatter:function(e,t){return 1!==arguments.length||"en"!==e&&"es"!==e?d(e,t):d.bind({lang:e})},showDateTime:function(e,n){n=n||{};var i,a=t(e);return a.isValid()?(i=p(n,a.isDST()?"EDT":"EST"),u(e).format(i)):c(e,n.exceptionValue)},showDateTimeET:function(e,n){var i;return n=n||{},t(e).isValid()?(i=p(n,r.dynamicContent.getGlobal("timeZoneAbbreviation","EASTERN_TIME")),u(e).format(i)):c(e,n.exceptionValue)},timeFormatter:function(e,t){if(e&&n.string(e)){t=t||"defaultNull";var a="H:mm",r="h:mm a";return function(e){return-1===e.toLowerCase().indexOf("am")&&-1===e.toLowerCase().indexOf("pm")}(e)?f(e,a,r,t):f(e,r,a,t)}i.warn("Please provide the correct timeStr")},isValidDate:function(e,n,i){return t(e,n,i).isValid()},currentDayAndTime:function(e){return e?t().format(l(e)):t()}}})),define("appkit-utilities/validation/customValidators/dateValidators",["require","moment","appkit-utilities/formatters/dateTime","blue/log"],(function(e){var t=e("moment"),n=e("appkit-utilities/formatters/dateTime"),i=e("blue/log")("[dateValidators]");return{checkDateRange:function(e,n,i,a){var r=t(e,a=a||"MM/DD/YYYY"),o=t(n,a),s=t(i,a);if(r.isValid()&&o.isValid()&&s.isValid())return s.isAfter(o)?1:s.isBefore(r)?-1:0},checkDateExpired:function(e,n){var a=t(e,n);if(a.isValid())return a.diff(Date(),"days")<0;i.warn("date is not valid")},isValidDate:n.isValidDate}})),define("appkit-utilities/validation/customValidators/numberValidators",["require","blue/is"],(function(e){var t=e("blue/is");return{phoneNumberValidator:function(e,t){return t=t||/^[2-9][0-8][0-9][2-9][0-9][0-9][0-9]{4}$/,!(!(e=(e=e&&e.toString&&e.toString())&&e.replace(/\D/g,""))||!e.match(t))},checkNumberRange:function(e,n,i,a){var r,o,s,c=a&&a.parseFn||parseFloat,l=a&&a.rangeOption||"[]";if(t.function(c)&&function(e,n){var i=t[e];if(i){for(var a=0;a<n.length;a++)if(("number"!==e||n[a]!==1/0)&&n[a]!==-1/0&&!i(n[a]))return!1;return!0}}("number",[r=c(e),o=c(n),s=c(i)]))return function(e,t,n,i){switch(e){case"[]":return t<=i&&i<=n?0:i>n?1:-1;case"(]":return t<i&&i<=n?0:i<=t?-1:1;case"[)":return t<=i&&i<n?0:i>=n?1:-1;case"()":return t<i&&i<n?0:i>=n?1:-1}}(l,r,o,s)}}})),define("appkit-utilities/validation/customValidators/util",["require","appkit-utilities/validation/customValidators/addressValidators","appkit-utilities/validation/customValidators/dateValidators","appkit-utilities/validation/customValidators/numberValidators"],(function(e){return{addressValidators:e("appkit-utilities/validation/customValidators/addressValidators"),dateValidators:e("appkit-utilities/validation/customValidators/dateValidators"),numberValidators:e("appkit-utilities/validation/customValidators/numberValidators")}})),define("appkit-utilities/validation/trigger",{validateField:{action:"validateDataItem"},validateForm:{action:"validateFormData"},getErrorMessage:{action:"getErrorMessage"},getErrorCount:{action:"getErrorCount"},verifyForm:{action:"verifyForm"}}),define("appkit-utilities/validation/util",[],(function(){var e=function(e){var t={};return t.isValid=!!e,t.errorType=t.isValid?"":"MISSING_MANDATORY_DATA",t},t=function(e,t,n,i){var a={},r=!t||e>=t,o=!n||e<=n;return a.isValid=o&&r,a.errorType=a.isValid?"":i,a},n=function(e,t){var n={};return n.isValid=t.test(e)&&e.trim().length>0,n.errorType=n.isValid?"":"INVALID_FORMAT",n},i=function(e,t){var n=t[e.list||e.item];return e.list&&(n=n[e.idx]&&n[e.idx][e.item]),n},a=function(e,t,i){return e.isValid&&(e=n(t,i)),e};return{getProperty:i,isValidDate:function(n,i,a,r){var o=e(n),s=n.split("/"),c=parseInt(s[1],10),l=parseInt(s[0],10),d=parseInt(s[2],10),u=new Date(d,l-1,c);return o=o.isValid?t(u,i,a,r):o},isValidFormat:n,checkValidChar:function(e,t){var n={};return n.isValid=t.test(e),n.errorType=n.isValid?"":"INVALID_CHARACTERS",n},checkWithinRange:t,checkInvalidData:function(e,t,n){var i={};return i.isValid=!e.match(t),i.errorType=i.isValid?"":n,i},checkMissingMandatory:e,validateProperty:function(t,n,r){var o=i(t,n),s=e(o);return s=a(s,o,r)},validateOptionalProperty:function(e,t,n){var r={isValid:!0,errorType:""},o=i(e,t);return o&&(r=a(r,o,n)),r},validateSelection:function(t,n){var a=i(t,n);return e(a)}}})),define("appkit-utilities/experimentation/style/mutationObserverChannel",["require","blue/event/channel"],(function(e){var t,n=new(e("blue/event/channel"));return{getInstance:function(e){return t||(t=function(e){return new MutationObserver((function(t){t.forEach((function(t){e.forEach((function(e){null!=t.target.querySelector(e)&&n.emit("domMutationEvent",{targetElement:t.target})}))}))})).observe(document,{childList:!0,subtree:!0}),n}(e)),t}}})),define("appkit-utilities/experimentation/style/areaEventChannel",["require","blue/event/channel"],(function(e){var t,n=e("blue/event/channel");return{getInstance:function(e){return t||(t=function(e){var t=new n;return e.on("processRoute",(function(e){var n=e&&e.area;t.emit("areaEvent",{area:n})})),t}(e)),t}}})),define("appkit-utilities/experimentation/style/styleOverrideUtility",[],(function(){var e,t=function(e,t){var n=t&&t.component&&t.parameter&&[t.component,t.parameter].join(".");if(e&&e.attributes["data-attr"]&&e.attributes["data-attr"].value===n&&t.properties)for(var i in t.properties)t.properties.hasOwnProperty(i)&&(e.style[i]=t.properties[i])},n=function(e,n,i){i.forEach((function(i){var a=n&&n[i];a&&a.style&&0!==a.style.length&&a.style.forEach((function(n){t(e.querySelector(n.selector),n)}))}))};return{applyStyleOnEvent:function(t,i,a){a=a||[],"areaEvent"===t.type?e=t.area:"domMutationEvent"===t.type&&"function"==typeof t.targetElement.querySelector&&(a.push(e),n(t.targetElement,i,a),a.pop())},handleAreaStyles:n,overrideStyleProperties:t}})),define("appkit-utilities/experimentation/style/styleOverride",["require","appkit-utilities/experimentation/style/mutationObserverChannel","appkit-utilities/experimentation/style/areaEventChannel","appkit-utilities/experimentation/config/experimentationConfig","appkit-utilities/experimentation/style/styleOverrideUtility","blue/is","blue/observable"],(function(e){var t=e("appkit-utilities/experimentation/style/mutationObserverChannel"),n=e("appkit-utilities/experimentation/style/areaEventChannel"),i=e("appkit-utilities/experimentation/config/experimentationConfig"),a=e("appkit-utilities/experimentation/style/styleOverrideUtility"),r=e("blue/is"),o=e("blue/observable");return function(e,s,c){if(r.defined(e)){var l=t.getInstance(i.targetElements).asEventStream(),d=n.getInstance(s).asEventStream();o.merge([l,d]).onValue((function(t){a.applyStyleOnEvent(t,e,c)}))}}})),define("appkit-utilities/experimentation/bootExperimentation",["require","exports","module","appkit-utilities/experimentation/style/mutationObserverChannel","appkit-utilities/experimentation/style/areaEventChannel","appkit-utilities/experimentation/content/contentOverride","appkit-utilities/experimentation/style/styleOverride","appkit-utilities/experimentation/style/styleOverrideUtility","appkit-utilities/experimentation/config/experimentationConfig","blue-app/cache/sessionCache","blue-app/cache/oneTimeCache","blue/observable","blue/is"],(function(e,t,n){var i,a,r,o,s=e("appkit-utilities/experimentation/style/mutationObserverChannel"),c=e("appkit-utilities/experimentation/style/areaEventChannel"),l=e("appkit-utilities/experimentation/content/contentOverride"),d=e("appkit-utilities/experimentation/style/styleOverride"),u=e("appkit-utilities/experimentation/style/styleOverrideUtility"),p=e("appkit-utilities/experimentation/config/experimentationConfig"),f=e("blue-app/cache/sessionCache"),m=e("blue-app/cache/oneTimeCache"),g=e("blue/observable"),v=e("blue/is"),h=[],y=n.config().enableExperiments,b="service-"+window.domainUrl+"/svc/rl/accounts/secure/v1/user/metadata/list";return{init:function(e){var t,n;y&&(a=e,l.init(),t=s.getInstance(p.targetElements).asEventStream(),n=c.getInstance(a.context).asEventStream(),v.undefined(r)&&(r=g.merge([t,n]).onValue((function(e){h.push(e)}))),o=p.CommonAreas||[])},getExperimentData:function(e,t){return new Promise((function(n,r){a=v.defined(t)?t:a,v.defined(e)?v.defined(i)&&!v.empty(i)?n(i):a.services.experimentationService["experimentation.svc"](JSON.stringify({customerId:e})).then((function(e){e&&e.success?(i=e.result,n(i)):r()}),(function(e){r({statusText:"Service failure with status = "+e.status})})):r({statusText:"Undefined profile Id"})}))},experimentationMixin:function(e){var t;y&&(f.has(b)&&(t=f.get(b).response.experimentEnabled),v.undefined(t)&&m.has(b)&&(t=m.get(b).response.experimentEnabled),!0===t)&&this.getExperimentData(e).then(function(e){l.setExperiment(e),l.overrideExperimentContent(),function(){v.function(r)&&r(),d(i,a,o);for(var e=h.length;e--;)u.applyStyleOnEvent(h.shift(),i,o)}(),requirejs(["analytics/scroll/experimentWatcher","analytics/util/experimentActionHelper"],(function(e,t){e(i),t.setExperimentData(i)}))}.bind(this),(function(e){v.function(r)&&r(),l.unplugComponentRegister(),e&&a.context.logger.error("Experimentation not loading due to ->",e.statusText)}))}}})),define("appkit-utilities/experimentation/service/experimentationService",["require","exports","module"],(function(e,t,n){return function(){var e=n.config()||{};this.serviceCalls={"experimentation.svc":{settings:{type:"POST",url:window.domainUrl+"/events/svc/config/v1/decision/list",contentType:"application/json",timeout:e.serviceTimeout||3e4,disableDefaultError:!0,xhrFields:{withCredentials:!1},disableCsrf:!1}}}}})),define("@arnaudnyc/mout/lang/kindOf",[],(function(){return function(e){return Object.prototype.toString.call(e).slice(8,-1)}})),define("@arnaudnyc/mout/lang/isKind",["./kindOf"],(function(e){return function(t,n){return e(t)===n}})),define("@arnaudnyc/mout/lang/isArray",["./isKind"],(function(e){return Array.isArray||function(t){return e(t,"Array")}})),define("@arnaudnyc/mout/lang/toNumber",["./isArray"],(function(e){return function(t){return"number"==typeof t?t:t?"string"==typeof t?parseFloat(t):e(t)?NaN:Number(t):0}})),define("@arnaudnyc/mout/number/currencyFormat",["../lang/toNumber"],(function(e){return function(t,n,i,a){n=null==n?2:n,i=null==i?".":i,a=null==a?",":a;var r=(t=e(t)).toFixed(n),o=new RegExp("^(-?\\d{1,3})((?:\\d{3})+)(\\.(\\d{"+n+"}))?$").exec(r);return o?o[1]+o[2].replace(/\d{3}/g,a+"$&")+(o[4]?i+o[4]:""):r.replace(".",i)}})),define("appkit-utilities/formatters/number",["require","appkit-utilities/common/constants","blue/is","mout/number/currencyFormat","blue/log","blue/util","appkit-utilities/content/dcu"],(function(e){var t=e("appkit-utilities/common/constants").VALUE,n=e("blue/is"),i=e("mout/number/currencyFormat"),a=e("blue/log")("[formatNumberUtil]"),r=e("blue/util").object.extend,o=e("appkit-utilities/content/dcu"),s=null;function c(e){return s||(s={hyphen:o.dynamicContent.getGlobal("hyphenSymbol"),doubleHyphen:o.dynamicContent.getGlobal("doubleHyphenSymbol"),defaultNull:o.dynamicContent.getGlobal("notAvailableLabel")}),s[e]}return{percentageFormatter:function(e,t,i){var s,l,d={};return n.object(t)?d=t:(d.exceptionValue=i,d.requiresParentheses=t),s=r({},{decimalPlaces:2,requiresParentheses:!1,exceptionValue:"defaultNull"},d),l=parseFloat(e).toFixed(s.decimalPlaces),n.number(parseInt(l))?s.requiresParentheses?o.dynamicContent.getGlobal("openParenthesesSymbol")+l+o.dynamicContent.getGlobal("percentageSymbol")+o.dynamicContent.getGlobal("closeParenthesesSymbol"):l+o.dynamicContent.getGlobal("percentageSymbol"):(a.warn("percentageFormatter: data '"+e+"' is invalid, please provide a valid number"),c(s.exceptionValue)||c("defaultNull"))},decimalFormatter:function(e,t){var s=r({},{decimalPlaces:2,requireSign:!1,exceptionValue:"defaultNull"},t);return n.number(parseInt(e))?s.requireSign&&e>0?o.dynamicContent.getGlobal("plusSymbol")+i(e,s.decimalPlaces):i(e,s.decimalPlaces):(a.warn("decimalFormatter: data "+e+" is invalid, please provide a valid number"),c(s.exceptionValue)||c("defaultNull"))},prettifyNumber:function(e,i){if(!n.number(parseInt(e)))return a.warn("prettifyNumber: data "+e+" is invalid, please provide a valid number"),c(i)||c("defaultNull");switch(!0){case e>=t.TRILLION:return parseFloat(e/t.TRILLION).toFixed(2)+"T";case e>=t.BILLION&&e<t.TRILLION:return parseFloat(e/t.BILLION).toFixed(2)+"B";case e>=t.MILLION&&e<t.BILLION:return parseFloat(e/t.MILLION).toFixed(2)+"M";case e>=t.THOUSAND&&e<t.MILLION:return parseFloat(e/t.THOUSAND).toFixed(2)+"K";case e<t.THOUSAND:return parseFloat(e).toFixed(2)}},currencyFormatter:function(e,t){var s,l,d=r({},{decimalPlaces:2,dollarSign:!0,requireSign:!1,exceptionValue:"defaultNull"},t),u=o.dynamicContent.getGlobal("currencyDollarSymbol")||"$",p=o.dynamicContent.getGlobal("minusSymbol"),f=new RegExp("^\\"+p+"?\\"+u+"?|,","g"),m=new RegExp("^\\"+p,"g"),g=null;return n.string(e)&&(e[0]===p&&1===e.match(m).length&&(g=!0),(e=e.replace(f,""))==(s=parseFloat(e))&&(e=s)),n.number(e)?(e<0&&(e*=-1,g=!0),l=i(e,d.decimalPlaces),d.dollarSign&&(l=u+l),g?l=p+l:d.requireSign&&(l=o.dynamicContent.getGlobal("plusSymbol")+l),l):(a.warn("currencyFormatter: data "+e+" is invalid, please provide a valid number"),c(d.exceptionValue)||c("defaultNull"))},phoneFormatter:function(e,t,i){var r=e&&e.match&&e.match(/\d/g)&&e.match(/\d/g).join("");return!r||r&&10!==r.length?(a.warn("phoneFormatter: phone number "+e+" is invalid, please provide a valid phone number"),c(i)||c("defaultNull")):n.undefined(t)?r:"-"===t?r.substr(0,3)+o.dynamicContent.getGlobal("hyphenSymbol")+r.substr(3,3)+o.dynamicContent.getGlobal("hyphenSymbol")+r.substr(6,4):"("===t?o.dynamicContent.getGlobal("openParenthesesSymbol")+r.substr(0,3)+o.dynamicContent.getGlobal("closeParenthesesSymbol")+" "+r.substr(3,3)+o.dynamicContent.getGlobal("hyphenSymbol")+r.substr(6,4):(a.warn("phoneFormatter: second parameter sign "+t+" is not a valid sign, please provide a valid sign from either '-' or '(' "),c(i)||c("defaultNull"))},removeChar:function(e,t,i){return i=n.object(t)&&t||i,charRegex=i&&i.skipChar&&new RegExp("[0-9*"+i.skipChar+"]","g")||/\d*/g,n.string(e)||n.number(e)?e.match?e.match(charRegex).join(""):e:(a.warn("removeChar: numberStr: "+e+" is not a string, please provide a string"),c(t)||c("defaultNull"))}}})),define("appkit-utilities/formatters/formatters",["require","appkit-utilities/formatters/number","appkit-utilities/formatters/dateTime"],(function(e){return{number:e("appkit-utilities/formatters/number"),date:e("appkit-utilities/formatters/dateTime")}})),define("appkit-utilities/fileUtil/defaultTemplate",[],(function(){return{v:4,t:[{t:4,f:[{t:4,f:[{t:2,r:"."},{t:2,x:{r:["i","header","delimiter"],s:'Object.keys(_1).indexOf(_0)<Object.keys(_1).length-1?_2:""'}}],n:52,i:"i",r:"header"},{t:2,r:"newline"}],n:50,r:"header"},{t:4,f:[{t:4,f:[{t:2,r:"."},{t:2,x:{r:["j","../","delimiter"],s:'Object.keys(_1).indexOf(_0)<Object.keys(_1).length-1?_2:""'}}],n:52,i:"j",r:"."},{t:2,x:{r:["i","data.length","newline"],s:'_0<(_1-1)?_2:""'}}],n:52,i:"i",r:"data"}],e:{}}})),define("@arnaudnyc/mout/object/hasOwn",[],(function(){return function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}})),define("@arnaudnyc/mout/object/forIn",["./hasOwn"],(function(e){var t,n;function i(e,t,n,i){return e.call(i,t[n],n,t)}return function(a,r,o){var s,c=0;for(s in null==t&&function(){for(var e in n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],t=!0,{toString:null})t=!1}(),a)if(!1===i(r,a,s,o))break;if(t)for(var l=a.constructor,d=!!l&&a===l.prototype;(s=n[c++])&&("constructor"===s&&(d||!e(a,s))||a[s]===Object.prototype[s]||!1!==i(r,a,s,o)););}})),define("@arnaudnyc/mout/object/forOwn",["./hasOwn","./forIn"],(function(e,t){return function(n,i,a){t(n,(function(t,r){if(e(n,r))return i.call(a,n[r],r,n)}))}})),define("@arnaudnyc/mout/object/values",["./forOwn"],(function(e){return function(t){var n=[];return e(t,(function(e,t){n.push(e)})),n}})),define("appkit-utilities/fileUtil/downloader",["require","blue/is","blue-view-ractive/ractive","blue/root","blue/log","./defaultTemplate","blue/util","mout/object/values","papaparse","blue/util"],(function(e){var t=e("blue/is"),n=e("blue-view-ractive/ractive"),i=e("blue/root"),a=e("blue/log")("[appkit-downloader]"),r=e("./defaultTemplate"),o=e("blue/util").object.extend,s=e("mout/object/values"),c=e("papaparse"),l=e("blue/util").object.extend,d={".txt":{delimiter:"\t",newline:"\r\n"},".csv":{delimiter:",",newline:"\r\n"},".xls":{delimiter:",",newline:"\r\n"}};function u(){}return u.prototype={download:function(e,u,p,f){var m,g,v,h,y,b,C,A,I,E=!1,S=!1,w=[];function T(e,t){e&&(a.warn(t),E=!0)}if(u.v&&u.t?(h=u,y=p,b=l({},f)):(h=r,y=u,b=l({},p),/txt|text|csv|xls/.test(y.extension)&&(S=!0)),T(!t.object(y)||t.array(y),"settings is required and must be an object"),T(!t.string(y.name)||""===y.name,"settings.name must be a string"),T(!t.string(y.extension||""===y.extension),"settings.extension must be a string"),b&&(T(b.data,"options should not have data property"),T(b.header&&(!t.object(b.header)||t.array(b.header)),"options.header must be an object"),T(b.keyOrder&&!t.array(b.keyOrder),"options.keyOrder must be an array")),!E){var O,k;if(/text/.test(y.extension)?y.extension=".txt":0!==y.extension.indexOf(".")&&(y.extension="."+y.extension),g=y.name+(navigator.userAgent.toLowerCase().indexOf("android")>-1?"_"+(new Date).getTime().toString():"")+y.extension,(b=b||{}).data=e,d[y.extension]&&(b.delimiter=b.delimiter||d[y.extension].delimiter,b.newline=b.newline||d[y.extension].newline),b.header||!1===b.defaultHeader||(b.header={},Object.keys(e[0]).forEach((function(e){b.header[e]=e})),a.warn("define header based on data keys")),b.keyOrder&&(e.forEach((function(e){A={},b.keyOrder.forEach((function(t){if(!e[t])throw new Error("downloader: missing data for ordered key "+t);A[t]=e[t]})),w.push(A)})),b.data=w,b.header&&(S?(I=[],b.keyOrder.forEach((function(e){I.push(b.header[e])})),b.header=I):(I=JSON.parse(JSON.stringify(b.header)),b.header={},b.keyOrder.forEach((function(e){b.header[e]=I[e]}))))),S?(C=o({},d[y.extension]),v=c.unparse({fields:s(b.header),data:(O=b.data,k=[],O.forEach((function(e){k.push(s(e))})),k)},C)):v=new n({template:h,data:b}).toHTML(),(m=t.defined(Blob)&&new Blob([v],{type:"text/csv"}))||a.warn("Blob data is undefined"),navigator.msSaveBlob)return navigator.msSaveBlob(m,g);var D=i.document.createElement("a");if(void 0===D.download){var x=new FileReader;x.onload=function(){window.open(x.result,"_blank").focus()},x.readAsDataURL(m)}else{var M;M=b.isLargeData?URL.createObjectURL(m):"data:attachment/csv;charset=utf-8,%EF%BB%BF"+encodeURIComponent(v),D.setAttribute("href",M),D.setAttribute("download",g),D.style.display="none",i.document.body.appendChild(D),D.click(),i.document.body.removeChild(D),t.defined(URL)&&URL.revokeObjectURL(M)}}}},u})),define("appkit-utilities/fileUtil/uploadConfig",[],(function(){return{MAX_FILE_SIZE:5e6,MAX_ROWS:300,MAX_AGGREGATED_SIZE:2e7,ALLOWED_EXTENSIONS:[".csv",".png",".doc",".txt",".docx",".pdf",".xls"],ALLOWED_NUMBER_OF_FILES:20,SAME_FILE_CHECK:!0,CSV_EMPTY_DATA_CHECK:!0,MULTIPLE_FILE_INPUT:!1}})),define("appkit-utilities/fileUtil/uploader",["require","./uploadConfig","blue/log","blue/is","papaparse"],(function(e){"use strict";var t=e("./uploadConfig"),n=e("blue/log")("[appkit-uploader]"),i=e("blue/is"),a=e("papaparse"),r="violatedSameFileName",o={delimiter:",",newline:"\r\n",quoteChar:'"',escapeChar:'"',header:!1,dynamicTyping:!1,preview:0,encoding:"",worker:!1,comments:!1,download:!1,skipEmptyLines:!1,fastMode:void 0};function s(e,a){this.uploadedFiles=[],a&&!i.string(a)?n.warn("Input element id must be a string\nA dynamic input element will be generated"):this.inputElementId=a,!e||i.object(e)&&!i.array(e)?this.config=e||t:(n.warn("Config must be an object\nDefault config will be used"),this.config=t)}function c(e){var t=e,n=document.createElement("input");return n.setAttribute("id","uploader_generated_input"),n.setAttribute("type","file"),t.config.MULTIPLE_FILE_INPUT&&n.setAttribute("multiple",""),n}function l(e){return document.getElementById(e.inputElementId)}function d(e,t){for(var n=e.config.ALLOWED_EXTENSIONS,i=!1,a=0,r=n.length;a<r;a++)i=t===n[a].split(".").pop().toLowerCase()||i;return i}function u(e,t,n){var i=e,a=[],o=i.config.MAX_FILE_SIZE,s=t.name,c=s.split(".").pop().toLowerCase();return n&&(i.uploadedFiles.indexOf(s)<0?i.uploadedFiles.push(s):a.push(r)),d.call(null,i,c)||a.push("violatedFileType"),o&&t.size>o&&a.push("violatedFileSize"),a}function p(e,t){var n=e,i=[],a=n.config.MAX_AGGREGATED_SIZE,r=n.config.ALLOWED_NUMBER_OF_FILES;return a&&t.aggregatedSize>a&&i.push("violatedAggregatedSize"),r&&t.fileCounts>r&&i.push("violatedNumberOfFiles"),i}function f(e,t,n,i){var a;"file"===t?n[i](e):((a=new FileReader).onload=function(e,t){n[e](t.target.result)}.bind(null,i),"b64"===t?a.readAsDataURL(e):a.readAsText(e))}function m(e,t,n){var i,s,c,l=e,d=l.config.SAME_FILE_CHECK,m=l.config.CSV_EMPTY_DATA_CHECK,g=l.config.MAX_ROWS,v=!1,h=[],y=[],b=function(e){var t=Object.keys(e),n={fileCounts:t.length,aggregatedSize:0,files:[]};return t.forEach((function(t){n.aggregatedSize+=e[t].size})),n}(t),C={},A=function(e){y.push(e)},I=function(e,t,n,i,a){C[i]=function(e,t,n){var i=e.data,a=[];return(e.errors||[]).length&&a.concat(e.errors),n&&i.length>n&&a.push("violatedMaxRows"),t&&(i.length<2||2===i.length&&1===i[1].length&&""===i[1][0])&&a.push("emptyData"),a}(a,m,g),f(e,t,n,i)};b.groupViolations=p.call(null,l,b);for(var E=0;E<t.length;E++)s="csv"===(i=t[E]).name.split(".").pop().toLowerCase(),c=!(!m&&!g)&&s,h.push(new Promise(A)),c?(o.complete=I.bind(null,i,n,y,E),a.parse(i,o)):f(i,n,y,E);return Promise.all(h).then((function(e){return e.map((function(e,i){b.files[i]="file"===n?e:{name:t[i].name,size:t[i].size,data:e},b.files[i].violations=(C[i]||[]).concat(u.call(null,l,b.files[i],d)),d&&-1!==b.files[i].violations.indexOf(r)&&!1===v&&(b.groupViolations.push(r),v=!0)})),b}))}function g(e,t){var n=e,i=n.inputElement.files,a=m.call(null,n,i,t);return new Promise((function(e){e(a)}))}function v(e,t){var n=e;return new Promise((function(e,i){var a=l.call(null,n);n.inputElement=a||c.call(null,n),n.inputElement.value="",n.inputElement.onchange=function(){g.call(null,n,t).then((function(t){e(t)})).catch((function(e){i(e)}))},a||document.body.appendChild(n.inputElement),n.inputElement.click(),a||document.body.removeChild(n.inputElement)}))}return s.prototype=Object.create(null),s.prototype.constructor=s,s.prototype.getFileAsText=function(){return v.call(null,this,"text")},s.prototype.getFileAsb64=function(){return v.call(null,this,"b64")},s.prototype.getFileObject=function(){return v.call(null,this,"file")},s.prototype.clearUploader=function(){this.uploadedFiles.length=0},s})),define("appkit-utilities/fileUtil/index",["require","./uploader","./downloader"],(function(e){return{uploader:e("./uploader"),downloader:e("./downloader")}})),define("appkit-utilities/inspect/script",["require","blue/event/channel/component"],(function(e){"use strict";var t=document,n=e("blue/event/channel/component"),i=function(e){var t=function(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".indexOf(e)};return e.split("").map((function(e){return t(e)>-1?"NOPQRSTUVWXYZABCDEFGHIJKLMnopqrstuvwxyzabcdefghijklm"[t(e)]:e})).join("")},a=t?t[i("trgRyrzragfOlGntAnzr")].bind(t):void 0;return{gather:function(){var e,n={},r=[],o={};return t&&a?(n.url=t.URL,n[i("rkgreanyFpevcgf")]=[],n[i("cntrYriryFpevcgGntf")]=[],(e=a(i("fpevcg"))).length&&(r=Array.from(e)),r.forEach((function(e){e.type&&e.type!==i("grkg/wninfpevcg")||(e.src?n[i("rkgreanyFpevcgf")].push(e.src):((o={})[i("anzrqShapgvbaf")]=function(e){for(var t,n=new RegExp(/function\s+([^\s\(]+)/,"gm"),i=new RegExp(/([a-zA-Z0-9_\$]+)(\s*(:|=)\s*)function\s*\(/,"gm"),a=[];t=n.exec(e);)a.push(t[1]);for(;t=i.exec(e);)a.push(t[1]);return a}(e.text),o[i("nabalzbhfShapgvbaPbhag")]=function(e){for(var t,n=new RegExp(/([a-zA-Z0-9_\$]+(\s*(:|=)\s*))?function\s*\(/,"gm"),i=0;t=n.exec(e);)t[1]||i++;return i}(e.text),o[i("punenpgrePbhag")]=e.text.length,n[i("cntrYriryFpevcgGntf")].push(o)))})),n):n},send:function(e){n.emit("pageInventory",{value:e})}}})),define("appkit-utilities/context",[],(function(){var e=function(){return this},t={id:(new Date).getTime(),root:e(),logger:e().console,init:function(e){t.appContext=e.appContext&&e.appContext||null,t.settings=e.settings&&e.settings||null,t.logger=t.appContext&&t.appContext.logger||t.logger},on:function(e,n){t.appContext&&(n&&t.appContext.site.on(e,n)||t.appContext.site.on(e))},emit:function(e,n){t.appContext&&(n&&t.appContext.site.broadcast(e,n)||t.appContext.site.on(e))}};return t})),define("appkit-utilities/jsBridge/handlers",["require","appkit-utilities/context"],(function(e){var t,n,i=e("appkit-utilities/context"),a=i&&i.root,r=["CLOSE","CANCEL","PROFILE","SHARE","BACK","LEAVE"];return{nativeHandlers:{updateNativeNavigationBarButtons:function(e){e&&e.pageTitle&&[["<sup></sup>","(R)"],[/&amp;/g,"&"]].forEach((function(t){e.pageTitle=e.pageTitle.replace(t[0],t[1])}));return e},onFinish:!0,releaseSpinner:!0,getPDFDocument:!0,externalBrowser:!0,goToNativePage:!0,addCardToWallet:!0,refreshProfile:!0,notifyToNative:!0,goToScheduleTransfer:!0,keepVideoSessionAlive:!0,videoPermissionDenied:!0},jsHandlers:{setShouldNativeHandleButtonPressedCallBack:function(e){"function"==typeof e&&(n=e)},shouldNativeHandleButtonPressed:function(e){var t=a||window,i=!0;if(r.indexOf(String(e).toUpperCase())>=0){if(t&&t.NativeToJPKHandler&&t.NativeToJPKHandler.shouldNativeHandleButtonPressed)return t.NativeToJPKHandler.shouldNativeHandleButtonPressed(e);"function"==typeof n&&void 0===(i=n(e))&&(i=!0)}return!!i},setMessageToWebCallBack:function(e){"function"==typeof e&&(t=e)},messageToWeb:function(e){var n=a||window,i=!0;if(n&&n.NativeToJPKHandler&&n.NativeToJPKHandler.messageToWeb)return n.NativeToJPKHandler.messageToWeb(e);"function"==typeof t&&void 0===(i=t(e))&&(i=!0);return!!i}}}})),define("appkit-utilities/jsBridge/index",["require","appkit-utilities/context","appkit-utilities/jsBridge/handlers","appkit-utilities/jsBridge/jsBridge"],(function(e){var t,n=e("appkit-utilities/context"),i=e("appkit-utilities/jsBridge/handlers"),a=e("appkit-utilities/jsBridge/jsBridge"),r=i.nativeHandlers,o=i.jsHandlers,s={},c=function(e){return"function"==typeof r[e.command]&&r[e.command](e.params),e};return s.init=function(){n.on({"appkit:messageToNative":s.messageToNative})},s.messageToNative=function(e){return t=!1,function(e){e.hasOwnProperty("showExitConfirmationOverlay")&&(e.showConfirmationOverlayForBack=e.hasOwnProperty("showConfirmationForBack")?e.showConfirmationForBack:e.showExitConfirmationOverlay,e.showConfirmationOverlayForCancel=e.hasOwnProperty("showConfirmationForCancel")?e.showConfirmationForCancel:e.showExitConfirmationOverlay)}(e||{}),n.root.hybrid&&function(e){var t=!1;return e&&e.command?r[e.command]?r[e.command]&&(c(e),t=!0):n.logger.error('jsBridge: Native hanlder method "'+e.command+'" is not available'):n.logger.error("jsBridge: Type of message not available in options.command argument."),t}(e)&&function(e){n.appContext?(a.setJsBridgeHandler(),a.assignContext({appContext:n.appContext,maxRetryCount:e.maxRetryCount||500}),a.callBridge(e.command,e.params),t=!0):n.logger.error("jsBridge: missing appContext in Appkit-Uitlities Boot.")}(e),function(e){(e=e||{}).status=t,"function"==typeof e.callBack&&e.callBack(e),n.emit("appkit:res:messageToNative",e)}(e),e},s.jsHandlers=o,s})),
/** @license MIT License (c) copyright 2011-2013 original author or authors */
function(e){e("meld/meld",[],(function(){function e(e,t,o){var s,c;return arguments.length<3?n(e,t):(m(t)?c=a(e,t,o):"string"===(s=typeof t)?"function"==typeof e[t]&&(c=i(e,t,o)):c="function"===s?a(e,t(e),o):r(e,t,o),c)}function t(e,t){var n,i,a;this.target=e,this.func=t,this.aspects={},n=this.orig=e[t],i=this,a=this.advised=function(){var e,r,o,s,l;this instanceof a?(e=v(n.prototype),s=function(t){return c(n,e,t)}):(e=this,s=function(t){return n.apply(e,t)}),o=f.call(arguments),l="afterReturning",r=h({target:e,method:t,args:o});try{i._callSimpleAdvice("before",e,o);try{r.result=i._callAroundAdvice(e,t,o,d)}catch(e){r.result=r.exception=e,l="afterThrowing"}if(u(l,o=[r.result]),u("after",o),r.exception)throw r.exception;return r.result}finally{y()}function d(t){var n=s(t);return i._callSimpleAdvice("on",e,t),n}function u(t,n){i._callSimpleAdvice(t,e,n)}},g(a,"_advisor",{value:i,configurable:!0})}function n(e,t){var n,a;return(a={})[n=e.name||"_"]=e,i(a,n,t),a[n]}function i(e,n,i){var a=t.get(e,n);return a&&a.add(i)}function a(e,t,n){var a,r,s,c;for(a=[],c=0;s=t[c++];)(r=i(e,s,n))&&a.push(r);return o(a)}function r(e,t,n){var a=[];for(var r in e)"function"==typeof e[r]&&t.test(r)&&a.push(i(e,r,n));return o(a)}function o(e){return{remove:function(){for(var t=e.length-1;t>=0;--t)e[t].remove()}}}function s(t){return function(n,i,a){var r={};return 2===arguments.length?(r[t]=i,e(n,r)):(r[t]=a,e(n,i,r))}}function c(e,t,n){try{g(t,"constructor",{value:e,enumerable:!1})}catch(e){}return e.apply(t,n),t}var l,d,u,p,f,m,g,v;function h(e){return d.push(l),l=e}function y(){return l=d.pop()}return e.before=s("before"),e.around=s("around"),e.on=s("on"),e.afterReturning=s("afterReturning"),e.afterThrowing=s("afterThrowing"),e.after=s("after"),e.joinpoint=function(){return l},e.add=function(){return e.apply(null,arguments)},t.prototype={_callSimpleAdvice:function(e,t,n){this.aspects[e]&&(0,p[e])(this.aspects[e],(function(e){var i=e.advice;i&&i.apply(t,n)}))},_callAroundAdvice:function(e,t,n,i){var a;function r(n,o){return n<0?i(o):function(n,i,a){var o,s;o=0,s=h({target:e,method:t,args:a,proceed:l,proceedApply:d,proceedCount:c});try{return n.call(e,s)}finally{y()}function c(){return o}function l(){return u(arguments.length>0?f.call(arguments):a)}function d(e){return u(e||a)}function u(e){return o++,r(i-1,e)}}(a[n].advice,n,o)}return r(((a=this.aspects.around)?a.length:0)-1,n)},add:function(e){var t,n;return function(e,t){var n,i,a;for(n in p)(i=t[n])&&((a=e[n])||(e[n]=a=[]),a.push({aspect:t,advice:i}))}(n=(t=this).aspects,e),{remove:function(){(function(e,t){var n,i,a;for(n in a=0,p)if(i=e[n]){a+=i.length;for(var r=i.length-1;r>=0;--r)if(i[r].aspect===t){i.splice(r,1),--a;break}}return a})(n,e)||t.remove()}}},remove:function(){delete this.advised._advisor,this.target[this.func]=this.orig}},t.get=function(e,n){if(n in e){var i,a;if("function"!=typeof(a=e[n]))throw new Error("Advice can only be applied to functions: "+n);return(i=a._advisor)||(i=new t(e,n),e[n]=i.advised),i}},d=[],(u=Array.prototype).unshift,u.push,f=u.slice,m=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},g=function(){try{return"x"in Object.defineProperty({},"x",{})}catch(e){}}()?Object.defineProperty:function(e,t,n){e[t]=n.value},v=Object.create||function(){function e(){}return function(t){e.prototype=t;var n=new e;return e.prototype=null,n}}(),(p={before:function(e,t){for(var n=e.length-1;n>=0;--n)t(e[n])},around:!1}).on=p.afterReturning=p.afterThrowing=p.after=function(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n])},e}))}("function"==typeof define&&define.amd?define:function(e){module.exports=e()}),define("meld",["meld/meld"],(function(e){return e})),define("appkit-utilities/service/interceptor/eventTrackerServiceInterceptor",["require","blue/store/enumerable/cookie","appkit-utilities/jsBridge/index","meld"],(function(e){"use strict";var t=new(e("blue/store/enumerable/cookie"))(null,!0),n=e("appkit-utilities/jsBridge/index");function i(e,t){var i,a;a={payload:JSON.stringify(e),sessionId:t,sequence:1},(i=new XMLHttpRequest).open("POST","https://dap-dw.prod.aws.jpmchase.net/svc/events"),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("x-jpmc-csrf-token",decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)authcsrftoken\s*\=\s*([^;]*).*$)|^.*$/,"$1"))||null),i.timeout=3e3,i.send(JSON.stringify(a)),i.onloadend=function(){200!==i.status&&202!==i.status&&function(e,t){var i=JSON.parse(e);i.httpStatusCode=t,n.messageToNative({command:"notifyToNative",params:{payload:JSON.stringify(i),eventType:"getDataWatchFailedAnalyticsEvent"}})}(a.payload,i.status)}}return e("meld").around(navigator,"sendBeacon",(function(e){var n,a=e.args[1].includes("events"),r=t.get("DWHTTPCookie"),o=r&&parseInt(r.split("|")[1])||void 0;o&&a&&(n=JSON.parse(e.args[1]).events||[]).length>0&&n.forEach((function(e){i(e,o)}))})),{before:function(e){var n,a,r;return(n=t.get("DWHTTPCookie"))||(r="DWHTTPCookie",n=document.cookie.split(";").reduce(((e,t)=>t.includes(r)?t.trim().substring(`${r}=`.length,t.length):e),void 0)),(a=n&&parseInt(n.split("|")[1])||void 0)&&e.data.length&&!e.bypassDatawatch&&JSON.parse(e.data).events.filter((function(e){return!(e.payload&&e.payload.eventType)||"log"!==e.payload.eventType})).forEach((function(e){i(e,a)})),e}}})),define("appkit-utilities/service/interceptor/issueCodeMapper",[],(function(){return{around:function(e){var t,n,i;if("string"==typeof e.args[0].data&&"application/json"===e.args[0].contentType)try{e.args[0].data=JSON.parse(e.args[0].data)}catch(e){return Promise.reject(e)}return t=e.args[0].data.compspec,n=e.target.context.issueCodeMapper||{},i=void 0===e.args[0].data.statusCodeOverride||e.args[0].data.statusCodeOverride,delete e.args[0].data.compspec,delete e.args[0].data.statusCodeOverride,new Promise((function(a,r){function o(e){if(e.issueTypeCode&&(e.issueCode=e.issueTypeCode),e.issueCode){var a=n.map(t,e.issueCode);i&&1===Object.keys(a).length&&a.issueCode!==e.issueCode&&(e.statusCode=a[Object.keys(a)[0]]),e.issueCode=a}}"object"==typeof e.args[0].data&&"application/json"===e.args[0].contentType&&(e.args[0].data=JSON.stringify(e.args[0].data)),e.proceed().then((function(e){o(e),a(e)}),(function(e){o(e),r(e)}))}))}}})),define("appkit-utilities/service/interceptor/servicePromise",["require","blue/log","blue/is"],(function(e){"use strict";var t=e("blue/log")("[appkit-interceptor]"),n=e("blue/is"),i=n.string;return function(e,a){if(i(e)){if(!n.defined(a)||i(a))return{around:function(t){var i,r=this,o=!0;return(t.args||[]).length&&(t.args[0]&&t.args[0][a]&&(o=!1,delete t.args[0][a]),i=r.context.util.object.deepClone(t.args[0])),new Promise((function(a,s){function c(){i&&(t.args[0]=t.target.prerequest(i,i.data)),t.proceed().then((function(e){a(e)})).catch((function(e){s(e)}))}n.undefined(r.context.application[e])?s(new Error("interceptor: cannot find servicePromise")):o?r.context.application[e].then((function(){c()})).catch((function(e){s(e)})):c()}))}};t.warn("overrideKey must be a string.")}else t.warn("servicePromise is required and must be a string.")}})),define("appkit-utilities/service/issueCodeMapper",["require","blue/is","blue/log"],(function(e){var t=e("blue/is"),n=e("blue/log")("[issueCodeMapper]");return function(e){return{map:function(i,a){var r,o={};if(a)return r=a,i?(t.array(i)||(i=[i]),i.forEach((function(t){var n=(e[t]||{})[a]||e[a];n&&(o[t]=n)})),r=0===Object.keys(o).length?{issueCode:a}:o):r={issueCode:e[a]||a},r;n.warn("Required field issue code was not provided to the issue code mapper.")}}}})),define("appkit-utilities/view/customEventHandlerMixin",[],(function(){"use strict";return function(e){var t=this;t.__eventHandlers=[];var n=t.onReady,i=t.onDestroy,a=t.customEventHandlerEnabled;t.__commonEventHandler=function(n,i){0===n.action.indexOf("view.")?function(n,i){var a=n.action.split(".")[1];a?t[a]||"function"==typeof t[a]?t[a](t,i):e.logger.error("CustomEventHandlerMixin | View action:"+a+"is not defined in view"):e.logger.error("CustomEventHandlerMixin | Invalid view action definition, should be defined as view.{actionName}")}(n,i):function(e,n){t.trigger(e.action,n)}(n,i)},t.__addElementEventHandler=function(e){e&&e.element&&e.events&&e.events.forEach((function(n){if(n.event&&n.action){var i=function(i){for(var a=i.target;a&&a!=this;a=a.parentNode)if(a.matches(e.element)){t.__commonEventHandler(n,i);break}};t.__$rootNode.addEventListener(n.event,i,!1),t.__eventHandlers.push({event:n.event,element:e.element,handler:i})}}))},t.__addCustomEventHandler=function(){if(t.bridge&&t.bridge.spec&&t.bridge.spec.customTriggers&&Array.isArray(t.bridge.spec.customTriggers))try{t.bridge.spec.customTriggers.forEach(t.__addElementEventHandler)}catch(t){e.logger.error("CustomEventHandlerMixin | Error in addCustomEvenHandler",t)}},t.__removeElementEventHandler=function(e){t.__$rootNode.removeEventListener(e.event,e.handler,!1)},t.__removeCustomEventHandler=function(){try{t.__eventHandlers.forEach(t.__removeElementEventHandler),t.__eventHandlers=[]}catch(t){e.logger.error("CustomEventHandlerMixin | Error in removeCustomEvenHandler",t)}},a&&(t.onReady=function(){t.__$rootNode=t.element||document,n&&n(),t.__addCustomEventHandler()},t.onDestroy=function(){i&&i(),t.__removeCustomEventHandler()})}})),define("appkit-utilities/view/frameUtil",["require","blue/dom","blue/is","blue/log"],(function(e){var t,n=e("blue/dom"),i=e("blue/is"),a=e("blue/log")("[frameUtility]"),r=0;return{createFrame:function(e){if(!e||!e.nodeId)throw a.warn("nodeId is a required field."),new Error("nodeId is a required field.");var o=n.getElementById(e.nodeId),s=n.createElement("iframe");s.src=e.frameSrc||"",s.scrolling=e.scrolling||"yes",s.frameBorder=e.frameBorder||0,s.id=e.frameId||"frame_"+r,s.name=e.frameName||s.id,i.function(e.onLoad)&&(s.onload=e.onLoad),(e.sandbox&&i.array(e.sandbox)||!0===e.sandbox)&&(t=i.array(e.sandbox)?e.sandbox.join(" "):"",s.setAttribute("sandbox",t)),o&&(o.appendChild(s),o.style.display=e.display||"block",r++)}}})),define("appkit-utilities/view/pageTitle",["require","blue/log","appkit-utilities/content/dcu","appkit-utilities/messenger/messenger","appkit-utilities/common/constants"],(function(e){var t=e("blue/log")("[pageTitle]"),n=e("appkit-utilities/content/dcu"),i=e("appkit-utilities/messenger/messenger"),a=e("appkit-utilities/common/constants").BRAND_ID,r=n.dynamicContent,o=function(e){return e.context&&e.context.pageTitle};function s(e,t,n){var i,a,r;if(n=n||"",i=(e=e||{}).value,t.string(i))return!0===e.isHtml?(a=i,(r=document.createElement("div")).innerHTML=a,r.textContent+n):i+n}return{setTitle:function(e,n,c){var l=o(e);if(l){var d,u,p=" "+r.getGlobal("hyphenSymbol")+" ",f=null,m=e.context.userInfo,g=e.context.is,v=m&&m.brandId===a.JPMORGAN?"jpMorganOnlineLabel":"chasePersonalOnlineLabel";u=r.getGlobal(v),p=s(n.delimiter,g)||p,f=s(n.h1,g,p)||f,u=s(n.appName,g)||u,null!==f?(l.clearPrefix(),d=f+u):d=u,l.setTitle(d),i.isFramedIn()&&i.sendMessage({protocol:"childEvent",command:"setTitle",data:{title:d},id:c})}else t.error("Could not set page title because view does not have a page context.")},getTitle:function(e){var t=o(e);return t?t.getTitle():""}}})),define("appkit-utilities/view/restrictTabbing",["require","blue/log","blue/dom","blue/root"],(function(e){var t=e("blue/log")("[restrictTabbing]"),n=e("blue/dom"),i=e("blue/root");return function(e,a){a=a||"a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";var r,o=n.querySelector(e);if(o){var s=[].filter.call(o.querySelectorAll(a),(function(e){return"visible"===i.getComputedStyle(e).visibility&&"-1"!==e.tabindex})),c=s[0],l=s.length,d=s[l-1];r=function(e){var t=n.activeElement,i=s.indexOf(t);9!==e.which||e.shiftKey?9===e.which&&e.shiftKey&&0===i&&(d.focus(),e.preventDefault()):i===l-1&&(c.focus(),e.preventDefault())},o.addEventListener("keydown",r)}else t.warn("Element does not exist.");return function(){o&&o.removeEventListener("keydown",r)}}})),define("appkit-utilities/view/util",["require","blue/log","blue/is","appkit-utilities/view/pageTitle"],(function(e){var t=e("blue/log")("[Appkit-utilities: viewUtil]"),n=e("blue/is"),i=e("appkit-utilities/view/pageTitle");function a(){return t.warn("domEvent not exist"),!1}function r(e){var t=document.createElement("testelem"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var i in n)if(e.is.defined(t.style[i]))return n[i]}return{isSpaceOrEnterKey:function(e){var t=e.keyCode?e.keyCode:e.domEvent?e.domEvent.keyCode:a();return 32===t||13===t},isClickOrTap:function(e){return e.domEvent?"click"===e.domEvent.type||"mouse"===e.domEvent.pointerType||"touch"===e.domEvent.pointerType||"tap"===e.domEvent.type:a()},copyToClipboard:function(e){try{if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(e).then((function(){t.warn(e+" copied to clipboard successfully!")}),(function(n){t.warn("Error copying "+e+" to clipboard.")}));else{var n=document.createElement("textarea");n.value=e,n.style.top="0",n.style.left="0",n.style.position="fixed",document.body.appendChild(n),n.select(),document.execCommand("copy")?t.warn(e+" copied to clipboard successfully!"):t.warn("Error copying "+e+" to clipboard."),document.body.removeChild(n)}}catch(n){t.warn("Error copying "+e+" to clipboard.")}},downloadFileFromUrl:function(e,i){var a,r,o,s,c;e&&n.string(e)?(s=i||e.substring(e.lastIndexOf("/")+1),(a=new XMLHttpRequest).open("GET",e,!0),a.responseType="blob",a.send(),a.onload=function(){if(r=Blob&&new Blob([a.response],{type:"application/octet-stream"}))if(void 0===(c=document.createElement("a")).download){if(navigator.msSaveBlob)return navigator.msSaveBlob(r,s);var e=new FileReader;e.onload=function(){window.open(e.result,"_blank").focus()},e.readAsDataURL(r)}else o=URL.createObjectURL(r),c.setAttribute("href",o),c.setAttribute("download",s),c.style.display="none",document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(o)}):t.error("Please provide URL string to download file.")},addTransitionEvent:function(e,t,n){var i=r(e);i&&t.addEventListener(i,n)},removeTransitionEvent:function(e,t,n){var i=r(e);i&&t.removeEventListener(i,n)},isValidCTA:function(e){return this.isClickOrTap(e)||this.isSpaceOrEnterKey(e)},isEventType:function(e,t){if(t=t||[],e.domEvent){for(var n=0;n<t.length;n++)if(e.domEvent.type===t[n])return!0;return!1}return a()},setTitle:i.setTitle,getTitle:i.getTitle,adaNotify:function(e,i){var a,r,o,s="liveregion";n.string(e)&&(n.string(i)||(i=s),r=document.createTextNode(e),(a=document.getElementById(i))||i===s||(a=document.getElementById(s)),a?((o=document.createElement("div")).appendChild(r),a.appendChild(o),setTimeout((function(){a.removeChild(o)}),1e3)):t.warn("Aria-live region does not exist."))}}})),define("appkit-utilities/view/validationSubmitAda",["require","./util","blue/util","blue/log","blue/is"],(function(e){"use strict";var t=e("./util"),n=e("blue/util").string,i=e("blue/log")("[validationSubmitAda]"),a=e("blue/is"),r=["input.validation__error","textarea.validation__error","select.validation__error","fieldset.validation__error input","div.validation__error input","div.validation__error-selects select",'mds-text-input[error-message]:not([error-message=""])[inactive=false]','mds-text-input-secure[error-message]:not([error-message=""])[inactive=false]','mds-select[error-message]:not([error-message=""])[inactive=false]','mds-datepicker[error-message]:not([error-message=""])[inactive=false]','mds-radio-group[error-message]:not([error-message=""])[inactive=false]','mds-checkbox[error-message]:not([error-message=""])[inactive=false]'];function o(e,t){if(!e||!t||!a.string(t))throw i.warn("submitButtonId and formId are required fields. Please see documentation for details."),new Error("submitButtonId and formId are required fields. Please see documentation for details.")}return function(e,i,s,c,l){var d,u,p,f=this;a.object(e)?o(!0,e.formId):o(e,i),i=e.formId?e.formId:i,p=e.submitButtonId&&a.string(e.submitButtonId)?e.submitButtonId:e&&a.string(e)?e:"",c=e.messageForAda&&a.string(e.messageForAda)?e.messageForAda:c&&a.string(c)?c:"",s=e.liveRegionId&&a.string(e.liveRegionId)?e.liveRegionId:s&&a.string(s)?s:"liveregion",l=e.customSelectors&&a.array(e.customSelectors)?e.customSelectors:l,d=document.getElementById(i),u=p&&document.getElementById(p),f.triggerSubmitAda=function(){var e=l&&a.array(l)?r.concat(l):r,i=d.querySelectorAll(e.join(",")),o=f.model.v&&f.model.v.getErrorCount&&f.model.v.getErrorCount();o>0&&t.adaNotify(n.interpolate(c,{0:o}),s),i.length>0&&(i[0].focus(),i[0].scrollIntoView({block:"end"}))},u&&(u.removeEventListener("click",f.triggerSubmitAda),u.addEventListener("click",f.triggerSubmitAda))}})),define("appkit-utilities/view/viewFirstAda",["require","blue/device/platform","./util"],(function(e){"use strict";var t=e("blue/device/platform"),n=e("./util");function i(e){var t=document.createElement("a");return t.setAttribute("href","#"),t.setAttribute("style","clip:rect(1px, 1px, 1px, 1px);white-space:nowrap;position:absolute !important;height:1px;width:1px;overflow:hidden;"),t.innerText="new content loading",e.parentNode.insertBefore(t,e),t.addEventListener("click",(function(e){e.preventDefault()})),t}return function(e,a,r){if(!e||!a)throw this.context.logger.warn("The dataSpec and the target are both required parameters."),new Error("The dataSpec and the target are both required parameters.");var o,s=document.getElementById(a),c=!0,l=this;if(!s)throw this.context.logger.warn("The target parameter did not resolve to a valid DOM node, please verify."),new Error("The target parameter did not resolve to a valid DOM node, please verify.");s.setAttribute("aria-hidden","true"),"iOS"===t.os.family&&(o=i(s)),l.triggerViewFirstAda=function(){c&&(s.setAttribute("aria-hidden","false"),"iOS"===t.os.family?function(e,t,n){if(n){e.innerText=n;var i=document.createElement("span");i.setAttribute("tabindex","-1"),t.insertBefore(i,t.firstChild),e.addEventListener("click",(function(t){t.preventDefault(),i.focus(),e.parentNode.removeChild(e)}))}}(o,s,r):n.adaNotify(r),c=!1)},l.resetViewFirstAda=function(){c||(s.setAttribute("aria-hidden","true"),"iOS"===t.os.family&&(o=i(s)),c=!0)},l.onData(e,(function(e){c&&e&&l.triggerViewFirstAda()}),{init:!1})}})),define("appkit-utilities/view/webSpecUtil",["require","blue/is"],(function(e){return{createWebSpec:function(t,n){var i,a,r,o="string"==typeof t?e(t):t,s=e("blue/is"),c={name:o.name,bindings:{},triggers:{}};return n&&(i=n.triggers?n.triggers:n,a=n.dataBindings&&n.dataBindings,c.defaultBindings=!s.boolean(n.defaultBindings)||n.defaultBindings,c.preventDefault=!s.boolean(n.preventDefault)||n.preventDefault,c.stopPropagation=!s.boolean(n.stopPropagation)||n.stopPropagation),o.data&&Object.keys(o.data).forEach((function(e){n&&(r=function(e,t){return r=e&&e.upstream&&e.upstream.indexOf(t)>-1?"UPSTREAM":e&&e.both&&e.both.indexOf(t)>-1?"BOTH":"DOWNSTREAM"}(a,e)),c.defaultBindings&&"DOWNSTREAM"===r?c.bindings[e]={}:c.bindings[e]={direction:r||"DOWNSTREAM"}})),i&&Object.keys(i).forEach((function(e){c.triggers[e]=i[e]})),c}}})),define("appkit-utilities/dirtyForm/interceptor/dirtyFormRouterInterceptor",["blue/is"],(function(){var e=require("blue/is");return function(t){this.around=function(n){var i,a,r,o,s,c,l=!1,d=n.proceed,u=!!t&&t.dirtyForm;if(!e.undefined||e.undefined(u)||u.onRemove||u.overlayShowed)d();else{if(u.dirtyIgnore)return d(),void(u.dirtyIgnore=!u.dirtyIgnore);if(u.ignoreDirtyCheck&&u.ignoreDirtyCheck("dirtyIgnoreCallback"))return void d();var p=u.dirtyCheckAll&&u.dirtyCheckAll()||{},f=p.instanceNames,m=t.showOverlay,g=function(){u.onRemove=!0,u.overlayShowed=!1,e.undefined(f)||e.array(f)&&0===f.length?u.onRemove=!1:t.emit("dirtyDeregister",{name:f}),delete t.showOverlay,l=!0,d()},v=function(){u.overlayShowed=!1;var e=p.getLastFocus();e&&e.focus&&e.focus()};if(u.showDirtyOverlay&&u.showDirtyOverlay("showDirtyOverlayCallback")||p.isDirty){a=n.args[1].newRoute,o=(c=p.routeBlackList||[]).length;for(var h=0;h<o;h++){if((i=c[h])===a)return void d();if(e.object(i)&&i.test&&i.test(a))return void d()}r=p.component,s=p.analyticsKey||"exitConfirmationOverlay",u.overlayShowed=!0,e.function&&e.function(m)?m(!0,g,v,r,s,p.options):t.dirtyDefaultOverlay(r,s,g,v,p.options)}else m&&m(!1,g),delete t.showOverlay,!1===l&&d()}}}})),define("appkit-utilities/dirtyForm/dirtyFormUtil",["require","blue/log"],(function(e){var t=e("blue/log")("[dirtyForm]");function n(e){if("string"==typeof e||e instanceof String){var n=0;if(0===e.length)return n;for(var i=0;i<e.length;i++){n=(n<<5)-n+e.charCodeAt(i),n&=n}return n}t.warn("The argument 'str' is not a string, please provide a string")}function i(e,t){var n,i,a=this,r={};return e&&0!==e.length?(t&&(i=JSON.parse(a.initModelStr),n=Object.keys(i)),e.map((function(e){r[e]=t&&-1!==n.indexOf(e)?i[e]:a[e]})),JSON.stringify(r)):JSON.stringify(a.model.get())}function a(e){var a=this,r=a.initModelStr,o=i.call(a,e),s=a.context.is.number(a.initHashCode)&&n(o)!==a.initHashCode;if(s)try{t.debug("The init and dirty model for component "+a.name+" is: ",JSON.parse(r),JSON.parse(o))}catch(e){}return s}function r(){return this.lastFocus}return{dynamicLastFocus:function(e,t,n){var i=this,a=document.querySelector(e);t.split(" ").forEach((function(e){a.addEventListener(e,(function(e){for(var t=e.target;t&&t!=this;t=t.parentNode)if(t.matches(n)){i.lastFocus=e.target;break}}),!1)}))},processCallback:function(e){var t,n,i;i=(n=this.registeredForms||[]).length;for(var a=0;a<i;a++)if((t=n[a][e])&&"function"==typeof t&&t())return!0;return!1},dirtyCheckAll:function(){for(var e=this.registeredForms||[],t=0;t<e.length;t++){var n=e[t],i=n.compInstanceNames,o=n.preCallback;o&&o();for(var s=0;s<i.length;s++){var c=n.controller.components;if(a.call(c[i[s]],n.whiteList))return{isDirty:!0,getLastFocus:r.bind(this),component:c[i[s]],instanceNames:i,analyticsKey:n.analyticsKey,routeBlackList:n.routeBlackList,options:n.options};if(n.showDirtyOverlayCallback&&n.focusDirtyOverlayCallbackComp&&n.focusDirtyOverlayCallbackComp===i[s])return{isDirty:!1,getLastFocus:r.bind(this),options:n.options}}}return{isDirty:!1}},getModelStr:i,formatInput:function(e,t){for(var n=e[0],i=1;i<e.length;i++)n=n+t+e[i];return n},hashCode:n}})),define("appkit-utilities/dirtyForm/dirtyForm",["require","./interceptor/dirtyFormRouterInterceptor","./dirtyFormUtil","blue/log","blue/util","blue/is"],(function(e){var t,n,i=e("./interceptor/dirtyFormRouterInterceptor"),a=e("./dirtyFormUtil"),r=e("blue/log")("[dirtyForm]"),o=e("blue/util"),s=e("blue/is"),c="blur click",l="button,input,a:not(.STYLED_SELECT),.calendar,mds-button,mds-link";function d(e,t){for(var n=0;n<e.length;n++)if(e[n].compInstanceNames.indexOf(t)>=0)return!0;return!1}function u(e){delete e.initModelStr,delete e.initHashCode}function p(e,t,n){var i=a.getModelStr.call(e,t,n);e.initModelStr=i,e.initHashCode=a.hashCode(i)}function f(e,t,n){var i,c=e.controller,l=e.compInstanceNames,u=e.whiteList||[],f=e.routeBlackList||[],m=this.registeredForms,g=c.context,v=g.is||s;g.util.object||o.object;if(!v.array(l)||u&&!v.array(u)||f&&!v.array(f))r.warn("compInstanceNames, whiteList or routeBlackList need to be array!");else{e.routeBlackList=g.util.array.union(this.masterRouteBlackList,f);for(var h=0;h<l.length;h++){if(d(m,l[h]))return void r.warn("Unable to register this component: it either has been registered, or there are two identical component instace names");if(!(i=c.components[l[h]]))return void r.warn("component "+l[h]+" does not exist in controller "+g.controllerName);p(i,u)}a.dynamicLastFocus.call(this,e.target,t,n),m.push(e)}}function m(e,n){var i,a,c,l,d,f,m,g=this.registeredForms,v=!1,h=s;t=t||o.object;for(var y=g.length-1;y>=0;y--){if(f=(a=g[y]).compInstanceNames,c=a.controller,h.array(e.name)&&e.name===f&&"remove"===n){c.context.application.dirtyForm.onRemove=!1,i=(d=t.deepClone(f)).length;for(var b=0;b<i;b++)m=d[b],u(c.components[m]),f.splice(f.indexOf(m),1)}else for(b=0;b<f.length;b++)if(m=f[b],e.name===m)if(l=c.components[m],"remove"===n)c.context.application.dirtyForm.onRemove=!1,u(l),f.splice(b,1);else if("update"===n){if(e.whiteList){if(!s.array(e.whiteList))return void r.warn("whiteList for dirtyWhiteListUpdate need to be array!");v=!0,a.whiteList=e.whiteList}l&&p(l,a.whiteList,v)}0===f.length&&g.splice(y,1)}}function g(e){var t=this;n=e.on({dirtyRegister:function(e){var n=e.selectors&&0!==e.selectors.length?a.formatInput(e.selectors,","):l,i=e.events&&0!==e.events.length?a.formatInput(e.events," "):c;f.call(t,e,i,n)},dirtyDeregister:function(e){m.call(t,e,"remove")},dirtyUpdate:function(e){m.call(t,e,"update")},dirtyWhiteListUpdate:function(e){m.call(t,e,"update")},removeComponent:function(e){m.call(t,e,"remove")}})}function v(e,t){var n=this;e.dirtyForm={},Object.defineProperties(e.dirtyForm,{showDirtyOverlay:{value:a.processCallback.bind(n)},ignoreDirtyCheck:{value:a.processCallback.bind(n)},dirtyCheckAll:{value:a.dirtyCheckAll.bind(n)},routerInterceptor:{value:new i(e)}}),Object.defineProperties(n,{registeredForms:{value:[]},masterRouteBlackList:{value:t||[]}}),g.call(n,e)}return{init:function(e,t,i,o){if(n)r.warn("dirtyForm has already been initialized");else{if(!e.appName)return void r.warn("Need to pass in the app context.");t&&!s.array(t)&&(r.warn("Need to pass in the masterRouteBlackList as an array."),t=[]),l=o&&0!==o.length?a.formatInput(o,","):l,c=i&&0!==i.length?a.formatInput(i," "):c,v.call(this,e,t)}}}})),define("appkit-utilities/encryption/config",[],(function(){return{pinEncryptionKeyPairVersion:"A",encryptionKeyDetails:{kty:"RSA",alg:"RSA-OAEP",ext:!0},importKeyAlgorithm:{name:"RSA-OAEP",hash:{name:"SHA-1"}},importKeys:{PKCS8:"pkcs8",SPKI:"spki",RAW:"raw",JWK:"jwk"}}})),define("appkit-utilities/encryption/util",["require","./config","blue/log","blue/util","blue/is"],(function(e){"use strict";var t=e("./config"),n=t.importKeys,i=function(){return this.subtleCrypto.importKey(this.format,this.keyDetails,this.algorithm,this.extractable,this.usages)},a=e("blue/log")("[CryptoUtil]"),r=e("blue/util"),o=e("blue/is");function s(e){for(var t=e.length,n=new ArrayBuffer(t),i=new Uint8Array(n),a=0;a<t;a++)i[a]=e.charCodeAt(a);return n}function c(e){var i,a;return e.format!==n.JWK?(i=e.publicKey,e.format!==n.RAW&&!0===e.decodeAsBase64&&(i=atob(i)),a=s(i)):(a=function(e){var t=["format","algorithm","extractable","usages","decodeAsBase64"],n=r.object.deepClone(e);return Object.keys(n).forEach((function(e){-1!==t.indexOf(e)&&delete n[e]})),n}(e),a=r.object.merge(t.encryptionKeyDetails,a)),a}function l(e){var i=[n.PKCS8,n.SPKI,n.RAW,n.JWK],s=e&&r.object.deepClone(e)||{};if(s.format&&-1===i.indexOf(s.format))a.warn("format of CryptoUtil encrypt function should be either of the following - 'raw', 'pkcs8', 'spki' or 'jwk'.");else{if(s.format=s.format||n.JWK,s.format===n.JWK){if(!s.e||!s.n)return void a.warn("getInstance of CryptoUtil failed. options must exist and contain a 'e' and 'n' property.")}else if(!s.publicKey)return void a.warn("getInstance of CryptoUtil failed. options must exist and contain a 'publicKey' property.");this.crypto=window.crypto,this.subtleCrypto=this.crypto&&this.crypto.subtle,this.format=s.format,this.keyDetails=c(s),this.extractable=s.extractable||!1,this.algorithm=s.algorithm||t.importKeyAlgorithm,this.usages=s.usages&&o.array(s.usages)&&s.usages.length>0?s.usages:["encrypt"]}}return l.prototype=Object.create(null),l.prototype.constructor=l,l.prototype.encrypt=function(e,t,n){var a,r,o,c={name:"RSA-OAEP",hash:"SHA-1",iv:this.crypto.getRandomValues(new Uint8Array(16))},l=this;return a=new Promise((function(e,t){r=e,o=t})),i.call(l).then((function(i){l.subtleCrypto.encrypt(n||c,i,t?s(e):e).then((function(e){r(e)})).catch((function(e){o(e)}))})).catch((function(e){o(e)})),a},l.prototype.encode=function(e){var t,n;if(!(e&&e.length<=0||"string"!=typeof e)){t=e.length,n=new Uint8Array(t);for(var i=0;i<t;i++)n[i]=e.charCodeAt(i);return n}a.warn("Encode function data parameter must be a valid string.")},l.prototype.ab2str=function(e){return String.fromCharCode.apply(null,new Uint8Array(e))},l.prototype.getPinEncryptionKeyPairVersion=function(){return t.pinEncryptionKeyPairVersion},{getInstance:function(e){return new l(e)}}})),define("appkit-utilities/url/urlParamUtil",["require","blue/log"],(function(e){"use strict";var t=e("blue/is"),n=e("blue/log")("[urlParamUtil]"),i=/^[a-zA-Z0-9-_]{1,30}$/,a=/^[a-zA-Z0-9-_]+$/;function r(e,n){var r;if(!t.string(n)||!i.test(n))return!1;if(r=e[n],!t.string(r))return!1;var o=decodeURIComponent(r),s={};if(!this)throw new Error('isSafe called without being bound to "this"');var c=this.paramConfigOverrides;if(t.plainObject(c)){var l=c[n];t.plainObject(l)&&(s=l)}var d=s.maxLength||30;return!(o.length>d)&&function(e,n){var i=e.validationRegex||a;return t.string(i)&&(i=new RegExp(i)),!!i.test(n)}(s,o)}var o=function(e){this.paramConfigOverrides=e||{}};return o.prototype.getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)","i").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},o.prototype.insert=function(e,i,a,r){var o,s,c=[],l=e,d=function(e){try{return JSON.stringify(e)}catch(e){return"not an object"}},u=function(t){var n=d(i),r=d(a);throw new Error([t,e,n,r].join(" "))};if(t.string(e)||u("invalid url template"),t.plainObject(i)||u("invalid params"),t.plainObject(a)||u("invalid constraints"),o=Object.keys(i),Object.keys(a).forEach((function(e){var t="";-1!==o.indexOf(e)?t=encodeURIComponent(i[e]):a[e].required&&c.push(e),s=new RegExp("{{"+e+"}}","g"),l=l.replace(s,t)})),c.length){var p=r||e,f=c.join(",");n.error("Missing required params - "+f+" for navkey - "+p+" in url - "+window.location.hash)}return l},o.prototype.serialize=function(e){return encodeURIComponent(JSON.stringify(this._secureUrlParams(e)))},o.prototype.deserialize=function(e){return this._validateUrlParams(JSON.parse(decodeURIComponent(e)))},o.prototype._secureUrlParams=function(e){var t,n=Object.keys(e);return n=(n=n.filter(r.bind(this,e))).slice(0,20),t={},n.forEach((function(n){t[n]=e[n]})),t},o.prototype._validateUrlParams=function(e){var n;if(!t.plainObject(e))throw new Error("urlParams are not an object");if((n=Object.keys(e)).length>20)throw new Error("urlParams has too many params");return n.forEach((function(t){if(!r.call(this,e,t))throw new Error("urlParam is not safe")}),this),e},o})),define("appkit-utilities/boot",["require","appkit-utilities/jsBridge/index","appkit-utilities/context"],(function(e){var t={jsBridge:e("appkit-utilities/jsBridge/index")},n=e("appkit-utilities/context");return function(e){for(var i in n.init(e),t)t[i].init()}})),define("appkit-utilities/adobeExperimentation/bootExperimentation",["require","appkit-utilities/analyticsPersonalizationUtil/targetUtility","appkit-utilities/content/dcu","blue-app/settings","blue/util","blue/log"],(function(e){var t,n,i,a,r,o=e("appkit-utilities/analyticsPersonalizationUtil/targetUtility"),s=e("appkit-utilities/content/dcu"),c=e("blue-app/settings"),l=e("blue/util"),d=e("blue/log"),u="00000:0:0",p=!1,f=!1,m={},g=["online-profile-identifier","enterpriseparty-identifier","marketingclouduser-identifier","mboxscreensection-identifier","general_segment","region-name","testandtarget-identifier","blobcookie-identifier","location-identifier","session-identifier","v1stcookie-identifier","appversion-number","channel-identifier","user-identifier","visitor-type-name","customer-segment-crm-class-name","loggedin-visitor-type-code","smpodid","screensection-identifier","skipLoggerForNoContent","useV4Srv","mboxid","sessionid","tntid","marketingid","eci","version","context","segment","pod","channel","usertype","profiletype","accounttype","state","pfid"];function v(e){return g.includes(e)}function h(e,s){let c;var f,g,v;return i=i||d("[adobeExperimentation]"),g={content:{type:"",bundles:{}},responseDescription:{}},v=(f=(n=n||l.object).deepClone(e)).mboxid,f.content&&"no_content"!==f.content.no_content?Object.keys(f.content).length>0?f.content.bundles?(g.content.type=f.content.type,g.content.bundles=f.content.bundles,a=v,r=f.analyticsid):f.content.property&&(g.responseDescription=f.content,f.analyticsid&&o.targetAnalyticsCall(v,f.analyticsid||u)):(i.error("Unable to fetch experiment data for mboxScreenSectionIdentifier "+v),v&&o.targetAnalyticsCall(v,f.analyticsid||u)):(!p&&i.error("Experiment is turned off or data not in expected format for mboxScreenSectionIdentifier "+v),v&&o.targetAnalyticsCall(v,f.analyticsid||u)),s&&(c=n.deepClone(s),c.mboxid=v,delete c.context),function(e,t,n){if(m[e]){for(let i of m[e])if(l.object.deepEquals(i.key,t))return void(i.value=n);m[e].push({key:t,value:n})}else m[e]=[{key:t,value:n}]}(v,c,e),t=g}function y(e,s){var c,f,m,g;i=i||d("[adobeExperimentation]"),s||e&&Array.isArray(e)&&e.length>0?(c=(n=n||l.object).deepClone(e),f={content:{type:"",bundles:{}},responseDescription:{}},c.forEach((function(e){m=e.mboxScreenSectionIdentifier,g=e.analyticsIdentifier?`${e.analyticsIdentifier}:0`:u,e.responseDescription&&"NO_CONTENT"!==e.responseDescription?(e.responseDescription=JSON.parse(e.responseDescription),Array.isArray(e.responseDescription)&&e.responseDescription.length>0?e.responseDescription[0].bundles?(f.content.type=e.responseDescription[0].type,f.content.bundles=e.responseDescription[0].bundles,a=m,r=e.analyticsIdentifier?`${e.analyticsIdentifier}:0`:e.analyticsIdentifier):e.responseDescription[0].property&&(f.responseDescription=e.responseDescription[0],e.analyticsIdentifier&&o.targetAnalyticsCall(m,g)):(i.error("Unable to fetch experiment data for mboxScreenSectionIdentifier "+m),m&&o.targetAnalyticsCall(m,g))):(!p&&i.error("Experiment is turned off or data not in expected format for mboxScreenSectionIdentifier "+m),m&&o.targetAnalyticsCall(m,g))})),t=f):i.error("Please pass data to be set for adobe experimentation.")}return{setAdobeExperimentData:y,setExperimentationData:h,getAdobeExperimentData:function(){return t},applyAdobeExperimentContent:function(e){var n,l,d,p,f,m,g,v,h,y,b,C,A;if(n=e.name,!(t&&t.content.bundles&&Object.keys(t.content.bundles).length>0))return i.error("Content experiment data not set for component "+n),void(a&&o.targetAnalyticsCall(a,r||u));if("content-bundle-evaluation"!==t.content.type)return i.error("Only RM content will be applied with experimentation data for component "+n),void(a&&o.targetAnalyticsCall(a,r||u));if(m=(f=e.context).areaName.toLowerCase(),!((v=(g=f.settings||c).get("LOCALIZED_CONTENT_"+m))&&"object"==typeof v&&Object.keys(v).length>0))return i.error("cq5Bundle not present for area "+m),void(a&&o.targetAnalyticsCall(a,r||u));if(!v[n])return i.error("Experimentation cannot be applied since content for component "+n+" is not present in CQ5 bundle for area "+m),void(a&&o.targetAnalyticsCall(a,r||u));l=t.content.bundles,p=(d=Object.keys(l[n])).length;for(var I=0;I<p;I++)C=(h=d[I]).split("."),v[n][h]&&e.spec.settings[C[0]]?v[n][h]=l[n][h]:i.error("Content experiment cannot be applied to settings key "+h+" for component "+n+" in area "+m);for(g.set("LOCALIZED_CONTENT_"+m,v,g.Type.ENV),I=0;I<p;I++)b=(y=d[I]).split("."),v[n][y]&&e.spec.settings[b[0]]&&(A=s.dynamicSettings.set(e,b[0],b[1]),void 0===b[1]&&(e.model.set(b[0],A),e.spec.settings[b[0]].value=A));a&&o.targetAnalyticsCall(a,r||u)},triggerAdobeExperimentService:function(e,t,a){return new Promise((function(r,s){var c,m,g,h,b;return e?(n=(c=e).util&&c.util.object||l.object,i=c.logger||d("[adobeExperimentation]"),t&&t["mboxscreensection-identifier"]?(m=Object.keys(t)).every(v)?(g=n.deepClone(t),m.includes("skipLoggerForNoContent")&&"boolean"==typeof g.skipLoggerForNoContent&&(p=g.skipLoggerForNoContent,delete g.skipLoggerForNoContent),m.includes("useV4Srv")&&"boolean"==typeof g.useV4Srv&&(f=g.useV4Srv,delete g.useV4Srv),g["session-identifier"]=g["session-identifier"]?g["session-identifier"]:"",h=g["mboxscreensection-identifier"],b=f?"getV4AdobeExperimentData":"getAdobeExperimentData",void c.services.adobeExperimentationService[b](g,a).then((function(e){if(!(e&&Array.isArray(e)&&e.length>0))return i.error("Experiment failed - unable to fetch experimentation data for mboxscreensection-identifier "+h),o.targetAnalyticsCall(h,u),s({experimentStatus:"Experiment failed - unable to fetch experimentation data for mboxscreensection-identifier "+h});y(e,!0),r(n.deepClone(e))}),(function(e){return i.error("Experimentation service failed with status = "+e.status),o.targetAnalyticsCall(h,u),s({experimentStatus:"Experimentation service failed with status = "+e.status})}))):(i.error("Experiment failed - unsupported parameters passed to triggerAdobeExperimentService."),s({experimentStatus:"Experiment failed - unsupported parameters passed to triggerAdobeExperimentService."})):(i.error("Experiment failed - mboxscreensection-identifier not passed to triggerAdobeExperimentService."),s({experimentStatus:"Experiment failed - mboxscreensection-identifier not passed to triggerAdobeExperimentService."}))):s({experimentStatus:"Experiment failed - context not passed to triggerAdobeExperimentService."})}))},triggerAdobeExperimentServiceV4:function(e,t,a){return new Promise((function(r,s){var c,f,g,y={},b=!1;let C,A,I=[],E={},S=!1;if(!e)return s({experimentStatus:"Experiment failed - context not passed to triggerAdobeExperimentServiceV4."});if(n=(c=e).util&&c.util.object||l.object,i=c.logger||d("[adobeExperimentation]"),!t||!t.context&&(!t.mboxid||Array.isArray(t.mboxid)&&0===t.mboxid.length))return i.error("Experiment failed - context or mboxid not passed to triggerAdobeExperimentServiceV4."),s({experimentStatus:"Experiment failed - context or mboxid not passed to triggerAdobeExperimentServiceV4."});if(!(t.eci||t.pfid||t.marketingid))return i.error("Experiment failed - eci or pfid or marketingid not passed to triggerAdobeExperimentServiceV4."),s({experimentStatus:"Experiment failed - eci or pfid or marketingid not passed to triggerAdobeExperimentServiceV4."});if(!(f=Object.keys(t)).every(v))return i.error("Experiment failed - unsupported parameters passed to triggerAdobeExperimentServiceV4."),s({experimentStatus:"Experiment failed - unsupported parameters passed to triggerAdobeExperimentServiceV4."});if(t.context?S=!0:Array.isArray(t.mboxid)&&t.mboxid.length?(C=[...t.mboxid],b=!0):C=[t.mboxid],y=n.deepClone(t),f.includes("skipLoggerForNoContent")&&"boolean"==typeof y.skipLoggerForNoContent&&(p=y.skipLoggerForNoContent,delete y.skipLoggerForNoContent),y.sessionid=y.sessionid?y.sessionid:"",A=n.deepClone(y),!S){g=y.mboxid;for(let e of C)if(A.mboxid=e,m[e]){let t=m[e].find((e=>n.deepEquals(e.key,A)));t?(h(t.value,A),E[e]=t.value):I.push(e)}else I.push(e);if(!I.length)return void r(E);y.mboxid=I.join(",")}c.services.adobeExperimentationService.getAdobeExperimentDetails(y,a).then((function(e){if(!e||!e.attributes)return i.error(`Experiment failed - unable to fetch experimentation data for mboxid ${S?t.context:g}`),!b&&o.targetAnalyticsCall(S?t.context:g,u),s({experimentStatus:`Experiment failed - unable to fetch experimentation data for mboxid ${S?t.context:g}`});Object.keys(e.attributes).forEach((function(t){h(e.attributes[t],y),E[t]=e.attributes[t]})),r(b||S?E:E[g])}),(function(e){return i.error("Experimentation service failed with status = "+e.status),!b&&o.targetAnalyticsCall(S?t.context:g,u),s({experimentStatus:"Experimentation service failed with status = "+e.status})}))}))}}})),define("appkit-utilities/adobeExperimentation/service/adobeExperimentationService",["require"],(function(e){"use strict";return function(e){var t=function(e){return{settings:{url:e,type:"GET",disableCsrf:!1,timeout:700,xhrFields:{withCredentials:!1}}}};this.serviceCalls={getAdobeExperimentData:t(e.config.serviceUrl+"/svc/wr/profile/public/gateway/ccb/marketing/acquisitions-marketing/experience/v3/variations"),getV4AdobeExperimentData:t(e.config.serviceUrl+"/svc/wr/profile/public/gateway/ccb/marketing/acquisitions-marketing/experience/v4/variations"),getAdobeExperimentDetails:t(e.config.adobeExperienceUrl+"/v4/variations")}}})),define("appkit-utilities/main",[],(function(){})),define("analytics/settings",[],(function(){var e={version:"3.12.4",midConfig:{enableMid:!0,version:"3.0.0",serviceUrl:"https://dpm.demdex.net/id",orgId:"EA673DFC5A2F19060A495C9C@AdobeOrg",audienceManagerServer:"dpm.demdex.net",audienceManagerServerSecure:"true",cookieKeyPre:"AMCV_"},encryptionNote:"base64:",javaScriptVer:"1.8.5",blockBotsEnabled:!0,blockTestAcctEnabled:!1,serverOffsetEnabled:!0,serverEpochHeader:"x-server-epoch",payloadEpochHeader:"server_offset",serverIsBotHeader:"x-server-bt",payloadIsBotHeader:"isBT",PIIConfig:{enable:!0,returnStrPIIFilter:"BLOCKED: This contains PI Data",screenStrPIIFilter:"BLOCKED:ThiscontainsPIData",bypassByComponent:{ADVERTISEMENTS:!0},bypassByDataKey:{adId:!0,advertisementMidasId:!0,"recommendation-identifier":!0,"first-cookie-identifier":!0,"enterprise-party-identifier":!0,"decision-engine-rest-path":!0},bypassByEventType:{pageInventory:!0,log:!0},bypassByDataContain:["ai=","accountid=","accountId=","AOC=","applicantType=","applicationId=","cfgCode=","classCode=","coApp=","productCode=","subProductcode=","leadId=","loggedIn=","jointLoggedIn=","offerCode=","offerId=","partnerId=","eCouponCode=","bankersessionid=","channel=","couponStatus=","marketingProductCode=","prefillToken=","partnerToken=","pageId=","RPC=","solicitationId=","data-audio-video-name","data-audio-video-id","data-video-id","data-account","jp_cmp=","jp_cdf=","meetingId=","payeeId=","paymentId=","traceId="],replaceFields:["referrerScreenId","referrerUrl"]},batchingDisabled:{action:{filter:{action:["reviewOffer","selectConversationMessageAction"]}}},disableEvents:{focus:!0,nonUserAction:!1},EVENT_TYPES:{LOG:!0,PAGE_INV:!0,ACTION:!1,INTERACTION:!1,PERSONALIZATION:!1,SCREEN:!1,OTHER:!1},bufferInterval:2e3,logEventBufferInterval:2e3};return{get:function(t){return t?e[t]:e},set:function(t,n){t&&n&&(e[t]=n)}}})),define("analytics/channel/formFieldChannel",["require","blue/event/channel","blue/is","blue/util","blue/log","analytics/settings"],(function(e){var t,n=new(e("blue/event/channel")),i=e("blue/is"),a=e("blue/util"),r=e("blue/log")("[blue-analytics.formFieldChannel]"),o=e("analytics/settings").get("disableEvents"),s=function(e){var t=e.context.analyticsId?e.context.analyticsId:e.context.id;if(t){var n,o=-1,s=e.context.valueKey?e.context.valueKey:"value";switch(e.context.componentName){case"multiselect":return e.context.options&&Array.isArray(e.context.options)&&e.context.options.forEach((function(t,n){if(a.object.find(e.context.selectedOptions,t))return o=-1!==o?o+", ":"",o+=n})),{formfieldName:t,closed:e.context.hasClosed,selection:o};case"styledselect":case"select":if(e.context.options&&Array.isArray(e.context.options))for(var c in e.context.options){var l=e.context.options[c];if(l[s]===e.context.selectedValue||e.context.value&&l[s]===e.context.value){o=c;break}}return{formfieldName:t,closed:e.context.hasClosed,selection:o};case"checkbox":return i.undefined(e.context.checked)||i.null(e.context.checked)?void r.warn("No checked status found for checkbox:",e.context.componentName):{formfieldName:t,checked:e.context.checked};case"radiobutton":return n=t.lastIndexOf("-"),function(e,t,n){var a=e.slice(0,n),r=parseInt(e.slice(n+1),10);if(a===t&&i.number(r)&&r>-1)return!0}(t,e.context.groupName,n)?{formfieldName:t.slice(0,n),selection:t.slice(n+1),checked:e.context.checked}:void r.warn("Unable to parse analyticsId/Id in template:",t);case"toggleswitch":return i.undefined(e.context.checked)||i.null(e.context.checked)?void r.warn("No checked status found for toggleswitch:",e.context.componentName):{formfieldName:t,checked:e.context.checked};case"datepicker":return{formfieldName:t,checked:e.context.checked};default:return{formfieldName:t}}}else r.warn("No Appkit-analytics formFieldStep found for:",e.context.componentName)},c=function(e,t){if(e.domEvent){if(e.domEvent.detail){if(e.domEvent.detail.expanded)return t.accordionName?"openAccordion":"expand";if(!1===e.domEvent.detail.expanded)return t.accordionName?"closeAccordion":"collapse"}return"change"}},l=function(){return n.emitEvent=function(e){if(!e.domEvent||"focus"!==e.domEvent.type||!o.focus){var t,a=function(e){return!!(e&&e.domEvent&&e.domEvent.currentTarget&&e.domEvent.currentTarget.localName&&"mds-"===e.domEvent.currentTarget.localName.substring(0,4))}(e)?function(e){var t=e.domEvent&&e.domEvent.currentTarget,n=t.localName,a=t.getAttribute&&t.getAttribute("analyticsId")||t.id;if(a)switch(n){case"mds-select":return{formfieldName:a,closed:t._visible,selection:t.selectedIndex};case"mds-checkbox":return i.undefined(t.checked)||i.null(t.checked)?void r.warn("No checked status found for MDS checkbox:",t.componentName):{formfieldName:a,selection:t.selectedIndex,checked:!!t.checked};case"mds-radio-group":return{formfieldName:a,selection:t.selectedIndex,checked:!!t.checked};case"mds-switch":return i.undefined(t.checked)||i.null(t.checked)?void r.warn("No checked status found for MDS toggleswitch:",t.componentName):{formfieldName:a,checked:t.checked};case"mds-datepicker":return{formfieldName:a,checked:t.checked};case"mds-tile-accordion":case"mds-accordion":return{accordionName:{value:a}};default:return{formfieldName:a}}else r.warn("No Appkit-analytics formFieldStep found for MDS:",n)}(e):s(e);return a?(t={eventTimeStamp:Date.now(),name:this.name,data:a,interaction:c(e,a)},n.emit("interaction",t)):void 0}},n};return{getInstance:function(e,n){return t||(t=l()),t}}})),define("analytics/util/takeParam",["require","blue/is"],(function(e){var t=e("blue/is");return function(e,n){var i;switch(n){case"number":return t.number(e)?e:(i=Number(e),Number.isNaN(i)?0:i);case"boolean":return t.boolean(e)?e:"true"===e}}})),define("analytics/bootstrapFormField",["require","analytics/channel/formFieldChannel","blue/root","blue-app/component","blue/intercept","analytics/util/takeParam"],(function(e){var t,n,i=e("analytics/channel/formFieldChannel"),a=e("blue/root"),r=e("blue-app/component"),o=e.specified("blue-legacy/blue-app/config")&&a.require("blue-legacy/blue-app/component"),s=e("blue/intercept").on,c=e("analytics/util/takeParam");return function(e){var a=function(){};return r.prototype.formField=a,o&&(o.prototype.formField=a),c(e.enableAnalytics,"boolean")&&c(e.analytics.eventTypes.formFieldEvent,"boolean")&&(t=s(r,"create",(function(){r.prototype.formField=i.getInstance().emitEvent,t.remove()})),o&&(n=s(o,"create",(function(){o.prototype.formField=i.getInstance().emitEvent,n.remove()})))),function(){t&&t.remove(),n&&n.remove()}}})),define("analytics/channel/adsEventChannel",["require","blue/event/channel/analytics","blue/event/channel"],(function(e){var t,n=e("blue/event/channel/analytics"),i=function(e){return{adId:e.adId,adLogInfo:e.logInfo,adLogType:e.logType,advertisementMidasId:e.midasId,decisionAnalytics:e.decisionAnalytics,decisionEngine:e.decisionEngine,failoverReason:e.failoverReason,location:e.location,offerId:e.offerId,placement:e.placement,tagMap:e.tagMap,templateEventTimestamp:e.templateEventTimestamp,userGroup:e.userGroup,variations:e.variations,...e.splitIoPersonalizationData?{splitIoPersonalizationData:e.splitIoPersonalizationData}:{},...e.tntPersonalizationData?{tntPersonalizationData:e.tntPersonalizationData}:{}}},a=function(e){switch(e.type){case"requestAdvertisementActionsDisplay":return"adImpression";case"requestAdvertisementDetails":return"adClick";case"requestAdvertisementLog":return"adLog"}};return{getInstance:function(r,o){var s,c;return t||(s=new(e("blue/event/channel")),c=n.asEventStream((function(e){return"requestAdvertisementActionsDisplay"===e.type||"requestAdvertisementDetails"===e.type||"requestAdvertisementLog"===e.type})).map((function(e){return{type:a(e),eventTimeStamp:e.eventTimeStamp,data:i(e)}})),s.plug(c),t=s),t}}})),define("analytics/channel/decisionedContentEventChannel",["require","blue/log","blue/event/channel","blue/is"],(function(e){var t,n=e("blue/log")("[blue-analytics.decisionedContentEventChannel]"),i=new(e("blue/event/channel")),a=e("blue/is");function r(e,t){var n={};switch(t){case"dataCollection":n.properties=e.content;break;case"simpleDecisionedContent":n.placement=Object.keys(e.content)[0],n.variation={data:e.content[n.placement]},n.properties=e.properties;break;case"simpleValueDecisionedContent":n.placement=Object.keys(e.content)[0],n.variation={data:e.content[n.placement]},n.template=e.template,n.properties=e.properties}return n}var o=function(){return i.emitEvent=function(e){var t,o=function(e){if(!a.array(e.content)||!a.array(e.properties))return a.array(e.content)&&!a.empty(e.content)&&a.undefined(e.properties)&&a.undefined(e.template)?"dataCollection":a.plainObject(e.content)&&1===Object.keys(e.content).length?e.template&&a.string(e.template)?"simpleValueDecisionedContent":"simpleDecisionedContent":void n.error("Unable to determine event type based on the content "+JSON.stringify(e.content)+" emitted from component: "+e.component.spec.name);n.error("Since content "+JSON.stringify(e.content)+" is an array, properties "+JSON.stringify(e.properties)+" cannot be emitted from component: "+e.component.spec.name)}(e);if(o)return t={data:r(e,o),eventTimeStamp:e.eventTimeStamp,name:e.component.spec.name},i.emit(o,t)},i};return{getInstance:function(e,n){return t||(t=o()),t}}})),define("analytics/util/experimentActionHelper",[],(function(){var e;return{setExperimentData:function(t){e=t},getExperimentData:function(){return e},getExperimentActions:function(){var e=this.getExperimentData(),t=e&&Object.create(null),n=e&&Object.keys(e)||[],i=function(e,n){n&&n.forEach((function(n){for(var i=n.actions&&n.actions.length||0,a=0;a<i;a++)t[e+"."+n.component+"."+n.actions[a]]={experimentId:n.experimentId,choice:n.choice,action:n.actions[a]}}))};return n.forEach((function(t){i(t,e[t].style),i(t,e[t].template),i(t,e[t].content)})),t}}})),define("analytics/channel/experimentActionChannel",["require","blue/event/channel","blue/event/channel/component","analytics/util/experimentActionHelper","blue/is"],(function(e){var t,n,i=new(e("blue/event/channel")),a=e("blue/event/channel/component"),r=e("analytics/util/experimentActionHelper"),o=e("blue/is");return{getInstance:function(e,s,c){var l;return t&&!c||(l=a.asEventStream("action").filter((function(e){n=n||r.getExperimentActions();var t=e.target.context&&e.target.context.areaName||"app";return n&&o.defined(n[t+"."+e.target.spec.name+"."+e.action])})).map((function(e){var t=e.target.context&&e.target.context.areaName||"app";return{type:"experimentAction",name:e.target.spec.name,data:n[t+"."+e.target.spec.name+"."+e.action]}})),i.plug(l),t=i),t}}})),define("analytics/channel/experimentImpressionChannel",["require","blue/event/channel"],(function(e){var t,n=e("blue/event/channel");return{getInstance:function(e,i){return t||(t=new n),t}}})),define("analytics/channel/hoverEventChannel",["require","blue/event/channel/analytics","blue/event/channel"],(function(e){var t,n=e("blue/event/channel/analytics");function i(e){var t={},n=["hoverName","hoverDescription"];return e.data&&Object.keys(e.data).forEach((function(i){n.includes(i)?t[i]={value:e.data[i]}:console.warn(`${i} is not a valid property`)})),t}return{getInstance:function(a,r,o){var s,c;return t&&!o||(s=new(e("blue/event/channel")),c=n.asEventStream((function(e){return"interaction"===e.type&&"hover"===e.interaction})).map((function(e){return{type:"interaction",eventTimeStamp:e.eventTimeStamp,name:e.component,data:i(e),interaction:"hover"}})),s.plug(c),t=s),t}}})),define("analytics/channel/impressionEventChannel",["require","blue/event/channel"],(function(e){var t,n=e("blue/event/channel");return{getInstance:function(e,i){return t||(t=new n),t}}})),define("analytics/channel/loggingEventChannel",["require","analytics/settings","blue/event/channel","blue/event/channel/component"],(function(e){var t,n=e("analytics/settings"),i=function(){var t=new(e("blue/event/channel")),i=e("blue/event/channel/component").asEventStream("log").map((function(e){return function(e){var t=n.get();t.isLogMsgEncrypt&&(e.data.message&&e.data.message.stackTrace&&e.data.message.stackTrace.methodName?e.data.message.stackTrace.methodName=t.encryptionNote+btoa(e.data.message.stackTrace.methodName):e.data.message&&(e.data.message=t.encryptionNote+btoa(e.data.message)))}(e),{type:"log",timestamp:e.timestamp,data:e.data,logger:e.logger}}));return t.plug(i),t};return{getInstance:function(e,n){return t||(t=i()),t}}})),define("analytics/channel/pageInventoryChannel",["require","analytics/settings","blue/event/channel","blue/event/channel/component"],(function(e){var t;e("analytics/settings");return{getInstance:function(n,i){var a,r;return t||(a=new(e("blue/event/channel")),r=e("blue/event/channel/component").asEventStream("pageInventory").map((function(e){return{type:"pageInventory",timestamp:e.eventTimeStamp,data:e.value}})),a.plug(r),t=a),t}}})),define("analytics/channel/personalizationChannel",["require","blue/event/channel/analytics","blue/event/channel"],(function(e){var t,n=e("blue/event/channel/analytics"),i=function(e){return{product:e.product,category:e.category,elementName:e.elementName,elementPlacement:e.elementPlacement,elementContext:e.elementContext}},a=function(e){var t={},n=["darkCanaryPersonalizationData","tntPersonalizationData","ccjPersonalizationData","splitIoPersonalizationData"];for(var a in e.product&&(t.personalizationData=i(e)),n){var r=n[a],o=e[r];o&&(t[r]=i(o))}return t},r=function(e){switch(e.type){case"sendImpressionClick":return"personalizationClick";case"sendImpressionInteraction":return"personalizationInteraction";case"sendPersonalizationImpression":return"personalizationImpression"}};return{getInstance:function(i,o){var s,c,l;return t||(s=new(e("blue/event/channel")),c=["sendImpressionClick","sendImpressionInteraction","sendPersonalizationImpression"],l=n.asEventStream((function(e){return c.includes(e.type)})).map((function(e){return{type:r(e),eventTimeStamp:e.eventTimeStamp,data:a(e)}})),s.plug(l),t=s),t}}})),define("analytics/util/urlUtil",[],(function(){return{customDecodeURIComponent:function(e){try{return decodeURIComponent(e)}catch(t){return e}}}})),define("analytics/util/stores/screenInfo",["require","blue-app/settings","shared-data","analytics/util/urlUtil"],(function(e){var t=e("blue-app/settings"),n=e("shared-data"),i=e("analytics/util/urlUtil");return{getScreenId:function(){return t.get("blue-screen-id",t.Type.SITE)},setScreenId:function(e){if(t.set("blue-screen-id",e,t.Type.SITE),"UNDEFINED_SCREEN_ID"!==e){var a=i.customDecodeURIComponent(t.get("currentURL",t.Type.SITE)),r={},o=e.split("?"),s=o[1];s&&s.split("&").forEach((e=>{var t=e.split("=");r[t[0]]=t[1]})),n.sharedDataObserver("screen:data").publish({screenData:{id:o[0],currentURL:a,parameters:r,framework:"blue"}})}},getCurrentURL:function(){return i.customDecodeURIComponent(t.get("currentURL",t.Type.SITE))},setCurrentURL:function(e){e=i.customDecodeURIComponent(e);t.set("currentURL",e,t.Type.SITE)},getReferrerURL:function(){return i.customDecodeURIComponent(t.get("refURL",t.Type.SITE))},setReferrerURL:function(e){e=i.customDecodeURIComponent(e);t.set("refURL",e,t.Type.SITE)},getReferrerScreenId:function(){return t.get("refScreenId",t.Type.SITE)},setReferrerScreenId:function(e){t.set("refScreenId",e,t.Type.SITE)}}})),define("analytics/util/urlStateManage",["require","analytics/util/stores/screenInfo","screenmap/api/urlToAnalyticsUri"],(function(e){var t=e("analytics/util/stores/screenInfo"),n=e("screenmap/api/urlToAnalyticsUri");return t.setReferrerURL(document.referrer),t.setCurrentURL(window.location.href),t.setScreenId(n(window.location.href)),function(e){var i=e&&e.newUrl||window.location.href;return t.getCurrentURL()!==i&&(t.setReferrerURL(t.getCurrentURL()),t.setReferrerScreenId(t.getScreenId()),t.setCurrentURL(i),t.setScreenId(n(i))),{currentURL:t.getCurrentURL(),referrerURL:t.getReferrerURL(),referrerScreenId:t.getReferrerScreenId(),screenId:t.getScreenId()}}})),define("analytics/util/duplicateScreenUtil",["require"],(function(e){var t,n,i,a=!1;return{detectDupEvent:function(e){e.data.redirectScreen?(i=e.data.referrerScreenId,n=e.data.referrerURL,a=!0):a?(e.data.referrerScreenId=i,e.data.referrerURL=n,a=!1,t=e):t?(e.eventTimeStamp-t.eventTimeStamp<1500?(t.data.redirectScreen=!0,e.data.referrerScreenId=i,e.data.referrerURL=n):(i=e.data.referrerScreenId,n=e.data.referrerURL),t=e):(t=e,i=e.data.referrerScreenId,n=e.data.referrerURL)},reset:function(){t=void 0}}})),define("analytics/channel/screenEventChannel",["require","analytics/util/urlStateManage","analytics/util/stores/screenInfo","screenmap/api/urlToAnalyticsUri","blue/log","analytics/util/duplicateScreenUtil","blue/is","blue/event/channel","blue/event/channel/screen","blue/event/channel/component"],(function(e){var t,n=e("analytics/util/urlStateManage"),i=e("analytics/util/stores/screenInfo"),a=e("screenmap/api/urlToAnalyticsUri"),r=e("blue/log")("[analytics-overlay]"),o=e("analytics/util/duplicateScreenUtil"),s=e("blue/is"),c=function(e){return e.errorMsg||s.undefined(e.value)?"undefinedOverlay":e.value},l=function(e){var t={type:"screen",eventTimeStamp:e.eventTimeStamp,eventId:e.eventId,data:{redirectScreen:!!e.isRedirect,referrerURL:i.getReferrerURL(),referrerScreenId:i.getReferrerScreenId()}};return o.detectDupEvent(t),t},d=function(){var t=new(e("blue/event/channel")),o=e("blue/event/channel/screen").asEventStream().map((function(e){return n(e),l(e)})),s=e("blue/event/channel/component").asEventStream("state").filter((function(e){return function(e){var t=i.getScreenId(),n=c(e),a=t.split("?")[0];return!(["show","hide"].indexOf(e.overlayStatus)<0||("show"===e.overlayStatus&&-1!==a.indexOf(n,a.length-n.length)?(r.warn("Warning: "+n+" - called show more than once!"),1):"hide"===e.overlayStatus&&-1===a.indexOf(n,a.length-n.length)&&(r.warn("Warning: "+n+" - called hide without show first!",i.getReferrerURL()),1)))}(e)})).map((function(e){return function(e){var t="show"===e.overlayStatus?a("#/"+c(e)):i.getReferrerScreenId();i.setReferrerScreenId(i.getScreenId()),i.setScreenId(t)}(e),l(e)}));return t.plug(o),t.plug(s),n(),t};return{getInstance:function(e,n){return t||(t=d()),t}}})),define("analytics/channel/scrollStopChannel",["require","blue/event/channel","blue/event/channel/domEvents"],(function(e){var t=new(e("blue/event/channel")),n=e("blue/event/channel/domEvents");return function(e){return t.plug(n.asEventStream("scroll").debounce(e)),t}})),define("analytics/util/handleDynamicContentUtilMethods",["require","blue/object/extend","blue/util"],(function(e){var t=e("blue/object/extend"),n=e("blue/util");function i(e){return n.object.has(e,"spec.name")?e.spec.name:e.context?e.context.componentName:e.name}function a(e,n){var a=e[1].split(".");return t(n,{name:i(e[0]),data:{placement:a.length>1?a[0]:e[1],variation:a.length>1?a[1]:e[2]}})}return{getValue:function(e,n){var i=e[0].split("."),a=e[1].split(".");return t(n,{name:i[0],data:{placement:i[1]?i[1]:a[0],variation:a[1]?a[1]:i[1]?a[0]:void 0}})},get:a,set:function(e,n){var a,r;return/\./.test(e[1])?(r=e[1].split(".")[0],a=e[1].split(".")[1]):(r=e[1],a="string"==typeof e[2]?e[2]:"string"==typeof e[3]?e[3]:e[4]),t(n,{name:i(e[0]),data:{placement:r,variation:a}})},setForBinding:a,setVariation:a}})),define("analytics/util/matchers/errorKeyword",[],(function(){return function(e){return/error\_{0,1}(header){0,1}$/i.test(e)}})),define("analytics/util/matchers/communicationKeyword",[],(function(){return function(e){return/communication/i.test(e)}})),define("analytics/util/matchers/warningHeader",[],(function(){return function(e){return/warning\_{0,1}(header){0,1}$/i.test(e)}})),define("analytics/util/matchers/all",["require","analytics/util/matchers/errorKeyword","analytics/util/matchers/communicationKeyword","analytics/util/matchers/warningHeader"],(function(e){return{errorKeyword:e("analytics/util/matchers/errorKeyword"),communicationKeyword:e("analytics/util/matchers/communicationKeyword"),warningHeader:e("analytics/util/matchers/warningHeader")}})),define("analytics/util/checkForAtleastOne",["require","analytics/util/matchers/all"],(function(e){return function(t,n){return t.some((function(t){return e("analytics/util/matchers/all")[t](n)}))}})),define("analytics/channel/variableSettingsChannel",["require","blue/object/extend","blue/event/channel","analytics/util/handleDynamicContentUtilMethods","analytics/util/checkForAtleastOne"],(function(e){var t,n=e("blue/object/extend")(new(e("blue/event/channel")),e("analytics/util/handleDynamicContentUtilMethods"));return{getInstance:function(i,a){return t||(n.emitEvent=function(t){var i,a=t.proceed();if(a){i={type:"communication",eventTimeStamp:Date.now()};var r=n[t.method](t.args,i);e("analytics/util/checkForAtleastOne")(["errorKeyword","communicationKeyword","warningHeader"],r.data.placement)&&n.emit(r)}return a},t=n),t}}})),define("analytics/channel/webEventChannel",["require","blue/event/channel/component","analytics/util/duplicateScreenUtil","blue/event/channel"],(function(e){var t,n=e("blue/event/channel/component"),i=e("analytics/util/duplicateScreenUtil");function a(e){var t={},n=e.target,i=n.spec.data?n.model.toJSON(n.spec.data).model:{};return Object.keys(i).forEach((function(e){t[e]={value:i[e]}})),t}return{getInstance:function(r,o,s){var c,l;return t&&!s||(c=new(e("blue/event/channel")),l=(l=n.asEventStream("action")).map((function(e){return e.nonCustomerEvent||i.reset(),{type:"action",eventTimeStamp:e.eventTimeStamp,name:e.target.spec.name,data:a(e),action:e.action,nonCustomerEvent:e.nonCustomerEvent}})),c.plug(l),t=c),t}}})),define("analytics/util/serverData",["require","analytics/settings"],(function(e){var t,n=e("analytics/settings").get();function i(){this.offset=void 0,this.isBot=!1}return i.prototype=Object.create(null),i.prototype={constructor:i,setData:function(e,t,i){var a=i?i.length:0;this.offset=e,this.isBot=t;for(var r=0;r<a;r++)i[r].location[n.payloadEpochHeader]=this.offset,i[r].device[n.payloadIsBotHeader]=this.isBot},getOffset:function(){return this.offset},getIsBot:function(){return this.isBot}},function(){return t||(t=new i),t}})),define("analytics/util/computeUTCOffset",[],(function(){return function(e){var t=parseInt(e/60),n=Math.abs(t);return 0===t?"+0":n<10?"".concat(t<0?"+":"-",n):t>0?"-".concat(n):"+".concat(n)}})),define("analytics/computed/identity",["require","analytics/util/serverData","blue/device","blue/device","blue/device","blue/device","blue/device","blue/root","analytics/settings","analytics/util/computeUTCOffset"],(function(e){"use strict";var t=e("analytics/util/serverData")();return{get:function(){var n=(new Date).toLocaleTimeString("en-us",{timeZoneName:"short"}).split(" ")[2];return{device:{screenRes:e("blue/device").dimensions.screen.width+"x"+e("blue/device").dimensions.screen.height,browserRes:e("blue/device").dimensions.window.width+"x"+e("blue/device").dimensions.window.height,browserLang:e("blue/device").lang,colorDepth:e("blue/root").screen.colorDepth,javaScriptVer:e("analytics/settings").get("javaScriptVer"),isBT:t.getIsBot()},location:{timezone:n,tz_offset:e("analytics/util/computeUTCOffset")((new Date).getTimezoneOffset()),server_offset:t.getOffset()}}}}})),define("analytics/util/stores/v1stCookie",["require","blue/random","blue/is","blue/log","blue/root","blue/store/enumerable/cookie"],(function(e){var t=e("blue/random"),n=e("blue/is"),i=e("blue/log")("[blue-analytics]"),a=e("blue/root"),r=a.location&&a.location.hostname?a.location.hostname:"",o=""===r?"":"localhost"===r?void 0:".chase.com",s="v1st",c=new(e("blue/store/enumerable/cookie"))(null,!0);return{read:function(){var e=c.get(s);if(!n.string(e)||16!==e.length){var r=new Date((new Date).setYear((new Date).getYear()+1905)),l=e;if(c.set(s,function(){for(var e=["A","B","C","D","E","F","0","1","2","3","4","5","6","7","8","9"],n=16,i="";n--;)i+=e[Math.floor(16*t())];return i}(),r,"/",o),e=c.get(s),a.hybrid){var d="v1stCookie ";n.string(l)?d+="Reason : cookie length = "+l.length:d+="Reason : cookie is not a string = "+l,d+=" Location  = "+a.location,d+=" CookieValue = "+e,i.error(d)}}return e}}})),define("analytics/util/stores/s_viCookie",["require","blue/random","blue/is","blue/root","analytics/util/stores/v1stCookie","blue/store/enumerable/cookie"],(function(e){var t=e("blue/random"),n=e("blue/is"),i=e("blue/root"),a=e("analytics/util/stores/v1stCookie").read(),r=i.location&&i.location.hostname?i.location.hostname:"",o=""===r?"":"localhost"===r?void 0:".chase.com",s="s_vi",c=new(e("blue/store/enumerable/cookie"))(null,!0)||"",l=function(e,n){return"[CS]v1|"+e+"-"+function(e){for(var n=["A","B","C","D","E","F","0","1","2","3","4","5","6","7","8","9"],i=e,a="";i--;)a+=n[Math.floor(e*t())];return a}(n)+"[CE]"};return{read:function(){var e=c.get(s);if(n.string(a)&&16===a.length&&(!n.string(e)||44!==e.length)){var t=new Date((new Date).setYear((new Date).getYear()+1905));c.set(s,l(a,16),t,"/",o,!0),e=c.get(s)}return e}}})),define("analytics/computed/user",["require","blue/resource/persona","analytics/util/stores/v1stCookie","analytics/util/stores/s_viCookie","blue/siteData","blue/store/enumerable/cookie"],(function(e){var t=(new(e("blue/resource/persona"))).read(),n=e("analytics/util/stores/v1stCookie").read(),i=e("analytics/util/stores/s_viCookie").read(),a=e("blue/siteData"),r=new(e("blue/store/enumerable/cookie"))(null,!0);return function(){var e=r.get("_tmprememberme")?r.get("_tmprememberme"):0,o=r.get("_rememberme"),s=a.getData("ssv_eci")?a.getData("ssv_eci"):t?t.ECI:void 0,c=a.getData("profileId")?a.getData("profileId"):window.profileId?window.profileId:t?t.pfid:void 0,l=s||c?o||0!==e&&"0"!==e?"knwn_rmbrme":"knwn":"unknwn",d=a.getData("aggregatedAccountType")?a.getData("aggregatedAccountType"):void 0,u=a.getData("testProfile")?a.getData("testProfile"):void 0,p=a.getData("serviceOnlyConsumer"),f=a.getData("consumerPersona"),m=a.getData("userType")||void 0,g=a.getData("jumbo")||void 0,v=a.getData("accountTypes")?.split("+").join("|");return{accountTypes:v,aggregatedAccountType:d,consumerPersona:f,eci:s,jumbo:g,profileId:c,profileType:a.getData("profileType")||void 0,s_vi:i,segment:a.getData("segment")?a.getData("segment"):t?t.segment:void 0,isPrdTestAcct:u,serviceOnlyConsumer:p,userType:m,visitorId:n,visitorType:l}}})),define("analytics/util/stores/demdexFetch",["require","shared-data"],(function(e){var t=e("shared-data"),n="analytics-demdex-fetch-store";let i=!1;return t.sharedDataObserver(n).subscribe((({inProgress:e})=>{"boolean"==typeof e&&(i=e)})),{setDemdexCallToInProgress:function(){t.sharedDataObserver(n).publish({inProgress:!0})},setDemdexCallToCompleted:function(){t.sharedDataObserver(n).publish({inProgress:!1})},isDemdexCallInProgress:function(){return i}}})),define("analytics/computed/midCompute",["require","exports","module","blue/store/enumerable/cookie","blue/is","blue/util","blue/root","blue/log","blue/siteData","analytics/computed/user","analytics/settings","analytics/util/stores/demdexFetch"],(function(e,t,n){var i=new(e("blue/store/enumerable/cookie"))(null,!0),a=e("blue/is"),r=e("blue/util"),o=e("blue/root"),s=(e("blue/log")("[blue-analytics]"),e("blue/siteData")),c=e("analytics/computed/user"),l=e("analytics/settings").get("midConfig"),d=!a.empty(n.config())&&r.object.merge(l,n.config())||l,u=o.location&&o.location.hostname?o.location.hostname:"",p=""===u?"":"localhost"===u?void 0:".chase.com",f=!1,m=d.cookieKeyPre+d.orgId,g=!1,v=(e("analytics/util/stores/demdexFetch"),function(){var e,t,n="0123456789",i="",a="",r=10,o=10;for(e=0;19>e;e++)t=Math.floor(Math.random()*r),i+=n.substring(t,t+1),0===e&&9==t?r=3:((1==e||2==e)&&10!=r&&2>t||2<e)&&(r=10),t=Math.floor(Math.random()*o),a+=n.substring(t,t+1),0===e&&9==t?o=3:((1==e||2==e)&&10!=o&&2>t||2<e)&&(o=10);return i+a}),h=function(){var e=i.get(m),t=a.defined(e)&&b(e,"MCMID");return g||t?I({d_mid:t}):(g=!0,f=!0,I({d_mid:v()}),e=i.get(m),t=a.defined(e)&&b(e,"MCMID")),t},y=function(){return c()},b=function(e,t){var n=t+/\|(([\w&.\-]+\.)?([\w&.\-]+\.)?(\*|[\w&.\-]+))(?=$|\|)/.source,i=e.match(n);return i&&i[1]||""},C=function(){var e=y()||{},t=i.get(m);return a.defined(t)&&b(t,"MCCIDH")===E(e.eci+e.profileId).toString()},A=function(){var e=y()||{},t=i.get(m);if(a.defined(t)&&a.defined(e.eci)&&a.defined(e.profileId)&&!a.empty(d)&&d.enableMid&&!1===C())return f=b(t,"IsCustom"),h()},I=function(e){i.get(m);var t,n=y()||{},o={},c=new Date((new Date).setYear((new Date).getYear()+1905));return a.defined(e)&&(e=!a.object(e)&&JSON.parse(e)||e,o={SETTINGS_DIGEST:E(d.version+"|"+d.audienceManagerServer+"|"+d.audienceManagerServerSecure),MCMID:a.defined(e.d_mid)&&e.d_mid||"",MCAAMLH:a.defined(e.dcs_region)&&e.dcs_region||"",MCAAMB:a.defined(e.d_blob)&&e.d_blob||"",MCCIDHVALUE:a.defined(n.eci)&&a.defined(n.profileId)&&E(n.eci+n.profileId)?"MCCIDH":"",MCCIDH:a.defined(n.eci)&&a.defined(n.profileId)&&E(n.eci+n.profileId)||"",MCOPTOUT:a.defined(e.d_optout)&&"none"!=e.d_optout.toString().toLowerCase()&&e.d_optout||"isoptedout-false",TESTPROFILE:a.defined(s.getData("testProfile"))&&s.getData("testProfile")||"false"},t=r.string.interpolate("{{SETTINGS_DIGEST}}|MCIDTS|17564|MCMID|{{MCMID}}|MCAID|NONE|MCOPTOUT|{{MCOPTOUT}}|MCAAMLH|{{MCAAMLH}}|MCAAMB|{{MCAAMB}}|{{MCCIDHVALUE}}|{{MCCIDH}}|MCSYNCSOP|411-17568|vVersion|2.3.0|TESTPROFILE|{{TESTPROFILE}}",o),t=f?t+"|IsCustom|true":t,i.set(m,t,c,"/",p)),t},E=function(e){var t,n=0;if(a.defined(e))for(e=e.toString(),t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n&=n;return n},S=function(e){var t=i.get(m);return e=e||"MCMID",a.defined(t)&&!a.empty(d)&&d.enableMid&&b(t,e)||void 0},w=function(){return{adobeData:i.get(m)}};return{get:S,set:function(){var e=S();return!a.empty(d)&&d.enableMid&&(a.defined(e)?!1===C()&&A():e=h()),e},getAdobeData:w,linkCustomerId:A,updateMidInEvents:function(e){var t=S(),n=e.length;if(a.defined(t))for(var i=0;i<n;i++)e[i].visitor=r.object.extend(e[i].visitor,w())},updateTestProfileInMid:function(){var e=i.get(m),t=a.defined(e)&&!a.empty(d)&&d.enableMid,n=new Date((new Date).setYear((new Date).getYear()+1905)),r=s.getData("testProfile"),o="TESTPROFILE";if(t&&-1===e.indexOf(o)){var c=e+"|TESTPROFILE|"+(l=a.defined(r)&&r||"false");i.set(m,c,n,"/",p)}else if(t&&e.indexOf(o)>-1&&void 0!==r){var l=r;c=e.replace(/\|TESTPROFILE\|[a-zA-Z]+/gi,"|TESTPROFILE|"+l);i.set(m,c,n,"/",p)}return!0},getTestProfileInMid:function(){var e=i.get(m);return a.defined(e)&&!a.empty(d)&&d.enableMid&&b(e,"TESTPROFILE")||void 0}}})),require.config({paths:{analytics:"analytics/js","blue-legacy":"@blue/blue-legacy/dist/blue-legacy/js"}}),define("analytics/config",(function(){})),define("analytics/config/channelMapperConfig",[],(function(){return[{name:"webEvent",channel:"analytics/channel/webEventChannel",mapper:"analytics/mapper/webEventMapper"},{name:"screenEvent",channel:"analytics/channel/screenEventChannel",mapper:"analytics/mapper/screenEventMapper"},{name:"variableSettingsEvent",channel:"analytics/channel/variableSettingsChannel",mapper:"analytics/mapper/variableSettingsEventMapper"},{name:"decisionedContentEvent",channel:"analytics/channel/decisionedContentEventChannel",mapper:"analytics/mapper/decisionedContentEventMapper"},{name:"adsEvent",channel:"analytics/channel/adsEventChannel",mapper:"analytics/mapper/adsEventMapper"},{name:"personalizationEvent",channel:"analytics/channel/personalizationChannel",mapper:"analytics/mapper/personalizationMapper"},{name:"loggingEvent",channel:"analytics/channel/loggingEventChannel",mapper:"analytics/mapper/loggingEventMapper"},{name:"impressionEvent",channel:"analytics/channel/impressionEventChannel",mapper:"analytics/mapper/impressionEventMapper"},{name:"formFieldEvent",channel:"analytics/channel/formFieldChannel",mapper:"analytics/mapper/formFieldEventMapper"},{name:"experimentImpressionEvent",channel:"analytics/channel/experimentImpressionChannel",mapper:"analytics/mapper/experimentImpressionMapper"},{name:"experimentActionEvent",channel:"analytics/channel/experimentActionChannel",mapper:"analytics/mapper/experimentActionMapper"},{name:"pageInventoryEvent",channel:"analytics/channel/pageInventoryChannel",mapper:"analytics/mapper/pageInventoryMapper"},{name:"hoverEvent",channel:"analytics/channel/hoverEventChannel",mapper:"analytics/mapper/hoverEventMapper"}]})),define("analytics/config/variationsWhitelist",[],(function(){return["NOT_MAPPED","SYSTEM_FAILURE","ECD_STAND_IN_MODE","UNKNOWN_FRAMEWORK_ERROR","NETWORK_SERVICE_FAILURE","PRESENTATION_FAILURE","SLOW_CONNECTION","NO_CONNECTION","C3_MODE","SPLASH_MODE","READ_ONLY_MODE","ECD_MODE"]})),define("analytics/event/decisionedContentEvent",["require","blue/event","blue/is","blue/log","analytics/channel/decisionedContentEventChannel","blue/declare"],(function(e){var t=e("blue/event"),n=e("blue/is"),i=e("blue/log")("[blue-analytics.decisionedContentEvent]"),a=e("analytics/channel/decisionedContentEventChannel"),r=function(e,t){var n=e.spec.data?Object.keys(e.spec.data):[];t.map((function(t){var a=Object.keys(t)[0];-1===n.indexOf(a)&&i.warn('Data field "'+a+'" undefined for component '+e.spec.name)}))};return e("blue/declare")(t,{constructor:function(e,i,o,s){t.call(this),n.array(i)&&r(e,i),this.component=e,this.content=i,this.template=o,n.array(s)&&(r(e,s),this.properties=s),a.getInstance().emitEvent(this)}})})),define("analytics/util/channelMapperPromise",["require","analytics/config/channelMapperConfig","blue/is"],(function(e){var t=e("analytics/config/channelMapperConfig"),n=e("blue/is");return function(i,a,r){var o=[];return t.map((function(t){(n.undefined(r)||!0===r[t.name])&&o.push(new Promise((function(n){e([t.channel,t.mapper],(function(e,r){var o=e.getInstance(i,a).asEventStream().map(r,i,a);o.name=t.name,n(o)}))})))})),Promise.all(o).then((function(e){return e.get=function(e){for(var t in this){var n=this[t];if(n.name===e)return n}},e}))}})),define("analytics/util/addErrorAndCommunicationHooks",["require","blue/intercept"],(function(e){var t=e("blue/intercept").around;return function(n,i){return Promise.all(n.map((function(n){return new Promise((function(a){e([n.module],function(e){this.advice=t(this.ref?e[this.ref]:e,this.method,i),a()}.bind(n))}))})))}})),define("analytics/util/streamCollator",["require","analytics/util/channelMapperPromise","blue/is","blue/observable","analytics/util/addErrorAndCommunicationHooks"],(function(e){var t=e("analytics/util/channelMapperPromise"),n=e("blue/is"),i=e("blue/observable"),a=e("analytics/util/addErrorAndCommunicationHooks");return function(r,o,s,c,l){return!1!==c?(n.string(s)&&(n.undefined(l)||!0===l.variableSettingsEvent)&&e([s,"analytics/channel/variableSettingsChannel"],(function(e,t){return a(e,t.getInstance().emitEvent)})),t(r,o,l)):new Promise((function(e){e(i.never())}))}})),define("analytics/util/eventBlocker",["require","analytics/settings"],(function(e){var t=e("analytics/settings").get("disableEvents");return{isDisabled:function(e){var n=e.payload?e.payload.eventType:void 0,i=!!e.payload&&e.payload.nonCustomerEvent;switch(n){case"action":if(i&&t.nonUserAction)return!0;break;case"interaction":if("click"===e.payload.interaction&&e.payload.data.accordionName)return!0}return!1}}})),define("analytics/util/botUtil",["require","blue/is"],(function(e){var t=e("blue/is");return{isBot:function(e){var n=navigator?navigator.userAgent:void 0,i=!1,a=0;if(!t.array(e)||!t.string(n))return!1;for(;a<=e.length-1&&!i&&t.string(e[a]);)i=n.toLowerCase().indexOf(e[a].toLowerCase())>-1,a++;return i}}})),define("analytics/util/filter",["require","analytics/settings"],(function(e){var t=e("analytics/settings").get("PIIConfig"),n=/([\d-. \t/]{9,})|.*(%40|@|at)[ ]?\S+[ ]?(%2C|\.|dot)[ ]?(com|net).*|.*aol\.com.*|.*gmail.*|.*yahoo.*|.*msn.*|.*hotmail.*/gi,i=function(e,a){var r=function(e){var n=t.bypassByDataContain&&new RegExp(t.bypassByDataContain.join("|"),"g")||!1;return!!n&&(n.lastIndex=0,n.test(e))};if(e&&t.enable)if(Array.isArray(e)||"object"==typeof e){var{replaceFields:o}=t;for(var s in e)if(!(t.bypassByDataKey&&!0===t.bypassByDataKey[s]||!1)){o&&o.includes(s)&&(a=!0);var c=!1;if(s.indexOf("URL")>-1)try{const n=new URL(e[s]),o=n.searchParams;let l=[];for(const e of o.keys())if(c=!0,t.bypassByDataContain.includes(`${e}=`))l.push(`${e}=${o.get(e)}`);else{const t=i(o.get(e));l.push(`${e}=${t}`)}const d=n.hash.split(";");let[u,...p]=d;u=i(u,a),n.hash=[u,...p.map((e=>{let[t,n]=e.split("=");return r(`${t}=`)||(n=i(n,a)),[t,n].join("=")}))].join(";"),e[s]=`${n.protocol}//${n.host}${n.pathname}${l.length>0?`?${l.join("&")}`:""}${n.hash}`}catch(e){}c||(e[s]=i(e[s],a))}}else r(e)||(n.lastIndex=0,a?e=e.replace(n,t.screenStrPIIFilter):n.test(e)&&(e=t.screenStrPIIFilter));return e};return{personalData:i,personalDataByEventType:function(e){var n=!!(e&&e.payload&&e.payload.data),a=e&&e.component&&t.bypassByComponent&&!0===t.bypassByComponent[e.component]||!1,r=n&&t.bypassByEventType&&!0===t.bypassByEventType[e.payload.eventType]||!1;!n||r||a||(e.payload.data=i(e.payload.data),e.screen=i(e.screen,!0))}}})),define("analytics/util/globalShare.screenData",["require","shared-data"],(function(e){var t=e("shared-data"),n="screen:data";function i(){var e=t.sharedDataObserver(n).getData();return e&&e.screenData?e.screenData:void 0}function a(){var e=i();return!!(e&&e.id&&e.currentURL&&e.framework)}function r(){var e=i();return e&&e.framework}return{getScreenData:i,setScreenData:function({id:e,currentURL:i,parameters:a,framework:r="blue"}){t.sharedDataObserver(n).publish({screenData:{id:e,currentURL:i,parameters:a,framework:r}})},isScreenDataActive:a,getCurrentScreenId:function(){var e=i();return e&&e.id},getCurrentScreenIdParamters:function(){var e=i();return e&&e.parameters},getCurrentScreenUrl:function(){var e=i();return e&&e.currentURL},getCurrentScreenFramework:r,isCurrentScreenOctagon:function(e){return i(),a()&&"octagon"===r()},isCurrentScreenBlueJS:function(){return i(),a()&&"blue"===r()}}})),define("analytics/util/filter.undefinedBlueJsScreenEvents",["require","analytics/util/globalShare.screenData"],(function(e){var t=e("analytics/util/globalShare.screenData");function n(e){return!!(e.payload&&e.payload.eventType&&"screen"===e.payload.eventType&&e.screen&&e.screen.id&&"UNDEFINED_SCREEN_ID"===e.screen.id)}function i(e,t){return!(!e.screen||!e.screen.currentURL||e.screen.currentURL!==t)}function a(e){return function(t){return!1===(i(t,e)&&n(t))}}return{isUndefinedBlueJsScreenEvent:n,isEventForCurrentURL:i,filterUndefinedBlueJsScreenEventsForCurrentURL:a,filterUndefinedBlueJsScreenEventsForCurrentOctagonScreen:function(e){return t.isScreenDataActive()&&t.isCurrentScreenOctagon()?e.filter(a(t.getCurrentScreenUrl())):e}}})),define("analytics/util/harmonization/utilities/analyticsEventType",["require"],(function(e){return{ACCORDION:"accordion",AD_CLICK:"ad_click",AD_IMPRESSION:"ad_impression",AD_INTERACTION:"ad_interaction",COMMUNICATION_ERROR:"error",COMMUNICATION_NOTIFICATION:"notification",CONVERSATION_MESSAGE_CLICK:"conversation_message_click",CONVERSATION_MESSAGE_IMPRESSION:"conversation_message_impression",CONVERSATION_MESSAGE_INTERACTION:"conversation_message_interaction",DOCUMENT_DOWNLOAD:"document_download",EXIT_LINK:"exit_link",FORM_FIELD:"form_field",LINK_CLICK:"link_click",PERSONALIZATION_CLICK:"personalization_click",PERSONALIZATION_IMPRESSION:"personalization_impression",PERSONALIZATION_IMPRESSION_EXPERIMENTATION:"experimentation",PERSONALIZATION_INTERACTION:"personalization_interaction",SCREEN:"screen",SEARCH:"search",SEARCH_LINK:"search_link",SEARCH_FEEDBACK_INTERACTION:"search_feedback_interaction",VIDEO_INTERACTION:"video_interaction"}})),define("analytics/util/harmonization/utilities/getAnalyticsEventType/isAccordionEvent",["require"],(function(e){return function(e){return"interaction"===e.payload?.eventType&&("openAccordion"===e.payload?.interaction||"closeAccordion"===e.payload?.interaction)}})),define("analytics/util/harmonization/utilities/getAnalyticsEventType/isAdClickEvent",["require"],(function(e){return function(e){return!("action"!==e.payload.eventType||"reviewOffer"!==e.payload.action||!/T_.*|FIGG:.*|CDLX:.*/.test(e.payload.data?.advertisementId?.value))||!("selectConversationMessageAction"!==e.payload.action||!/T_.*/.test(e.payload.data?.advertisementId?.value)||"ad"!==e.payload.data?.conversationMessageType?.value)}})),define("analytics/util/harmonization/utilities/getAnalyticsEventType/isAdInteractionEvent",["require"],(function(e){return function(e){return!("action"!==e.payload.eventType||!/requestConversationMessageActions.*|exitConversationMessage/.test(e.payload?.action)||!/T_.*/.test(e.payload?.data?.advertisementId?.value)||"ad"!==e.payload.data?.conversationMessageType?.value)}})),define("analytics/util/harmonization/utilities/getAnalyticsEventType/isCommunicationErrorEvent",["require"],(function(e){return function(e){return"communication"===e.payload?.eventType&&("SYSTEM_FAILURE"===e.payload?.data?.variation||e.payload?.data?.placement.toLowerCase().includes("error"))}})),define("analytics/util/harmonization/utilities/getAnalyticsEventType/isConversationMessageClickEvent",["require"],(function(e){return function(e){return"action"===e.payload?.eventType&&"selectConversationMessageAction"===e.payload?.action&&e.payload.data&&e.payload.data.conversationMessageType&&e.payload.data.conversationMessageType.value&&"ad"!==e.payload.data.conversationMessageType.value}})),define("analytics/util/harmonization/utilities/getAnalyticsEventType/isConversationMessageImpressionEvent",["require"],(function(e){return function(e){return"simpleDecisionedContent"===e.payload.eventType&&"CUSTOMER_CONVERSATION_MESSAGES"===e.component}})),define("analytics/util/harmonization/utilities/getAnalyticsEventType/isConversationMessageInteractionEvent",["require"],(function(e){return function(e){return!("action"!==e.payload.eventType||!/requestConversationMessageActions.*|exitConversationMessage/.test(e.payload?.action)||"CUSTOMER_CONVERSATION_MESSAGES"!==e.component||"ad"===e.payload.data?.conversationMessageType?.value)}})),define("analytics/util/harmonization/utilities/getAnalyticsEventType/isDocumentDownloadEvent",["require"],(function(e){return function(e){return"action"===e.payload?.eventType&&e.payload?.action&&/.*pdf|csv|excel.*|.*print.*|^download.*|^request.*documents?$/.test(e.payload.action.toLowerCase())}})),define("analytics/util/harmonization/utilities/getAnalyticsEventType/isExitLink",["require"],(function(e){return function(e){return"action"===e.payload?.eventType&&/requestexternalnavigation|requestchasefacebook|requesttwitter|requestchasetwitter|requestchaselinkedin|requestchaseinstagram|requestchaseyoutube|requestexternalnavigation|request.*website/.test(e.payload.action.toLowerCase())}})),define("analytics/util/harmonization/utilities/getAnalyticsEventType/isSearchEvent",["require"],(function(e){return function(e){return"dataCollection"===e.payload?.eventType&&!1===function(e){return Boolean(e.data.properties&&e.data.properties[0]&&e.data.properties[0].totalConversationMessages)}(e.payload)}})),define("analytics/util/harmonization/utilities/getAnalyticsEventType/isSearchLinkEvent",["require"],(function(e){return function(e){return"action"===e.payload?.eventType&&e.payload.data?.searchFor?.value&&/\S+/.test(e.payload.data.searchFor.value)&&!e.payload.data.hasOwnProperty("searchResultFeedback")}})),define("analytics/util/harmonization/utilities/getAnalyticsEventType/isSearchFeedbackInteractionEvent",["require"],(function(e){return function(e){return"action"===e.payload?.eventType&&(e.payload.data?.searchResultFeedback?.value||""===e.payload.data?.searchResultFeedback?.value)}})),define("analytics/util/harmonization/utilities/getAnalyticsEventType/isVideoInteraction",["require"],(function(e){return function(e){return"action"===e.payload?.eventType&&e.payload.action.toLowerCase().includes("video")}})),define("analytics/util/harmonization/utilities/getAnalyticsEventType/utilities",["require","./isAccordionEvent","./isAdClickEvent","./isAdInteractionEvent","./isCommunicationErrorEvent","./isConversationMessageClickEvent","./isConversationMessageImpressionEvent","./isConversationMessageInteractionEvent","./isDocumentDownloadEvent","./isExitLink","./isSearchEvent","./isSearchLinkEvent","./isSearchFeedbackInteractionEvent","./isVideoInteraction"],(function(e){return{isAccordionEvent:e("./isAccordionEvent"),isAdClickEvent:e("./isAdClickEvent"),isAdInteractionEvent:e("./isAdInteractionEvent"),isCommunicationErrorEvent:e("./isCommunicationErrorEvent"),isConversationMessageClickEvent:e("./isConversationMessageClickEvent"),isConversationMessageImpressionEvent:e("./isConversationMessageImpressionEvent"),isConversationMessageInteractionEvent:e("./isConversationMessageInteractionEvent"),isDocumentDownloadEvent:e("./isDocumentDownloadEvent"),isExitLinkEvent:e("./isExitLink"),isSearchEvent:e("./isSearchEvent"),isSearchLinkEvent:e("./isSearchLinkEvent"),isSearchFeedbackInteractionEvent:e("./isSearchFeedbackInteractionEvent"),isVideoInteraction:e("./isVideoInteraction")}})),define("analytics/util/pipe",[],(function(){return(...e)=>e.reduce(((e,t)=>n=>t(e(n))))})),define("analytics/util/harmonization/utilities/personalization",["require","analytics/util/pipe"],(function(e){var t=e("analytics/util/pipe"),n=["personalizationData","darkCanaryPersonalizationData","tntPersonalizationData","ccjPersonalizationData","splitIoPersonalizationData"],i=t(Object.values,(e=>e.map((e=>e.toLowerCase()))))({split:"Split",tnt:"tnt",darkCanary:"DarkCanary"});function a(e){return n.find((t=>Object.prototype.hasOwnProperty.call(e.payload.data||{},t)))}function r(e){var t=a(e);if(t){var n={};n=Object.prototype.hasOwnProperty.call(e.payload.data[t],"value")?e.payload.data[t].value:e.payload.data[t]}return"object"==typeof n?n:{}}function o(e){return!!e&&t((e=>e.toLowerCase()),(e=>i.includes(e)))(e)}function s(e){return e?"exp":"pers"}function c(e){return t(o,s)(e)}function l({product:e,elementName:t,elementPlacement:n,elementContext:i,category:a,impressionFlag:r}){const o=c(e);return{...e?{[`${o}Product`]:e}:{},...t?{[`${o}ElementName`]:t}:{},...a?{[`${o}Category`]:a}:{},...n?{[`${o}ElementPlacement`]:n}:{},...i?{[`${o}ElementContext`]:i}:{},...r?{[`${o}ImpressionFlag`]:r}:{[`${o}ImpressionFlag`]:""}}}return{nonHarmonizedPersonalizationKeys:n,doesNonHarmonizedEventContainPersonalization:function(e){const t=a(e);return Boolean(t)&&Boolean(e.payload.data[t])},isPersonalizationExperiment:o,isPersonalizationExperimentFromNonHarmonizedEvent:function(e){return t(r,(({product:e})=>o(e)))(e)},getPersonalizationKeyPrefix:s,getPersonalizationPrefixByProduct:c,getPersonalizationEventData:l,getPersonalizationEventDataFromNonHarmonizedEvent:function(e){return t(r,l)(e)},getPersonalizationPrefixFromNonHarmonizedEvent:function(e){return t(r,(({product:e})=>c(e)))(e)}}})),define("analytics/util/harmonization/utilities/getAnalyticsEventType/index",["require","../analyticsEventType","./utilities","../personalization"],(function(e){var t=e("../analyticsEventType"),n=e("./utilities"),i=e("../personalization");return function(e){const a=e.payload.eventType,r={adImpression:t.AD_IMPRESSION,screen:t.SCREEN,personalizationClick:t.PERSONALIZATION_CLICK,personalizationInteraction:t.PERSONALIZATION_INTERACTION};return r[a]?r[a]:"personalizationImpression"===a?i.isPersonalizationExperimentFromNonHarmonizedEvent(e)?t.PERSONALIZATION_IMPRESSION_EXPERIMENTATION:t.PERSONALIZATION_IMPRESSION:"communication"===a?n.isCommunicationErrorEvent(e)?t.COMMUNICATION_ERROR:t.COMMUNICATION_NOTIFICATION:"action"===a?n.isAdClickEvent(e)?t.AD_CLICK:n.isAdInteractionEvent(e)?t.AD_INTERACTION:n.isConversationMessageClickEvent(e)?t.CONVERSATION_MESSAGE_CLICK:n.isConversationMessageInteractionEvent(e)?t.CONVERSATION_MESSAGE_INTERACTION:n.isDocumentDownloadEvent(e)?t.DOCUMENT_DOWNLOAD:n.isExitLinkEvent(e)?t.EXIT_LINK:n.isSearchFeedbackInteractionEvent(e)?t.SEARCH_FEEDBACK_INTERACTION:n.isSearchLinkEvent(e)?t.SEARCH_LINK:n.isVideoInteraction(e)?t.VIDEO_INTERACTION:t.LINK_CLICK:"interaction"===a?n.isAccordionEvent(e)?t.ACCORDION:t.FORM_FIELD:"simpleDecisionedContent"===a&&n.isConversationMessageImpressionEvent(e)?t.CONVERSATION_MESSAGE_IMPRESSION:"dataCollection"===a&&n.isSearchEvent(e)?t.SEARCH:"uncategorized"}})),define("analytics/util/harmonization/utilities/getEvtOnScreenAndEvtAttributes/utilities",["require"],(function(e){function t(e){if("object"==typeof e){if(e.hasOwnProperty("value"))return e.value??"";if(e.hasOwnProperty("data"))return e.data??""}return e??""}return{unWrapObjectValue:t,objectFilter:function({keysToFilterOff:e,object:n}){return Object.entries(n).filter((([t,n])=>!e.includes(t))).reduce(((e,[n,i])=>({...e,[n]:t(i)})),{})},actionLinkDetailMapper:function(e){const n=["uniqueLinkIdentifier","widgetName","navigationControlName","chaseReliefHubAnalyticsAction","twoFactorAuthenticationEnabled","offerName","resourceName","businessStructureId","collectionsAnalyticsAction","oneTimePasscodeMethod","selectedAccountType","legalAgreementName","navigationId","productId","mortgageAnalyticsAction","logonOptionsId","replacementCardReasonId","insightType","selectedTopic","autoLeaseAnalyticsAction","activeMenuCategoryId","callToActionData","accountSafeFaqAnalyticsData","selectedAppointmentReasonOptionId","makeId","feedbackOptionName","accountSafeCallToActionNavigation","currentSelectedCategory","passwordResetIdentifyOptionId","libraryId","targetNavigation","pollQuestionAndAnswer","idmAlertSubCategoryDetails","specialAnnouncementAnalyticsAction","callOutIdentifier","alertSubType","mortgagePayoffQuoteReasonId","financialInstitutionName","nextConditionalCode","selectableTileId","idmAlertFAQDetails","selectedCard","selectedCustomerType","uploadedDocumentId","targetNavigation","accordionValue","productTypeOptionName","hiddenCategoryName","disputeReasonOptionId","appointmentType","numberOfTransactions","fundingMethodOptionId","payeeType","selectedCategoryTab","payeeDescription","lobName","transferAccountsCombination","filterText"].find((t=>e.hasOwnProperty(t)));let i="";return n&&(i=t("targetNavigation"===n?e.targetNavigation?.value?.navKey:"hiddenCategoryName"===n?e.hiddenCategoryName?.value?.context:e[n])),i}}})),define("analytics/util/harmonization/utilities/getEvtOnScreenAndEvtAttributes/getters/accordionInteraction",["require","../utilities"],(function(e){var t=e("../utilities");return function(e){return{evtOnScreen:{component:e.component||"",accordionInteractionName:e.payload.interaction,accordionName:t.unWrapObjectValue(e.payload.data.accordionName)},evtAttributes:t.objectFilter({keysToFilterOff:["formfieldName","selection","checked","accordionName"],object:e.payload.data})}}})),define("analytics/util/harmonization/utilities/getEvtOnScreenAndEvtAttributes/getters/adClick",["require","../utilities","../../personalization"],(function(e){var t=e("../utilities"),n=e("../../personalization");return function(e){return{evtOnScreen:{component:e.component||"",actionCategory:e.payload.action,actionLinkDetail:t.actionLinkDetailMapper(e.payload.data),adId:t.unWrapObjectValue(e.payload.data.advertisementId),adPlacement:t.unWrapObjectValue(e.payload.data.advertisementPlacementId),adTargetScreenId:t.unWrapObjectValue(e.payload.data.advertisementPageId),adStatus:"",...e.payload.data.advertisementMidasId?{adRecoId:t.unWrapObjectValue(e.payload.data.advertisementMidasId)}:{},...e.payload.data.offerId?{adOfferId:t.unWrapObjectValue(e.payload.data.offerId)}:{},...e.payload.data.variations?{adPreferenceByContext:t.unWrapObjectValue(e.payload.data.variations)}:{},...e.payload.data.failoverReason?{adFailoverReason:t.unWrapObjectValue(e.payload.data.failoverReason)}:{},...e.payload.data.decisionAnalytics?{decisionAnalytics:t.unWrapObjectValue(e.payload.data.decisionAnalytics)}:{},...e.payload.data.decisionEngine?{decisionEngine:t.unWrapObjectValue(e.payload.data.decisionEngine)}:{},...e.payload.data.conversationMessageType?{conversationMessageType:t.unWrapObjectValue(e.payload.data.conversationMessageType),conversationMessageLinkName:e.payload.action}:{},...n.doesNonHarmonizedEventContainPersonalization(e)?n.getPersonalizationEventDataFromNonHarmonizedEvent(e):{}},evtAttributes:t.objectFilter({keysToFilterOff:["advertisementId","advertisementPlacementId","advertisementPageId","advertisementMidasId","offerId","decisionAnalytics","decisionEngine","failoverReason","variations","conversationMessageType","splitIoPersonalizationData"],object:e.payload.data})}}})),define("analytics/util/harmonization/utilities/getEvtOnScreenAndEvtAttributes/getters/adInteraction",["require","../utilities"],(function(e){var t=e("../utilities");return function(e){return{evtOnScreen:{component:e.component||"",actionCategory:e.payload.action,actionLinkDetail:t.actionLinkDetailMapper(e.payload.data),adId:t.unWrapObjectValue(e.payload.data.advertisementId),adPlacement:t.unWrapObjectValue(e.payload.data.advertisementPlacementId),adTargetScreenId:t.unWrapObjectValue(e.payload.data.advertisementPageId),adStatus:"",adOfferUniformResourceLocator:"",...e.payload.data.advertisementMidasId?{adRecoId:t.unWrapObjectValue(e.payload.data.advertisementMidasId)}:{},...e.payload.data.offerId?{adOfferId:t.unWrapObjectValue(e.payload.data.offerId)}:{},...e.payload.data.variations?{adPreferenceByContext:t.unWrapObjectValue(e.payload.data.variations)}:{},...e.payload.data.failoverReason?{adFailoverReason:t.unWrapObjectValue(e.payload.data.failoverReason)}:{},...e.payload.data.decisionAnalytics?{decisionAnalytics:t.unWrapObjectValue(e.payload.data.decisionAnalytics)}:{},...e.payload.data.decisionEngine?{decisionEngine:t.unWrapObjectValue(e.payload.data.decisionEngine)}:{},...e.payload.data.conversationMessageType?{conversationMessageType:t.unWrapObjectValue(e.payload.data.conversationMessageType),conversationMessageLinkName:e.payload.action}:{}},evtAttributes:t.objectFilter({keysToFilterOff:["advertisementId","advertisementPlacementId","advertisementPageId","advertisementMidasId","offerId","decisionAnalytics","decisionEngine","failoverReason","variations","conversationMessageType"],object:e.payload.data})}}})),define("analytics/util/harmonization/utilities/getEvtOnScreenAndEvtAttributes/getters/adImpression",["require","../utilities","../../personalization"],(function(e){var t=e("../utilities"),n=e("../../personalization");return function(e){return{evtOnScreen:{component:e.component||"",adId:t.unWrapObjectValue(e.payload.data.adId),adPlacement:t.unWrapObjectValue(e.payload.data.placement),adTargetScreenId:t.unWrapObjectValue(e.payload.data.tagMap),adStatus:"",...e.payload.data.advertisementMidasId?{adRecoId:t.unWrapObjectValue(e.payload.data.advertisementMidasId)}:{},...e.payload.data.offerId?{adOfferId:t.unWrapObjectValue(e.payload.data.offerId)}:{},...e.payload.data.variations?{adPreferenceByContext:t.unWrapObjectValue(e.payload.data.variations)}:{},...e.payload.data.failoverReason?{adFailoverReason:t.unWrapObjectValue(e.payload.data.failoverReason)}:{},...e.payload.data.decisionAnalytics?{decisionAnalytics:t.unWrapObjectValue(e.payload.data.decisionAnalytics)}:{},...e.payload.data.decisionEngine?{decisionEngine:t.unWrapObjectValue(e.payload.data.decisionEngine)}:{},...n.doesNonHarmonizedEventContainPersonalization(e)?n.getPersonalizationEventDataFromNonHarmonizedEvent(e):{}},evtAttributes:t.objectFilter({keysToFilterOff:["adId","advertisementPlacementId","placement","advertisementPageId","advertisementMidasId","offerId","decisionAnalytics","decisionEngine","failoverReason","variations","tagMap",...n.nonHarmonizedPersonalizationKeys],object:e.payload.data})}}})),define("analytics/util/harmonization/utilities/getEvtOnScreenAndEvtAttributes/getters/communicationError",["require","../utilities","../../analyticsEventType"],(function(e){var t=e("../utilities"),n=e("../../analyticsEventType");return function(e){return{evtOnScreen:{component:e.component||"",communicationType:n.COMMUNICATION_ERROR,communicationName:t.unWrapObjectValue(e.payload.data.variation),communicationCategory:"",communicationContext:"",communicationScope:"",communicationScopeReference:t.unWrapObjectValue(e.payload.data.placement)},evtAttributes:t.objectFilter({keysToFilterOff:["variation","placement"],object:e.payload.data})}}})),define("analytics/util/harmonization/utilities/getEvtOnScreenAndEvtAttributes/getters/communicationNotification",["require","../utilities","../../analyticsEventType"],(function(e){var t=e("../utilities"),n=e("../../analyticsEventType");return function(e){return{evtOnScreen:{component:e.component||"",communicationType:n.COMMUNICATION_NOTIFICATION,communicationName:t.unWrapObjectValue(e.payload.data.variation),communicationCategory:"",communicationContext:"",communicationScope:"",communicationScopeReference:t.unWrapObjectValue(e.payload.data.placement)},evtAttributes:t.objectFilter({keysToFilterOff:["variation","placement"],object:e.payload.data})}}})),define("analytics/util/harmonization/utilities/getEvtOnScreenAndEvtAttributes/getters/conversationMessageClickAndInteraction",["require","../utilities"],(function(e){var t=e("../utilities");return function(e){return{evtOnScreen:{component:e.component||"",actionCategory:e.payload.action,actionDetail:t.actionLinkDetailMapper(e.payload.data),conversationMessageType:t.unWrapObjectValue(e.payload.data.conversationMessageType)},evtAttributes:t.objectFilter({keysToFilterOff:["conversationMessageType"],object:e.payload.data})}}})),define("analytics/util/harmonization/utilities/getEvtOnScreenAndEvtAttributes/getters/conversationMessageImpression",["require","../utilities"],(function(e){var t=e("../utilities");return function(e){return{evtOnScreen:{component:e.component||"",conversationMessageVariation:t.unWrapObjectValue(e.payload.data.variation),conversationPlacement:t.unWrapObjectValue(e.payload.data.placement)},evtAttributes:t.objectFilter({keysToFilterOff:["placement","variation"],object:e.payload.data})}}})),define("analytics/util/harmonization/utilities/getEvtOnScreenAndEvtAttributes/getters/documentDownload",["require","../utilities"],(function(e){var t=e("../utilities");return function(e){return{evtOnScreen:{component:e.component||"",actionDocumentName:e.payload.action,actionDocumentDetail:t.actionLinkDetailMapper(e.payload.data)},evtAttributes:t.objectFilter({keysToFilterOff:[],object:e.payload.data})}}})),define("analytics/util/harmonization/utilities/getEvtOnScreenAndEvtAttributes/getters/exitLink",["require","../utilities"],(function(e){var t=e("../utilities");return function(e){return{evtOnScreen:{component:e.component||"",actionExitLinkName:e.payload.action,actionExitDetail:t.actionLinkDetailMapper(e.payload.data)},evtAttributes:t.objectFilter({keysToFilterOff:[],object:e.payload.data})}}})),define("analytics/util/harmonization/utilities/getEvtOnScreenAndEvtAttributes/getters/formField",["require","../utilities"],(function(e){var t=e("../utilities");return function(e){return{evtOnScreen:{component:e.component||"",formInteraction:e.payload.interaction,formName:e.component||"",formStep:e.payload.data.formfieldName||"",formType:"",...e.payload.data.hasOwnProperty("selection")?{formSelection:e.payload.data.selection}:{},...e.payload.data.hasOwnProperty("checked")?{formIsChecked:e.payload.data.checked}:{},...e.payload.data.hasOwnProperty("accordionName")?{accordionName:t.unWrapObjectValue(e.payload.data.accordionName)}:{}},evtAttributes:t.objectFilter({keysToFilterOff:["formfieldName","selection","checked","accordionName"],object:e.payload.data})}}})),define("analytics/util/harmonization/utilities/getEvtOnScreenAndEvtAttributes/getters/linkClick",["require","../utilities"],(function(e){var t=e("../utilities");return function(e){return{evtOnScreen:{component:e.component||"",actionLinkName:e.payload.action,actionLinkDetail:t.actionLinkDetailMapper(e.payload.data)},evtAttributes:t.objectFilter({keysToFilterOff:[],object:e.payload.data})}}})),define("analytics/util/harmonization/utilities/getEvtOnScreenAndEvtAttributes/getters/personalizationClickAndInteraction",["require","../utilities","../../personalization"],(function(e){var t=e("../utilities"),n=e("../../personalization");return function(e){return{evtOnScreen:{component:e.component||"",actionCategory:e.payload.action,actionLinkDetail:"",...n.getPersonalizationEventDataFromNonHarmonizedEvent(e)},evtAttributes:t.objectFilter({keysToFilterOff:[...n.nonHarmonizedPersonalizationKeys],object:e.payload.data})}}})),define("analytics/util/harmonization/utilities/getEvtOnScreenAndEvtAttributes/getters/personalizationImpression",["require","../utilities","../../personalization"],(function(e){var t=e("../utilities"),n=e("../../personalization");return function(e){var i=n.getPersonalizationPrefixFromNonHarmonizedEvent(e);return{evtOnScreen:{component:e.component||"",actionCategory:e.payload.action,actionLinkDetail:"",...n.getPersonalizationEventDataFromNonHarmonizedEvent(e),[`${i}ImpressionFlag`]:""},evtAttributes:t.objectFilter({keysToFilterOff:[...n.nonHarmonizedPersonalizationKeys],object:e.payload.data})}}})),define("analytics/util/harmonization/utilities/getEvtOnScreenAndEvtAttributes/getters/screen",["require","../utilities"],(function(e){var t=e("../utilities");return function(e){return{evtOnScreen:{},evtAttributes:t.objectFilter({keysToFilterOff:["redirectScreen","referrerScreenId","referrerURL"],object:e.payload.data})}}})),define("analytics/util/harmonization/utilities/getEvtOnScreenAndEvtAttributes/getters/search",["require","../utilities"],(function(e){var t=e("../utilities");return function(e){return{evtOnScreen:{component:e.component||"",...e.payload.data.properties.map(t.unWrapObjectValue).reduce(((e,t)=>({...e,...t})),{}),searchText:"",searchContext:"",searchResultId:""},evtAttributes:t.objectFilter({keysToFilterOff:["properties"],object:e.payload.data})}}})),define("analytics/util/harmonization/utilities/getEvtOnScreenAndEvtAttributes/getters/searchLink",["require","../utilities"],(function(e){var t=e("../utilities");return function(e){return{evtOnScreen:{component:e.component||"",searchFor:t.unWrapObjectValue(e.payload.data.searchFor),searchType:t.unWrapObjectValue(e.payload.data.searchType),searchText:"",searchContext:"",searchResultId:"",actionCategory:e.payload.action||e.payload.data.action,actionDetail:t.actionLinkDetailMapper(e.payload.data)},evtAttributes:t.objectFilter({keysToFilterOff:["searchFor","searchType"],object:e.payload.data})}}})),define("analytics/util/harmonization/utilities/getEvtOnScreenAndEvtAttributes/getters/searchFeedbackInteraction",["require","../utilities"],(function(e){var t=e("../utilities");return function(e){return{evtOnScreen:{component:e.component||"",searchFor:t.unWrapObjectValue(e.payload.data.searchFor),searchResultFeedback:t.unWrapObjectValue(e.payload.data.searchResultFeedback),actionCategory:e.payload.action,actionDetail:t.actionLinkDetailMapper(e.payload.data)},evtAttributes:t.objectFilter({keysToFilterOff:["searchFor","searchResultFeedback"],object:e.payload.data})}}})),define("analytics/util/harmonization/utilities/getEvtOnScreenAndEvtAttributes/getters/videoInteraction",["require","../utilities"],(function(e){var t=e("../utilities");return function(e){return{evtOnScreen:{actionCategory:e.payload.action,actionDetail:t.actionLinkDetailMapper(e.payload.data),component:e.component||"",videoEvent:e.payload.action,videoId:t.unWrapObjectValue(e.payload.data.videoId),videoName:t.unWrapObjectValue(e.payload.data.videoName),videoTitle:t.unWrapObjectValue(e.payload.data.videoTitle),...e.payload.data.videoPlacement?{videoPlacement:t.unWrapObjectValue(e.payload.data.videoPlacement)}:{},...e.payload.data.videoPlacementPosition?{videoPlacementPosition:t.unWrapObjectValue(e.payload.data.videoPlacementPosition)}:{}},evtAttributes:t.objectFilter({keysToFilterOff:["videoId","videoName","videoTitle","videoPlacement","videoPlacementPosition"],object:e.payload.data})}}})),define("analytics/util/harmonization/utilities/getEvtOnScreenAndEvtAttributes/getters/_index",["require","./accordionInteraction","./adClick","./adInteraction","./adImpression","./communicationError","./communicationNotification","./conversationMessageClickAndInteraction","./conversationMessageImpression","./conversationMessageClickAndInteraction","./documentDownload","./exitLink","./formField","./linkClick","./personalizationClickAndInteraction","./personalizationImpression","./personalizationClickAndInteraction","./screen","./search","./searchLink","./searchFeedbackInteraction","./videoInteraction"],(function(e){return{accordionInteraction:e("./accordionInteraction"),adClick:e("./adClick"),adInteraction:e("./adInteraction"),adImpression:e("./adImpression"),communicationError:e("./communicationError"),communicationNotification:e("./communicationNotification"),conversationMessageClick:e("./conversationMessageClickAndInteraction"),conversationMessageImpression:e("./conversationMessageImpression"),conversationMessageInteraction:e("./conversationMessageClickAndInteraction"),documentDownload:e("./documentDownload"),exitLink:e("./exitLink"),formField:e("./formField"),linkClick:e("./linkClick"),personalizationClick:e("./personalizationClickAndInteraction"),personalizationImpression:e("./personalizationImpression"),personalizationInteraction:e("./personalizationClickAndInteraction"),screen:e("./screen"),search:e("./search"),searchLink:e("./searchLink"),searchFeedbackInteraction:e("./searchFeedbackInteraction"),videoInteraction:e("./videoInteraction")}})),define("analytics/util/harmonization/utilities/getEvtOnScreenAndEvtAttributes/index",["require","../analyticsEventType","./getters/_index"],(function(e){var t=e("../analyticsEventType"),n=e("./getters/_index");return function({analyticsEventType:e,event:i}){var a={[t.ACCORDION]:n.accordionInteraction,[t.AD_CLICK]:n.adClick,[t.AD_INTERACTION]:n.adInteraction,[t.AD_IMPRESSION]:n.adImpression,[t.COMMUNICATION_ERROR]:n.communicationError,[t.COMMUNICATION_NOTIFICATION]:n.communicationNotification,[t.CONVERSATION_MESSAGE_CLICK]:n.conversationMessageClick,[t.CONVERSATION_MESSAGE_IMPRESSION]:n.conversationMessageImpression,[t.CONVERSATION_MESSAGE_INTERACTION]:n.conversationMessageInteraction,[t.DOCUMENT_DOWNLOAD]:n.documentDownload,[t.EXIT_LINK]:n.exitLink,[t.FORM_FIELD]:n.formField,[t.LINK_CLICK]:n.linkClick,[t.PERSONALIZATION_CLICK]:n.personalizationClick,[t.PERSONALIZATION_IMPRESSION]:n.personalizationImpression,[t.PERSONALIZATION_IMPRESSION_EXPERIMENTATION]:n.personalizationImpression,[t.PERSONALIZATION_INTERACTION]:n.personalizationInteraction,[t.SCREEN]:n.screen,[t.SEARCH]:n.search,[t.SEARCH_LINK]:n.searchLink,[t.SEARCH_FEEDBACK_INTERACTION]:n.searchFeedbackInteraction,[t.VIDEO_INTERACTION]:n.videoInteraction};return a[e]?a[e](i):{evtOnScreen:{},evtAttributes:{}}}})),define("analytics/util/harmonization/utilities/isHybridUrl",["require"],(function(e){return function(e){return e.includes("hybrid=true")||e.includes("hybridBundle=hybrid")?"Y":"N"}})),define("analytics/util/harmonization/utilities/parseMidFromAdobeData",["require"],(function(e){const t=/MCMID\|\d{38}/;return function(e){if(e&&!1!==t.test(e))return e.match(t)[0].split("|")[1]}})),define("analytics/util/harmonization/utilities/index",["require","./analyticsEventType","./getAnalyticsEventType/index","./getEvtOnScreenAndEvtAttributes/index","./isHybridUrl","./parseMidFromAdobeData"],(function(e){return{analyticsEventType:e("./analyticsEventType"),getAnalyticsEventType:e("./getAnalyticsEventType/index"),getEvtOnScreenAndEvtAttributes:e("./getEvtOnScreenAndEvtAttributes/index"),isHybridUrl:e("./isHybridUrl"),parseMidFromAdobeData:e("./parseMidFromAdobeData")}})),define("analytics/util/harmonization/index",["require","analytics/settings","analytics/util/harmonization/utilities/index"],(function(e){var t=e("analytics/settings"),n=e("analytics/util/harmonization/utilities/index");function i(e){if(!e)return e;if("pageInventory"===e?.payload?.eventType)return e;const i=n.getAnalyticsEventType(e),{evtOnScreen:a,evtAttributes:r}=n.getEvtOnScreenAndEvtAttributes({analyticsEventType:i,event:e});return{device:{analyticsVersion:`@awf/blue-analytics@${t.get("version")}`,applicationSystemName:e.app.name,appVersion:e.app.version,applicationLanguageCode:e.app.language,browserLang:e.device.browserLang,browserRes:e.device.browserRes,mobileApplicationVersionIdentifier:"",screenOrientationText:"",screenResolutionNumber:e.device.screenRes,userAgent:navigator?navigator.userAgent:""},visitor:{mid:n.parseMidFromAdobeData(e.visitor.adobeData),visitorIdentifier:e.visitor.visitorId},customer:{enterprisePartyIdentifier:e.visitor.eci,primaryEnterprisePartyIdentifier:"",onlineProfileIdentifier:e.visitor.profileId,authenticationTypeName:"TBD",rememberMe:e.visitor.visitorType&&e.visitor.visitorType.includes("_rmbrme")},cookies:{"AMCV_EA673DFC5A2F19060A495C9C@AdobeOrg":e.visitor.adobeData},custProfile:{segmentCode:e.visitor.segment,serviceOnlyConsumer:e.visitor.serviceOnlyConsumer,userType:e.visitor.userType,visitorTypeCode:e.visitor.visitorType,consumerPersona:e.visitor&&e.visitor.consumerPersona?e.visitor.consumerPersona:"",accountTypes:e.visitor&&e.visitor.accountTypes?e.visitor.accountTypes:"",aggregatedAccountTypeName:e.visitor&&e.visitor.aggregatedAccountType?e.visitor.aggregatedAccountType:"",profileType:e.visitor&&e.visitor.profileType?e.visitor.profileType:"",jumbo:e.visitor&&e.visitor.jumbo?e.visitor.jumbo:""},evtCore:{schemaVersion:"1.0.0",channelIdentifier:e.app.channel,analyticsFrameworkIdentifier:"appKit",hybrid:n.isHybridUrl(e.screen.currentURL),loggedIn:"N-TBD",server_offset:e.location.server_offset,siteIdentifier:e.site,analyticsEventTimestamp:e.payload.timestamp,timeZoneCode:e.location.timezone,timeZoneOffsetHourCount:e.location.tz_offset,eventTypeName:e.payload.eventType,analyticsEventType:i},evtAccount:{digitalAccountIdentifier:"",digitalAccountTypeCode:""},evtScreen:{id:e.screen.id?`https://secure.chase.com${e.screen.id}`:e.screen.id,pageName:e.screen.id,pageTitle:"",referrerPageTitle:"",..."screen"===e.payload.eventType?{referrerURL:e.payload.data.referrerURL,referrerPageName:e.payload.data.referrerScreenId,referrerId:e.payload.data.referrerScreenId?`https://secure.chase.com${e.payload.data.referrerScreenId}`:e.payload.data.referrerScreenId,isRedirectScreen:Boolean(e.payload.data.redirectScreen)}:{}},evtOnScreen:{...a},evtAttributes:{currentURL:e.screen.currentURL,...r},evtMetadata:{txnScreenId:e.payload.txnScreenId}}}return{updateEventToHarmonizedEventStructure:i,updateEventBatchToHarmonizedEventStrucure:function(e){return e.map(i)}}})),define("analytics/eventTracker",["require","exports","module","blue/observable","blue/site","blue/device/platform","blue/log","blue/log","blue/log","blue/event/channel","blue/event/channel","blue/is","analytics/config/channelMapperConfig","analytics/util/takeParam","analytics/util/streamCollator","blue/fetch","analytics/bootstrapFormField","analytics/computed/midCompute","analytics/util/eventBlocker","analytics/settings","analytics/util/serverData","analytics/util/botUtil","blue/siteData","analytics/util/filter","analytics/util/filter.undefinedBlueJsScreenEvents","analytics/util/harmonization/index"],(function(e,t,n){var i=e("blue/observable"),a=e("blue/site"),r=e("blue/device/platform"),o=e("blue/log"),s=e("blue/log")("[blue-analytics]"),c=(e("blue/log")("[blue-analytics.adClick]"),new(e("blue/event/channel"))),l=new(e("blue/event/channel")),d=e("blue/is"),u=e("analytics/config/channelMapperConfig"),p=n.config(),f=e("analytics/util/takeParam"),m=e("analytics/util/streamCollator"),g=e("blue/fetch"),v=e("analytics/bootstrapFormField"),h=e("analytics/computed/midCompute"),y=e("analytics/util/eventBlocker"),b=e("analytics/settings"),C=e("analytics/util/serverData"),A=e("analytics/util/botUtil"),I=e("blue/siteData"),E=e("analytics/util/filter"),S=e("analytics/util/filter.undefinedBlueJsScreenEvents"),w=e("analytics/util/harmonization/index"),T=function(e,t,n){var i=n?"analytics.log.reporting.svc":"analytics.reporting.svc";e.services.analyticsTracking[i](JSON.stringify(t)).then((function(){s.info("success")}),(function(e){s.info("error: "+e.status)}))};return function(e,t,n){var O=function(e,t){var n=t;return d.undefined(n)&&d.defined(a.getApplication)&&(n=a.getApplication(e.application).context),n}(e,n),k=h.get(),D=b.get("serverOffsetEnabled"),x=b.get("serverEpochHeader"),M=p.analytics&&p.analytics.serverOffsetEnabled,P=f(d.defined(M)?M:D,"boolean"),N=p.analytics&&p.analytics.blockBotsEnabled,L=b.get("blockBotsEnabled"),R=f(d.defined(N)?N:L,"boolean"),_=p.analytics&&p.analytics.botUserAgents,F=!1,j=!1,U=!0;if(R&&A.isBot(_))return p.enableAnalytics=!1,void s.info("Bot User Agent detected. Stopping analytics eventTracker...");var V=[],q=[];if(d.undefined(O)||d.undefined(O.on))s.error("Failed to initialize analytics eventTracker. Invalid reference to app context",n);else{var B=f(p.enableAnalytics,"boolean");B&&b.set("isLogMsgEncrypt",p.isLogMsgEncrypt);var z={},H=function(){var e=void 0!==I.getData("testProfile");return U&&!F&&(F=f(e?I.getData("testProfile"):h.getTestProfileInMid(),"boolean"),j=!!j||h.updateTestProfileInMid()),F?(V=[],q=[],F=!0,s.info("Test account detected. Stopping analytics service..."),!0):(U=!1,!1)},G=function(e){if(!H()&&(0!==V.length||0!==q.length)){if(void 0===k&&(h.updateMidInEvents(e?q:V),k=h.get()),h.get()){if(e&&q&&q.length>0){var t={events:q};q=[],T(O,t,e)}else if(V.length>0){V=S.filterUndefinedBlueJsScreenEventsForCurrentOctagonScreen(V);t={events:V=w.updateEventBatchToHarmonizedEventStrucure(V)};V=[],s.info(new Date,JSON.stringify(t,null,2)),T(O,t,e)}return t}B&&h.set(O)}};O.on("blue:applicationConfigComplete",(function(){var e={contentType:"application/json",method:"POST",data:JSON.stringify({}),headers:{"x-jpmc-csrf-token":"NONE"}};B&&h.set(O),B&&P&&g(O.services.analyticsTracking.settings("analytics.reporting.svc").url,e).then((function(e){var t=e.headers.get(x),n=(new Date).getTime(),i=t?t-n:void 0,a=e.headers.get(b.get("serverIsBotHeader"));C().setData(i,a,V)})).catch((function(e){C().setData(void 0,void 0,void 0),s.error(e)}))})),v(p),u.map((function(e){z[e.name]=!d.defined(p.analytics)||!d.object(p.analytics.eventTypes)||f(p.analytics.eventTypes[e.name],"boolean")})),m(e.site,e.application,t,B,z).then((function(e){var t=p.analytics&&f(p.analytics.bufferInterval,"number")||b.get("bufferInterval"),n=p.analytics&&f(p.analytics.logEventBufferInterval,"number")||b.get("logEventBufferInterval"),a=b.get("EVENT_TYPES"),s=i.merge(e);c.plug(i.interval(t,1)),l.plug(i.interval(n,1)),s.onValue((function(e){y.isDisabled(e)||(E.personalDataByEventType(e),!function(e){return e.payload&&"log"===e.payload.eventType}(e)?(V=V.concat(e),(function(e){return e&&e.payload&&"screen"===e.payload.eventType}(e)||function(e){return e&&e.payload&&e.payload.data&&e.payload.data.advertisementId}(e)||function(e){return e&&e.payload&&"adImpression"===e.payload.eventType}(e))&&G(a.OTHER)):q=q.concat(e))})),c.asEventStream().filter((function(){return O.services&&O.services.analyticsTracking&&V.length>0})).onValue((function(){G(a.OTHER)})),l.asEventStream().filter((function(){return O.services&&O.services.analyticsTracking&&q.length>0})).onValue((function(){G(a.LOG)})),function(e){var t="Client platform signature: ";try{t+=JSON.stringify(r)}catch(e){t+="Error in getting platform details"}o("[application:"+e.appName+"]").info(t)}(O),O.on("app:event:beforeUnload",(function(){O&&O.services&&O.services.analyticsTracking?(G(a.OTHER),G(a.LOG)):function(){var e={cache:"default",credentials:"same-origin",method:"POST",mode:"cors",keepalive:!0,redirect:"follow",headers:{"x-jpmc-csrf-token":"NONE"},contentType:"application/json"};if(V.length>0){e.body=JSON.stringify({events:V});var t=(window.analyticsDomain||window.domainUrl)+"/events/analytics/public/v1/events/raw/";window.fetch(t,e)}if(q.length>0){e.body=JSON.stringify({events:q});var n=(window.analyticsDomain||window.domainUrl)+"/events/analytics/public/v4/events/logs";window.fetch(n,e)}}()}))}))}}})),define("analytics/main",(function(){})),define("analytics/spec/newEventSpec",["require","analytics/util/stores/screenInfo","blue/log","blue-app/settings","blue/util","analytics/computed/midCompute","analytics/computed/user","analytics/computed/identity","blue/root"],(function(e){var t=e("analytics/util/stores/screenInfo"),n=(e("blue/log")("[blue-screen-mapping]"),e("blue-app/settings")),i=e("blue/util"),a=e("analytics/computed/midCompute"),r=e("analytics/computed/user"),o=e("analytics/computed/identity"),s=e("blue/root");return function(e,c){var l,d=t.getCurrentURL(),u=t.getScreenId(),p=i.object.extend(r(),a.getAdobeData()),f=o.get(),m=s.channel,g="creditJourney";return u&&u.includes(g)&&(l=u.split("/"),Array.isArray(l)&&l[1]===g&&(e="Credit Journey")),{visitor:p,site:e,app:{name:c,language:n.get("language",n.Type.PERM)||n.get("language")||"en-us",version:"1.3",channel:m},screen:{id:u,currentURL:d},device:f.device,location:f.location,component:"",payload:{}}}})),define("analytics/payload/adsEventPayload",[],(function(){return function(e){return{eventType:e.type,timestamp:e.eventTimeStamp||Date.now(),data:e.data}}})),define("analytics/mapper/adsEventMapper",["require","analytics/spec/newEventSpec","analytics/payload/adsEventPayload"],(function(e){var t=e("analytics/spec/newEventSpec");return function(n,i,a){var r=new t(n,i);return r.component=void 0,r.payload=e("analytics/payload/adsEventPayload")(a),r}})),define("analytics/payload/decisionedContentEventPayload",[],(function(){return function(e){return{eventType:e.type,timestamp:e.eventTimeStamp||Date.now(),data:e.data}}})),define("analytics/mapper/decisionedContentEventMapper",["require","analytics/spec/newEventSpec","analytics/payload/decisionedContentEventPayload"],(function(e){var t=e("analytics/spec/newEventSpec");return function(n,i,a){var r=new t(n,i);return r.component=a.name,r.payload=e("analytics/payload/decisionedContentEventPayload")(a),r}})),define("analytics/payload/experimentActionPayload",[],(function(){return function(e){return{eventType:e.type,timestamp:e.eventTimeStamp||Date.now(),data:e.data}}})),define("analytics/mapper/experimentActionMapper",["require","analytics/spec/newEventSpec","analytics/payload/experimentActionPayload"],(function(e){var t=e("analytics/spec/newEventSpec");return function(n,i,a){var r=new t(n,i);return r.component=a.name,r.payload=e("analytics/payload/experimentActionPayload")(a),r}})),define("analytics/payload/experimentImpressionPayload",[],(function(){return function(e){return{eventType:"experimentImpression",timestamp:e.eventTimeStamp||Date.now(),data:e.data}}})),define("analytics/mapper/experimentImpressionMapper",["require","analytics/spec/newEventSpec","analytics/payload/experimentImpressionPayload"],(function(e){var t=e("analytics/spec/newEventSpec");return function(n,i,a){var r=new t(n,i);return r.component=a.name,r.payload=e("analytics/payload/experimentImpressionPayload")(a),r}})),define("analytics/payload/formFieldEventPayload",[],(function(){return function(e){return{eventType:e.type,timestamp:e.eventTimeStamp||Date.now(),data:e.data,interaction:e.interaction}}})),define("analytics/mapper/formFieldEventMapper",["require","analytics/spec/newEventSpec","analytics/payload/formFieldEventPayload"],(function(e){var t=e("analytics/spec/newEventSpec");return function(n,i,a){var r=new t(n,i);return r.component=a.name,r.payload=e("analytics/payload/formFieldEventPayload")(a),r}})),define("analytics/payload/hoverEventPayload",[],(function(){return function(e){return{eventType:e.type,timestamp:e.eventTimeStamp||Date.now(),data:e.data,interaction:e.interaction}}})),define("analytics/mapper/hoverEventMapper",["require","analytics/spec/newEventSpec","analytics/payload/hoverEventPayload"],(function(e){var t=e("analytics/spec/newEventSpec");return function(n,i,a){var r=new t(n,i);return r.component=a.name,r.payload=e("analytics/payload/hoverEventPayload")(a),r}})),define("analytics/payload/impressionEventPayload",[],(function(){return function(e){return{eventType:e.type,timestamp:e.eventTimeStamp||Date.now(),data:e.data}}})),define("analytics/mapper/impressionEventMapper",["require","analytics/spec/newEventSpec","analytics/payload/impressionEventPayload"],(function(e){var t=e("analytics/spec/newEventSpec");return function(n,i,a){var r=new t(n,i);return r.component=a.name,r.payload=e("analytics/payload/impressionEventPayload")(a),r}})),define("analytics/payload/loggingEventPayload",[],(function(){return function(e){return{eventType:e.type,timestamp:e.timestamp||Date.now(),data:e.data,logger:e.logger}}})),define("analytics/mapper/loggingEventMapper",["require","analytics/spec/newEventSpec","analytics/payload/loggingEventPayload"],(function(e){var t=e("analytics/spec/newEventSpec");return function(n,i,a){var r=new t(n,i);return r.component=void 0,r.payload=e("analytics/payload/loggingEventPayload")(a),r}})),define("analytics/payload/pageInventoryPayload",[],(function(){return function(e){return{eventType:e.type,timestamp:e.timestamp||Date.now(),data:e.data}}})),define("analytics/mapper/pageInventoryMapper",["require","analytics/spec/newEventSpec","analytics/payload/pageInventoryPayload"],(function(e){var t=e("analytics/spec/newEventSpec");return function(n,i,a){var r=new t(n,i);return r.component=void 0,r.payload=e("analytics/payload/pageInventoryPayload")(a),r}})),define("analytics/payload/personalizationPayload",[],(function(){return function(e){return{eventType:e.type,timestamp:e.eventTimeStamp||Date.now(),data:e.data}}})),define("analytics/mapper/personalizationMapper",["require","analytics/spec/newEventSpec","analytics/payload/personalizationPayload"],(function(e){var t=e("analytics/spec/newEventSpec");return function(n,i,a){var r=new t(n,i);return r.component=void 0,r.payload=e("analytics/payload/personalizationPayload")(a),r}})),define("analytics/payload/screenEventPayload",[],(function(){return function(e){return{eventType:e.type,timestamp:e.eventTimeStamp||Date.now(),data:e.data}}})),define("analytics/mapper/screenEventMapper",["require","analytics/spec/newEventSpec","screenmap/api/urlToAnalyticsUri","analytics/payload/screenEventPayload"],(function(e){var t=e("analytics/spec/newEventSpec"),n=e("screenmap/api/urlToAnalyticsUri");return function(i,a,r){var o=new t(i,a);return o.component=void 0,o.screen.id.includes("Overlay")||(o.screen.id=n(window.location.href)),o.payload=e("analytics/payload/screenEventPayload")(r),o}})),define("analytics/payload/variableSettingsEventPayload",[],(function(){return function(e){return{eventType:e.type,timestamp:e.eventTimeStamp||Date.now(),data:e.data}}})),define("analytics/mapper/variableSettingsEventMapper",["require","analytics/spec/newEventSpec","analytics/payload/variableSettingsEventPayload"],(function(e){var t=e("analytics/spec/newEventSpec");return function(n,i,a){var r=new t(n,i);return r.component=a.name,r.payload=e("analytics/payload/variableSettingsEventPayload")(a),r}})),define("analytics/payload/webEventPayload",[],(function(){return function(e){return{eventType:e.type,timestamp:e.eventTimeStamp||Date.now(),data:e.data,action:e.action,nonCustomerEvent:e.nonCustomerEvent}}})),define("analytics/mapper/webEventMapper",["require","analytics/spec/newEventSpec","analytics/payload/webEventPayload"],(function(e){var t=e("analytics/spec/newEventSpec");return function(n,i,a){var r=new t(n,i);return r.component=a.name,r.payload=e("analytics/payload/webEventPayload")(a),r}})),define("analytics/scroll/elementInViewport",[],(function(){return function(e,t){t||(t=50);var n=e.getBoundingClientRect();return n.bottom-n.height*t/100-window.innerHeight<1}})),define("analytics/scroll/experimentWatcher",["require","exports","module","analytics/channel/experimentImpressionChannel","analytics/scroll/elementInViewport","blue/event/channel/component","analytics/channel/scrollStopChannel"],(function(e,t,n){var i,a,r,o=e("analytics/channel/experimentImpressionChannel"),s=e("analytics/scroll/elementInViewport"),c=e("blue/event/channel/component"),l=e("analytics/channel/scrollStopChannel"),d=n.config(),u={},p=["style","content","template"];function f(e){var t=Object.create(null);return t.data=e.context,t.name=e.name,t}function m(e){var t=document.querySelectorAll(e);return 1===t.length?t[0]:void 0}function g(e,t,n){(i=e[t].filter((function(e){return e.component===n.componentName})))&&i.length>0&&function(e,t,n){e.forEach((function(e){var t=m(e.selector);t&&(s(t,d.visibilityPercentage)?o.getInstance().emit(f({name:e.component,context:{experimentId:e.experimentId,choice:e.choice}})):(u[n]||(u[n]=[]),u[n].push({selector:e.selector,context:{experimentId:e.experimentId,choice:e.choice},name:e.component})))}))}(i,0,n.componentInstanceName)}return function(e){r=e,a||(a=l(d.delay||1e3).asEventStream().onValue((function(){var e,t;Object.keys(u).forEach((function(n){for(t=u[n],e=t.length-1;e>-1;e--)s(m(t[e].selector),d.visibilityPercentage)&&(o.getInstance().emit(f(t[e])),t.splice(e,1))}))}))),c.on("ready",(function(e){var t=r&&(r[e.target.context.areaName]||r.app);t&&p.forEach((function(n){t[n]&&g(t,n,e)}))})),c.on("destroy",(function(e){u[e.target.key]&&u[e.target.key].splice(0)}))}})),define("analytics/scroll/watcher",["require","exports","module","analytics/util/stores/screenInfo","analytics/channel/impressionEventChannel","analytics/scroll/elementInViewport","analytics/util/takeParam","blue/event/channel/screen","analytics/channel/scrollStopChannel"],(function(e,t,n){var i,a,r,o,s={},c=e("analytics/util/stores/screenInfo"),l=e("analytics/channel/impressionEventChannel"),d=e("analytics/scroll/elementInViewport"),u=e("analytics/util/takeParam"),p=e("blue/event/channel/screen"),f=e("analytics/channel/scrollStopChannel"),m=n.config(),g=u(m.visibilityPercentage,"number"),v=u(m.delay,"number");function h(e){var t=Object.create(null);return t.data=e.context,t.name=e.name,t}return function(e,t){return o||(o=p.asEventStream().onValue((function(){for(a=c.getScreenId();i&&s[i]&&s[i].length;)s[i].shift();a&&!s[a]&&(s[a]=[]),i=a}))),r||(r=f(v).asEventStream().onValue((function(){var e,t=s[a];for(e=t.length-1;e>-1;e--)d(t[e].divId,g)&&(l.getInstance().emit("impression",h(t[e])),t.splice(e,1))}))),new Promise((function(n){var i=setTimeout((function(){clearTimeout(i),n(function(e,t){return Object.keys(e).forEach((function(n){var i=document.getElementById(n);i&&(d(i,m.visibilityPercentage)?l.getInstance().emit("impression",h({name:t,context:e[n]})):(a||(a=c.getScreenId(),s[a]=[]),s[a].push({divId:i,context:e[n],name:t})))})),s}(e,t))}),v)}))}})),define("analytics/service/tracking",[],(function(){return function(){this.serviceCalls={"analytics.log.reporting.svc":{settings:{url:(window.analyticsDomain||window.domainUrl)+"/events/analytics/public/v4/events/logs",contentType:"application/json",type:"POST",dataType:"html",disableTrace:!0,disableDefaultError:!0,disableOfflineHandler:!0,byPassUserProfileService:!0}},"analytics.reporting.svc":{settings:{url:(window.analyticsDomain||window.domainUrl)+"/events/analytics/public/v1/events/raw/",contentType:"application/json",type:"POST",dataType:"html",disableTrace:!0,disableDefaultError:!0,disableOfflineHandler:!0,byPassUserProfileService:!0}},"analytics.mid.create.svc":{settings:{url:"",type:"GET",disableTrace:!0,disableDefaultError:!0,disableOfflineHandler:!0,bypassDatawatch:!0}}}}})),define("analytics/util/addLoggerHooks",["require","analytics/util/handleDynamicContentUtilMethods","blue/log","analytics/config/variationsWhitelist","analytics/util/checkForAtleastOne"],(function(e){var t=e("analytics/util/handleDynamicContentUtilMethods"),n=e("blue/log")("[DynamicContentUtilLogger]"),i=e("analytics/config/variationsWhitelist");return function(a){var r,o=a.proceed();o&&(r=t[a.method](a.args,{}),e("analytics/util/checkForAtleastOne")(["errorKeyword","communicationKeyword"],r.data.placement)&&i.indexOf(r.data.variation)>-1&&n.error(o));return o}})),define("analytics/util/constant",[],(function(){return function(e){return e}})),define("analytics/util/getCanonicalRoute",["require","blue/hash","blue-app/settings"],(function(e){var t=e("blue/hash"),n=e("blue-app/settings");return function(e){return t.getHash(e||n.get("fullURL",n.Type.SITE))}})),define("analytics/util/harmonization/utilities/getAnalyticsEventType/isPersonalizationClick",["require"],(function(e){return function(e){return"action"===e.payload?.eventType&&"ovd_rhr_widgets"===payload.data?.personalizationData?.product}})),define("analytics/util/hashSanitizer",[],(function(){var e=new RegExp(/^\/?\#?\/?/),t=new RegExp(/(\/index\/?)*$/),n=new RegExp(/\/+$/);return function(i){return i.replace(e,"").replace(t,"").replace(n,"")}})),define("analytics/util/screenIdCompute",["require","blue/hash","analytics/util/hashSanitizer"],(function(e){var t,n=e("blue/hash"),i=e("analytics/util/hashSanitizer");function a(e){var i=function(e){var n=[],i=t[e];if(i)for(var a in i)i.hasOwnProperty(a)&&n.push(a);return n.length?n.shift():""}(e),r=n.getHashArr(e),o=r.length;return i||(o<=3?"":a(function(e){return e.join("/")}(r.slice(0,-1))))}return function(e,n){var r=i(e);return t=n,a(r)}})),define("analytics/util/timer",["blue/is"],(function(){return function(e){var t,n=!1,i=function(e){n=e};if(!(e&&require("blue/is").integer(e)&&e>0))throw new Error("missing or invalid parameter");this.isRunning=function(){return n},this.getTimerId=function(){return t},this.run=function(){return!!this.isRunning()||(t=setTimeout((function(){clearTimeout(t),i(!1)}),e),i(!0),!1)}.bind(this)}})),define("analytics/main",(function(){})),define("blue-ads/utility/adManager",["require","blue/log","blue/siteData"],(function(e){"use strict";var t=e("blue/log")("[blue-messages]");return function(n,i,a,r){this.subscribeForTopics=function(){a.subscribe("adUpdate",(function(e,n,i){i&&i.resolve&&(t.debug("MsgMgr: adUpdate:",e,i,n),i.resolve(n))})),a.subscribe("adFailover",(function(e,n,i,a){n&&n.resolve&&(t.debug("MsgMgr: adFailover:",e,n,a),a&&(a.isGetAdsFailover=!0),n.resolve(a))})),a.subscribe("adError",(function(e,n,i,a){n&&n.reject&&(t.warn("MsgMgr: adError:",n,a),n.reject({reason:"adError",tagCode:e||"",engineVsEngineEventTriggerred:a&&a.engineVsEngineEventTriggerred,adError:a&&a.adError}))}))},this.getAudiences=function(e){return e._a},this.getMultipleContent=function(e){return new Promise((function(n){try{var a,r=e.adParams,o=!!e.htmlAd&&!0===e.htmlAd;e.loadmultipleAds;(a=i.loadBlueAdCollection)?a(e.adResponse,(function(e,t,i){var a={status:!0,content:e,adVariant:t,creativeId:i};if(!0!==o){try{e=JSON.parse(e)}catch(e){}a.content=e}n(a)}),(function(){n({status:!1,message:"MsgMgr: getContent: Error: cid",details:e.adResponse.cid})}),r):n({status:!1,message:"MsgMgr: getContent: Error: Content API",details:e.adResponse.cid})}catch(e){var s="MsgMgr: getContent: Exception"+e.toString();t.warn(s),n({status:!1,message:s,details:e})}}))},this.getCardlyticsAds=function(e){return new Promise((function(n){try{var i=r.loadCardlyticsOffer,a={placementId:e.placementId,pageId:e&&e.tagCode||"",audiences:e.audiences,evaluateDynamicAd:!0,requiredAdData:e.requiredAdData,requestId:e.requestId,cache:e.cache};i?i(e&&e.tagCode||"",e.accountId,a,(function(e,t,i,a,r,o){n({status:!0,content:e,adVariant:t,placementId:i,failOverAd:a,accountIdList:r,categoryList:o})}),(function(e,t,i){n({status:!1,message:"MsgMgr: getContent: Error:",placementId:e,accountIdList:t,adVariant:i})})):n({status:!1,message:"MsgMgr: getContent: Error: Content API"})}catch(e){var o="MsgMgr: getContent: Exception"+e.toString();t.warn(o),n({status:!1,message:o,details:e})}}))},this.getContent=function(e){const n=e.adResponse&&e.adResponse.cid||void 0;let i;return e.contentCache&&n&&(i=e.contentCache.get(n)),i||(t.debug("[blue-ads using contentAPI]","contentId: "+n),i=this.getContentFromApi(e),e.contentCache&&n&&e.contentCache.set(n,i)),i},this.getContentFromApi=function(e){return new Promise((function(n){try{var a,r,o=i.loadAd,s=e.requiredAdData.clientStyleOptions,c=!!e.htmlAd&&!0===e.htmlAd,l=!0===e.loadBlueAd;s&&(r=s[e.placementId]),!0===l&&(o=i.loadBlueAd,a={pid:e.placementId,pageId:e&&e.tagCode||"",audiences:e.audiences,evaluateDynamicAd:c,isEmulationUser:e.isEmulationUser,requestedPersonId:e.requestedPersonId,emulationTokenIdentifier:e.emulationTokenIdentifier,templateConfig:{clientStyleOptions:r||{}}}),o?o(e.adResponse.cid,(function(e,t,i,a,r,o){var s={status:!0,content:e,adVariant:t,disclosure:i,isFailoverAd:a,failOverAdContent:r,broadcastParams:o};if(!0!==c){try{e=JSON.parse(e)}catch(e){}s.content=e}n(s)}),(function(){n({status:!1,message:"MsgMgr: getContent: Error"})}),a,e.adResponse):n({status:!1,message:"MsgMgr: getContent: Error"})}catch(e){var d="MsgMgr: getContent: Exception"+e.toString();t.warn(d),n({status:!1,message:d,details:e})}}))},this.getFailoverContent=function(e){return new Promise((function(n){try{var a,r,o=!!e.htmlAd&&!0===e.htmlAd;!0===(!0===e.loadFailoverAd)&&(a=i.loadFailoverAd,r={placementId:e.placementId,pageId:e&&e.tagCode||""}),a?a(r.pageId,r.placementId,(function(e,t,i,a){var r={status:!0,content:e,adVariant:t,disclosure:i,failOverAdContent:a};if(!0!==o){try{e=JSON.parse(e)}catch(e){}r.content=e}n(r)}),(function(){n({status:!1,message:"MsgMgr: getFailoverContent: Error"})})):n({status:!1,message:"MsgMgr: getFailOverContent: Error: Content API",details:e.adResponse.cid})}catch(e){var s="MsgMgr: getFailOverContent: Exception"+e.toString();t.warn(s),n({status:!1,message:s,details:e})}}))},this.getAds=function(i){t.debug("MsgMgr: getAds:",i);let a=e("blue/siteData"),r=a?a.getData("podID"):void 0,o=i&&i.tagCode||"";return t.debug("utility/adManager.getAds() POD Info:",r),o&&n.setConsolidateAnalyticsPayloadFlag(o,!0),new Promise((function(e,t){n.init(o,i.requiredAdData,{resolve:e,reject:t},"",i&&i.newRecoEngine,r)}))},this.trackfailOverClick=function(e,n,i,r){try{return t.debug("MsgMgr: trackfailOverClick:",arguments),new a("trackfailOverClick").publish(e,n,i,r)}catch(e){t.error("MsgMgr: trackfailOverClick: Exception:",e.toString())}},this.trackfailOverImpression=function(e,n,i,r){try{return t.debug("MsgMgr: trackfailOverImpression:",arguments),new a("trackfailOverImpression").publish(e,n,i,r)}catch(e){t.error("MsgMgr: trackfailOverImpression: Exception:",e.toString())}},this.trackAdClick=function(e,n,i,r,o,s){try{return t.debug("MsgMgr: trackAdClick:",arguments),new a("trackAdClick").publish(e,n,i,r,o,s)}catch(e){t.error("MsgMgr: trackAdClick: Exception:",e.toString())}},this.trackUrlLinkClick=function(e,n,i,r){try{return t.debug("MsgMgr: trackUrlLinkClick:",arguments),new a("trackUrlLinkClick").publish(e,n,i,r)}catch(e){t.error("MsgMgr: trackUrlLinkClick: Exception:",e.toString())}},this.trackSeeAllClick=function(e,n,i,r){try{return t.debug("MsgMgr: trackSeeAllClick:",arguments),new a("trackSeeAllClick").publish(e,n,i,r)}catch(e){t.error("MsgMgr: trackSeeAllClick: Exception:",e.toString())}},this.trackClick=function(e,n,i,r,o){try{return t.debug("MsgMgr -> ",e,arguments),new a(e).publish(n,i,r,o)}catch(n){t.error("MsgMgr -> ",e," Exception:",n.toString())}},this.trackCarouselSlide=function(e){try{return t.debug("MsgMgr: trackCarouselSlide:",arguments),new a("trackCarouselSlide").publish(e.value)}catch(e){t.error("MsgMgr: trackCarouselSlide: Exception:",e.toString())}},this.trackCarouselShowMore=function(e){try{return t.debug("MsgMgr: trackCarouselShowMore:",arguments),new a("trackSeeMoreClick").publish(e.value)}catch(e){t.error("MsgMgr: trackCarouselShowMore: Exception:",e.toString())}},this.trackCarouselDot=function(e){try{return t.debug("MsgMgr: trackCarouselDot:",arguments),new a("trackCarouselDot").publish(e.value)}catch(e){t.error("MsgMgr: trackCarouselDot: Exception:",e.toString())}},this.trackCardlyticsAdImpression=function(e,n,i){try{return t.debug("MsgMgr: trackAdImpression:",arguments),new a("cardlyticsMultipleView").publish(e,n,i)}catch(e){t.error("MsgMgr: trackAdImpression: Exception:",e.toString())}},this.trackAdImpression=function(e,n,i,r,o){try{return t.debug("MsgMgr: trackAdImpression:",arguments),new a("trackAdImpression").publish(e,n,i,r,o)}catch(e){t.error("MsgMgr: trackAdImpression: Exception:",e.toString())}},this.filterWithSelectedCategory=function(e){try{return t.debug("MsgMgr: cardlytics.filterCategory: ",arguments),new a("cardlytics.filterByCategory").publish(e)}catch(e){t.error("MsgMgr: cardlytics.filterByCategory: Exception: ",e.toString())}},this.subscribeForTopics(),this.shouldConsolidateAnalyticsPayload=function(e){return n.shouldConsolidateAnalyticsPayload(e)},this.createSplitImpressionPayload=function(e){return n.createSplitImpressionPayload(e)}}})),define("blue-ads/utility/msgMgr",["require","blue-ads/utility/adManager"],(function(e){"use strict";var t=e("blue-ads/utility/adManager"),n=function(n,i,a){try{var r=n.marketingCdnEnabled?n.marketingLoaderUrl:n.slotplacementscript,o="mktui-framework",s="slotplacement/slotplacementconfig",c="slotplacement/service",l="slotplacement/placement",d="slotplacement/topic",u="slotplacement/cardlyticsinit",p="slotplacement/contentprovider";n.marketingCdnEnabled||requirejs.config({paths:{"slotplacement/slotplacementconfig":n.adConfig}}),define("slotplacement/clientconfig",[],(function(){return n.slotplacementconfig?n.slotplacementconfig:{timeout:"2000",adTrackingDisabled:"false"}})),n.marketingCdnEnabled?e([r],(function(){e([o],(function(){e([c,l,p,d,u],(function(e,n,a,r,o){var s=new t(e,a,r,o);i(s)}),(function(e){a("MsgMgr: cdnEnabled:true | mktuiFramework: mktui-framework | Error loading web framework modules: "+e)}))}),(function(e){a("MsgMgr: cdnEnabled:true| mktuiFramework: mktui-framework | Error loading web framework:  "+e)}))}),(function(e){a("MsgMgr: cdnEnabled:true | slotScriptPath: "+r+" | Error loading web configs: "+e)})):e([s],(function(){e([r],(function(){e([c,l,p,d,u],(function(e,n,a,r,o){var s=new t(e,a,r,o);i(s)}),(function(e){a("MsgMgr: cdnEnabled:false | slotplacementScriptPath: "+r+" | Error loading web framework modules: "+e)}))}),(function(e){a("MsgMgr: cdnEnabled:false | slotplacementScriptPath: "+r+" | Error loading web framework:  "+e)}))}),(function(e){a("MsgMgr: cdnEnabled:false | slotConfigModName: "+s+" | Error loading web configs: "+e)}))}catch(e){a("MsgMgr: Exception: "+e.toString())}};return{adManagerInit:n,init:function(e,t,i,a){var r;try{var o=t.config;"true"!==o.enableAds&&!0!==o.enableAds?r="Error: Ads not enabled":o.envType||(r="Error: NULL envType"),e.adConfig?e.slotplacementscript?e.slotplacementconfig||(r="Error: No slotplacementconfig"):r="Error: No slotplacementscript":r="Error: No adConfig"}catch(e){r="Exception:"+e.toString()}return r?a("MsgMgr: Init: "+r):n(e,i,a),r}}})),define("blue-ads/lib/messageManager",["require","exports","module","blue-ads/utility/msgMgr"],(function(e,t,n){"use strict";var i,a,r=!1,o=new Promise((function(e,t){i=e,a=t})),s=e("blue-ads/utility/msgMgr");return function(e){return!1===r&&(r=!0,void 0!==s.init(n.config(),e,i,a)&&(r=!1)),o}})),define("blue-ads/utility/baUtil",[],(function(){"use strict";var e,t=new Promise((function(t){e=t})),n=function(e){var t=e||"",n=t,i=t.indexOf("?");return-1!==i&&(n=t.substr(0,i)),n},i=function(){return window&&window.performance&&window.performance.now?parseInt(1e3*window.performance.now()):(new Date).getTime()};return{_getAdStaticParamFromScreenEvent:n,_getRandomNumber:i,_registerAdDecision:function(){e({status:!0})},_getInitPromise:function(){return t},getAdParam:function(){return i()+""},getAdStaticParam:function(e){return n(e)},getDOMElement:function(e){return document.getElementById(0===e.indexOf("#")?e.substr(1):e)},elementInViewport:function(e){var t=e&&this.getDOMElement(e),n=t&&t.getBoundingClientRect();return n&&!this.isElementHidden(t)?n.top>=0&&n.left>=0&&(n.bottom+n.top)/2<=window.innerHeight&&n.right<=window.innerWidth:void 0},isElementHidden:function(e){for(;e;){if(!0===e.hidden)return!0;e=e.parentElement}return!1},addEventListener:function(e,t,n){n?n.addEventListener(e,t):document.addEventListener(e,t)},removeEventListener:function(e,t,n){n?n.removeEventListener(e,t):document.removeEventListener(e,t)},isJsonString:function(e){try{JSON.parse(e)}catch(e){return!1}return!0}}})),define("blue-ads/utility/baStore",["require","blue/store/enumerable/memory"],(function(e){"use strict";var t="adCache",n=new(e("blue/store/enumerable/memory"))(t),i="";return{adsStoreDelete:function(){n.remove(t)},adsStoreGet:function(e){var i=n.get(t);return i?i[e]:null},adsStoreSet:function(e,i,a,r){var o=n.get(t)||{};o[e]=o[e]||{},o[e][i]={adContent:r,creativeId:a.creativeId,adDecisionResponse:a},n.set(t,o)},setAdsBlueSpec:function(e){i=e},getAdsBlueSpec:function(){return i}}})),define("blue-ads/utility/categoryStore",["require","blue/store/enumerable/memory","blue/log"],(function(e){"use strict";var t="adCache",n=new(e("blue/store/enumerable/memory"))(t),i=e("blue/log")("[blue-messages]");const a={placementIds:[],actualNumberOfPlacements:0};return{clearCategory:function(e,r){const o=n.get(t);o&&o[e]&&o[e][r]?o[e][r]=Object.assign({},a):i.debug("[clearCategory] no cache object to clear: ",e,r)},getCategory:function(e,r){if(!e||!r)return i.debug("[incrementCategoryCount] all parameters should have values: ",e,r),Object.assign({},a);const o=n.get(t)||{};return o[e]=o[e]||{},o[e][r]?o[e][r]:(this.setCategory(e,r,Object.assign({},a)),this.getCategory(e,r))},setCategory:function(e,i,a){const r=n.get(t)||{};r[e]=r[e]||{},r[e][i]=a,n.set(t,r),this.putCategoryName(e,i)},putCategoryName:function(e,a){const r=n.get(t)||{};r[e]=r[e]||{},r[e].categoryNames=r[e].categoryNames||[],r[e].categoryNames.push(a),r[e].categoryNames=r[e].categoryNames.filter((function(e,t,n){return n.indexOf(e)===t})),i.debug("[putCategoryName] added category to category array: ",a,r[e].categoryNames),n.set(t,r)},getCategoryNames:function(e){if(!e)return i.debug("[getCategoryNames] all parameters should have values: ",e),[];const a=n.get(t)||{};return a[e]=a[e]||{},a[e].categoryNames?a[e].categoryNames:(i.debug("[getCategoryNames] category array is empty: ",a[e].categoryNames),[])},getCategoryNameByPlacementId:function(e,t){if(!e||!t)return void i.debug("[getCategoryNameByPlacementId] all parameters should have values: ",e,t);let n="",a=this.getCategoryNames(e);return a&&a.forEach((a=>{this.getCategory(e,a).placementIds.includes(t)&&(i.debug("[getCategoryNameByPlacementId] found matching category ",a),n=a)})),n},getCategoryCounts:function(e){let t={},n=this.getCategoryNames(e);return n&&(t=n.map((t=>{let n=this.getCategory(e,t);return{category:t,expectedNumberOfPlacements:n.placementIds.length,actualNumberOfPlacements:n.actualNumberOfPlacements}}))),t},incrementCategoryCount:function(e,t){if(!e||!t)return void i.debug("[incrementCategoryCount] all parameters should have values: ",e,t);let n=this.getCategoryNameByPlacementId(e,t);if(!n)return void i.debug("[incrementCategoryCount] categoryName is empty: ",n);let a=this.getCategory(e,n);a.actualNumberOfPlacements=a.actualNumberOfPlacements+1,this.setCategory(e,n,a),i.debug("[incrementCategoryCount] updated cache for "+e+" / "+n+" to "+a.actualNumberOfPlacements)}}})),define("blue-ads/utility/baDecision/baHooks",["require","blue/log"],(function(e){"use strict";var t=e("blue/log")("[blue-messages]");function n(e,t){var n=e.totalPreQualifiedPlacements,i=e.placementPrefix;return Array(n).fill(0).map(((e,t)=>i+(t+1))).some((e=>t[e]&&t[e].cid))}return{executeHook:function(e,i){switch(e.name){case"processPreQualified":var a=n(e.params,i);this.appContext.application.broadcast("processPreQualified",a);break;default:t.warn("Executing Post Decision Hook, hook not registered for: ",e.name)}},processPreQualified:n}})),define("blue-ads/utility/contentCache",["require"],(function(e){"use strict";return class{set(e,t){e&&(this[e]=t)}get(e){if(e)return this[e]||null}}})),define("blue-ads/utility/baDecision/baMsgManager",["require","blue/log","blue-ads/utility/baStore","blue-ads/utility/categoryStore","blue-ads/utility/baUtil","blue-ads/utility/baDecision/baHooks","blue-ads/utility/contentCache"],(function(e){"use strict";var t=e("blue/log")("[blue-messages]"),n=e("blue-ads/utility/baStore"),i=e("blue-ads/utility/categoryStore"),a=e("blue-ads/utility/baUtil"),r=e("blue-ads/utility/baDecision/baHooks"),o=e("blue-ads/utility/contentCache"),s=!1,c=!1,l=!1,d=[],u=0,p=!1,f=0,m=0,g=0,v={},h={},y="eligibleAccountIdList",b="cardlytics.availableCategoryList",C=function(e,n){this.appContext.application.broadcast(e,n),t.info("Ads broadCastMsgToApp"+e+" triggered with value ",n)},A=function(e,n,a){if(this.adsRegistry[e])try{var r={type:"html",content:n.content,adVariant:n.adVariant,failOverAd:n.failOverAd,status:n.status};this.currentAdConfig.cardlyticsAdsIntrested&&e===this.currentAdConfig.cardlyticsAdsIntrested[e]&&(r.isCardlyticsAd=!0,r.pageId=this&&this.currentAdConfig&&this.currentAdConfig.tagCode||""),t.debug("processAdsContentResponse: sending",e),this.appContext.application.broadcast("adsUpdate_"+e,{data:r}),n.content&&this.currentAdParam&&a&&i.incrementCategoryCount(this.currentAdParam,a)}catch(i){t.warn("processAdsContentResponse: Invalid Data:",e,n)}else t.warn("processAdsContentResponse: Not Registered for",e)},I=function(){f=0,m=0,g=0},E=function(){if(m++,f===m){C.call(this,"offersCount",g);let e=this.currentAdParam?i.getCategoryCounts(this.currentAdParam):void 0;e&&C.call(this,"categoryCounts",e)}},S=function(e,i,a,r,o){if(a){var s=this.appContext.user&&this.appContext.user.profile&&this.appContext.user.profile.isEmulationUser(),c=this.appContext.config&&this.appContext.config.requestedPersonId||"",l=this.appContext.config&&this.appContext.config.emulationTokenIdentifier||"";a.cid&&this.adManager?(f++,this.adManager.getContent({loadBlueAd:!0,htmlAd:!0,adResponse:a,placementId:e,tagCode:this&&this.currentAdConfig&&this.currentAdConfig.tagCode||"",audiences:r,isEmulationUser:s,requestedPersonId:c,emulationTokenIdentifier:l,contentCache:o,requiredAdData:this.requiredAdData}).then(function(r){r.content&&g++,r.disclosure&&C.call(this,"disclosureMsg",r.disclosure),r.failOverAdContent&&r.failOverAdContent.creativeId&&(a.cid=r.failOverAdContent.cid,a.creativeId=r.failOverAdContent.creativeId),r.broadcastParams&&0!==Object.keys(r.broadcastParams).length&&Object.keys(r.broadcastParams).forEach(function(t){C.call(this,t,{placement:e,midasId:a.cid,value:r.broadcastParams[t]})}.bind(this)),this.currentAdParamState=this.engineStates.RSP_AD_CONTENT,t.debug("getAdsContent: ",e,i,a),n.adsStoreSet(this.currentAdParam,e,a,r),A.call(this,i,r,e),E.call(this)}.bind(this),function(n){E.call(this),t.debug("Error in baDecisionEngine getAdsContent of promise",n,e,i)}.bind(this)).catch(function(n){t.error("Exception in baDecisionEngine getAdsContent of promise",n,e,i)}.bind(this))):(A.call(this,i,{content:null}),n.adsStoreSet(this.currentAdParam,e,a,null))}},w=function(e,i){if(t.debug("[composite] processCompositeAdsResponse: starting",e,i),c&&l&&!s){let c,l,d=(this.currentAdConfig||{}).adsInterested;for(var a in d)"parent"===d[a].slotValue&&(c=d[a],l=a);if(c||t.warn("[composite] parentSlotValue / parentSlotKey are undefined (no parent found)",e,i,d),l&&c&&this.adsRegistry[c.slotId]){if(s=!0,n.adsStoreGet(this.currentAdParam)){var r=n.adsStoreGet(this.currentAdParam);if(r[l])try{var o={type:"html",content:r[l].adContent?r[l].adContent.content:"",adVariant:r[l].adVariant,failOverAd:r[l].failOverAd,isCompositeAdsImpression:!0};t.debug("[composite] processCompositeAdsResponse: sending",e),this.appContext.application.broadcast("adsUpdate_"+c.slotId,{data:o})}catch(n){t.warn("[composite] processAdsContentResponse: Invalid Data:",e,r[l])}}c.slotList.forEach((function(e){if(n.adsStoreGet(this.currentAdParam)){var i=n.adsStoreGet(this.currentAdParam);if(i[e])try{var a={type:"html",content:i[e].adContent.content,adVariant:i[e].adContent.adVariant,failOverAd:i[e].adContent.failOverAd};t.debug("[composite] processAdsContentResponse: sending",this.currentAdConfig.adsInterested[e].slotId);var r=document.getElementById(this.currentAdConfig.adsInterested[e].slotId+"ContentID");r&&(r.innerHTML=a.content)}catch(n){t.warn("[composite] processAdsContentResponse: Invalid Data:",this.currentAdConfig.adsInterested[e].slotId,i[e].adContent)}}}),this)}}else if("child"===e.slotValue&&s)try{o={type:"html",content:i.content,adVariant:i.adVariant,failOverAd:i.failOverAd};t.debug("[composite] processAdsContentResponse: sending",e);var d=document.getElementById(e.slotId+"ContentID");d&&(d.innerHTML=o.content)}catch(n){t.warn("[composite] processAdsContentResponse: Invalid Data:",e,i)}},T=function(e,i,a,r){a&&(v=k.call(this),a.cid&&this.adManager?this.adManager.getContent({loadBlueAd:!0,htmlAd:!0,adResponse:a,placementId:e,tagCode:this&&this.currentAdConfig&&this.currentAdConfig.tagCode||"",audiences:r,requiredAdData:this.requiredAdData}).then(function(r){r.status?(this.currentAdParamState=this.engineStates.RSP_AD_CONTENT,r.failOverAdContent&&r.failOverAdContent.creativeId&&(a.cid=r.failOverAdContent.cid,a.creativeId=r.failOverAdContent.creativeId),t.debug("[composite] getAdsContent: ",e,i,a),n.adsStoreSet(this.currentAdParam,e,a,r),"parent"===i.slotValue&&(r.isFailoverAd?A.call(this,i.slotId,r):l=!0,u=i.slotList.length),"child"===i.slotValue&&(c=!0),w.call(this,i,r)):r.status||O.call(this,i,r,e)}.bind(this),function(n){t.debug("[composite] Error in baDecisionEngine getAdsContent of promise",n,e,i),O.call(this,i,a,e)}.bind(this)).catch(function(n){t.error("[composite] Exception in baDecisionEngine getAdsContent of promise",n,e,i)}.bind(this)):O.call(this,i,a,e))},O=function(e,t,n){e.slotFailover&&"parent"===e.slotValue&&D.call(this,t,n),"child"!==e.slotValue||p||(d.push(e.slotId),d.length===u&&(p=!0)),p&&v&&v.parentSlotValue&&v.parentSlotValue.slotFailover&&D.call(this,t,n)},k=function(){let e,n,i=((this||{}).currentAdConfig||{}).adsInterested;for(var a in i)"parent"===i[a].slotValue&&(e=i[a],n=a);return void 0!==e&&void 0!==n||t.warn("[composite] slot value parent is not found"),{parentSlotValue:e,parentSlotKey:n}},D=function(e,i){var a=this,r=v.parentSlotValue,o=v.parentSlotKey;a.adManager?a.adManager.getFailoverContent({loadFailoverAd:!0,htmlAd:!0,failoverResponse:e,tagCode:a&&a.currentAdConfig&&a.currentAdConfig.tagCode||"",placementId:o}).then(function(i){i.failOverAdContent&&i.failOverAdContent.creativeId&&(e.cid=i.failOverAdContent.cid,e.creativeId=i.failOverAdContent.creativeId),a.currentAdParamState=a.engineStates.RSP_AD_CONTENT,t.debug("[composite] getFailoverContent: ",o,r.slotId,e),n.adsStoreSet(a.currentAdParam,o,e,i),A.call(a,r.slotId,i)}.bind(a),function(e){t.debug("[composite] Error in baDecisionEngine getFailOverAdsContent of promise",e,o,r.slotId)}.bind(a)).catch(function(e){t.error("[composite] Exception in baDecisionEngine getFailoverContent of promise",e,o,r.slotId)}.bind(a)):(A.call(a,r.slotId,{content:null}),n.adsStoreSet(a.currentAdParam,o,e,null))},x=function(e){if(this.currentAdConfig&&this.currentAdConfig.adsInterested&&e){var n,i,a=this.currentAdConfig.adsInterested,f=this.adManager.getAudiences(e),m=Object.keys(e);if(s=!1,l=!1,c=!1,d=[],p=!1,u=0,I.call(this),this.currentAdConfig.postDecisionHook&&r.executeHook.call(this,this.currentAdConfig.postDecisionHook,e),m&&m.length>0){let r;this.currentAdConfig&&this.currentAdConfig.contentCacheEnabled&&(r=new o);for(var g=0;g<m.length;g++)(i=a[n=m[g]])&&(this.currentAdParamState=this.engineStates.REQ_AD_CONTENT,t.debug("processXPlusOneResponse: ",i,e[n]),"composite"===i.slotType?("parent"===i.slotValue&&(u=i.slotList.length),e.isGetAdsFailover&&i.slotFailover?S.call(this,n,i.slotId,e[n],f,r):T.call(this,n,i,e[n],f)):S.call(this,n,i,e[n],f,r))}}},M=function(e){if(this.currentAdConfig&&this.currentAdConfig.cardlyticsAdsIntrested&&e){var i=this.currentAdConfig.cardlyticsAdsIntrested,a=e.placementId,r=i[a];this.currentAdParamState=this.engineStates.RSP_AD_CONTENT,C.call(this,y,e.accountIdList),C.call(this,b,e.categoryList),t.debug("[cardlytics] getAdsContent: ",a,r),n.adsStoreSet(this.currentAdParam,a,e,e),e.adVariant&&e.adVariant.requestId in h&&A.call(this,r,e)}};return{resetTotalOffersCount:I,getTotalOffersData:function(){return{totalOffersRequested:f,totalOffersReturned:m,totalOffersSet:g}},getAdsManager:function(){if(!this.adManager)return this.msgMgrPromise.then(function(e){this.adManager=e}.bind(this),function(e){t.warn('getAdsManager: Error in require("blue-ads/lib/messageManager") promise',e)}.bind(this)).catch(function(e){t.error('getAdsManager: Exception in require("blue-ads/lib/messageManager") promise',e)}.bind(this))},getAds:function(){return this.msgMgrPromise.then(function(){this.currentAdConfig&&(this.currentAdParamState=this.engineStates.REQ_XPLUS_ONE,t.debug("baDecisionEngine getAds: ",this.currentAdConfig),this.requiredAdData=this.requiredAdData||{},this.requiredAdData.userGroup=this.adsConfig&&this.adsConfig.userGroup,this.requiredAdData.engineVsEngineEventTriggerred=this.appContext.user&&this.appContext.user.profile&&this.appContext.user.profile.engineVsEngineEventTriggerred||!1,this.adManager.getAds({tagCode:this.requiredAdData&&this.requiredAdData.targetPageId||this&&this.currentAdConfig&&this.currentAdConfig.tagCode||"",adContext:this.currentAdParam,requiredAdData:this.requiredAdData,newRecoEngine:this.currentAdConfig&&this.currentAdConfig.newRecoEngine}).then(function(e){this.currentAdParamState=this.engineStates.RSP_XPLUS_ONE,e&&e.engineVsEngineEventTriggerred&&(this.appContext.user.profile.engineVsEngineEventTriggerred=!0),t.debug("baDecisionEngine getAds Success: ",e),x.call(this,e)}.bind(this),function(e){e&&e.engineVsEngineEventTriggerred&&(this.appContext.user.profile.engineVsEngineEventTriggerred=!0),t.debug('Error in baDecisionEngine getAds of "blue-ads/lib/messageManager" promise',e.adError,this.currentAdConfig)}.bind(this)).catch(function(e){t.error('Exception in getAds of "blue-ads/lib/messageManager" promise',e,this.currentAdConfig)}.bind(this)))}.bind(this),function(e){t.warn('getAds: Error in require("blue-ads/lib/messageManager") promise',e)}.bind(this)).catch(function(e){t.warn('getAds: Exception in require("blue-ads/lib/messageManager") promise',e)}.bind(this))},getCompositeAdsContent:T,getCardlyticsAds:function(e,n){return this.msgMgrPromise.then(function(){if(h={},this.currentAdConfig){this.currentAdParamState=this.engineStates.REQ_XPLUS_ONE;var e=this.currentAdConfig.cardlyticsAdsIntrested;for(var n in e){this.placementId=n;var i=a._getRandomNumber();h[i]=n,t.debug("[blue-ads] [cardlytics] cacheEnabled for getCardlyticsAds content API? ",this.currentAdConfig.contentCacheEnabled),this.adManager.getCardlyticsAds({tagCode:this&&this.currentAdConfig&&this.currentAdConfig.tagCode||"",placementId:this.placementId,adContext:this.currentAdParam,requiredAdData:this.requiredCardlyticsAdData,accountId:this.requiredCardlyticsAdData.accountId,requestId:i,cache:{enabled:this.currentAdConfig.contentCacheEnabled||!0,expirationInMs:this.currentAdConfig.contentCacheExpiration}}).then(function(e){M.call(this,e)}.bind(this),function(e){t.debug('[cardlytics] Error in baDecisionEngine getAds of "blue-ads/lib/messageManager" promise',e,this.currentAdConfig)}.bind(this)).catch(function(e){t.error('[cardlytics] Exception in getAds of "blue-ads/lib/messageManager" promise',e,this.currentAdConfig)}.bind(this))}}}.bind(this),function(e){t.warn('[cardlytics] getAds: Error in require("blue-ads/lib/messageManager") promise',e)}.bind(this)).catch(function(e){t.warn('[cardlytics] getAds: Exception in require("blue-ads/lib/messageManager") promise',e)}.bind(this))},processCompositeAdsResponse:w,processAdsContentResponse:A,getAdsContent:S,processXPlusOneResponse:x,getCompositeParentValue:k}})),define("blue-ads/utility/baDecision/baDecision",["require","blue/log","blue-ads/utility/baUtil","blue-ads/utility/baStore","blue-ads/utility/categoryStore","blue-ads/utility/baDecision/baMsgManager"],(function(e){"use strict";var t=e("blue/log")("[blue-messages]"),n=e("blue-ads/utility/baUtil"),i=e("blue-ads/utility/baStore"),a=e("blue-ads/utility/categoryStore"),r=e("blue-ads/utility/baDecision/baMsgManager"),o=function(){if(this.currentAdConfig&&this.currentAdConfig.adsInterested){var e=this.currentAdConfig.requiredAdInfo;if(e&&(e.eventName||e.privateStateUrl)){if(!(this.currentAdParamState>4)){this.currentAdParamState=this.engineStates.REQ_AD_INFO,t.debug("getRequiredAds getRequiredAdInfo: ",this.currentAdConfig);var n={adContext:this.currentAdParam,requiredAdInfo:e};e.privateStateUrl?this.appContext.application.privateState(e.privateStateUrl,{privateDataObject:n}):this.appContext.application.broadcast(e.eventName,n),this.currentAdParamState=this.engineStates.WAIT_AD_INFO}}else r.getAds.call(this)}},s=function(){for(var e=Object.keys(this.adsRegistry),t=0;t<e.length;t++)r.processAdsContentResponse.call(this,e[t],{content:null})},c=function(){for(var e=Object.keys(this.adsRegistry),t=0;t<e.length;t++)this.currentAdConfig.cardlyticsAdsIntrested[e[t]]&&r.processAdsContentResponse.call(this,e[t],{content:null})},l=function(){for(var e=Object.keys(this.adsRegistry),t=0;t<e.length;t++)this.currentAdConfig.adsInterested[e[t]]&&r.processAdsContentResponse.call(this,e[t],{content:null})},d=function(){if(this.currentAdConfig){var e=this.currentAdConfig.requiredCardlyticsAdInfo;e&&e.eventName?this.currentAdParamState>4||(this.currentAdParamState=this.engineStates.REQ_AD_INFO,t.debug("[cardlytics] getRequiredCardlyticsAds getRequiredCardlyticsAdInfo: ",this.currentAdConfig),this.appContext.application.broadcast(e.eventName,{adContext:this.currentAdParam,requiredAdInfo:e,disableCardlyticsService:!1}),this.currentAdParamState=this.engineStates.WAIT_AD_INFO):t.debug("[cardlytics] getRequiredCardlyticsAds getRequiredCardlyticsAdInfo: No adInfo found")}};return{hideUnInterestedAds:s,hideUnInterestedCardlyticsAds:c,hideUnInterestedMidasAds:l,handleSendRequiredAdInfo:function(e){e.disableMidasService?t.info("handleSendRequiredAdInfo: disableMidasService is true SERVICE CALLS DISABLED",e):e.adContext?this.currentAdParam===e.adContext?this.currentAdConfig?(this.currentAdParamState=this.engineStates.RSP_AD_INFO,t.debug("handleSendRequiredAdInfo Success: ",e.requiredAdData,e),this.requiredAdData=e.requiredAdData,r.getAds.call(this)):t.info("handleSendRequiredAdInfo: INVALID DATA:",e):t.info("handleSendRequiredAdInfo: Response too late:",e):t.info("handleSendRequiredAdInfo: INVALID CONTEXT:",e)},handleSendCardlyticsRequiredAdInfo:function(e){e.disableCardlyticsService?t.info("[cardlytics] handleSendCardlyticsRequiredAdInfo: isCardlyticsService is false SERVICE CALLS DISABLED",e):e.adContext?this.currentAdParam===e.adContext?this.currentAdConfig&&this.currentAdConfig.cardlyticsIntrested?(this.currentAdParamState=this.engineStates.RSP_AD_INFO,t.debug("[cardlytics] handleSendCardlyticsRequiredAdInfo Success: ",e.requiredAdData,e),this.requiredCardlyticsAdData=e.requiredAdData,r.getCardlyticsAds.call(this)):t.info("[cardlytics] handleSendCardlyticsRequiredAdInfo: INVALID DATA:",e):t.info("[cardlytics] handleSendCardlyticsRequiredAdInfo: Response too late:",e):t.info("[cardlytics] handleSendCardlyticsRequiredAdInfo: INVALID CONTEXT:",e)},getCardlyticsAds:d,initializeAdParams:function(e){this.requiredAdData=void 0,this.currentAdParam=n.getAdParam(),this.currentStaticAdParam=n.getAdStaticParam(e.screenId),this.currentAdConfig=this.adsConfig[this.currentStaticAdParam],this.currentAdParamState=this.engineStates.SCREENID,this.currentAdConfig&&(this.currentAdConfig.categories&&this.currentAdConfig.categories.forEach((e=>{a.clearCategory(this.currentAdParam,e.category),a.setCategory(this.currentAdParam,e.category,{placementIds:e.placementIds,actualNumberOfPlacements:0})})),i.adsStoreDelete(),e.adsType?this.currentAdConfig.cardlyticsAdsIntrested&&"cardlytics"===e.adsType&&!1!==this.appContext.config.enableCardlyticsAds&&"false"!==this.appContext.config.enableCardlyticsAds?(c.call(this),d.call(this)):this.currentAdConfig.adsInterested&&"midas"===e.adsType&&!1!==this.appContext.config.enableMidasAds&&"false"!==this.appContext.config.enableMidasAds&&(l.call(this),o.call(this)):(s.call(this),this.currentAdConfig.cardlyticsAdsIntrested&&!1!==this.appContext.config.enableCardlyticsAds&&"false"!==this.appContext.config.enableCardlyticsAds&&d.call(this),this.currentAdConfig.adsInterested&&!1!==this.appContext.config.enableMidasAds&&"false"!==this.appContext.config.enableMidasAds&&o.call(this))),t.debug("initializeAdParams:",this.currentStaticAdParam,this.currentAdParam)},getRequiredAds:o}})),define("blue-ads/utility/baDecision/baComponent",["require","blue/log","blue-ads/utility/baStore","blue-ads/utility/baDecision/baDecision","blue/event/channel/analytics","blue-ads/utility/baDecision/baMsgManager"],(function(e){"use strict";var t=e("blue/log")("[blue-messages]"),n=e("blue-ads/utility/baStore"),i=e("blue-ads/utility/baDecision/baDecision"),a=e("blue/event/channel/analytics"),r=e("blue-ads/utility/baDecision/baMsgManager"),o=function(e,n){this.appContext.application.broadcast(e,n),t.info("Ads makenavigation triggered",n)},s=function(e){var t;if(this.currentAdConfig&&this.currentAdConfig.adsInterested)for(var n=this.currentAdConfig.adsInterested,i=Object.keys(n),a=0;a<i.length;a++){if("composite"===n[r=i[a]].slotType&&n[r].slotId===e){t=r;break}if(e===n[r]){t=r;break}}if(this.currentAdConfig&&this.currentAdConfig.cardlyticsAdsIntrested)for(n=this.currentAdConfig.cardlyticsAdsIntrested,i=Object.keys(n),a=0;a<i.length;a++){var r;if(e===n[r=i[a]]){t=r;break}}return t},c=function(e){var i=n.adsStoreGet(this.currentAdParam),a=s.call(this,e.adSlotId);i&&i[a]&&this.currentAdConfig&&(e.adData.value.jp_aid_p=this&&this.currentAdConfig&&this.currentAdConfig.tagCode||"",e.adData.value.jp_aid_a=i[a].creativeId,e.adData.value.placementId=a),t.debug("ADDecisionEngine: broadcastAdClick: ",e),e.adData&&e.adData.type&&e.adData.value&&(e.adData.value.params&&this.requiredAdData?e.adData.value.params.dynamicParams?e.adData.value.params.dynamicParams.accountId?e.adData.value.params.dynamicParams.accountId&&o.call(this,e.adData.type,e.adData.value):(e.adData.value.params.dynamicParams.accountId=this.requiredAdData.accountId,o.call(this,e.adData.type,e.adData.value)):(e.adData.value.params.dynamicParams={accountId:this.requiredAdData.accountId},o.call(this,e.adData.type,e.adData.value)):o.call(this,e.adData.type,e.adData.value))};return{handleAdClicked:function(e){var t=n.adsStoreGet(this.currentAdParam),i=s.call(this,e.adSlotId),a=e&&e.adData&&e.adData.value&&e.adData.value.focusTarget||"",r=this&&this.currentAdConfig&&this.currentAdConfig.tagCode||"";t&&t[i]&&this.currentAdConfig&&(void 0!==t[i].consolidatePayload&&null!==t[i].consolidatePayload||(t[i].consolidatePayload=this.adManager.shouldConsolidateAnalyticsPayload(r)),this.adManager.trackAdClick(i,{creativeId:t[i].creativeId,midasId:t[i].adDecisionResponse?t[i].adDecisionResponse.midas_id:void 0,isFailoverAdContent:t[i].adContent?t[i].adContent.isFailoverAd:void 0,analytics:{consolidatePayload:t[i].consolidatePayload}},e.adVariant,r,t[i].adDecisionResponse,a)),c.call(this,e)},broadcastAdClick:c,handleCardlyticsUrlLinkClick:function(e){var t=e;t.pageId=this&&this.currentAdConfig&&this.currentAdConfig.tagCode||"",this.adManager.trackUrlLinkClick(t),o.call(this,"makeNavigation",e.adData.value)},getModelData:function(e){var t,i=n.adsStoreGet(this.currentAdParam),a=s.call(this,e.adSlotId),r=this&&this.currentAdConfig&&this.currentAdConfig.tagCode||"";a&&i[a]&&(t=i[a].creativeId,void 0!==i[a].consolidatePayload&&null!==i[a].consolidatePayload||(i[a].consolidatePayload=this.adManager.shouldConsolidateAnalyticsPayload(r))),e.context.advertisementPlacementId=a,e.context.advertisementMidasId=i[a].adDecisionResponse?i[a].adDecisionResponse.midas_id:void 0,e.context.advertisementId=t||e.context.offerId,e.context.advertisementPageId=r,e.context.internalPlacementId&&(e.context.advertisementInternalPlacementId=e.context.internalPlacementId),i[a].consolidatePayload&&i[a].adDecisionResponse&&i[a].adDecisionResponse.decisionAnalytics&&!i[a].adContent.isFailoverAd&&(e.context.decisionAnalytics=i[a].adDecisionResponse.decisionAnalytics),i[a].adDecisionResponse&&i[a].adDecisionResponse.contentExperimentationDetails&&(e.context.splitIoPersonalizationData=this.adManager.createSplitImpressionPayload(i[a].adDecisionResponse.contentExperimentationDetails.experimentId)),e.context.templateEventTimestamp=Date.now()},handleCardlyticsShowMore:function(e){var t=e;t.pageId=this&&this.currentAdConfig&&this.currentAdConfig.tagCode||"",this.adManager.trackCarouselShowMore(t.adData.adData)},handleCardlyticsAdImpression:function(e){let n=this.currentAdConfig&&this.currentAdConfig.tagCode||"";this.adManager.trackCardlyticsAdImpression(e.adData.adSlotId,e.adData.offerId,n),e.adData.adSlotId&&e.adData.adSlotId.forEach((function(t,i){a.emit("requestAdvertisementActionsDisplay",{placement:t,adId:e.adData.offerId[i],tagMap:n})})),t.debug("[cardlytics] ADDecisionEngine: handleAdImpression: ",e)},handleCompositeAdImpression:function(e){var i=this,a=n.adsStoreGet(this.currentAdParam),r=s.call(this,e.adData.adSlotId.split("ContentID")[0]);a&&a[r]&&this.currentAdConfig&&this.adManager.trackAdImpression(r,{creativeId:a[r].creativeId,midasId:a[r].adDecisionResponse?a[r].adDecisionResponse.midas_id:void 0,isFailoverAdContent:a[r].adContent?a[r].adContent.isFailoverAd:void 0},e.adData.adVariant,i&&i.currentAdConfig&&i.currentAdConfig.tagCode||"",a[r].adDecisionResponse),t.debug("[composite] ADDecisionEngine: handleAdImpression: ",e)},handleSeeAllClick:function(e){var t=e;t.pageId=this&&this.currentAdConfig&&this.currentAdConfig.tagCode||"",this.adManager.trackSeeAllClick(t),o.call(this,"makeNavigation",e.adData.value)},handleCarouselArrow:function(e){var t=e;t.pageId=this&&this.currentAdConfig&&this.currentAdConfig.tagCode||"",this.adManager.trackCarouselSlide(t.adData.adData)},handleCarouselDots:function(e){var t=e;t.pageId=this&&this.currentAdConfig&&this.currentAdConfig.tagCode||"",this.adManager.trackCarouselDot(t.adData.adData)},respondToRegisterForCardlyticsAdContent:function(e){var t=e.adSlotId;if(t){this.adsRegistry[t]=!0;var a,o=n.adsStoreGet(this.currentAdParam);if(o&&this.currentAdConfig.cardlyticsAdsIntrested)this.currentAdConfig.cardlyticsAdsIntrested[e.adSlotId]==t&&(a=t),a&&o[a]&&(a==o[a].adContent.placementId?r.processAdsContentResponse.call(this,t,o[a].adContent,!0):i.getCardlyticsAds.call(this));else this.currentAdParamState===this.engineStates.REQ_AD_INFO&&(this.currentAdParamState=this.engineStates.WAIT_AD_INFO,i.getCardlyticsAds.call(this))}},handleAdInteractions:function(e){t.debug("ADDecisionEngine: handleAdInteractions: ",e),e.interactionEventName&&this.appContext.application.broadcast(e.interactionEventName,{adSlotId:e.adSlotId,adTargetId:e.adTargetId,adInteractionType:e.adInteractionType})},getPlacementIdFromAdSlotId:s,respondToRegisterForAdContent:function(e){var t=e.adSlotId;if(t){this.adsRegistry[t]=!0;var a=n.adsStoreGet(this.currentAdParam);if(a){var o=s.call(this,t);o&&a[o]&&!e.isComposite?r.processAdsContentResponse.call(this,t,a[o].adContent,!0):o&&a[o]&&e.isComposite?r.processCompositeAdsResponse.call(this,t,a[o].adContent,!0):i.getRequiredAds.call(this)}else this.currentAdParamState===this.engineStates.REQ_AD_INFO&&(this.currentAdParamState=this.engineStates.WAIT_AD_INFO,i.getRequiredAds.call(this))}},handleAdImpression:function(e){var i=n.adsStoreGet(this.currentAdParam),a=s.call(this,e.adSlotId);i&&i[a]&&this.currentAdConfig&&this.adManager.trackAdImpression(a,{creativeId:i[a].creativeId,midasId:i[a].adDecisionResponse?i[a].adDecisionResponse.midas_id:void 0,isFailoverAdContent:i[a].adContent?i[a].adContent.isFailoverAd:void 0},e.adVariant,this.requiredAdData&&this.requiredAdData.targetPageId||this.currentAdConfig&&this.currentAdConfig.tagCode||"",i[a].adDecisionResponse),t.debug("ADDecisionEngine: handleAdImpression: ",e)},handleDeregisterForAdContent:function(e){var t=e.adSlotId;t&&this.adsRegistry[t]&&delete this.adsRegistry[t]},handleCategoryFilter:function(e){this.adManager&&this.adManager.filterWithSelectedCategory(e.categoryId),t.debug("[cardlytics] ADDecisionEngine: handleCategoryFilter: ",e)},handleClick:function(e){var t=e;t.pageId=this&&this.currentAdConfig&&this.currentAdConfig.tagCode||"",this.adManager.trackClick("trackClick",t),o.call(this,"makeNavigation",e.adData.value)}}})),define("blue-ads/controller/baEngine",["require","blue/log","blue-ads/lib/messageManager","blue-ads/utility/baUtil","blue-ads/utility/baDecision/baDecision","blue-ads/utility/baDecision/baComponent","blue-ads/utility/baDecision/baMsgManager"],(function(e){"use strict";var t=e("blue/log")("[blue-messages]"),n=e("blue-ads/lib/messageManager"),i=e("blue-ads/utility/baUtil"),a=e("blue-ads/utility/baDecision/baDecision"),r=e("blue-ads/utility/baDecision/baComponent"),o=e("blue-ads/utility/baDecision/baMsgManager"),s={INIT:0,SCREENID:1,REQ_AD_INFO:2,WAIT_AD_INFO:3,RSP_AD_INFO:4,REQ_XPLUS_ONE:5,RSP_XPLUS_ONE:6,REQ_AD_CONTENT:7,RSP_AD_CONTENT:8};return function(e,c,l){try{if(t.debug("ADDecisionEngine: init:",l),this.engineStates=s,this.currentAdParamState=s.INIT,this.adManager=void 0,this.requiredAdData=void 0,this.currentAdConfig=void 0,this.currentAdParam=void 0,this.currentStaticAdParam=void 0,this.adsRegistry=Object.create(null),this.appContext=e,this.appContext.on({renderAdsForAScreenID:a.initializeAdParams.bind(this),sendCardlyticsCarouselDots:r.handleCarouselDots.bind(this),sendCardlyticsUrlLinkClick:r.handleCardlyticsUrlLinkClick.bind(this),sendCardlyticsShowMore:r.handleCardlyticsShowMore.bind(this),sendCardlyticsCarouselArrow:r.handleCarouselArrow.bind(this),registerForCardlyticsAdContent:r.respondToRegisterForCardlyticsAdContent.bind(this),sendSeeAllClick:r.handleSeeAllClick.bind(this),sendClick:r.handleClick.bind(this),sendRequiredAdInfo:a.handleSendRequiredAdInfo.bind(this),sendRequiredCardlyticsInfo:a.handleSendCardlyticsRequiredAdInfo.bind(this),sendAdImpression:r.handleAdImpression.bind(this),sendCardlyticsAdImpression:r.handleCardlyticsAdImpression.bind(this),sendCompositeAdImpression:r.handleCompositeAdImpression.bind(this),sendAdClicked:r.handleAdClicked.bind(this),sendInteractWithAd:r.broadcastAdClick.bind(this),getModelData:r.getModelData.bind(this),sendAdInteractions:r.handleAdInteractions.bind(this),registerForAdContent:r.respondToRegisterForAdContent.bind(this),deregisterForAdContent:r.handleDeregisterForAdContent.bind(this),sendSelectedCategory:r.handleCategoryFilter.bind(this)}),this.adsConfig=c.adsConfig(l),this.msgMgrPromise=n(e),o.getAdsManager.call(this),c.screenApi&&c.screenChannel){var d,u=c.screenApi;c.screenChannel.on(function(e){u(window.location.href)!==d&&(a.initializeAdParams.call(this,{screenId:u(e.newUrl)}),d="")}.bind(this)),d=u(c.currentUrl),t.debug("ADDecisionEngine: init: screenId:",d),d&&void 0===this.currentStaticAdParam&&void 0===this.currentAdParam&&a.initializeAdParams.call(this,{screenId:d})}else t.debug("ADDecisionEngine: init: NULL adsData.screenChannel or adsData.screenInfo",c);i._registerAdDecision()}catch(e){t.warn("ADDecisionEngine: init: Exception:",e)}}})),define("blue-ads/controller/baDecisionEngine",["require","blue/log","blue-ads/controller/baEngine","blue-ads/utility/baStore"],(function(e){"use strict";var t=e("blue/log")("[blue-messages]"),n=e("blue-ads/controller/baEngine"),i=e("blue-ads/utility/baStore");function a(e,t){this.message=t,this.name="ADDecisionEngineException",this.eType=e}return function(e){try{if(t.debug("ADDecisionEngine: Start:",e),!e.adsData)throw new a(!0,"ADDecisionEngine: Need adsData");var r=e.appCtx;if(!r&&e.blueSite){if(!e.adsData.application)throw new a(!0,"ADDecisionEngine: Need application in adsData");r=e.blueSite.getApplication(e.adsData.application).context}if(!r)throw new a(!0,"ADDecisionEngine: NULL App Context:");if("true"!==r.config.enableAds&&!0!==r.config.enableAds)throw new a(!1,"ADDecisionEngine: Ads not enable");var o=r.config.envType||"dev";e.adsData.bluespec&&i.setAdsBlueSpec(e.adsData.bluespec),this.engine=new n(r,e.adsData,o)}catch(e){t[!0===e.eType?"error":"warn"](e.message)}}})),define("blue-ads/utility/baViewHelper",["require","blue-ads/utility/baUtil"],(function(e){"use strict";var t,n={},i=[],a=e("blue-ads/utility/baUtil"),r=function(e){Object.keys(n).forEach(function(e){n[e]()}.bind(e))},o=function(e){"Enter"===e.key&&r(e)},s={turnoffScrollListener:function(e){var t;return n[e]&&delete n[e],Object.keys(n).length<1&&(a.removeEventListener("scroll",r),document.removeEventListener("click",r),document.removeEventListener("keyup",o),i.forEach((function(e){(t=a.getDOMElement(e))&&a.removeEventListener("scroll",r,t)})),i=[]),n},initializeScrollListener:function(e,t,s){if(n[e]=t,a.addEventListener("scroll",r),document.addEventListener("click",r),document.addEventListener("keyup",o),s){var c=a.getDOMElement(s);c&&(a.addEventListener("scroll",r,c),-1!==i.indexOf(s)&&i.push(s))}return n}};return{getInstance:function(){return t||(t=Object.create(s)),t}}})),define("blue-ads/utility/baView",["require","blue/log","blue-ads/utility/baViewHelper","blue/device/platform","blue-ads/utility/baUtil"],(function(e){"use strict";let t=e("blue/log")("[blue-messages]"),n=e("blue-ads/utility/baViewHelper").getInstance(),i=e("blue/device/platform"),a=i.os.family&&i.os.family.match(/(ios)/i),r=e("blue-ads/utility/baUtil"),o={},s={},c=[],l=[];var d=function(e,t){this.bridge&&this.bridge.output&&this.bridge.output.emit("trigger",{value:e,data:t})},u=function(e){var i=this;if(r.elementInViewport(e)){if(r.elementInViewport(e)&&!1===o[e]){i.isAdImpressionTriggered=!1,n.turnoffScrollListener(e),t.debug("[cardlytics] ADSView: triggerCardlyticsAdImpression:",e);var a=document.getElementById(e).querySelector("[blue-param]"),s=a?JSON.parse(a.getAttribute("blue-param")):void 0;l.push(e);var u={id:s?s.params.dynamicParams.offerId:void 0,checkSum:s?s.params.offerCheckSum:void 0};c.push(u),o[e]=!0}setTimeout((function(){l.length>0&&c.length>0&&(i.cardlyticsAdImpression&&i.cardlyticsAdImpression({adSlotId:l,offerId:c}),d.call(i,"cardlyticsAdImpression",{adSlotId:l,offerId:c})),l=[],c=[]}),1e3)}},p=function(e){var i,a=this;if(r.elementInViewport(e)&&document.getElementById(e).children.length&&!1===s[e]){a.isAdImpressionTriggered=!1,n.turnoffScrollListener(e),t.debug("[composite] ADSView: triggerCompositeAdImpression:",e);var o=document.getElementById(e)?document.getElementById(e).querySelector("[blue-param]"):void 0,c=o?o.getAttribute("blue-param"):void 0,l=c?r.isJsonString(c)?JSON.parse(c):c:void 0;i=l&&l.params&&l.params.dynamicParams?l.params.dynamicParams.offerId:void 0,s[e]=!0,a.compositeAdImpression&&a.compositeAdImpression({adSlotId:e,compositeOfferId:i}),d.call(a,"compositeAdImpression",{adSlotId:e,compositeOfferId:i})}},f=function(e,t,n){if(e&&t){for(var i=!1,a=e,r=0;!i&&a.id!==t&&r<30;)a.getAttribute(n)?i=!0:(a=a.parentNode,r++);return i?a:void 0}},m=function(e){const n=["interactWithAdvertisement","requestUrlLinkClick","requestMoreOffers","requestAllOffers","requestCarouselArrow","requestCarouselDot"];if(this.model.isComposite)var i=f(e,this.divContentId,"composite-data-placementid");var a=f(e,this.divContentId,"blue-param");if(a){var r=a.getAttribute("blue-click"),o=r,s=a.getAttribute("blue-param"),c=a.getAttribute("blue-internal-placement-id");c&&(r="interactWithAdvertisement"),t.debug("ADSView: adClicked:",o,s,a),this.model.isComposite&&i&&(this.divContentId=i.id?i.id.split("ContentID")[0]:void 0),r&&n.includes(r)||(r="reviewOffer"),d.call(this,r,{adSlotId:this.model.isComposite?this.divContentId:this.model.adSlotId,adTargetId:this.model.adTargetId,divContentId:this.divContentId,focusTargetId:a.id?a.id:void 0,adData:{type:o||"makeNavigation",value:s},nonCustomerEvent:void 0===e.nonCustomerEvent||e.nonCustomerEvent,internalPlacementId:c||""})}};return{sendTriggerToComponent:d,triggerAdImpression:function(){var e=this;!1===e.isAdImpressionStarted&&!0===e.isAdImpressionTriggered&&r.elementInViewport(e.divContentId)&&(e.isAdImpressionStarted=!0,setTimeout((function(){e.isAdImpressionStarted=!1,r.elementInViewport(e.divContentId)&&(e.isAdImpressionTriggered=!1,n.turnoffScrollListener(e.adSlotId),t.debug("ADSView: triggerAdImpression:",e.adSlotId),d.call(e,"adImpression",{adSlotId:e.adSlotId}))}),1e3))},clearImpressions:function(){o={},s={},c=[],l=[]},updateAdContent:function(e){if(e.data&&"adContent"===e.data.type&&e.data.value){var t=e.data.value;t.failOverAd&&(this.model.failOverAdContent=t.failOverAd),t.status||(this.model.isAdContentLoading=!0),"html"===t.type&&(this.model.isAdContentLoading=!0,t.content instanceof DocumentFragment?(this.model.adContent="<div></div>",document.getElementById(this.divContentId).appendChild(t.content)):this.model.adContent=t.content)}},triggerCompositeAdImpression:function(){var e=document.querySelectorAll("[composite-data-placementid]");for(var t in(e=[].slice.call(e))&&e.forEach((function(e){s[e.id]||(s[e.id]=!1)})),s)0==s[t]&&(n.initializeScrollListener(t,p.bind(this,t),t),setTimeout(p.bind(this,t),100))},triggerCompositeAdImpressionCallBack:p,triggerCardlyticsAdImpressionCallBack:u,triggerCardlyticsAdImpression:function(){var e=document.querySelectorAll("[data-placementid]");for(var t in(e=[].slice.call(e))&&e.forEach((function(e){o[e.id]||(o[e.id]=!1)})),o)0==o[t]&&(n.initializeScrollListener(t,u.bind(this,t),t),setTimeout(u.bind(this,t),100))},getAttribesNode:f,sendClickTrigger:m,bindClickEventIfTouchNotWorking:function(){//!!! HACK
try{if(a&&MutationObserver&&void 0===this.domObserver&&this.model.adTargetId){t.debug("ADSView: bindClickEventIfTouchNotWorking: Registring MutationObserver:",this.divContentId),this.domObserver=new MutationObserver(function(e){t.debug("ADSView: bindClickEventIfTouchNotWorking: MutationObserver:",this.divContentId,e),e.forEach(function(e){if(e.addedNodes.length>0&&e.target.id===this.divContentId){var n=r.getDOMElement(this.divContentId);n&&n.addEventListener("click",function(e){t.debug("ADSView: bindClickEventIfTouchNotWorking:1:",this.divContentId,e),!e.webkitForce&&e.target&&m.call(this,e.target)}.bind(this),!1)}}.bind(this))}.bind(this));var e=r.getDOMElement(this.model.adTargetId);e&&this.domObserver.observe(e,{childList:!0})}}catch(e){}}}})),define("blue-ads/view/webspec/baView",{name:"BLUE_ADS_VIEW_WEB_SPEC",bindings:{},triggers:{render:{action:"view.onReady"},adClicked:{action:"view.adClicked"}}}),define("blue-ads/lib/baView",["require","blue/log","blue-ads/utility/baViewHelper","blue-ads/utility/baView","blue-ads/view/webspec/baView","blue-ui/view/elements/loader"],(function(e){"use strict";var t=e("blue/log")("[blue-messages]"),n=e("blue-ads/utility/baViewHelper").getInstance(),i=e("blue-ads/utility/baView");return{getAdView:function(a,r){return function(){this.init=function(){this.domObserver=void 0,this.isAdImpressionTriggered=!1,this.template=a,this.model=this.model||{},this.model.adContent="",this.divContentId=void 0,this.bridge=e("blue-ads/view/webspec/baView")},this.views={blueLoader:e("blue-ui/view/elements/loader")},this.onReady=function(){r&&this.onData("adContent",(function(e){t.warn("AKIT-499 is an antipattern and from post CR120, please listen to personalizeAdTarget broadcast"),this.$target.toggleClass("hide-element",!e)}),{init:!1}),this.adSlotId=this.model.adSlotId,this.divContentId=this.adSlotId+"ContentID",this.bridge.on("data/adsData",function(e){t.debug("ADSView: data/adsData:",e.data,e),e.data&&e.data.value&&e.data.value.content&&(this.isAdImpressionTriggered=!0,this.isAdImpressionStarted=!1,n.initializeScrollListener(this.model.adSlotId,i.triggerAdImpression.bind(this),this.model.scrollTargetId),e.data.value.isCompositeAdsImpression&&(i.clearImpressions(),setTimeout(i.triggerCompositeAdImpression.bind(this),100)),e.data.value.isCardlyticsAd&&(i.clearImpressions(),setTimeout(i.triggerCardlyticsAdImpression.bind(this),100)),e.data.value.isCompositeAdsImpression||setTimeout(i.triggerAdImpression.bind(this),100)),i.updateAdContent.call(this,e)}.bind(this)),i.bindClickEventIfTouchNotWorking.call(this)},this.onDestroy=function(){t.debug("ADSView: onDestroy",this.adSlotId),this.domObserver&&(this.domObserver.disconnect(),this.domObserver=void 0),n.turnoffScrollListener(this.adSlotId),i.clearImpressions()},this.adClicked=function(e){t.debug("ADSView: adClicked event:",e,this.divContentId);let n=e.domEvent?e.domEvent.target:e.target;n=n||{},n.nonCustomerEvent=!this.root||void 0===this.root._userEventRunning||!this.root._userEventRunning,i.sendClickTrigger.call(this,n)}}}}})),define("bluespec/advertisements",[],(function(){return{name:"ADVERTISEMENTS",data:{advertisementId:{type:"Description",exportable:!0},advertisementPlacementId:{type:"Description",exportable:!0},advertisementFormatType:{type:"Description",exportable:!0},advertisementShownState:{type:"OnOff",exportable:!0},advertisementHeaderShownState:{type:"OnOff",exportable:!0},advertisementLocationId:{type:"Description",exportable:!0},advertisementPageId:{type:"Description",exportable:!0},advertisementStatus:{type:"Description",exportable:!0},advertisementInteractionType:{type:"Description",exportable:!0},advertisementPreferenceByContext:{type:"Description",exportable:!0},advertisementAudiences:{type:"Description",exportable:!0},advertisementUniformResourceLocator:{type:"Description",exportable:!0},advertisementOfferUniformResourceLocator:{type:"Description",exportable:!0},totalNumberOfSlides:{type:"Numeric"},slideIndex:{type:"Description",exportable:!0},slideNumber:{type:"Numeric"},slideTitle:{type:"Description"},offers:{type:"List",items:{offerId:{type:"Description",exportable:!0},advertisementUniformResourceLocator:{type:"Description",exportable:!0}},exportable:!0},offerId:{type:"Description",exportable:!0},propertyContainer:{type:"Description"},failOverAdContent:{type:"Description",exportable:!0},isAdContentLoading:{type:"Description"},advertisementMidasId:{type:"Description",exportable:!0}},actions:{reviewOffer:!0,requestAllOffers:!0,requestMoreOffers:!0,interactWithAdvertisement:!0,requestNextSlide:!0,requestPreviousSlide:!0,requestCarouselArrow:!0,requestCarouselDot:!0,requestUrlLinkClick:!0},settings:{progressBarAda:!0,requestPreviousSlideAda:!0,requestNextSlideAda:!0}}})),define("blue-ads/utility/baComponent",["require","blue/log","blue-ads/utility/baUtil"],(function(e){var t=e("blue/log")("[blue-messages]"),n=e("blue-ads/utility/baUtil"),i=function(e){e.data&&this.output.emit("data",{value:"adsData",data:{type:"adContent",value:e.data}})},a=function(e={value:{}},t=""){this.context.application.broadcast(t,{adSlotId:this.model.get("isComposite")&&e.value?e.value.focusTarget:this.model.get("adSlotId"),adData:e})};return{processAdsUpdate:i,setModel:function(e){this.context.application.broadcast("getModelData",{adSlotId:e||this.model.get("adSlotId"),context:this})},sendCardlyticsUrlLinkClick:function(e){this.context.application.broadcast("sendCardlyticsUrlLinkClick",{adSlotId:this.model.get("adSlotId"),adData:e})},sendCardlyticsShowMore:function(e){this.context.application.broadcast("sendCardlyticsShowMore",{adSlotId:this.model.get("adSlotId"),adData:e})},sendCardlyticsAdImpression:function(e){this.context.application.broadcast("sendCardlyticsAdImpression",{adSlotId:this.model.get("adSlotId"),adData:e})},sendCompositeAdImpression:function(e){this.context.application.broadcast("sendCompositeAdImpression",{adSlotId:this.model.get("adSlotId"),adData:e})},registerForCardlyticsAdContent:function(){n._getInitPromise().then(function(){this.context.application.broadcast("registerForCardlyticsAdContent",{adSlotId:this.model.get("adSlotId")})}.bind(this),(function(e){t.debug("[cardlytics] ADSComponent: registerForCardlyticsAdContent: Error:",e)})).catch((function(e){t.debug("[cardlytics] ADSComponent: registerForCardlyticsAdContent: Exception:",e)}))},sendSeeAllClick:function(e){this.context.application.broadcast("sendSeeAllClick",{adSlotId:this.model.get("adSlotId"),adData:e})},sendCardlyticsCarouselDots:function(e){this.context.application.broadcast("sendCardlyticsCarouselDots",{adSlotId:this.model.get("adSlotId"),adData:e})},sendCardlyticsCarouselArrow:function(e){this.context.application.broadcast("sendCardlyticsCarouselArrow",{adSlotId:this.model.get("adSlotId"),adData:e})},listenToAdUpdates:function(){var e={};e["adsUpdate_"+this.model.get("adSlotId")]=i.bind(this),this.context.on(e)},registerForAdContent:function(){n._getInitPromise().then(function(){this.context.application.broadcast("registerForAdContent",{adSlotId:this.model.get("adSlotId"),isComposite:this.model.get("isComposite")})}.bind(this),(function(e){t.debug("ADSComponent: registerForAdContent: Error:",e)})).catch((function(e){t.debug("ADSComponent: registerForAdContent: Exception:",e)}))},deregisterForAdContent:function(){this.controller?this.controller.context.application.broadcast("deregisterForAdContent",{adSlotId:this.extraAdSlotId}):this.context&&this.context.application.broadcast("deregisterForAdContent",{adSlotId:this.extraAdSlotId})},sendAdImpression:function(e){this.context.application.broadcast("sendAdImpression",{adSlotId:this.model.get("adSlotId"),adData:e})},sendAdClicked:function(e){a.call(this,e,"sendAdClicked")},sendInteractWithAd:function(e){this.context.application.broadcast("sendInteractWithAd",{adSlotId:this.model.get("adSlotId"),adData:e})},sendAdInteractions:function(e){this.context.application.broadcast("sendAdInteractions",{adSlotId:this.model.get("adSlotId"),adTargetId:this.model.get("adTargetId"),interactionEventName:this.model.get("interactionEventName"),adInteractionType:e})},getAdContentAttributes:function(e){if(e.adData&&e.adData.value){var t=e.adData.value;try{t=JSON.parse(t)}catch(e){t={navKey:t}}return t.focusTarget=e.focusTargetId?e.focusTargetId:e.divContentId,{type:e.adData.type,value:t}}},sendClick:a}})),define("blue-ads/lib/multiAdsHelper",["require","bluespec/advertisements","blue-ads/component/baComponent"],(function(e){"use strict";return function(t){if(!t)throw new Error("[multiple] createAdCAV: parameters are not passed");if(!(t.controller&&t.controller.register&&t.controller.register.components))throw new Error("[multiple] createAdCAV: invalid controller");if(!t.componentName)throw new Error("[multiple] createAdCAV: invalid componentName");if(!t.templateTarget)throw new Error("[multiple] createAdCAV: invalid templateTarget");if(!t.adSlotId)throw new Error("[multiple] createAdCAV: invalid adSlotId");if(!t.adViewPath)throw new Error("[multiple] createAdCAV: invalid adViewPath");var n=t.controller;n.registry.registerComponent(t.componentName,{model:{interactionEventName:t.interactionEventName,scrollTargetId:t.scrollTargetId,adTargetId:t.templateTarget,adSlotId:t.adSlotId,advertisementContent:t.contentOfAd,adVariant:t.adVariant,multipleAds:!0},spec:e("bluespec/advertisements"),methods:e("blue-ads/component/baComponent")});var i={target:t.templateTarget};return t.viewAppend&&(i.append=t.viewAppend),[n.components[t.componentName],t.adViewPath,i]}})),define("blue-ads/lib/initiateMultipleAds",["require","blue-ads/lib/messageManager","blue-ads/lib/multiAdsHelper","blue-ads/utility/baUtil","blue/log"],(function(e){"use strict";const t="[multiple] Content failure";var n,i,a,r=e("blue-ads/lib/messageManager"),o=e("blue-ads/lib/multiAdsHelper"),s=e("blue-ads/utility/baUtil"),c=e("blue/log")("[blue-messages]"),l={};return{setParameters:function(e){l=e},setDecisionData:function(e){i=e},getMultipleAds:function(e){c.debug("[blue-ads.initiateMultipleAds.getMultipleAds] Calling the function with parameters: ",e);var n=this;return this.setParameters(e),new Promise((function(i,a){r(e.controller.context.application).then((function(r){c.debug("[blue-ads.initiateMultipleAds.getMultipleAds] Initiated adManager Creator for pageID: ",e.pageId),r.getAds({tagCode:e&&e.pageId||"",requiredAdData:e.requiredAdData,newRecoEngine:e&&e.newRecoEngine}).then((function(o){n.setDecisionData(o),n.descisionHandler.call(n,r,e,o,!1).then((function(e){c.debug("[blue-ads.initiateMultipleAds.getMultipleAds] Successfully received Ads: ",e),i(e)})).catch((function(){c.error("[blue-ads.initiateMultipleAds.getMultipleAds] Content Failure for pageId: ",e.pageId),a(t)}))})).catch((function(o){c.debug("[blue-ads.initiateMultipleAds.getMultipleAds] Error in getting ads from the framework: ",o),n.descisionHandler.call(n,r,e,o,!0).then((function(e){c.debug("[blue-ads.initiateMultipleAds.getMultipleAds] Successfully loaded the failover Ads: ",e),i(e)})).catch((function(){c.error("[blue-ads.initiateMultipleAds.getMultipleAds] Error in loading the failover Ads for pageId: ",e.pageId),a(t)}))}))})).catch((function(){c.error("[blue-ads.initiateMultipleAds.getMultipleAds] Error in initiating the adManagerCreator"),a("[multiple] Marcom plaform Failover")}))}))},descisionHandler:function(e,i,r,s){return c.debug("[blue-ads.initiateMultipleAds.descisionHandler] Calling the function with parameters: ",{adManager:e,params:i,decisionResponseData:r,loadFailover:s}),new Promise((function(l,d){var u={},p={};if(p.loadFailover=s,!s)for(var f in r)r.hasOwnProperty(f)&&"_a"!==f&&(u[f]=r[f].cid);for(var m in i.adPlacementMap)i.adPlacementMap[m]&&(p[m]=i.adPlacementMap[m].templateTarget);p.pageId=i.pageId,p.audiences=r._a,p.evaluateDynamicAd=i.htmlAd,n=p,e.getMultipleContent({adResponse:u,adParams:p,loadmultipleAds:!0}).then((function(e){c.debug("[blue-ads.initiateMultipleAds.descisionHandler] Received Ads content for pageId: ",i.pageId),a=e;var n=[];if(!0===e.status){for(var r in i.adPlacementMap)if(i.adPlacementMap.hasOwnProperty(r)){var s=i.adPlacementMap[r].templateTarget;n.push(o({controller:i.controller,componentName:r,templateTarget:"#"+i.adPlacementMap[r].templateTarget,scrollTargetId:i.scrollTargetId,viewAppend:i.adPlacementMap[r].viewAppend,adSlotId:s,adViewPath:i.adPlacementMap[r].adViewPath,contentOfAd:e.content[r],adVariant:e.adVariant[r]})),l(n)}}else c.error("[blue-ads.initiateMultipleAds.descisionHandler] Error in receiving Ads content for pageId: ",i.pageId),d(t)}))}))},handleEvents:function(e,t,o,d){c.debug("[blue-ads.initiateMultipleAds.handleEvents] Calling the function with parameters: ",{eventType:e,adSlotId:t,adVariantData:o,me:d});var u="decision_fail";r(l.controller.context.application).then((function(r){var p,f,m,g;for(var v in c.debug("[blue-ads.initiateMultipleAds.handleEvents] Initiated adManager Creator for pageID: ",l.pageId),n)n[v]===t&&(m=v);f=l.pageId,!n.loadFailover&&i?g=i[m].creativeId:n.loadFailover&&a.creativeId&&(g=a.creativeId[m]),p={creativeId:g},d.advertisementPlacementId=m,d.advertisementId=g,d.advertisementPageId=f,d.advertisementAudiences=o,s.elementInViewport(l.divContentId)&&!n.loadFailover?(c.debug("[blue-ads.initiateMultipleAds.handleEvents] Sending track event to adManager for ",e),"adClick"===e?r.trackAdClick(m,p,o,f,{},l.divContentId):"adImpression"===e&&r.trackAdImpression(m,p,o,f)):s.elementInViewport(l.divContentId)&&n.loadFailover&&(c.debug("[blue-ads.initiateMultipleAds.handleEvents] Sending track failover event to adManager for ",e),"adClick"===e?r.trackfailOverClick(u,f,m,p):"adImpression"===e&&r.trackfailOverImpression(u,f,m,p))}))}}})),define("blue-ads/component/baComponent",["require","blue/log","blue-ads/utility/baComponent","blue-ads/lib/initiateMultipleAds","blue-ads/utility/baView"],(function(e){"use strict";let t=e("blue/log")("[blue-messages]"),n=e("blue-ads/utility/baComponent"),i=e("blue-ads/lib/initiateMultipleAds"),a=e("blue-ads/utility/baView");return{init:function(){var e=this;e.adImpressionShown=!1,e.isAdContentLoading=!1,this.extraAdSlotId=this.model.get("adSlotId"),this.context.application.on("convoDeckExploreProductsRequested",(function(){void 0!==e.model&&!0===e.model.get("multipleAds")&&!1===e.adImpressionShown&&(e.adImpressionShown=!0,i.handleEvents("adImpression",e.model.get("adSlotId"),e.model.get("adVariant"),e))})),this.output.on("ready",function(){e.isAdContentLoading=!1,n.listenToAdUpdates.call(this),n.registerForAdContent.call(this),n.registerForCardlyticsAdContent.call(this)}.bind(this))},onDestroy:function(){t.debug("ADSComponent: onDestroy:"),n.deregisterForAdContent.call(this)},adImpression:function(e){t.debug("ADSComponent: ADImpression",e),n.sendAdImpression.call(this,e)},cardlyticsAdImpression:function(e){t.debug("ADSComponent: cardlyticsAdImpression",e),n.sendCardlyticsAdImpression.call(this,e)},compositeAdImpression:function(e){t.debug("ADSComponent: compositeAdImpression",e),n.sendCompositeAdImpression.call(this,e)},requestCarouselArrow:function(e){this.model.set("advertisementStatus",e.adData.value),setTimeout(a.triggerCardlyticsAdImpression.bind(this),100),n.sendCardlyticsCarouselArrow.call(this,e)},requestCarouselDot:function(e){this.model.set("advertisementStatus",e.adData.value),setTimeout(a.triggerCardlyticsAdImpression.bind(this),100),n.sendCardlyticsCarouselDots.call(this,e)},requestAllOffers:function(e){var t=n.getAdContentAttributes(e);n.sendSeeAllClick.call(this,t)},requestMoreOffers:function(e){this.model.set("advertisementStatus",e.adData.value),setTimeout(a.triggerCardlyticsAdImpression.bind(this),100),n.sendCardlyticsShowMore.call(this,e)},requestUrlLinkClick:function(e){var t=n.getAdContentAttributes(e);n.sendCardlyticsUrlLinkClick.call(this,t)},reviewOffer:function(e){try{var a=JSON.parse(e.adData.value).params.dynamicParams.offerId;this.offerId=a}catch(e){this.offerId=""}!0===this.model.get("multipleAds")||this.model.get("isComposite")||n.setModel.call(this),this.model.get("isComposite")&&n.setModel.call(this,e.adSlotId);var r=n.getAdContentAttributes(e);t.debug("ADSComponent: adClicked:",e.adSlotId,e,r),this.model.set("interactionType",""),!0===this.model.get("multipleAds")&&i.handleEvents("adClick",this.model.get("adSlotId"),this.model.get("adVariant"),this),n.sendAdClicked.call(this,r)},interactWithAdvertisement:function(e){t.debug("ADSComponent: interactWithAdvertisement",e),this.internalPlacementId=e.internalPlacementId,n.setModel.call(this),n.sendInteractWithAd.call(this,n.getAdContentAttributes(e))}}})),define("blue-ads/lib/baHelper",["require","bluespec/advertisements","blue-ads/component/baComponent"],(function(e){"use strict";return function(t){if(!t)throw new Error("createAdCAV: parameters are not passed");if(!(t.controller&&t.controller.register&&t.controller.register.components))throw new Error("createAdCAV: invalid controller");if(!t.componentName)throw new Error("createAdCAV: invalid componentName");if(!t.templateTarget)throw new Error("createAdCAV: invalid templateTarget");if(!t.adSlotId)throw new Error("createAdCAV: invalid adSlotId");if(!t.adViewPath)throw new Error("createAdCAV: invalid adViewPath");var n=t.controller;n.registry.registerComponent(t.componentName,{model:{interactionEventName:t.interactionEventName,scrollTargetId:t.scrollTargetId,adTargetId:t.templateTarget,adSlotId:t.adSlotId,isComposite:t.isComposite},spec:e("bluespec/advertisements"),methods:e("blue-ads/component/baComponent")});var i={target:t.templateTarget};return t.viewAppend&&(i.append=t.viewAppend),[n.components[t.componentName],t.adViewPath,i]}})),define("blue-ads/controller/baInitializer",["require","screenmap/api/urlToAnalyticsUri"],(function(e){"use strict";var t=e("screenmap/api/urlToAnalyticsUri");return{initializeAds:function(e,n){var i=n||t(window.location.href);i&&(e&&(e=e.toLowerCase()),this.context.application.broadcast("renderAdsForAScreenID",{screenId:i,adsType:e}))}}})),define("blue-ads/main",[],(function(){})),define("blue-tags/core/_personalization",[],(function(){"use strict";function e(){this.CookieName="PC_1_0",this.ValueDelimiter="|",this.origFieldOrder=[];var e="lsid",i="segg",a="site",o="ct",s="ut",c="pt",l="pfid",d="zip",u="RPC",p="preview",f="AOC",m="known",g="source_code",v="source_code_applied",h="ECI",y="GUID",b="lastUpdate",C="lastSent",A="segment",I="locale";this.GetLastSessionId=function(){return this.Get(e)},this.SetLastSessionId=function(t){r(e,t)&&this.Put(e,t)},this.GetSegmentGroup=function(){return this.Get(i)},this.SetSegmentGroup=function(e){r(i,e)&&this.Put(i,e)},this.GetSegmentId=function(){return this.Get(A)},this.SetSegmentId=function(e){r(A,e)&&(this.Put(A,e),this.ContainsKey("seg")&&this.Remove("seg"))},this.GetSite=function(){return this.Get(a)},this.SetSite=function(e){r(a,e)&&this.Put(a,e)},this.GetCustomerType=function(){return this.Get(o)},this.SetCustomerType=function(e){r(o,e)&&this.Put(o,e)},this.GetUserType=function(){return this.Get(s)},this.SetUserType=function(e){r(s,e)&&this.Put(s,e)},this.GetProfileType=function(){return this.Get(c)},this.SetProfileType=function(e){r(c,e)&&this.Put(c,e)},this.GetProfileId=function(){return this.Get(l)},this.SetProfileId=function(e){r(l,e)&&this.Put(l,e)},this.GetZipCode=function(){return this.Get(d)},this.SetZipCode=function(e){r(d,e)&&this.Put(d,e)},this.GetRpcList=function(){return this.Get(u)},this.SetRpcList=function(e){r(u,e)&&this.Put(u,e)},this.GetRpcCode=function(){return this.Get(u)},this.SetRpcCode=function(e){r(u,e)&&this.Put(u,e)},this.GetIsPreviewMode=function(){return this.Get(p)},this.SetIsPreviewMode=function(e){r(p,e)&&this.Put(p,e)},this.GetAocList=function(){return this.Get(f)},this.SetAocList=function(e){r(f,e)&&this.Put(f,e)},this.GetAccountInfo=function(){return this.Get("accts")},this.GetIsKnown=function(){return this.Get(m)},this.SetIsKnown=function(e){r(m,e)&&this.Put(m,e)},this.GetSourceCode=function(){return this.Get(g)},this.SetSourceCode=function(e){r(g,e)&&this.Put(g,e)},this.GetECI=function(){return this.Get(h)},this.SetECI=function(e){r(h,e)&&this.Put(h,e)},this.GetGUID=function(){return this.Get(y)},this.SetGUID=function(e){r(y,e)&&this.Put(y,e)},this.GetLastUpdate=function(){return this.Get(b)},this.SetLastUpdate=function(e){r(b,e)&&this.Put(b,e)},this.GetLastSent=function(){return this.Get(C)},this.SetLastSent=function(e){r(C,e)&&this.Put(C,e)},this.GetSourceCodeKeyAppliedFor=function(){return this.Get(v)},this.SetSourceCodeKeyAppliedFor=function(e){r(v,e)&&this.Put(v,e)},this.GetLocale=function(){return this.Get(I)},this.SetLocale=function(e){r(I,e)&&this.Put(I,e)},this.Persist=n,this.Init=t,this.Init()}function t(){var e=function(e){var t=document.cookie.indexOf(e+"=");if(-1!=t){var n=t+e.length+1,i=document.cookie.indexOf(";",n);return-1==i&&(i=document.cookie.length),unescape(document.cookie.substring(n,i))}return null}(this.CookieName);if(e){var t=e.split(this.ValueDelimiter);if(t)for(var n=0;n<t.length;n++){var i=t[n].split("=");i&&2==i.length&&r(i[0],i[1])&&("seg"==i[0]?(this.origFieldOrder.push("segment"),this.SetSegmentId(decodeURIComponent(i[1])),a(this.CookieName,null,-30)):(this.origFieldOrder.push(i[0]),this.Put(i[0],decodeURIComponent(i[1]))))}}}function n(){var e=function(){var e=new Date,t=e.getMonth()+1,n=e.getDate();t<10&&(t="0"+t);n<10&&(n="0"+n);return e.getFullYear()+"-"+t+"-"+n}();this.SetLastUpdate(e),this.SetLastSent(e);for(var t="",n=0;n<this.origFieldOrder.length;n++)t+=this.origFieldOrder[n]+"="+encodeURIComponent(this.Get(this.origFieldOrder[n])),t+=this.ValueDelimiter;for(var r in this.Table)"function"!=typeof this.Table[r]&&(null==this.Table[r]||i(this.origFieldOrder,r)||(t+=r+"="+encodeURIComponent(this.Table[r]),t+=this.ValueDelimiter));a(this.CookieName,t,365),a("GW",this.GetCustomerType()+"|"+this.GetUserType()+"|"+this.GetProfileType()+"|"+this.GetSegmentId()+"|"+this.GetSegmentGroup()+"|"+this.GetSite())}function i(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1}function a(e,t,n){var i=function(){var e=null,t=document.domain.split(".");t.length>=2&&(e=t[t.length-2]+"."+t[t.length-1]);return e}(),a=new Date;a.setDate(a.getDate()+n),document.cookie=e+"="+t+(n?";expires="+a.toGMTString():"")+";path=/"+(i?";domain="+i:"")}function r(e,t){var n=!1;if(t&&t.length>0)switch(e){case"zip":new RegExp("^\\d{5}-?(\\d{4})?$").test(t)&&(n=!0);break;case"source_code":case"source_code_applied":4==t.length&&(n=!0);break;case"lsid":case"segg":n=!0;break;case"seg":case"segment":3==t.length&&(n=!0);break;case"site":case"ct":case"ut":case"pt":case"pfid":n=!0;break;case"RPC":new RegExp("^([A-Za-z0-9]{3,4}|,)*,$").test(decodeURIComponent(t))&&(n=!0);break;case"preview":n=!0;break;case"AOC":new RegExp("^([A-Za-z0-9]{1,5}|,)*,$").test(decodeURIComponent(t))&&(n=!0);break;case"known":new RegExp("^(Y|N)$").test(t)&&(n=!0);break;case"ECI":n=!0;break;case"GUID":new RegExp("^[A-Fa-f0-9]{8}-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{12}$").test(t)&&(n=!0);break;case"lastUpdate":case"lastSent":new RegExp("^\\d{4}-\\d{2}-\\d{2}$").test(t)&&(n=!0);break;case"locale":case"accts":n=!0}return n}return e.prototype=new function(){this.Clear=function(){this.Table=new Array},this.ContainsKey=function(e){var t=!1;for(var n in this.Table)if(n==e&&null!=this.Table[n]){t=!0;break}return t},this.Get=function(e){var t=this.Table[e];return t||null},this.Put=function(e,t){null!=e&&null!=t&&(this.Table[e]=t)},this.Remove=function(e){var t=this.Table[e];return this.Table[e]=null,t},this.Table=new Array},e})),define("blue-tags/core/constants",[],(function(){"use strict";return{appName:"Tag Manager 2",productionServiceDomain:"https://www.chase.com",serviceEndpointPartialPath:"/apps/services/tagmanager",googleAdsDomain:"https://googleads.g.doubleclick.net",googleAdsServiceEndpointPartialPath:"/pagead/viewthroughconversion/1036322744/",xPlusOneStagingDomain:"https://rf15-qa.chase.com",xPlusOneProdDomain:"https://rf15.chase.com",xPlusOneServiceEndpointPartialPath:"/wsb/15629/poe/59242226",midasDevDomain:"https://midas-dev2.chase.com/stream/tag?",midasQaDomain:"https://midas-qa.chase.com/stream/tag?",midasPerfDomain:"https://midas-perf.chase.com/stream/tag?",midasProdDomain:"https://midas.chase.com/stream/tag?",targetProdEndpoint:"https://experimentation.chase.com/v4/variations",targetQAEndpoint:"https://experimentation-test.chase.com/v4/variations",targetPerfEndpoint:"https://experimentation-perf.chase.com/v4/variations",targetMboxId:"server-side-tagging",serverSideTaggingEndpointProd:"https://reco.chase.com/events/recoengine/process/pixels",serverSideTaggingEndpointQA:"https://qac02-reco.edgeuat.cldlb.jpmchase.com/events/recoengine/process/pixels",serverSideTaggingCharLimit:2e3,serverSideTaggingDelimter:encodeURIComponent("|")}})),define("blue-tags/utils/index",["../core/constants"],(function(e){"use strict";return{getCookie:function(e){var t=new RegExp(e+"s*=s*(.*?)(?:;|$)"),n=document.cookie.toString().match(t);return n?unescape(n[1]):null},setFireOnceCookie:function(e,t){if(e&&t){var n=e+"=",i=new Date;i.setTime(i.getTime()+18e5),document.cookie=n+encodeURIComponent(t)+"; expires="+i.toGMTString()}},extend:function(e,t){if(!t)return e;if(!e)return t;for(var n in t)e[n]=t[n];return e},indexOf:function(e,t){for(var n=e.length,i=0;i<n;i++)if(e[i]==t)return i;return-1}}})),define("blue-tags/core/environment",["./_personalization","../utils/index"],(function(e,t){"use strict";var n="";return{getEnvironment:function(e){n=e},getMid:function(){let e=t.getCookie("AMCV_EA673DFC5A2F19060A495C9C@AdobeOrg"),n=null;if(/MCMID[|](\w+)/i.test(e)){let t=e.indexOf("MCMID|")+6,i=e.indexOf("|MCAID");n=e.substring(t,i)}return n},getInstance:function(i){var a;return{env:n||"prod",query:function(e){if(""==e)return{};for(var t={},n=0;n<e.length;++n){var i=e[n].split("=");2==i.length&&(t[i[0]]=decodeURIComponent(i[1].replace(/\+/g," ")))}return t}(window.location.search.substr(1).split("&")),persona:"function"!=typeof e?{}:(new e).Table,v1st:(a=t.getCookie("v1st"),/^[a-z0-9]+$/i.test(a)?a:null),userAgent:encodeURIComponent(navigator.userAgent),referrer:encodeURIComponent(document.referrer),random:Math.floor(9e8*Math.random())+1e8,pageUrl:encodeURIComponent(document.location)}}}})),define("blue-tags/utils/cors",[],(function(){"use strict";return function(e,t){var n=new XMLHttpRequest;return"withCredentials"in n?n.open(e,t,!0):"undefined"!=typeof XDomainRequest?(n=new XDomainRequest).open(e,t):n=null,n}})),define("blue-tags/utils/logger",["../core/constants"],(function(e){"use strict";return function(t){window.console&&console.log("[",e.appName,"] ",t)}})),define("blue-tags/modules/replace",["../core/environment","../utils/logger","../utils/index"],(function(Config,Logger,Utils){"use strict";return function(source,params){var clientVars,match,matchesArray,regexp=/\{(.+?)\}/g,replacement,toReturn;if(Config.params)if(params){let e=Utils.extend(Config.params,params);clientVars=Utils.extend(Config.getInstance(),e)}else clientVars=Utils.extend(Config.getInstance(),Config.params);else clientVars=params?Utils.extend(params,Config.getInstance()):Config.getInstance();if(matchesArray=source.match(regexp),toReturn=source,matchesArray)try{for(var i=0;i<matchesArray.length;i++){match=matchesArray[i].substring(1,matchesArray[i].length-1);try{replacement=eval("clientVars."+match)||""}catch(e){Logger("Error processing replace variables "+match)}toReturn=toReturn.replace(matchesArray[i],replacement)}}catch(e){Logger.log("Unable to Replace Placeholder with JSON Object Properties.")}return toReturn}})),define("blue-tags/modules/pixel",["./replace"],(function(e){"use strict";return{invokePixelTag:function(t,n){t=e(t,n),this.requestPixel(t)},requestPixel:function(e){document.images&&((new Image).src=e)}}})),define("blue-tags/modules/extensions",["../core/environment","../core/constants","../utils/cors","../utils/logger","./pixel","./replace","../utils/index"],(function(e,t,n,i,a,r,o){"use strict";return window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},{audienceSyndication:function(){var o="",s={UserAgent:"",GUID:r("{persona.pfid}")||"null",IPAddress:"",XP_UID:"",URL:encodeURIComponent(location.href),Referrer:encodeURIComponent(encodeURIComponent(document.referrer)),ForceUIDMatch:!1,CreateXPUID:!0,Data:{ssv_pfid:r("{persona.pfid}")||"null",ssv_zip:r("{persona.zip}"),ssv_product:"",ssv_locale:r("{persona.locale}"),ssv_cigseg:r("{persona.segment}")}};"prod"===e.getInstance().env?o+=t.xPlusOneProdDomain:o+=t.xPlusOneStagingDomain,o+=t.xPlusOneServiceEndpointPartialPath,o+="?_u="+(r("{persona.ECI}")?r("{persona.ECI}"):""),o+="&Debug=false&Test=false&ContentType=application/json&TransactionID=eee-444";try{o+="&RequestObject=",o+=JSON.stringify(s)}catch(e){return void i(" - [AudienceSyndication] Error Stringifying RequestObject.")}var c=new n("GET",o);c||i(" - [AudienceSyndication] CORS Not Supported."),c.onload=function(){if(200===this.status){var e,n=t.googleAdsDomain+t.googleAdsServiceEndpointPartialPath;n+="?value=0&label=AgenCNqg-QMQuI-U7gM&guid=ON&script=0&url=",n+=document.domain,n+=encodeURIComponent("/audiences/");try{(e=JSON.parse(this.responseText))&&e.Nodes&&(n+=e.Nodes,a.invokePixelTag(n))}catch(e){return void i(" - [AudienceSyndication] Error parsing response.")}}else i(" - [AudienceSyndication] Request error.")},c.onerror=function(){i(" - [AudienceSyndication] Request failed.")},c.send()},midasActivity:function(e,t,n,i,a){console.warn("[TM] midasActivity is deprecated.")},gtagGlobal:function(e){if(e=r(e),!document.getElementById("gtagScript")){const t=document.createElement("script");t.async=!0,t.setAttribute("id","gtagScript"),t.setAttribute("src","https://www.googletagmanager.com/gtag/js?id="+e),t.defer=!0,document.head.appendChild(t),gtag("js",new Date)}gtag("config",e)},gtagEvent:function(e,t){try{Object.keys(t).forEach((function(e){t[e]=r(t[e])})),gtag("event",e,t)}catch(e){console.warn("Pixel failed to fire. Failed to parse "+t)}}}})),define("blue-tags/modules/tags",["../core/environment","../core/constants","../utils/logger","./pixel","./replace","./extensions","../utils/index"],(function(Config,Constants,Logger,Pixel,ReplacePlaceholder,TagManagerExtensions,Utils){"use strict";var TagManagement={stateMap:{scripts:[],urls:[],semanticAction:""},fireTags:function(){var e=this;Config.serverSideTaggingEnabled.then((function(t){if(e.stateMap.urls){if(t){var n=e.prepareUrls(e.stateMap.urls);e.fireServerSideTagging(n)}else for(var i=0;i<e.stateMap.urls.length;i++)Pixel.invokePixelTag(e.stateMap.urls[i]);e.stateMap.urls=[]}if(e.stateMap.scripts&&!t){for(i=0;i<e.stateMap.scripts.length;i++)try{e.runScript(e.stateMap.scripts[i])}catch(t){Logger("Error processing script "+e.stateMap.scripts[i])}e.stateMap.scripts=[]}}))},prepareUrls:function(e){let t=[],n="";for(let i=0;i<e.length;i++){if(-1!==new URL(e[i]).hostname.indexOf("chase.com")){Pixel.invokePixelTag(e[i]);continue}let a=encodeURIComponent(e[i]);(n.length+a.length+Constants.serverSideTaggingDelimter.length>Constants.serverSideTaggingCharLimit||i===e.length-1)&&(t.push(n),n=""),n+=a+(n.length?Constants.serverSideTaggingDelimter:"")}return t},fireServerSideTagging:function(e){var t=this.getServerSideEndpoint();e.forEach((function(e){try{fetch(t+"?px="+e).then((function(e){200!==e.status&&console.warn("[TM] Failed to send server side pixels.")})).catch((function(e){console.warn("[TM] Failed to send server side pixels.",e)}))}catch(e){console.warn("[TM] Failed to send server side pixels.",e)}}))},getServerSideEndpoint:function(){switch(Config.getInstance().env){case"prod":return Constants.serverSideTaggingEndpointProd;default:return Constants.serverSideTaggingEndpointQA}},registerTags:function(e){if(e){var t=e.scripts,n=e.urls;if(n)for(var i=0;i<n.length;i++)n[i]&&this.stateMap.urls.push(n[i]);if(t)for(i=0;i<t.length;i++)t[i]&&this.stateMap.scripts.push(t[i])}else Logger("Error Registering Tags.")},processScripts:function(e){for(var t=0;t<e.length;t++)this.runScript(e[t])},runScript:function(e){var t=this.parseScriptFromString(e);this.callExtension(t)},parseArg:function(e){try{return JSON.parse(e)}catch(t){return e}},parseScriptFromString:function(e){const t=e.match(/^(\w+)\(/),n=e.match(/\((.*)\)/);if(!t||!n)throw new Error("Invalid function string format");const i=t[1],a=n[1];let r=[],o="",s=null,c=0,l=0,d=!1;for(let e=0;e<a.length;e++){const t=a[e];d?(o+=t,d=!1):("\\"===t&&(d=!0),null!==s||"'"!==t&&'"'!==t?null===s||t!==s||d||(s=null):s=t,null===s&&"{"===t?c++:null===s&&"}"===t&&c--,null===s&&"["===t?l++:null===s&&"]"===t&&l--,null===s&&0===c&&0===l&&","===t?(r.push(this.parseArg(o.trim())),o=""):o+=t)}return o.length>0&&r.push(this.parseArg(o.trim())),{name:i,args:r}},callExtension:function(e){TagManagerExtensions[e.name]&&"function"==typeof TagManagerExtensions[e.name]&&TagManagerExtensions[e.name].apply(TagManagerExtensions,e.args)}};return{processTags:function(data){data||Logger("Error Processing Data: "+data);var fireOnceArray=[],fireOnceCookie=Utils.getCookie("fireOnce"),fireOnceStatus,condition,conditionResult,interactions,item,mappingID;if(fireOnceCookie&&(fireOnceArray=fireOnceCookie.split(",")),data&&data.jsonScriptArray){for(var i=0;i<data.jsonScriptArray.length;i++){if(item=data.jsonScriptArray[i],mappingID=item.mappingID,condition=item.conditions,conditionResult=!1,condition)try{var TM={clientVars:Config.getInstance()};conditionResult=eval(condition)}catch(e){conditionResult=!1}else conditionResult=!0;conditionResult&&(fireOnceStatus=item.fireOnce,fireOnceStatus?-1==Utils.indexOf(fireOnceArray,mappingID)&&(fireOnceArray.push(mappingID),TagManagement.registerTags(item)):TagManagement.registerTags(item))}fireOnceCookie=fireOnceArray.join(","),Utils.setFireOnceCookie("fireOnce",fireOnceCookie),TagManagement.fireTags()}},setSemanticAction:function(e){TagManagement.stateMap.semanticAction=e},processTagsForSemanticActions:function(data){data||Logger("Error Processing Data: "+data);var fireOnceArray=[],fireOnceCookie=Utils.getCookie("fireOnce"),fireOnceStatus,condition,conditionResult,interactions,item,mappingID,itemSemanticAction,userSemanticAction;if(fireOnceCookie&&(fireOnceArray=fireOnceCookie.split(",")),data&&data.jsonScriptArray){for(var i=0;i<data.jsonScriptArray.length;i++){if(item=data.jsonScriptArray[i],mappingID=item.mappingID,condition=item.conditions,conditionResult=!1,condition)try{var TM={clientVars:Config.getInstance()};conditionResult=eval(condition)}catch(e){conditionResult=!1}else conditionResult=!0;if(conditionResult)if(itemSemanticAction=item.semanticactions,userSemanticAction=TagManagement.stateMap.semanticAction,itemSemanticAction){for(var j=0;j<itemSemanticAction.length;j++)if(itemSemanticAction[j].attrAction===userSemanticAction){TagManagement.registerTags(item);break}}else fireOnceStatus=item.fireOnce,fireOnceStatus&&-1==Utils.indexOf(fireOnceArray,mappingID)&&(fireOnceArray.push(mappingID),TagManagement.registerTags(item))}fireOnceCookie=fireOnceArray.join(","),Utils.setFireOnceCookie("fireOnce",fireOnceCookie),TagManagement.fireTags()}}}})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define("blue-tags/temp_octagon_tm/octagon-public-analytics.umd",["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).OctagonPublicAnalytics={})}(this,(function(e){"use strict";function t(e,n){const i=Object.assign({},e);return Object.keys(n).forEach((e=>{const a=i[e],r=n[e];"object"!=typeof r||Array.isArray(r)||null===r?i[e]=r:r instanceof RegExp?i[e]=new RegExp(r):i[e]=t("object"==typeof a&&null!==a?a:{},r)})),i}const n={javaScriptVer:"1.8.5",visitorIdKey:"v1st",smSessionKey:"SMSESSION",debug:!1,midConfig:{orgId:"EA673DFC5A2F19060A495C9C@AdobeOrg",cookieKeyPre:"AMCV_",enableMid:!0,demdexCallEnable:!1,serviceTimeout:500,serviceUrl:"https://dpm.demdex.net/id",audienceManagerServer:"dpm.demdex.net",audienceManagerServerSecure:"true",version:"3.0.0",MCMID:"MCMID",testAcctKey:"TESTPROFILE"},svcEndpoint:"/events/analytics/public/v1/cc.gif",serviceConfig:{"analytics.mid.create.svc":{settings:{url:"https://dpm.demdex.net/id",method:"GET",dataType:"json",disableTrace:!0,disableDefaultError:!0,disableOfflineHandler:!0}}},piiConfig:{allowListedKeys:{eid:!0,e:!0,log:!0,cacheBuster:!0,eventType:!0,"visitor.mid":!0,"visitor.adobeData":!0,"visitor.visitorType":!0,"visitor.visitorId":!0,"visitor.eci":!0,"visitor.profileId":!0,"visitor.segment":!0,"visitor.loggedInState":!0,"screen.pageTitle":!0,"screen.screenId":!0,"device.colorDepth":!0,"device.javaScriptVer":!0,"device.screenRes":!0,"device.browserRes":!0,"location.timezone":!0,"location.tz_offset":!0,"payload.videoId":!0,"payload.videoName":!0,"payload.productCode":!0,"payload.offerCode":!0,"payload.offerId":!0,"payload.pageId":!0,"payload.solicitationId":!0,"payload.subProductcode":!0,"payload.marketingProductCode":!0,"payload.jp_cmp":!0,"payload.jp_cdf":!0,"payload.eCouponCode":!0,"payload.classCode":!0,"payload.cfgCode":!0,"payload.AOC":!0,"payload.RPC":!0,"payload.accountId":!0,"payload.accountid":!0,"payload.ai":!0,"payload.applicantType":!0,"payload.applicationId":!0,"payload.bankersessionid":!0,"payload.channel":!0,"payload.coApp":!0,"payload.couponStatus":!0,"payload.data-account":!0,"payload.data-audio-video-id":!0,"payload.data-audio-video-name":!0,"payload.data-video-id":!0,"payload.jointLoggedIn":!0,"payload.loggedIn":!0,"payload.meetingId":!0,"payload.partnerId":!0,"payload.partnerToken":!0,"payload.payeeId":!0,"payload.prefillToken":!0,"payload.advertisementMidasId":!0},filterMessage:"[REDACTED-PII]",enabled:!0,piiRegex:/([\d-. \t/]{9,})|.*(%40|@|at)[ ]?\S+[ ]?(%2C|\.|dot)[ ]?(com|net).*|.*aol\.com.*|.*gmail.*|.*yahoo.*|.*msn.*|.*hotmail.*/gi},blockBotsEnabled:!0,blockTestAccountEnabled:!1,botUserAgents:["RuxitSynthetic","GomezAgent","CVManaged","catchpoint","dejaclick","Pingdom","moatbot","HeadlessChrome","obot","googlebot","Neustar","Datanyze","PTST","Chrome-Lighthouse","Google Page Speed Insights","BingPreview","bot","spider","yandex","PhantomJS","AdsBot-Google","Google-Ads-Overview","xenu","adbeat","baiduspider","Google Web Preview","HiScan","sohu","crawl","woorankreview","BrandVerity","facebookexternalhit","GCE x86","Go-http-client","KHTE","Mappy","Facebot","DuplexWeb-Google","Macros-Web-Automation","1job","keynote","slurp","Yahoo Ad Monitoring","SemrushBot","lisa","bingbot","curl","Yeti","shrinktheweb","Site24x7","Scrapy","monitor","Dataprovider.com","CutyCapt","Drupal","nbot","AppEngine-Google","rpt-http","Applebot","spbot","mediapartners-google","webcheck","b2w","alexa site audit","ia_archiver","Seznam","DTSynth_FS","ThousandEyes","Tesseract","pita","LOCKSS cache","chkd","Daum","wget","magus bot","yacy","searchme.com/support/","ibot","FindLinks","libwww-perl","linkwalker","abot","httrack","Jooblebot","Scrubby","Qwantify","Python-urllib"]};let i=n;function a(e){i=t(i,e)}function r(){return i}"undefined"!=typeof window&&(window.chase_analytics_configure=a);var o=(e=>(e.SCREEN="screen",e.DYNAMIC_LINK="dynamic_links",e.FORM_FIELD="form_field",e.AD_IMPRESSION="ad_impressions",e.SCROLL="scroll",e.HOVER="hover",e.DOCUMENT_LINK="document_links",e.EXIT_LINK="exit_links",e.TAB="tab",e.INTERNAL_VIDEO="internal_video",e.EXTERNAL_VIDEO="external_video",e.PERSONALIZATION_IMPRESSION="personalization_impression",e.PERSONALIZATION_INTERACTION="personalization_interaction",e.PERSONALIZATION_CLICK="personalization_click",e.MODAL="modal",e.AD_CLICK="ad_clicks",e.LOG="log",e.ACCORDION="accordion",e.COMMUNICATION="communication",e.CAROUSEL="carousel",e))(o||{});function s(e){return document.cookie.replace(new RegExp(`(?:(?:^|.*;)\\s*${e}\\s*\\=\\s*([^;]*).*$)|^.*$`),"$1")}const c=(e,t)=>{const n=t+/\|(([\w&.\-]+\.)?([\w&.\-]+\.)?(\*|[\w&.\-]+))(?=$|\|)/.source,i=e.match(n);return(null==i?void 0:i[1])||""};function l(e){if("undefined"!=typeof window&&!1!==document.cookie.includes(e))return function(e){if("undefined"==typeof window)return"";return document.cookie.split(";").reduce(((t,n)=>n.includes(e)?n.trim().substring(`${e}=`.length,n.length):t),void 0)}(e)}function d(e,t){if(e.includes(t)){const n=e.split(t),i=n.length-1;return e.endsWith(t,e.length-1)?n:n.filter(((e,t)=>!!e||!e&&t!==i))}return e}function u(e){let t=d(decodeURI(e),"|");return t=Array.isArray(t)?t:[t],function(e){const t={};for(const n of e){if(Object(n)!==n)throw new TypeError("iterable for fromEntries should yield objects");const{0:e,1:i}=n;Object.defineProperty(t,e,{configurable:!0,enumerable:!0,writable:!0,value:i})}return t}(t.map((e=>{const t=e.split("="),n=t.shift();let i=d(decodeURIComponent(t.join("=")),"&");if(Array.isArray(i)){const e=[];for(let t=0,n=i.length;t<n;t++){let n=i[t];n=d(n,","),e.push(n)}i=e}else i=d(i,",");return[n,i]})))}function p(e,t,n){const i=n[e];return i&&Array.isArray(i)&&i.includes(t)?"Y":"N"}function f(e){let t={};if(e)try{t=u(decodeURIComponent(e)),t.pplr=p("ppl","A",t),t.fieir=p("fiei","Y",t),t.fpeir=p("fpei","Y",t),t.sieir=p("siei","Y",t),t.tieir=p("tiei","Y",t);const n=t.accts;n&&Array.isArray(n)&&n.length>0&&Array.isArray(n[0])&&n[0].length>0&&(t.accounts=function(e){const t={};if(e)for(let n=0,i=e.length;n<i;n++){const i=e[n],a=i[0];t[a]={},t[a].uratc=i[1],t[a].rwdb=i[2]}return t}(n))}catch(e){throw new Error(`Unable to read PC_1_0 cookie. Error: ${e}`)}return t}function m(e,t){const n="string"==typeof e?f(e):e;return Object.keys(n).includes(t)?n[t]:""}"undefined"!=typeof window&&(document.cookie=`AMCV_EA673DFC5A2F19060A495C9C%40AdobeOrg=deleting; expires=${(new Date).toUTCString()}`);function g(){return l("PC_1_0")}function v(e=!1){const t=g();return e?t||"":f(t)}function h(){return l("_rememberme")}function y(){return l("_tmprememberme")}let b;const C=new Uint8Array(16);function A(){if(!b&&(b="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!b))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return b(C)}const I=[];for(let e=0;e<256;++e)I.push((e+256).toString(16).slice(1));const E={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function S(e,t,n){if(E.randomUUID&&!t&&!e)return E.randomUUID();const i=(e=e||{}).random||(e.rng||A)();return i[6]=15&i[6]|64,i[8]=63&i[8]|128,function(e,t=0){return I[e[t+0]]+I[e[t+1]]+I[e[t+2]]+I[e[t+3]]+"-"+I[e[t+4]]+I[e[t+5]]+"-"+I[e[t+6]]+I[e[t+7]]+"-"+I[e[t+8]]+I[e[t+9]]+"-"+I[e[t+10]]+I[e[t+11]]+I[e[t+12]]+I[e[t+13]]+I[e[t+14]]+I[e[t+15]]}(i)}let w;function T(){if("undefined"==typeof window)return;const e=r(),t=e.midConfig.cookieKeyPre+e.midConfig.orgId,n=function(){const e=r(),t=s(e.midConfig.cookieKeyPre+e.midConfig.orgId);let n=function(){const e=/(?:[?&])md=([^&#]*)/i,t=window.location.href,n=t?t.match(e):void 0;return n?decodeURIComponent(n[1]):null}();n?O({d_mid:n,isCustom:!0}):n=void 0!==t&&e.midConfig.enableMid&&c(t,e.midConfig.MCMID)||void 0;return n}();w={adobeCookie:s(t),mid:n},void 0===n&&e.midConfig.enableMid&&O({d_mid:k(),isCustom:!0})}function O(e){const t=r(),n=t.midConfig.cookieKeyPre+t.midConfig.orgId,i=document.location&&document.location.hostname?document.location.hostname:"";let a=""===i?"":"localhost"===i?void 0:i;const o=new Date((new Date).setFullYear((new Date).getFullYear()+1905));if(a){const e=a.split(".");a=e.length>=2?`.${e[e.length-2]}.${e[e.length-1]}`:a}let s,c,l,d,u,p,f=e;void 0!==f?(f=!("object"==typeof f)&&JSON.parse(f)||f,s=function(e){let t=0;if(void 0!==e){const n=e.toString();for(let e=0;e<n.length;e++)t=(t<<5)-t+n.charCodeAt(e),t&=t}return t}(`${t.midConfig.version}|${t.midConfig.audienceManagerServer}|${t.midConfig.audienceManagerServerSecure}`),c=void 0!==f.d_mid&&f.d_mid||k(),l=void 0!==f.dcs_region&&f.dcs_region||"",d=void 0!==f.d_blob&&f.d_blob||"",u="",p=void 0!==f.d_optout&&"none"!=f.d_optout.toString().toLowerCase()&&f.d_optout||"isoptedout-false"):(f.isSvcInProgress=!1,f.isCustom=!0);let m=`${s}|MCIDTS|17564|MCMID|${c}|MCAID|NONE|MCOPTOUT|${p}|MCAAMLH|${l}|MCAAMB|${d}|MCCIDH|${u}|MCSYNCSOP|411-17568|vVersion|2.3.0`;m=(null==f?void 0:f.isCustom)?`${m}|IsCustom|true`:m,function(e,t,n,i,a,r){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;let o="";if(n)switch(n.constructor){case Number:o=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":`; max-age=${n}`;break;case String:o=`; expires=${n}`;break;case Date:o=`; expires=${n.toUTCString()}`}document.cookie=`${e}=${t}${o}${a?`; domain=${a}`:""}; path=${i}`}(n,m,o,"/",a),w={mid:c||k(),adobeCookie:m}}function k(){const e="0123456789";let t="",n="",i=0,a=0,r=10,o=10;for(i=0;19>i;i++)a=Math.floor(Math.random()*r),t+=e.substring(a,a+1),0===i&&9==a?r=3:((1==i||2==i)&&10!=r&&2>a||2<i)&&(r=10),a=Math.floor(Math.random()*o),n+=e.substring(a,a+1),0===i&&9==a?o=3:((1==i||2==i)&&10!=o&&2>a||2<i)&&(o=10);return t+n}let D={},x="",M="";function P(e){x=M,M=e}function N(){x="",M=""}const L=()=>{let e="";const t=R();!x&&t?e=t:document.referrer?e=document.referrer:x&&(e=window.location.href);const n=-1!==e.indexOf("?");return`${e}${x?`${n?"&":"?"}pg_name=${x}`:""}`},R=()=>{const e=window.location.href,t=e?e.match(/(?:[?&])rf=([^&#]*)/i):void 0;return t?decodeURIComponent(t[1]):null},_=()=>{const e=r(),t=w,n=l("v1st"),i=s(e.smSessionKey),a=!!g(),o=F(),c=a?String(m(v(),"ECI")):void 0,d=a?String(m(v(),"pfid")):void 0,u=o?c:void 0,p=o?d:void 0,f=a&&o?String(m(v(),"segment")):void 0,b=y()?y():0,C=h()?h():0,A=c||d?C||0!==b&&"0"!==b?"knwn_rmbrme":"knwn":"unknwn";return{mid:t?t.mid:void 0,segment:f,eci:u,profileId:p,adobeData:t?t.adobeCookie:void 0,visitorType:A,visitorId:n||void 0,loggedInState:"LOGGEDOFF"!==i&&i&&i.length>0?"Y":"N"}},F=()=>{const e=window.location.href;return!/(.*).chase.com/i.test(e)},j=e=>{const t=e/60,n=Math.abs(t);return 0===t?"+0":`${t>0?"-":"+"}${n}`},U=()=>({timezone:(new Date).toLocaleTimeString("en-us",{timeZoneName:"short"}).split(" ")[2],tz_offset:j((new Date).getTimezoneOffset())});const V=(e,t)=>e?"string"==typeof e?q(e,t):Array.isArray(e)?e.map((e=>V(e,t))):"object"==typeof e?B(e,t):e:e,q=(e,t)=>{var n,i;const{piiConfig:a}=r(),o=!0===(null==(n=a.allowListedKeys)?void 0:n[t]);return!0===(null==(i=a.allowListedData)?void 0:i[e])||o?e:(a.piiRegex.lastIndex=0,a.piiRegex.test(e)?e.replace(a.piiRegex,a.filterMessage):e)},B=(e,t)=>Object.entries(e).reduce(((n,[i,a])=>{const o=t?`${t}.${i}`:i;if(a)if(i.toLowerCase().includes("url"))try{n[i]=function(e,t){var n;const{piiConfig:i}=r();if(!0===(null==(n=i.allowListedKeys)?void 0:n[t]))return e;const a=new URL(e),o=new URLSearchParams(a.search),s=Array.from(o.entries()).map((([e,t])=>{var n;return!0===(null==(n=i.allowListedUrlParameters)?void 0:n[e])?`${e}=${t}`:`${e}=${V(t)}`})),[c,...l]=a.hash.split(";"),d=l.map((e=>{var t;let[n,a]=e.split("=");return!0===(null==(t=i.allowListedUrlParameters)?void 0:t[n])||(a=V(a)),`${n}=${a}`}));return a.hash=[c,...d].join(";"),`${a.protocol}//${a.host}${a.pathname}${s.length>0?`?${s.join("&")}`:""}${a.hash}`}(a,o)}catch(e){n[i]=V(a,o)}else n[i]=V(a,o);else n[i]=e[i];return n}),{});const z={};let H=0;let G=!1;function W(e,t={},n={}){const i=r(),a=i.midConfig.cookieKeyPre+i.midConfig.orgId,l=i.midConfig.testAcctKey;if("undefined"==typeof window)return;if(G||(T(),G=!0),e===o.SCREEN&&t.screenId?(P(t.screenId),delete t.screenId):e!==o.SCREEN||t.screenId||N(),i.blockBotsEnabled&&function(e){const t=navigator?navigator.userAgent:void 0;let n=!1,i=0;if(!Array.isArray(e)||"string"!=typeof t)return!1;for(;i<=e.length-1&&!n&&"string"==typeof e[i];)n=t.toLowerCase().indexOf(e[i].toLowerCase())>-1,i++;return n}(i.botUserAgents))return void console.info("Bot User Agent detected. Not processing analytics for event...");if(i.blockTestAccountEnabled&&function(e,t){const n=s(e);let i=!1;return i="undefined"!==n&&c(n,t)||void 0,i=("string"!=typeof i||"false"!==i.toLowerCase())&&i,i}(a,l))return void console.info("Test account detected. Not processing analytics for event...");const d=Object.assign({},t,n),u=(()=>{const e=r();return Object.assign({log:"1",cacheBuster:`${(new Date).getTime()}.${Math.floor(1e6*Math.random())}`,e:"1",eid:S(),clientId:"2.0.4",site:"Classic",app:{version:"1.0.0",channel:"COL",framework:"public_octagon"},visitor:_(),screen:{url:decodeURIComponent(window.location.href),screenId:M?decodeURIComponent(M):void 0,pageTitle:document.title,referrer:L()},device:{colorDepth:window.screen.colorDepth,javaScriptVer:e.javaScriptVer,screenRes:`${window.screen.width}x${window.screen.height}`,browserRes:`${window.innerWidth}x${window.innerHeight}`},location:U()},D)})(),p=Object.assign({eventType:e,payload:d},u);let f=p;var m;p.eventType!==o.LOG&&(f=function(e){var t;const{piiConfig:n}=r();return n.enabled?(null==(t=null==n?void 0:n.allowListedEvents)?void 0:t[e.eventType])?e:B(e):e}(p)),r().debug&&console.log(`[OCTAGON/PUBLIC-ANALYTICS] - ${e.toUpperCase()} EVENT`,{preFilteredEvent:p,filteredEvent:f,config:r()}),m=f,Object.keys(z).forEach((e=>z[e](m)))}e.accordionEvent=function(e,t={}){W(o.ACCORDION,e,t)},e.adClickEvent=function(e,t={}){W(o.AD_CLICK,e,t)},e.adImpressionEvent=function(e,t={}){W(o.AD_IMPRESSION,e,t)},e.addCustomVariables=function(e){D=Object.assign({},D,e)},e.carouselEvent=function(e,t={}){W(o.CAROUSEL,e,t)},e.clearScreenData=N,e.communicationEvent=function(e,t={}){W(o.COMMUNICATION,e,t)},e.configure=a,e.documentLinkEvent=function(e,t={}){W(o.DOCUMENT_LINK,e,t)},e.dynamicLinkEvent=function(e,t={}){W(o.DYNAMIC_LINK,e,t)},e.exitLinkEvent=function(e,t={}){W(o.EXIT_LINK,e,t)},e.externalVideoEvent=function(e,t={}){W(o.EXTERNAL_VIDEO,e,t)},e.formFieldEvent=function(e,t={}){W(o.FORM_FIELD,e,t)},e.getConfig=r,e.hoverEvent=function(e,t={}){W(o.HOVER,e,t)},e.init=function(e){e&&a(e),T(),G=!0},e.internalVideoEvent=function(e,t={}){W(o.INTERNAL_VIDEO,e,t)},e.logEvent=function(e,t={}){W(o.LOG,e,t)},e.modalEvent=function(e,t={}){W(o.MODAL,e,t)},e.personalizationClickEvent=function(e,t={}){W(o.PERSONALIZATION_CLICK,e,t)},e.personalizationImpressionEvent=function(e,t={}){W(o.PERSONALIZATION_IMPRESSION,e,t)},e.personalizationInteractionEvent=function(e,t={}){W(o.PERSONALIZATION_INTERACTION,e,t)},e.resetConfiguration=function(){i=n},e.resetCustomVariables=function(){D={}},e.screenEvent=function(e={},t={}){W(o.SCREEN,e,t)},e.scrollEvent=function(e,t={}){W(o.SCROLL,e,t)},e.setCurrentScreen=P,e.subscribeToEvents=e=>{const t=H;return H++,z[t]=e,{unsubscribe:()=>(e=>{z[e]&&delete z[e]})(t)}},e.tabEvent=function(e,t={}){W(o.TAB,e,t)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("./octagon-public-analytics.umd")):"function"==typeof define&&define.amd?define("blue-tags/temp_octagon_tm/octagon-public-analytics-dps-service.umd",["exports","./octagon-public-analytics.umd"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).OctagonPublicAnalyticsDpsService={},e.OctagonPublicAnalytics)}(this,(function(e,t){"use strict";function n(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e)for(const n in e)if("default"!==n){const i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:()=>e[n]})}return t.default=e,Object.freeze(t)}const i=n(t),a={none:"",prod:"https://secure.chase.com/events/analytics/public/v1/cc.gif",qap1:"https://qap1-secure01a.chase.com/events/analytics/public/v1/cc.gif",qap2:"https://qap2-secure01a.chase.com/events/analytics/public/v1/cc.gif",qap3:"https://qap3-secure01a.chase.com/events/analytics/public/v1/cc.gif",qap4:"https://qap4-secure01a.chase.com/events/analytics/public/v1/cc.gif",qap5:"https://qap5-secure01a.chase.com/events/analytics/public/v1/cc.gif",qac1:"https://qac1-secure01ea.chase.com/events/analytics/public/v1/cc.gif",qac2:"https://qac2-secure01ea.chase.com/events/analytics/public/v1/cc.gif",qac3:"https://qac3-secure01ea.chase.com/events/analytics/public/v1/cc.gif",qac4:"https://qac4-secure01ea.chase.com/events/analytics/public/v1/cc.gif",qac5:"https://qac5-secure01ea.chase.com/events/analytics/public/v1/cc.gif",qac1west:"https://qac1-secure51wa.cig.chase.com/events/analytics/public/v1/cc.gif",qac2west:"https://qac2-secure51wa.cig.chase.com/events/analytics/public/v1/cc.gif",qac3west:"https://qac3-secure51wa.cig.chase.com/events/analytics/public/v1/cc.gif",qac4west:"https://qac4-secure51wa.cig.chase.com/events/analytics/public/v1/cc.gif",qac5west:"https://qac5-secure51wa.cig.chase.com/events/analytics/public/v1/cc.gif"},r={dpsEnvironmentUrl:a.prod},o="[Public Analytics DPS Service]: Missing peerDependency @octagon/analytics",s="[Public Analytics DPS Service]: Disabled, check the `env` option in configuration settings",c=e=>{const t=r.dpsEnvironmentUrl;var n;void 0!==t&&0!==t.length?window&&"fetch"in window?fetch(`${t}?${e}`,{method:"GET",credentials:"include",redirect:"follow",mode:"no-cors",cache:"no-store",keepalive:!0}):(n=`${t}?${e}`,(new Image).src=n):console.warn(s)},l={log:"log",e:"e",visitor:{visitorId:"v1",visitorType:"vt",profileId:"pid",adobeData:"ad",loggedInState:"ls",mid:"mid",eci:"eci",segment:"seg"},site:"st",eid:"eid",cacheBuster:"wa_cb",app:{version:"av",channel:"ch",framework:"fw"},screen:{url:"url",screenId:"pg_name",pageTitle:"pt",referrer:"rf"},device:{screenRes:"sr",browserRes:"br",colorDepth:"cd",javaScriptVer:"jv"},location:{timezone:"tz",tz_offset:"tzo"},eventType:"et"},d={screen:"0",dynamic_links:"1",document_links:"2",exit_links:"3",internal_video:"6",form_field:"8",modal:"9",tab:"11",hover:"12",ad_clicks:"13",ad_impressions:"13",scroll:"14",personalization_impression:"15",personalization_interaction:"16",personalization_click:"17",external_video:"21",log:"99",accordion:"23",communication:"22",carousel:"24"},u={screen:{payload:{screenId:"pg_name"}},ad_clicks:{payload:{advertisementId:"wa_aid_lnk",advertisementMidasId:"midas_id",advertisementPageId:"jp_aid_p",advertisementPlacementId:"jp_aid_p",variations:"jp_aid_c"}},ad_impressions:{payload:{advertisementId:"wa_aid_i",advertisementMidasId:"midas_id",advertisementPageId:"jp_aid_p",advertisementPlacementId:"jp_aid_p",variations:"jp_aid_c"}},form_field:{payload:{referrerUrl:"rf",formName:"wa_frm_n",formStep:"wa_frm_s"}},internal_video:{payload:{videoId:"eid",videoName:"wa_fl_n",videoAction:"wa_fl_a",videoTitle:"pt"}},external_video:{payload:{lineOfBusiness:"wa_lob",videoName:"wa_vi_n",videoStep:"wa_vi_s",videoType:"wa_vi_tp",videoTitle:"wa_pt"}},dynamic_links:{payload:{linkUrl:"wa_lu",linkName:"wa_lnk"}},scroll:{payload:{scrollDepth:"jp_scdp",scrollDirection:"jp_scdr",scrollComponent:"jp_scco",scrollComponentPlacement:"jp_sccp",scrollRootPage:"jp_scrp",scrollCategory:"jp_ctg"}},hover:{payload:{hoverName:"wa_hov_n",hoverDescription:"wa_hov_d"}},document_links:{payload:{documentName:"wa_dcdl",documentUrl:"wa_lu"}},exit_links:{payload:{exitLink:"wa_exlnk",exitUrl:"wa_lu"}},tab:{payload:{tabName:"wa_tab_n",tabDescription:"wa_tab_d"}},personalization_impression:{payload:{elementName:"jp_peid",elementPlacement:"jp_pepl",product:"jp_pepr",category:"jp_petc",elementContext:"jp_pecv"}},personalization_interaction:{payload:{elementName:"jp_peid",elementPlacement:"jp_pepl",product:"jp_pepr",category:"jp_petc",elementContext:"jp_pecv"}},personalization_click:{payload:{elementName:"jp_peid",elementPlacement:"jp_pepl",product:"jp_pepr",category:"jp_petc",elementContext:"jp_pecv"}},modal:{payload:{modalName:"wa_dyn_n",modalDescription:"wa_dyn_d"}},log:{payload:{gpc:"pxg",state:"pxst",pixelsPrivacyData:"search"}},accordion:{payload:{component:"jp_acn",accordionName:"jp_acd",accordionInteraction:"jp_acci"}},communication:{payload:{communicationType:"jp_ct",communicationName:"jp_cn",communicationCategory:"jp_cc",communicationContext:"jp_cct",communicationScope:"jp_cms",communicationScopeReference:"jp_csr"}},carousel:{payload:{component:"jp_crn",carouselName:"jp_cd",carouselSelection:"jp_cs"}}},p=(e,t)=>Object.keys(e).reduce(((n,i)=>{if(!e[i]||"eventType"===i&&void 0===d[e[i]])return n;const a=(null==t?void 0:t[i])?t[i]:i,r=t&&"object"==typeof t[i]?t[i]:null;if(Array.isArray(a)){let t=n;return a.forEach((n=>{t+=`${n}=${e[i]}&`})),t}return"object"==typeof e[i]?`${n}${p(e[i],r)}`:"eventType"===i?`${n}${a}=${d[e[i]]}&`:`${n}${a}=${encodeURIComponent(e[i])}&`}),"");!async function(){try{i.subscribeToEvents((e=>{const t=(e=>{const t=u[e.eventType];if(!t)return null;const n=Object.assign({},l,t),i=p(e,n);return i.substring(0,i.length-1)})(e);t&&c(t)}))}catch(e){console.warn(o)}}(),e.updateConfig=e=>{var t;(null==(t=null==e?void 0:e.env)?void 0:t.includes("qap"))&&console.warn(`[Analytics] Warning: you are currently pointing analytics events to ${e.env} which is deprecated! Please use one of the qac endpoints.`),r.dpsEnvironmentUrl=e.env?void 0!==a[e.env]&&null!==a[e.env]?a[e.env]:e.env:r.dpsEnvironmentUrl},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("./octagon-public-analytics.umd"),require("./octagon-public-analytics-dps-service.umd")):"function"==typeof define&&define.amd?define("blue-tags/temp_octagon_tm/octagon-tag-manager.umd",["./octagon-public-analytics.umd","./octagon-public-analytics-dps-service.umd"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).OctagonTagManager=t(e.OctagonPublicAnalytics)}(this,(function(e){"use strict";var t=Object.defineProperty,n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,r=(e,n,i)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,o=(e,t)=>{for(var o in t||(t={}))i.call(t,o)&&r(e,o,t[o]);if(n)for(var o of n(t))a.call(t,o)&&r(e,o,t[o]);return e};const s={tagServer:"http://localhost:8081",isSecure:!1,standAlone:!1,enableUrlMode:!1,watchUrl:!1},c={fireOnce:{fireOnceCookieName:"fireOnce"},aem:{aemSecureEndpoint:"/apps/services/tagmanager/",aemPublicEndpoint:"/apps/services/tags/"},clientVars:{midCookieName:"AMCV_EA673DFC5A2F19060A495C9C@AdobeOrg",v1stCookieName:"v1st",personaCookieName:"PC_1_0",tagConditionalRegex:/TM\.clientVars\.(?:[a-zA-Z0-9_\-\.]*)|["'](.*?)["']|[0-9.]+|\|\||>=|<=|>|<|!==|!=|===|==/g,isIntOrFloatRegex:/^-?(?:(?![^0-9.]).)*$/},errors:{noConfigProvided:"You must provide a config when invoking TagManagerSingleton for the first time.",multiConfigWarning:"Config should only be provided when first invoked. Second config will be ignored.",configProductNameRequired:"Must provide `productName` in config when `isSecure` is set to true.",manualActionNotInStandaloneWarning:"Manual triggering of actions is only available in stand alone mode!",manualScreenNotInStandaloneWarning:"Manual setting of screens is only available in stand alone mode!",midasActivityDeprecatedWarning:"[TagManager] midasActivity script has been deprecated. Please contact DMG Tagging team for removal."},messaging:{standaloneModeMessage:"[Tag Manager]: Currently running in StandAlone mode."},location:{akamaiLocationServiceEndpoint:"https://static.chasecdn.com/loc/result",locationCookieName:"tml"},privacy:{ccpaFlagEndpoint:"https://www.chase.com/etc/chase/appsconfig/clientconfig.enableCCPA.js"},serverSideTagging:{serverSideTaggingEndpointProd:"https://reco.chase.com/events/recoengine/process/pixels",serverSideTaggingEndpointQA:"https://qac02-reco.edgeuat.cldlb.jpmchase.com/events/recoengine/process/pixels",serverSideTaggingCharLimit:2e3,delimiter:encodeURIComponent("|")}};class l{constructor(e){this.config=e}async getTags(e){const t=this.getAemServerUrl(e);try{const e=await fetch(t);return this.getTagsFromResponse(await e.text())}catch(e){return console.error(`TagManager: Error fetching AEM tags: ${e}`),[]}}getAemServerUrl(e){let t=e.split("?")[0].replace("://","/");t=t.startsWith("/")?t.slice(1):t;const n=this.config.isSecure?c.aem.aemSecureEndpoint:c.aem.aemPublicEndpoint,i=`${this.config.tagServer}${n}${t}`;return i.replace(/\<|\>|\&/g,"")}getTagsFromResponse(e){const t=e.replace("CHASE.TagManager.processTags(","").replace(");","");let n=[];try{n=JSON.parse(t).jsonScriptArray}catch(e){console.error(`TagManager: Error parsing AEM tag payload JSON: ${e}`)}return n}}class d{constructor(){this.actions={}}registerAction(e,t){this.actions[e]||(this.actions[e]={}),this.actions[e][t.mappingID]=t}getTagsByActionName(e){return this.actions[e]?Object.values(this.actions[e]):[]}addSemanticAction(e){e.semanticactions&&e.semanticactions.forEach((t=>{this.registerAction(t.attrAction,e)}))}static hasSemanticActions(e){return!!(e.semanticactions&&e.semanticactions.length>0)}}const u=class e{constructor(t,n,i,a){this.isSecure=!1,this.isStandalone=!0,this.handlePublicEvent=e=>{"screen"===e.eventType?e.screen.screenId?this.screenEventHandler(e.screen.screenId):this.screenEventHandler(e.screen.url):e.eventType&&this.actionEventHandler(e.eventType)},this.handleSecureEvent=e=>{switch(e.type){case"[ ANALYTIC EVENT ] SCREEN":e.payload.screenId&&this.screenEventHandler(e.payload.screenId);break;case"[ ANALYTIC EVENT ] ACTION":e.payload.eventName&&this.actionEventHandler(e.payload.eventName)}},this.isSecure=t,this.isStandalone=n,this.screenEventHandler=i,this.actionEventHandler=a,e.Promise=this.detectInstalledApi()}async detectInstalledApi(){this.isStandalone}start(){var t,n;"SECURE"===e.MODE?this.subscription=null==(t=e.analyticsApi)?void 0:t.subscribeToRealtimeEvents(this.handleSecureEvent):"PUBLIC"===e.MODE&&(this.subscription=null==(n=e.analyticsApi)?void 0:n.subscribeToEvents(this.handlePublicEvent))}stop(){var e;null==(e=this.subscription)||e.unsubscribe()}};u.MODE="STANDALONE";let p=u;const f=e=>{const t=`${e}=`;let n=null;const i=document.cookie.split(";");for(const e of i){let i=e;for(;i.startsWith(" ");)i=i.substring(1,i.length);if(i.startsWith(t))return n=i.substring(t.length,i.length),n}return null};function m(e){!function(e,t,n){const i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);const a=`expires=${i.toUTCString()}`;document.cookie=`${e}=${t}; ${a}; path=/`}(c.location.locationCookieName,e,1)}function g(e,t,n,i){return void 0!==t&&"CA"!==t||"3"===i||"2"===i&&!e}async function v(){try{const e=await fetch(c.privacy.ccpaFlagEndpoint),t=(await e.text()).match(/enableCCPA:\s*['"]?(true|false)['"]?/);return t?"true"===t[1]:void 0}catch(e){return void console.warn(e)}}const h=class e{constructor(t){const n=window.jpmcPageVar||{},i=this.getPersonaParams();var a;this.variables=o(o({env:(a=t,-1!==a.indexOf("wwwq")?"qa":-1!==a.indexOf("wwwi")?"ist":-1!==a.indexOf("wwwd")?"dev":-1!==a.indexOf("load")?"load":-1!==a.indexOf("-perf")?"perf":-1!==a.indexOf("www.")?"prod":"unknown"),query:this.getQueryParams(),persona:i,v1st:this.getV1stCookieValue(),mid:this.getMidCookieValue(),userAgent:encodeURIComponent(navigator.userAgent),referrer:encodeURIComponent(document.referrer),random:Math.floor(9e8*Math.random())+1e8,pageUrl:encodeURIComponent(document.location.toString()),gpc:!!navigator.globalPrivacyControl,location:this.getLocation(i.zip),ccpaEnabled:v()},n),e.persistentVariables)}async getLocation(e){try{if(e){const t=function(e){const t=e.split("-")[0];if(5!==t.length)return"";const n=parseInt(t,10);return n>=35e3&&n<=36999?"AL":n>=99500&&n<=99999?"AK":n>=85e3&&n<=86999?"AZ":n>=71600&&n<=72999?"AR":n>=9e4&&n<=96699?"CA":n>=8e4&&n<=81999?"CO":n>=6e3&&n<=6389||n>=6391&&n<=6999?"CT":n>=19700&&n<=19999?"DE":n>=32e3&&n<=34999?"FL":n>=3e4&&n<=31999||n>=39800&&n<=39999?"GA":n>=96700&&n<=96999?"HI":n>=83200&&n<=83999&&83414!=n?"ID":n>=6e4&&n<=62999?"IL":n>=46e3&&n<=47999?"IN":n>=5e4&&n<=52999?"IA":n>=66e3&&n<=67999?"KS":n>=4e4&&n<=42999?"KY":n>=7e4&&n<=71599?"LA":n>=3900&&n<=4999?"ME":n>=20600&&n<=21999?"MD":n>=1e3&&n<=2799||5501==n||5544==n?"MA":n>=48e3&&n<=49999?"MI":n>=55e3&&n<=56899?"MN":n>=38600&&n<=39999?"MS":n>=63e3&&n<=65999?"MO":n>=59e3&&n<=59999?"MT":n>=27e3&&n<=28999?"NC":n>=58e3&&n<=58999?"ND":n>=68e3&&n<=69999?"NE":n>=88900&&n<=89999?"NV":n>=3e3&&n<=3899?"NH":n>=7e3&&n<=8999?"NJ":n>=87e3&&n<=88499?"NM":n>=1e4&&n<=14999||6390==n||501==n||544==n?"NY":n>=43e3&&n<=45999?"OH":n>=73e3&&n<=73199||n>=73400&&n<=74999?"OK":n>=97e3&&n<=97999?"OR":n>=15e3&&n<=19699?"PA":n>=300&&n<=999?"PR":n>=2800&&n<=2999?"RI":n>=29e3&&n<=29999?"SC":n>=57e3&&n<=57999?"SD":n>=37e3&&n<=38599?"TN":n>=75e3&&n<=79999||n>=73301&&n<=73399||n>=88500&&n<=88599?"TX":n>=84e3&&n<=84999?"UT":n>=5e3&&n<=5999?"VT":n>=20100&&n<=20199||n>=22e3&&n<=24699||20598==n?"VA":n>=2e4&&n<=20099||n>=20200&&n<=20599||n>=56900&&n<=56999?"DC":n>=98e3&&n<=99499?"WA":n>=24700&&n<=26999?"WV":n>=53e3&&n<=54999?"WI":n>=82e3&&n<=83199||83414==n?"WY":""}(e);if(t)return{region:t,country:"US"}}const t=f(c.location.locationCookieName);if(t){const e=t.split("|"),n=e[0];return{region:n,country:e.length>1?e[1]:""}}return await async function(){try{const e=await fetch(c.location.akamaiLocationServiceEndpoint),t=await e.json(),n="default"!==t.region?t.region:"",i=t.country;return m(`${n}|${i}`),{region:n,country:i}}catch(e){return console.warn(e),{region:"",country:""}}}()}catch(e){return console.warn(`TM Error: ${e}`),{region:"",country:""}}}getQueryParams(){const e=window.location.search.substring(1).split("&"),t={};return e.forEach((e=>{const[n,i]=e.split("=");n&&i&&(t[n]=decodeURIComponent(i.replace(/\+/g," ")))})),t}getPersonaParams(){const e=f(c.clientVars.personaCookieName);return e?unescape(e).split("|").reduce(((e,t)=>{const[n,i]=t.split("=");return n?(e[n]=i||"",e):e}),{}):{}}getV1stCookieValue(){const e=f(c.clientVars.v1stCookieName)||"";return/^[a-z0-9]+$/i.test(e)?e:null}getMidCookieValue(){const e=f(c.clientVars.midCookieName)||"";let t=null;if(/MCMID[|](\w+)/i.test(e)){const n=e.indexOf("MCMID|")+6,i=e.indexOf("|MCAID");t=e.substring(n,i)}return t}getVariableFromPlaceholder(e){return e.replace(/\{|\}/g,"").split(".").reduce(((e,t)=>{try{return e[t]}catch(e){return null}}),this.variables)}parseConditional(e){const t=["!==","!=","==","===",">","<","<=",">="],n=e.match(c.clientVars.tagConditionalRegex),i=[];return null==n||n.forEach(((e,a)=>{if(!t.includes(e))return;const r=n[a+1].replace(/["']/g,"");i.push({variable:this.getVariableFromPlaceholder(n[a-1].replace("TM.clientVars.","")),comparisonOperator:e,value:c.clientVars.isIntOrFloatRegex.test(r)?parseFloat(r):r,logicalOperator:"||"===n[a+2]?n[a+2]:""})})),i}runCondition(e){switch(e.comparisonOperator){case"==":return e.variable==e.value;case"===":return e.variable===e.value;case"!=":return e.variable!=e.value;case"!==":return e.variable!==e.value;case"<":return e.variable<e.value;case">":return e.variable>e.value;case"<=":return e.variable<=e.value;case">=":return e.variable>=e.value;default:return!1}}processConditions(e){const t=e.split("&&");for(const e of t){const t=this.parseConditional(e);let n=!1;for(const e of t)if(this.runCondition(e)){n=!0;break}if(!n)return!1}return!0}checkCondition(e){return!e.conditions||this.processConditions(e.conditions)}replacePlaceholders(e){const t=e.match(/\{(.+?)\}/g);let n=e;return t&&t.length>0&&t.forEach((e=>{const t=this.getVariableFromPlaceholder(e);n=n.replace(e,t)})),n}addVariables(t,n){this.variables=o(o({},this.variables),t),n&&(e.persistentVariables=o(o({},e.persistentVariables),t))}getVariables(){return this.variables}};h.persistentVariables={};let y=h;"undefined"!=typeof window&&(window.gtagDataLayer=window.gtagDataLayer||[],window.gtag=function(){window.gtagDataLayer.push(arguments)});const b={midasActivity:function(e,t){console.warn(c.errors.midasActivityDeprecatedWarning)},gtagGlobal:async function(e,t){let[n]=t,i=e.getVariables();if(!document.getElementById("gtagScript")){const e=`https://www.googletagmanager.com/gtag/js?id=${n}&l=gtagDataLayer`,t=document.createElement("script");t.src=e,t.setAttribute("id","gtagScript"),t.async=!0,t.defer=!0,document.head.appendChild(t),window.gtag("js",new Date)}window.gtag("config",n,{restricted_data_processing:!0}),window.gtag("consent",{ad_storage:i.gpc?"denied":"granted",ad_user_data:i.gpc?"denied":"granted",ad_personalization:i.gpc?"denied":"granted",analytics_storage:i.gpc?"denied":"granted",wait_for_update:0})},gtagEvent:function(e,t){let[n,i]=t;try{window.gtag("event",n,i),Object.keys(i).forEach((t=>i[t]=e.replacePlaceholders(i[t]))),window.gtag("event",n,i)}catch(e){console.warn(`gtag event failed to fire. Failed to parse ${i}`),console.warn(e)}}},C=class{static runScript(e,t){const n=this.parseScriptFromString(e);this.callExtension(n,t)}static registerCustomScript(e,t){b[e]||this.CUSTOM_SCRIPTS[e]?console.warn(`[TagManager] custom script name "${e}" already exists. Please use a different name.`):this.CUSTOM_SCRIPTS[e]=t}static parseScriptFromString(e){const t=e.match(/^(\w+)\(/),n=e.match(/\((.*)\)/);if(!t||!n)throw new Error("Invalid function string format");const i=t[1],a=n[1],r=[];let o="",s=null,c=0,l=0,d=!1;for(const e of a)d?(o+=e,d=!1):("\\"===e&&(d=!0),null!==s||"'"!==e&&'"'!==e?null===s||e!==s||d||(s=null):s=e,null===s&&"{"===e?c++:null===s&&"}"===e&&c--,null===s&&"["===e?l++:null===s&&"]"===e&&l--,null===s&&0===c&&0===l&&","===e?(r.push(this.parseArg(o.trim())),o=""):o+=e);return o.length>0&&r.push(this.parseArg(o.trim())),{name:i,args:r}}static parseArg(e){try{return JSON.parse(e)}catch(t){return e}}static callExtension(e,t){var n;if(null==(n=b[e.name])||n.call(b,t,e.args),this.CUSTOM_SCRIPTS[e.name])try{this.CUSTOM_SCRIPTS[e.name](...e.args)}catch(t){console.warn(`[TagManager] Custom script "${e.name}" failed with following error:\n\n${t}`)}}};C.CUSTOM_SCRIPTS={};let A=C;const I=class e{constructor(e,t){this.handleInteraction=e,this.registerAction=t,this.removeListeners()}static hasInteractions(e){return!!(e.interactions&&e.interactions.length>0)}attachInteraction(t){var n;null==(n=t.interactions)||n.forEach((n=>{const{attrValue:i,event:a}=n,r=a.replace("on","");"linktrackingid"===n.attr&&this.registerAction(i,t);const o=e=>{switch(n.attr){case"id":e.target instanceof Element&&e.target.id===i&&this.handleInteraction(t);break;case"class":e.target instanceof Element&&e.target.classList.contains(i)&&this.handleInteraction(t);break;case"selector":e.target instanceof Element&&e.target.matches(i)&&this.handleInteraction(t);break;case"linktrackingid":e.target instanceof Element&&e.target.getAttribute("data-pt-name")===i&&this.handleInteraction(t)}},s=t=>{t&&(t.addEventListener(r,o,!1),e.removeFunctions.push((()=>{t.removeEventListener(r,o)})))};s(document);const c=Array.from(document.getElementsByTagName("iframe"));for(const e of c)e.addEventListener("load",(function(){var e;try{const t=this.contentDocument||(null==(e=this.contentWindow)?void 0:e.document);t&&s(t)}catch(e){console.warn(`[TM]: Failed to attach listener to iframe: ${e}`)}}))}))}removeListeners(){e.removeFunctions.forEach((e=>{e()})),e.removeFunctions=[]}};I.removeFunctions=[];let E=I;class S{constructor(){this.fireOnceTags={},this.getFireOnceCookieValues()}getFireOnceCookieValues(){const e=f(c.fireOnce.fireOnceCookieName);e&&e.split(",").forEach((e=>this.fireOnceTags[e]=!0))}hasFired(e){return this.fireOnceTags[e.mappingID]}setTag(e){!e.fireOnce||E.hasInteractions(e)||this.fireOnceTags[e.mappingID]||(this.fireOnceTags[e.mappingID]=!1)}setFireOnceCookie(){const e=new Date,t=Object.keys(this.fireOnceTags);t.forEach((e=>this.fireOnceTags[e]=!0)),e.setTime(e.getTime()+18e5),document.cookie=`${c.fireOnce.fireOnceCookieName}=${escape(t.join(","))}; expires=${e.toUTCString()}`}}class w{static firePixel(e){"function"==typeof window.fetch?w.firePixelWithFetch(e):w.firePixelWithImageTag(e)}static async firePixelWithFetch(e){try{await fetch(e,{cache:"no-store",keepalive:!0,mode:"no-cors",credentials:"include",redirect:"follow"})}catch(t){w.firePixelWithImageTag(e)}}static firePixelWithImageTag(e){(new Image).src=e}}class T{constructor(e,t){this.reportPayload={gpc:e,location:t,pixels:[]},window.addEventListener("beforeunload",(()=>this.handleSendPayload()))}addPixelData(e){for(const t of this.reportPayload.pixels)if(t.url===e.url)return;this.reportPayload.pixels.push(e)}async handleSendPayload(){const t=(await this.reportPayload.location).region;let n=[],i=0;for(const a of this.reportPayload.pixels){let r={};try{r={pxu:a.url,pxr:a.rdp_applied.toString(),pxdt:a.data_handling_type,pxf:a.did_fire.toString(),pxd:a.data.toString()},i+=encodeURIComponent(JSON.stringify(r)).length,window.location.href&&(i+=window.location.href.length),n.push(r),i>=3e3&&(e.logEvent({gpc:this.reportPayload.gpc.toString(),state:t||"",pixelsPrivacyData:JSON.stringify(n)}),n=[],i=0)}catch(e){continue}}n.length>0&&e.logEvent({gpc:this.reportPayload.gpc.toString(),state:t||"",pixelsPrivacyData:JSON.stringify(n)})}}const{delimiter:O}=c.serverSideTagging;class k{constructor(e,t){this.isEnabled=!1,this.endpoint=this.getServerSideTaggingEndpoint(e),this.urlSets=[],this.isEnabled=t}getServerSideTaggingEndpoint(e){switch(e){case"prod":return c.serverSideTagging.serverSideTaggingEndpointProd;default:return c.serverSideTagging.serverSideTaggingEndpointQA}}addUrl(e){const t=encodeURIComponent(e),n=this.urlSets[this.urlSets.length-1];n&&n.length+O.length+t.length>c.serverSideTagging.serverSideTaggingCharLimit?this.urlSets.push(t):n?this.urlSets[this.urlSets.length-1]+=O+t:this.urlSets.push(t)}fireServerSideTagging(){this.urlSets.forEach((async e=>{try{200!==(await fetch(`${this.endpoint}?px=${e}`)).status&&console.warn("[TM] Failed to send server side pixels.")}catch(e){console.warn("[TM] Failed to send server side pixels.",e)}})),this.urlSets=[]}}class D{constructor(e,t){this.screenEventHandler=t,e.enableUrlMode&&this.screenEventHandler(window.location.href),e.enableUrlMode&&e.watchUrl&&this.listen()}listen(){window.addEventListener("popstate",(()=>this.screenEventHandler(window.location.href)))}}class x{constructor(e){this.handleScreenEvent=e=>{this._setNewScreenId(e)},this.handleActionEvent=e=>{this._fireAction(e)},this.handleInteractionEvent=e=>{this.fireTag(e,!0)},this.registerAction=(e,t)=>{this.actionsService.registerAction(e,t)},this.config=o(o({},s),e),this.clientVariablesService=new y(this.config.tagServer);const t=this.clientVariablesService.getVariables(),n="hybrid"===t.query.hybridBundle,i=-1!==navigator.userAgent.toLowerCase().indexOf("hybrid"),a=f("channel-id"),r=n||i||"MON"===a||"MOD"===a;this.serverSideTaggingService=new k(t.env,r),this.aemService=new l({tagServer:this.config.tagServer,isSecure:this.config.isSecure}),this.actionsService=new d,this.fireOnceService=new S,new D({enableUrlMode:this.config.enableUrlMode,watchUrl:this.config.watchUrl},this.handleScreenEvent),this.analyticsService=new p(this.config.isSecure,this.config.standAlone,this.handleScreenEvent,this.handleActionEvent),this.interactionsService=new E(this.handleInteractionEvent,this.registerAction),this.PrivacyReportingService=new T(t.gpc,t.location),this.startAnalyticsService()}async startAnalyticsService(){var e;await p.Promise,"STANDALONE"===p.MODE||this.config.standAlone||this.config.enableUrlMode||null==(e=this.analyticsService)||e.start()}addClientVariables(e,t){this.clientVariablesService.addVariables(e,t)}setNewScreenId(e){"STANDALONE"!==p.MODE||this.config.standAlone?this._setNewScreenId(e):console.warn(c.errors.manualScreenNotInStandaloneWarning)}registerCustomScript(e,t){A.registerCustomScript(e,t)}fireAction(e){this._fireAction(e)}async _setNewScreenId(e){const t=this.aemService.getTags(e),n=[];this.interactionsService=new E(this.handleInteractionEvent,this.registerAction),this.actionsService=new d,this.clientVariablesService=new y(this.config.tagServer);(await t).forEach((e=>n.push(this.processTag(e)))),await Promise.all(n),this.serverSideTaggingService.isEnabled&&this.serverSideTaggingService.fireServerSideTagging(),this.fireOnceService.setFireOnceCookie()}async processTag(e){this.fireOnceService.setTag(e),!this.fireOnceService.hasFired(e)&&this.clientVariablesService.checkCondition(e)&&(this.interactionsService.attachInteraction(e),this.actionsService.addSemanticAction(e),E.hasInteractions(e)||d.hasSemanticActions(e)||await this.fireTag(e))}async _fireAction(e){const t=this.actionsService.getTagsByActionName(e).map((e=>this.fireTag(e)));await Promise.all(t),this.serverSideTaggingService.isEnabled&&this.serverSideTaggingService.fireServerSideTagging()}async fireTagWithPrivacy(e,t=!1){var n,i;for(const t in e){const a=this.clientVariablesService.getVariables(),r=(await a.location).region,{type:o,privacySettings:s}=e[t],{rdp_capable:c=!1,rdp_prop_name:l,rdp_prop_enable_value:d}=s,u=g(a.gpc,r,0,s.type),p=(i=c,"3"!==s.type&&i),f=`&${l}=${d}`,m=(null==(n=t.match(/\{(.+?)\}/g))?void 0:n.map((e=>e.replace(/\{|\}/g,""))))||[],v={url:t,rdp_applied:p,data_handling_type:s.type,did_fire:!!u,data:m};if(this.PrivacyReportingService.addPixelData(v),u)if("URL"===o){const e=this.clientVariablesService.replacePlaceholders(t),n=new URL(e).hostname;this.serverSideTaggingService.isEnabled&&-1===n.indexOf("chase.com")?this.serverSideTaggingService.addUrl(e):w.firePixel(`${e}${p?f:""}`)}else"SCRIPT"!==o||this.serverSideTaggingService.isEnabled||A.runScript(t,this.clientVariablesService)}t&&this.serverSideTaggingService.isEnabled&&this.serverSideTaggingService.fireServerSideTagging()}async fireTag(e,t=!1){const n=this.clientVariablesService.getVariables(),i=(await n.location).region,a=await n.ccpaEnabled,r=void 0===a||a,o=void 0===i||"CA"===i;if(e.pixels&&r)try{return void await this.fireTagWithPrivacy(e.pixels)}catch(e){console.warn(e)}if(!r||!o){if(this.serverSideTaggingService.isEnabled&&e.urls)return e.urls.forEach((e=>{if(-1!==new URL(e).hostname.indexOf("chase.com")){const t=this.clientVariablesService.replacePlaceholders(e);w.firePixel(t)}else this.serverSideTaggingService.addUrl(e)})),void(t&&this.serverSideTaggingService.isEnabled&&this.serverSideTaggingService.fireServerSideTagging());e.urls&&e.urls.forEach((e=>{const t=this.clientVariablesService.replacePlaceholders(e);w.firePixel(t)})),e.scripts&&e.scripts.forEach((e=>{A.runScript(e,this.clientVariablesService)}))}}}let M;return function(e){if("undefined"!=typeof window){if(!M&&!e)throw new Error(c.errors.noConfigProvided);return M&&e&&console.warn(c.errors.multiConfigWarning),!M&&e&&(M=new x(e)),M}}})),define("blue-tags/main",["./core/environment","./core/constants","./utils/cors","./utils/logger","./modules/tags","./utils/index","./temp_octagon_tm/octagon-tag-manager.umd","./temp_octagon_tm/octagon-public-analytics-dps-service.umd"],(function(e,t,n,i,a,r,o,s){"use strict";var c=null,l={configMap:{defaultServer:t.productionServiceDomain,env:"prod",tagManagerPath:t.serviceEndpointPartialPath},stateMap:{screenId:"",tagServer:t.productionServiceDomain},getEnvironment:function(){return this.configMap.env},getTargetEndpoint:function(){switch(this.configMap.env){case"prod":return t.targetProdEndpoint;case"ist":case"load":return t.targetPerfEndpoint;default:return t.targetQAEndpoint}},setEnvironment:function(e){var t="unknown";-1!=e.indexOf("wwwq")?t="qa":-1!=e.indexOf("wwwi")?t="ist":-1!=e.indexOf("wwwd")?t="dev":-1!=e.indexOf("load")?t="load":-1!=e.indexOf("www.")&&(t="prod"),this.configMap.env=t},getScreenId:function(){return this.stateMap.screenId},setScreenId:function(e){e?this.stateMap.screenId=e:i("Screen Id is not defined.")},getTagServer:function(){return this.stateMap.tagServer},setTagServer:function(e){e&&(this.stateMap.tagServer=e,this.setEnvironment(e))},tagsErrorCallback:function(){i("Tags Request Failed.")},tagsSuccessCallback:function(){if(200===this.status){var e;try{e=JSON.parse(this.responseText)}catch(e){return void i("Error Processing Tags Request.")}a.processTags(e)}else i("Error Requesting Tags.")},requestTags:function(){if(this.getTagServer()&&this.getScreenId()){var e=this.getTagServer()+l.configMap.tagManagerPath+this.getScreenId(),t=n("GET",e);t||i("CORS Not Supported."),t.onload=this.tagsSuccessCallback,t.onerror=this.tagsErrorCallback,t.send()}},tagsSuccessCallbackForSemanticActions:function(){if(200===this.status){var e;try{e=JSON.parse(this.responseText)}catch(e){return void i("Error Processing Tags Request.")}a.processTagsForSemanticActions(e)}else i("Error Requesting Tags.")},requestTagsForSemanticActions:function(){if(this.getTagServer()&&this.getScreenId()){var e=this.getTagServer()+l.configMap.tagManagerPath+this.getScreenId(),t=n("GET",e);t||i("CORS Not Supported."),t.onload=this.tagsSuccessCallbackForSemanticActions,t.onerror=this.tagsErrorCallback,t.send()}},fetchServerSideTaggingFlag:function(){const n=e.getMid(),i=l.getTargetEndpoint()+"?mboxid="+t.targetMboxId+"&marketingid="+n;return new Promise((function(e){fetch(i).then((function(e){return e.json()})).then((function(n){const i=!!n.attributes&&!!n.attributes[t.targetMboxId]&&n.attributes[t.targetMboxId].content,a=!!i&&!!i.property&&i.property.enableServerSideTagging;e(a)})).catch((function(t){e(!1)}))}))}};return{init:function(e,t,n){c||(c=o({tagServer:t,isSecure:!0,standAlone:!0})),c&&(c.addClientVariables(n,!0),c.setNewScreenId(e))},semanticActionInit:function(e,t,n){c&&c.fireAction(n)}}})),define("appkit/main",["require","appkit-utilities/main","analytics/main","blue-ads/main","blue-tags/main"],(function(e){"use strict";e("appkit-utilities/main"),e("analytics/main"),e("blue-ads/main"),e("blue-tags/main")}));
//# sourceMappingURL=main.js.map
