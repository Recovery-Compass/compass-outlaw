define(["require","blue/$","blue/root","profileArea/sharedLib/sharedView/ractiveModelListener","appkit-utilities/rapidash/rapidash","common/lib/utility/commonComponentsUtil","appkit-utilities/common/mediaQueryListener","profileArea/personalDetails/phone/lib/validators/dirtyFormSelectValidator","profileArea/sharedLib/genericServiceErrorEvent","profileArea/sharedLib/sharedView/transition/focusOnTarget","common/lib/transition/motionHandler","profileArea/personalDetails/phone/webspec/phone","profileArea/personalDetails/phone/template/phone","profileArea/sharedLib/sharedView/template/genericServiceErrorBlueAlert","profileArea/sharedLib/sharedView/template/genericErrorMessage","profileArea/personalDetails/phone/template/phonePartials/phoneListItemView","profileArea/personalDetails/phone/template/phonePartials/phoneAddFormView","profileArea/personalDetails/phone/template/phonePartials/phoneAddEnaOptions","profileArea/personalDetails/phone/template/phonePartials/phoneAddMfaOptions","profileArea/personalDetails/phone/template/phonePartials/phoneAddQuickpayOptions","profileArea/personalDetails/phone/template/phonePartials/phoneAddAlerts","profileArea/personalDetails/phone/template/phonePartials/phoneEditFormView","profileArea/personalDetails/phone/template/phonePartials/phoneAddAccountsForm","profileArea/personalDetails/phone/template/phonePartials/formItems/eligibleAccounts","profileArea/personalDetails/phone/template/phonePartials/formItems/primaryNumber","profileArea/personalDetails/phone/template/phonePartials/formItems/phoneNumber","profileArea/personalDetails/phone/template/phonePartials/formItems/phoneType","profileArea/personalDetails/phone/template/phonePartials/formItems/regionSelect","profileArea/personalDetails/phone/template/phonePartials/notAlertsButtons","profileArea/personalDetails/phone/template/phonePartials/alertsAlreadyAddedButtons","profileArea/personalDetails/phone/template/phonePartials/alertsNotAlreadyAddedButtons","profileArea/personalDetails/phone/template/phonePartials/phoneCancelButton","profileArea/personalDetails/phone/template/phonePartials/phoneAlertsServiceItemView","profileArea/personalDetails/phone/template/phonePartials/phoneQuickpayServiceItemView","blue-ui/template/elements/button","blue-ui/view/elements/alert","blue-ui/view/elements/radiobutton","blue-ui/view/elements/checkbox","blue-ui/view/modules/dropdown","blue-ui/view/elements/fieldlabel","blue-ui/view/elements/accessible","profileArea/sharedLib/sharedView/customTooltip","blue-ui/view/modules/styledselect","blue-ui/view/elements/iconwrap","blue-ui/view/elements/stickyfooter","profileArea/sharedLib/sharedView/dashboardInputWrapper/view","profileArea/sharedLib/sharedView/dashboardLinkWrapper/view","blue-ui/view/elements/inlinemodalheader","blue-ui/view/elements/skiplink","blue-ui/view/elements/loader","blue-ui/view/elements/button","profileArea/sharedLib/sharedView/decorators/decorator","profileArea/sharedLib/sharedView/decorators/screenTakeover","profileArea/sharedLib/sharedView/transition/scrollToTop","profileArea/sharedLib/sharedView/transition/focusOnRender","common/lib/transition/motionHandler"],(function(e){"use strict";return function(){var t=e("blue/$"),o=e("blue/root"),i=e("profileArea/sharedLib/sharedView/ractiveModelListener"),a=(e("appkit-utilities/rapidash/rapidash"),e("common/lib/utility/commonComponentsUtil")()),r=e("appkit-utilities/common/mediaQueryListener"),n=e("profileArea/personalDetails/phone/lib/validators/dirtyFormSelectValidator"),l=e("profileArea/sharedLib/genericServiceErrorEvent"),s=e("profileArea/sharedLib/sharedView/transition/focusOnTarget"),p=e("common/lib/transition/motionHandler"),d=[];d.push(n);var h,m=this;this.init=function(){m=this,this.bridge=e("profileArea/personalDetails/phone/webspec/phone"),l.viewListenGeneric(this),this.model.isXS=r.currentBreakpoint===r.BREAKPOINT.XS,t(o).on("breakpoint-change.phoneView",function(){this.model.isXS=r.currentBreakpoint===r.BREAKPOINT.XS}.bind(this)),this.bridge.on("trigger/setFocus",(function(e){e.element&&a.setFocus(e.element)})),this.bridge.on("state/cacheOpenFormIndex",function(e){this.cachedOpenFormId=e.data}.bind(this)),this.bridge.output.on("expandMotionComplete",s.focusOnTarget.bind(this,this.focusTargets)),t(".overlay").show(),this.onData("v.isFormValid",(function(e){e&&e.isFormValid?this.model.submitButtonDisabled=!1:this.model.submitButtonDisabled=!0})),this.onData("caasBlockInView",(function(e){var t=document.getElementById("dashboard-content"),o=document.getElementById("flyoutWrapper"),i=document.getElementById("applicationOverlay");e?(t&&t.style&&(t.style.display="none"),o&&o.classList&&o.classList.add("miscHide"),i&&i.classList.remove("screen-takeover-hide")):(t&&t.style&&(t.style.display="block"),o&&o.classList&&o.classList.remove("miscHide"),i&&(i.innerHTML=""))}),{init:!1}),this.model.submitButtonDisabled=!0,this.model.ariaLiveErrorText=""},this.closePhoneFormHandler=function(e){var t,o,i,a=e.context.index||this.cachedOpenFormId,r=this.model.phoneNumberDetails[a];void 0===r?(t="#add-phone-account-container",o="doNotAddPhoneNumberNoPhoneNumber"):r.flags.newPhoneNumber?(t="#add-phone-account-container",o="doNotAddPhoneNumber"):r.flags.editingPhoneNumber?(t="#edit-phone-account-container",o="doNotUpdatePhoneNumber",i="0.2"):r.flags.addingAccountsToPhone&&(t="#add-phone-account-container",o="doNotAddAccountsToPhoneNumber"),this.cachedOpenFormId=null,p({ractiveTransitionUnavailable:!0,params:[{type:"hide",options:{target:t,removeDOM:!0,view:m,emitOnComplete:!0,onComplete:o,duration:i||null}}]})},this.hideMotionComplete=function(){this.bridge.output.emit("setHeader")};var u=function(e,t,o,i){var a=["phoneNumberDetails",i,"phoneNumber"].join("."),r=["phoneNumberDetails",i,"phoneNumberExtension"].join(".");this.rtemplate.set(a,""),this.rtemplate.set(r,"")};this.onReady=function(){h||(h=new i(this)),h.on("phoneNumberDetails.*.phoneNumberRegion",function(e,t,o,i){u.call(this,e,t,o,i),this._clearValidation()}.bind(this)),h.on("phoneNumberDetails.*.flags.selectedService",(function(e,t,o,i){u.call(this,e,t,o,i)}))},this.onTeardown=function(){h&&h.unsubscribe(),this.bridge.output.emit("resetFormAction")},this._clearValidation=function(){this.bridge.output.emit("revalidate",{data:{name:"phoneNumberDetails.phoneNumber",clearAll:!0}})},this.updateSkipSelector=function(){var e=$("form").find("input").filter(":enabled:first"),t=e[0]?e[0].id:"";this.model.firstEnabledInput=t},this.focusTargets={addPhoneNumberForm:{xs:"#title-add-phone-container-header-xs",sm:"#add-phone-container-header",md:"#add-phone-container-header",lg:"#add-phone-container-header"},addPhoneAccountsForm:{xs:"#title-add-phone-accounts-container-header-xs",sm:"#add-phone-accounts-container-header",md:"#add-phone-accounts-container-header",lg:"#add-phone-accounts-container-header"}},this.template=e("profileArea/personalDetails/phone/template/phone"),this.partials={genericServiceErrorBlueAlert:e("profileArea/sharedLib/sharedView/template/genericServiceErrorBlueAlert"),genericErrorMessage:e("profileArea/sharedLib/sharedView/template/genericErrorMessage"),phoneListItemView:e("profileArea/personalDetails/phone/template/phonePartials/phoneListItemView"),phoneAddFormView:e("profileArea/personalDetails/phone/template/phonePartials/phoneAddFormView"),phoneAddEnaOptions:e("profileArea/personalDetails/phone/template/phonePartials/phoneAddEnaOptions"),phoneAddMfaOptions:e("profileArea/personalDetails/phone/template/phonePartials/phoneAddMfaOptions"),phoneAddQuickpayOptions:e("profileArea/personalDetails/phone/template/phonePartials/phoneAddQuickpayOptions"),phoneAddAlerts:e("profileArea/personalDetails/phone/template/phonePartials/phoneAddAlerts"),phoneEditFormView:e("profileArea/personalDetails/phone/template/phonePartials/phoneEditFormView"),phoneAddAccountsForm:e("profileArea/personalDetails/phone/template/phonePartials/phoneAddAccountsForm"),eligibleAccountsView:e("profileArea/personalDetails/phone/template/phonePartials/formItems/eligibleAccounts"),primaryNumber:e("profileArea/personalDetails/phone/template/phonePartials/formItems/primaryNumber"),phoneNumberView:e("profileArea/personalDetails/phone/template/phonePartials/formItems/phoneNumber"),phoneTypeView:e("profileArea/personalDetails/phone/template/phonePartials/formItems/phoneType"),regionSelectView:e("profileArea/personalDetails/phone/template/phonePartials/formItems/regionSelect"),notAlertsButtons:e("profileArea/personalDetails/phone/template/phonePartials/notAlertsButtons"),alertsAlreadyAddedButtons:e("profileArea/personalDetails/phone/template/phonePartials/alertsAlreadyAddedButtons"),alertsNotAlreadyAddedButtons:e("profileArea/personalDetails/phone/template/phonePartials/alertsNotAlreadyAddedButtons"),phoneCancelButton:e("profileArea/personalDetails/phone/template/phonePartials/phoneCancelButton"),phoneAlertsServiceItemView:e("profileArea/personalDetails/phone/template/phonePartials/phoneAlertsServiceItemView"),phoneQuickpayServiceItemView:e("profileArea/personalDetails/phone/template/phonePartials/phoneQuickpayServiceItemView"),blueButton:e("blue-ui/template/elements/button")},this.views={blueAlert:e("blue-ui/view/elements/alert"),blueRadiobutton:e("blue-ui/view/elements/radiobutton"),blueCheckbox:e("blue-ui/view/elements/checkbox"),blueDropdown:e("blue-ui/view/modules/dropdown"),blueFieldLabel:e("blue-ui/view/elements/fieldlabel"),blueAccessible:e("blue-ui/view/elements/accessible"),customTooltip:e("profileArea/sharedLib/sharedView/customTooltip"),blueStyledselect:e("blue-ui/view/modules/styledselect"),blueIconwrap:e("blue-ui/view/elements/iconwrap"),blueStickyfooter:e("blue-ui/view/elements/stickyfooter"),phoneInput:e("profileArea/sharedLib/sharedView/dashboardInputWrapper/view"),dashboardLink:e("profileArea/sharedLib/sharedView/dashboardLinkWrapper/view"),blueInlineModalHeader:e("blue-ui/view/elements/inlinemodalheader"),blueSkiplink:e("blue-ui/view/elements/skiplink"),blueLoader:e("blue-ui/view/elements/loader"),blueButton:e("blue-ui/view/elements/button")},this.decorators={phoneValidator:e("profileArea/sharedLib/sharedView/decorators/decorator")(this,{customValidations:d}),screenTakeover:e("profileArea/sharedLib/sharedView/decorators/screenTakeover")},this.transitions={scrollToTop:e("profileArea/sharedLib/sharedView/transition/scrollToTop"),focusOnRender:e("profileArea/sharedLib/sharedView/transition/focusOnRender"),motionHandler:e("common/lib/transition/motionHandler")},this.onDestroy=function(){t(o).off("breakpoint-change.phoneView")}}}));