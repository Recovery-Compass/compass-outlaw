define(["require","profileArea/personalDetails/emailMarketingPreferences/webspec/emailMarketingPreferences","profileArea/personalDetails/emailMarketingPreferences/template/emailMarketingPreferences","blue-ui/utilities/common","blue/$","common/utility/adaUtility","common/lib/jsBridge","blue-ui/view/modules/styledselect","blue-ui/view/elements/radiobutton","blue-ui/view/elements/checkbox","blue-ui/view/elements/skiplink","blue-ui/view/elements/alert","blue-ui/template/elements/button","profileArea/sharedLib/sharedView/transition/utils"],(function(e){"use strict";var t=e("profileArea/personalDetails/emailMarketingPreferences/webspec/emailMarketingPreferences"),i=e("profileArea/personalDetails/emailMarketingPreferences/template/emailMarketingPreferences"),n=e("blue-ui/utilities/common").getBreakpoint,l=e("blue/$"),r=e("common/utility/adaUtility").openFocusWindow,o=e("common/lib/jsBridge");return function(s){var a,u=this;u.template=i,u.bridge=t,u.views={blueStyledselect:e("blue-ui/view/modules/styledselect"),blueRadiobutton:e("blue-ui/view/elements/radiobutton"),blueCheckbox:e("blue-ui/view/elements/checkbox"),blueSkipLink:e("blue-ui/view/elements/skiplink"),blueAlert:e("blue-ui/view/elements/alert")},u.partials={blueButton:e("blue-ui/template/elements/button")},u.transitions={focusAndScrollToTopOnRender:e("profileArea/sharedLib/sharedView/transition/utils").focusAndScrollToTopOnRender},u.init=function(){u.bridge.on("updateViewModel",u.updateViewModel),u.bridge.on("setFocus",u.setFocus),u.bridge.on("focusOnMarketingPreferencesHeader",u.focusOnMarketingPreferencesHeader),u.bridge.on("trigger/setDropdownSelected",u.updateStyledselectOptions),l(".overlay").show(),u.model.enableButtons=!1,u.model.showSuccessMessage=!1,u.model.showErrorMessage=!1,u.model.showDetails=!1},u.onReady=function(){s.hybrid&&(o.isHybridBackButtonRequired=function(){return!1})},u.updateStyledselectOptions=function(e){var t=u.rtemplate.findComponent("blueStyledselect").get("options");t.forEach((function(t,i){t.selected=i===e.selectedIndex})),u.rtemplate.findComponent("blueStyledselect").set("options",t)},u.updateViewModel=function(e){Object.keys(e.data).forEach((function(t){u.model[t]=e.data[t]}))},u.setFocus=function(e){l(e.selector).focus()},u.focusOnMarketingPreferencesHeader=function(){"xs"!==n()?l("#profile-subtitle").focus():l("#back-nav-header-title").focus()},u._errorMessageClickHandler=function(e){var t=e.domEvent.target;if("A"===t.nodeName.toUpperCase()){var i=s.$(t).attr("data-attr");e.domEvent.preventDefault(),i&&u.trigger(i),u[i]&&u[i]()}},u.requestPrivacyPreferences=function(){a=r.call(u,a,u.model.privacyPopupUrl,"Privacy")}}}));