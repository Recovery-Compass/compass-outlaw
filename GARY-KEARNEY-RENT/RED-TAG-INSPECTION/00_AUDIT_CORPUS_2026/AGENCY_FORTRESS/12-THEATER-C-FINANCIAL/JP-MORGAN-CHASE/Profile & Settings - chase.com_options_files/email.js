define(["blue/$","appkit-utilities/common/mediaQueryListener","blue/root","common/lib/focusUtil","profileArea/sharedLib/genericServiceErrorEvent","profileArea/personalDetails/email/lib/validator/emailValidator","profileArea/personalDetails/email/lib/validator/accountSelectedValidator","profileArea/personalDetails/email/lib/validator/dirtyFormValidator","profileArea/personalDetails/email/lib/validator/uniqueEmailValidator","profileArea/personalDetails/email/lib/validator/nicknameValidator","profileArea/sharedLib/sharedView/transition/focusOnTarget","profileArea/personalDetails/email/lib/constants","bluespec/my_profile_email_address","profileArea/personalDetails/email/webspec/email","profileArea/personalDetails/email/template/email","profileArea/sharedLib/sharedView/template/genericErrorMessage","profileArea/personalDetails/email/template/partial/useForAlertsForm","profileArea/personalDetails/email/template/partial/emailAddFormView","profileArea/personalDetails/email/template/partial/personalAddFormAdvisory","profileArea/personalDetails/email/template/partial/onlineVerification","profileArea/personalDetails/email/template/partial/blueStyledSelectWrapper","profileArea/personalDetails/email/template/partial/emailAssociatedAccounts","profileArea/personalDetails/email/template/partial/emailTooltip","profileArea/personalDetails/email/template/partial/onlineSecurityPartial","profileArea/personalDetails/email/template/partial/alertsPartial","profileArea/personalDetails/email/template/partial/quickpayPartial","profileArea/personalDetails/email/template/partial/marketingPreferencesPartial","blue-ui/view/elements/alert","blue-ui/view/elements/radiobutton","blue-ui/view/elements/checkbox","blue-ui/view/elements/input","blue-ui/view/elements/button","blue-ui/view/elements/accessible","profileArea/sharedLib/sharedView/customTooltip","blue-ui/view/modules/styledselect","blue-ui/view/elements/iconwrap","blue-ui/view/elements/inlinemodalheader","profileArea/sharedLib/sharedView/label","blue-ui/view/elements/fieldlabel","profileArea/sharedLib/sharedView/dashboardLinkWrapper","blue-ui/view/elements/skiplink","blue-ui/view/elements/stickyfooter","blue-ui/view/elements/loader","blue-ui/view/elements/link","profileArea/sharedLib/sharedView/decorators/exitDialog/decoratorExitDialog","profileArea/sharedLib/sharedView/decorators/screenTakeover","profileArea/sharedLib/sharedView/decorators/nickname","profileArea/sharedLib/sharedValidators/decorator","profileArea/sharedLib/sharedView/transition/scrollToTop","profileArea/sharedLib/sharedView/transition/focusOnRender","profileArea/sharedLib/sharedView/transition/attributeInjector","common/lib/transition/motionHandler"],(function(e,i,a,r,l,t,o,n,s,d,p,u,m,c,b,f,A,v,h,w,k,D,g,V,y,E,S,T,L,F,N,O,P,B,x,C,I,M,R,H,X,$,_,U,j,q,K,W,G,Q,Y,z){"use strict";return function(J){var Z=this,ee=[],ie={setupUserType:function(e){Z.model.userType=e},syncValidationObj:function(e){Z.model.v=e}},ae=function(e){ie[e.value](e.data)};Z.onInit=function(){Z.template=b,Z.bridge=c,Z.compSpec=m,Z.partials={genericErrorMessage:f,useForAlertsForm:A,emailAddFormView:v,personalAddFormAdvisory:h,onlineVerification:w,blueStyledselectWrapper:k,emailAssociatedAccounts:D,emailTooltip:g,onlineSecurityPartial:V,alertsPartial:y,quickpayPartial:E,marketingPreferencesPartial:S},Z.views={blueAlert:T,blueRadiobutton:L,blueCheckbox:F,blueInput:N,blueButton:O,blueAccessible:P,customTooltip:B,blueStyledselect:x,blueIconwrap:C,blueInlineModalHeader:I,dashboardLabel:M,blueFieldLabel:R,dashboardLink:H,blueSkiplink:X,blueStickyfooter:$,blueLoader:_,blueLink:U},Z.decorators={exitDialog:j(Z),screenTakeover:q,nicknameDecorator:K(),emailDecorator:W(Z,{customValidations:ee})},Z.transitions={scrollToTop:G,focusOnRender:Q,injectAttributes:Y,motionHandler:z},Z.compSpecValidationName="emailAddresses",t="function"==typeof t?t:t(J),ee.push(t),ee.push(o),ee.push(n),ee.push(s),ee.push(d),Z.model.isXS=i.currentBreakpoint===i.BREAKPOINT.XS,e(a).on("breakpoint-change.emailView",(function(){Z.model.isXS=i.currentBreakpoint===i.BREAKPOINT.XS})),e(".overlay").show(),l.viewListenGeneric(Z),Z.bridge.on("trigger/setFocus",(function(e){e.element&&Z.context.page.$(e.element).focus()})),Z.bridge.on("updateSkipSelector",Z.updateSkipSelector),Z.bridge.output.on("expandMotionComplete",p.focusOnTarget.bind(this,Z.focusTargets)),Z.bridge.on("updateViewFromComponent",ae),Z.bridge.output.on("hideMotionComplete",Z.hideMotionComplete),Z.model.submitButtonDisabled=!1,Z.model.ariaLiveErrorText=""},Z.onReady=function(){Z.onData("$authenticationError",Z.focusOnCaasErrorHeader),Z.bridge.on("setFocusOnAddButton",(function(){r.setFocus(J.page.$,"#add-email-address-button")})),Z.model.isXS=i.currentBreakpoint===i.BREAKPOINT.XS,Z.onData("v.isFormValid",(function(e){if(e&&Z.model.v.isFormValid)Z.model.submitButtonDisabled=!1;else if(Z.model.submitButtonDisabled=!0,Z.model.v&&Z.model.v.alertsDeliveryNickname&&"ALREADY_EXISTS"===Z.model.v.alertsDeliveryNickname.errorType){var i=Z.model.v.alertsDeliveryNickname.errorMessage;Z._setNicknameFieldError(i)}}))},Z.focusOnCaasErrorHeader=function(){Z.model.$authenticationError&&r.setFocus(J.page.$,"#email-caas-banner")},Z._setNicknameFieldError=function(){return!1},Z.hideMotionComplete=function(){Z.bridge.output.emit("setHeader")},Z.focusTargets=u.focusTargets,Z.updateSkipSelector=function(){var i=e("form").find("input").filter(":enabled:first"),a=i[0]?i[0].id:"";Z.model.firstEnabledInput=a},Z.closeEmailFormHandler=function(e){var i,a,r,l=e.context.index,t=Z.model.emailAddresses[l];t.accountEdit?(i="#add-account-container",a="doNotAddEmailAddress"):"form"===t.mode?(i="#add-email-account-container",a="doNotAddEmailAddress",r="0.2"):t.emailEdit?(i="#edit-email-account-container",a="doNotUpdateEmailAddress",r="0.2"):t.accountAlert&&(i="#email-account-alert-container",a="doNotAddAlertsToEmailAddress"),z({ractiveTransitionUnavailable:!0,params:[{type:"hide",options:{target:i,removeDOM:!0,view:Z,emitOnComplete:!0,onComplete:a,duration:r||null}}]})},Z.onDestroy=function(){e(a).off("breakpoint-change.emailView")}}}));