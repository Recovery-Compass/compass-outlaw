define(["require","blue/$"],(function(e){"use strict";var t=e("blue/$");return function(e,n){var o=e.element.node,i=n?"scroll-to-"+n:null;setTimeout((function(){var e=t(".conversation").height(),s=t(o).offset().top,l=t(document).height(),r=t(window).height(),a=t("."+i).length?t("."+i)[0]:null,u=0;a&&(t(a).removeClass(i),u=t(a).height()+parseInt(t(a).css("marginTop")));var h=l-s>r-(e+u)?s-(e+u+10):s-(u+10);t("html,body").stop().animate({scrollTop:h},300,"swing"),n&&t(o).addClass(i)}),100)}}));