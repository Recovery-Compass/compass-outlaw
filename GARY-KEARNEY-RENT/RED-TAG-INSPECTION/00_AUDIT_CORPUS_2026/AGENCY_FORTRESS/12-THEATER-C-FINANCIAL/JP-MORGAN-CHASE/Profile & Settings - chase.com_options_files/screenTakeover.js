define(["require","blue/$","blue/root"],(function(e){"use strict";var r=e("blue/$"),t=e("blue/root"),n="screen-takeover",a={xs:{maxWidth:767,mediaQuery:"(max-width:767px)"},sm:{maxWidth:991,mediaQuery:"(max-width:991px)"}},o=[],i=[];return function(){return function(e,d){var s,c,u,h=a[d||"xs"],l=function(){s.hasClass(n)?(f(),s.removeClass(n)):(s.addClass(n),v())};function v(){for(var e=s;e.length&&!e.is("body");)e.siblings(":not(#header-outer-container)").addClass("screen-takeover-hide"),e.siblings("#header-outer-container").addClass("screen-takeover-header-hide"),o.push(e.siblings()),i.push(e.siblings(":not([aria-hidden])")),e.siblings(':not([aria-hidden="true"])').attr("aria-hidden","true"),e=e.parent();u=!0,r("body").addClass("screen-takeover-lock")}function f(){u&&(o.forEach((function(e){e.removeClass("screen-takeover-hide"),e.removeClass("screen-takeover-header-hide")})),i.forEach((function(e){e.removeAttr("aria-hidden")})),r("body").removeClass("screen-takeover-lock"))}function m(){r(document).off("DOMNodeRemoved.screentakeover"),r(document).off("DOMSubtreeModified.screentakeover")}return function(){s=r(e),r(t).width()<=h.maxWidth&&(s.addClass(n),v()),(c=t.matchMedia(h.mediaQuery)).addListener(l),r(document).on("DOMNodeRemoved.screentakeover",(function(e){var t=s.attr("id");e.target.id===t&&r(e.target).hasClass("screen-takeover")&&(f(),m())})),r(document).on("DOMSubtreeModified.screentakeover",(function(){var e=s.attr("id");e&&0===r(document).find("#"+e).length&&(f(),m())}))}.call(this),{teardown:function(){f(),m(),c.removeListener(l)}}}}}));