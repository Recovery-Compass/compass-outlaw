define(["require","blue/observable","blue/$"],(function(i){"use strict";var e,t,a=i("blue/observable"),r=i("blue/$"),o=function(){this.isDirty=a.Model(!1),this.originalData={},this.ractive=null,this.isDirty.onValue((function(i){t&&t.context.emit("ractiveModelCacheExitDialog",{data:{isDirty:Boolean(i)}}),t&&t.bridge.output.emit("ractiveModelCacheExitDialog",{data:{isDirty:Boolean(i)}})}))},n=new o;return o.prototype.set=function(i,a){var o=this;void 0!==a&&(t=a),t&&(t.bridge.on("ractiveModelCacheReset",(function(i){i.resetForm&&(e=r("form:visible")),n.originalData=e.serialize(),n.isDirty.set(!1)})),t.bridge.on("ractiveModelCacheTeardown",(function(){n.teardown()}))),e=r(i.el.getElementsByTagName("form"));var s=0!==r(i.find('input[type="radio"]')).length;this.originalData=e.serialize(),this.ractive=i.observe("*",(function(){var i=r("form").serialize();""!==i&&o.isDirty.set(o.originalData!==i)}),{init:!1,context:this,defer:!0}),i.on("teardown",(function(){o.teardown()})),s&&e.on("submit",(function(){o.originalData=e.serialize()}))},o.prototype.teardown=function(){this.ractive&&this.ractive.cancel(),this.isDirty.set(!1)},n}));